(this.webpackJsonp=this.webpackJsonp||[]).push([[16],{"+QRC":function(e,t,o){"use strict";var n=o("E9nw");e.exports=function(e,t){var o,r,a,c,i,s,l=!1;t||(t={}),o=t.debug||!1;try{if(a=n(),c=document.createRange(),i=document.getSelection(),(s=document.createElement("span")).textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",document.body.appendChild(s),c.selectNode(s),i.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");l=!0}catch(n){o&&console.error("unable to copy using execCommand: ",n),o&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),l=!0}catch(n){o&&console.error("unable to copy using clipboardData: ",n),o&&console.error("falling back to prompt"),r=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,e)}}finally{i&&("function"==typeof i.removeRange?i.removeRange(c):i.removeAllRanges()),s&&document.body.removeChild(s),a()}return l}},"4pT3":function(e,t,o){e.exports={share_tooltip:"share_tooltip--2H-Nv",over_y:"over_y--2DLVC",over_x:"over_x--3L5ei","player-qrcode":"player-qrcode--tn49c",share_scan_text:"share_scan_text--5niht",share_link:"share_link--1Ufww",share_icon:"share_icon--P_aua"}},"6ZQe":function(e,t,o){"use strict";o.r(t),o.d(t,"ManageProjectComponent",(function(){return ge}));var n=o("lwsE"),r=o.n(n),a=o("W8MJ"),c=o.n(a),i=o("a1gu"),s=o.n(i),l=o("Nsbk"),p=o.n(l),_=o("7W2i"),u=o.n(_),d=o("q1tI"),m=o.n(d),h=o("2OET"),f=o("/MKj"),v=o("ANjH"),g=o("CG87"),j=o("G72A");o("UOev");var b,w=function(e){return m.a.createElement("div",{className:"dialog-header--JP5YG"},m.a.createElement("span",{className:"title--RtgyR"},e.title))},y=o("RIqP"),x=o.n(y),k=o("o0o1"),E=o.n(k),N=o("yXPU"),C=o.n(N),M=o("PJYZ"),O=o.n(M),T=o("lSNA"),q=o.n(T),L=o("sEfC"),P=o.n(L),R=o("qPyV"),S=o.n(R),A=o("wEy/"),G=o.n(A),H=o("kNvX"),I=o.n(H),U=o("02PQ"),K=o("HIk1"),Q=o("FdHU"),D=o("5IJ9"),J=o("kTTF"),V=o("w0HH"),X=(o("vQ0X"),{"./style.scss":{project:"project--3M2SP","hover-panel":"hover-panel--19m8h",btn:"btn--36isI",user:"user--2_GTh",project_content_wrap:"project_content_wrap--1JN39",project_content:"project_content--2xjXO",loading_icon:"loading_icon--3GHcx",portrait:"portrait--3SvaI",landscape:"landscape--2fTEv",title:"title--5Hbxo",example:"example--3ckXH",v3:"v3--o7G84",label:"label--LOWO3","tag-activity":"tag-activity--2f8Qo",en:"en--2csGJ",text:"text--Z1-Gw",icon:"icon--1cmmX",update_time:"update_time--wlMYR",preview_img:"preview_img--TdNGV",show:"show--6lFVU",project_name_tooltip:"project_name_tooltip--KVPqs"}});(function(e){e[e.Portrait=1]="Portrait",e[e.Landscape_4_3=2]="Landscape_4_3",e[e.Landscape_16_9=3]="Landscape_16_9"})(b||(b={}));var W=function(e){function t(e){var o;return r()(this,t),(o=s()(this,p()(t).call(this,e))).current_work_name="",o.format_update_time=function(e,t){var n,r,a=new Date(1e3*t);n="Today"===e||"Yesterday"===e||"TDBY"===e?e:"".concat(a.getFullYear(),"/").concat(a.getMonth()+1,"/").concat(a.getDate());var c=(new Date).getTime()-1e3*t;if("Today"===e&&c<=216e5){var i,s=Math.floor(c/36e5),l=Math.floor(c%36e5/6e4),p=s?"".concat(s).concat(o.props.intl.formatMessage({id:"project/hour"})):"";i=l?"".concat(l).concat(o.props.intl.formatMessage({id:"project/minute"})):"",s||l||(i="1".concat(o.props.intl.formatMessage({id:"project/minute"}))),r="".concat(p).concat(i).concat(o.props.intl.formatMessage({id:"project/ago"})),n=""}else r="".concat(a.getHours(),":").concat(o.get_minutes(a.getMinutes()));return"".concat(o.get_day(n)," ").concat(r)},o.get_minutes=function(e){return 0===e?"00":e<10?"0".concat(e):e},o.get_user_project=function(e){if(e){var t=e.id,n=e.preview_url,r=e.name,a=e.orientation,c=e.date_desc,i=e.updated_time,s=e.cover_url,l=o.format_update_time(c,i);return d.createElement("div",{className:"th1-border-impt-hover-0 project--3M2SP user--2_GTh"},d.createElement("div",{className:"th1-border-impt-7 project_content_wrap--1JN39"},d.createElement("div",{className:"th1-bg-8 project_content--2xjXO"},d.createElement("img",{src:s||n,alt:"project_img",className:I()(a===b.Portrait?"portrait":"landscape",X,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})}),d.createElement("span",{className:"th1-text-t7 "+I()("title ".concat(o.props.project_type," ").concat(o.props.is_v3?"v3":""),X,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},r),o.props.is_v3&&d.createElement("span",{className:"label--LOWO3"},"V3.0"),d.createElement("span",{className:"th1-text-t7 update_time--wlMYR"},l),o.state.hint_position.left?d.createElement("p",{className:"project_name_tooltip--KVPqs",style:{top:"".concat(o.state.hint_position.top,"px"),left:"".concat(o.state.hint_position.left,"px")}},o.current_work_name):null,d.createElement("div",{className:"hover-panel--19m8h",onClick:function(e){return e.stopPropagation()}},d.createElement(K.a,{size:"custom",tooltip:o.props.intl.formatMessage({id:"manage_project/edit"}),onClick:o.open_user_project.bind(O()(o),t)},d.createElement("div",{className:"btn--36isI"},d.createElement(Q.a,{id:"#iconicon_project_edit",color:"white",size:20}))),o.props.qr_code&&d.createElement(K.a,{size:"custom",tooltip:o.props.intl.formatMessage({id:"project_dashboard/share_btn"}),onClick:o.props.on_share_btn_click},d.createElement("div",{className:"btn--36isI"},d.createElement(Q.a,{id:"#iconicon_project_share",color:"white",size:20}),d.createElement("div",{style:{position:"absolute"}}))),d.createElement(K.a,{size:"custom",onClick:function(t){return o.props.on_delete_btn_click(e.id)},tooltip:o.props.intl.formatMessage({id:"manage_project/delete"})},d.createElement("div",{className:"btn--36isI"},d.createElement(Q.a,{id:"#iconicon_project_delete",color:"white",size:20})))))))}},o.state={show_preview:!1,start_loading_preview_img:!1,show_loading_icon:!1,hint_position:{left:0,top:0}},o}return u()(t,e),c()(t,[{key:"open_user_project",value:function(e){var t=this;this.props.action_set_project_info_state({base_sample_project_id:""}),Object(D.is_unsave_bcm)()?(this.props.close_dialog({dialog_type:"manage_project"}),Object(D.set_task_func)((function(){t.open_project_callback(e)})),Object(D.add_unsave_hint)()):this.open_project_callback(e)}},{key:"open_project_callback",value:function(e){this.props.action_fetch_bcm_urls_by_id({id:e}),this.props.close_dialog({dialog_type:"manage_project"})}},{key:"get_day",value:function(e){return"Today"===e||"Yesterday"===e||"TDBY"===e?this.props.intl.formatMessage({id:"project/".concat(e)}):e}},{key:"render",value:function(){var e=this.props.user_project_info;return d.createElement(d.Fragment,null,this.get_user_project(e))}}]),t}(d.Component);var Y=Object(h.b)(Object(f.connect)((function(e){return{qr_code:e.common_state.ui_cfg.qr_code}}),(function(e){return Object(v.bindActionCreators)({close_dialog:j.c,set_dialog_props:j.f,action_fetch_bcm_by_url:J.b,action_fetch_bcm_urls_by_id:J.c,action_set_project_info_state:V.c},e)}))(W)),z=o("Cu0f"),F=o("7zTG"),Z=o("CZH1"),B=o("xfAC"),$=o("WFO7"),ee=o("4NMw"),te=o("5nG9"),oe=o("dqaR"),ne=o("+QRC"),re=(o("4pT3"),{"./style.scss":{share_tooltip:"share_tooltip--2H-Nv",over_y:"over_y--2DLVC",over_x:"over_x--3L5ei","player-qrcode":"player-qrcode--tn49c",share_scan_text:"share_scan_text--5niht",share_link:"share_link--1Ufww",share_icon:"share_icon--P_aua"}});var ae,ce=Object(h.b)((function(e){var t=ee(4,"L"),o=e.url,n=e.intl,r=e.left,a=e.top;t.addData(e.url),t.make();var c=document.body.offsetWidth-r<230,i=document.body.offsetHeight-a<230,s=r+33-(c?300:0),l=a-26-(i?170:0);return m.a.createElement("div",{style:{left:s,top:l},onClick:function(e){return e.stopPropagation()},className:I()("share_tooltip ".concat(c&&"over_x"," ").concat(i&&"over_y"),re,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},m.a.createElement("div",{className:"player-qrcode--tn49c"},m.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.createSvgTag(3,4)}})),m.a.createElement("div",{className:"share_scan_text--5niht"},"- ",n.formatMessage({id:"project_dashboard/scan_text"})," -"),m.a.createElement("a",{className:"share_link--1Ufww",onClick:function(){ne(o),oe.a.dispatch(Object(te.d)({content:"project_dashboard/link_copied",type:"success"}))}.bind(void 0,o)},m.a.createElement("span",{className:"share_icon--P_aua"}),n.formatMessage({id:"project_dashboard/copy_link"})))})),ie=o("CR6n");!function(e){e[e.Published=1]="Published",e[e.UnPublished=2]="UnPublished",e[e.All=3]="All"}(ae||(ae={}));var se=function(){var e=C()(E.a.mark((function e(t){var o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(Object($.a)().api.host,"/tiger/work/").concat(t,"/temporarily"),e.next=3,Object(ie.a)({url:o,method:"delete",withCredentials:!0});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function le(e,t,o,n){return pe.apply(this,arguments)}function pe(){return(pe=C()(E.a.mark((function e(t,o,n,r){var a,c,i,s,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=12*(o-1),c="".concat(Object($.a)().creation_api,"/kitten/v4/work/ide/list?published_status=").concat(t,"&offset=").concat(a,"&limit=").concat(12,"&version_no=").concat(r),e.next=4,Object(ie.a)({url:c,method:"get",withCredentials:!0});case 4:return i=e.sent,s=i.items,l=i.total,e.abrupt("return",{project_list:s,project_page:o+1,project_total_number:l});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o("oWei");var _e,ue,de={"./style.scss":{open_project:"open_project--1_lK1",show:"show--3pGC3",tab_bar:"tab_bar--1Ae_8",tab:"tab--1G2Ho",selected_tab:"selected_tab--3lrpH",selection_wrap:"selection_wrap--QCaiM",content_wrap:"content_wrap--2LtTv",content:"content--50p2p",sample_projects:"sample_projects--267jj",empty_bg_placeholder:"empty_bg_placeholder--s295c",project:"project--3QZHO",user:"user--1rsOe",project_content_wrap:"project_content_wrap--2r1To",project_content:"project_content--14Zd8",import_icon:"import_icon--32t2x",arrow:"arrow--1gT73",computer:"computer--3Owhi",title:"title--3dIpy",update_time:"update_time--JmqDO","local-project-file":"local-project-file--R4SUh",search_input_wrap:"search_input_wrap--1qv-T",search_icon:"search_icon--Ss5sN",clear_icon:"clear_icon--Qivj4",search_input:"search_input--3ME1I"}};(function(e){e[e.ALL=1]="ALL",e[e.K4=4]="K4",e[e.K3=3]="K3"})(ue||(ue={}));var me=(_e={},q()(_e,ue.ALL,"manage_project/all_version"),q()(_e,ue.K4,"manage_project/version_4"),q()(_e,ue.K3,"manage_project/version_3"),_e),he=function(e){function t(e){var o;return r()(this,t),(o=s()(this,p()(t).call(this,e))).close_qr_code_tooltip=function(){o.setState({share_work_id:""})},o.content_wrap=void 0,o.content=void 0,o.version_selection=void 0,o.debounced_load_more_project_page=P()(o.load_more_content.bind(O()(o)),150),o.init=function(){o.state.project_list.length||o.fetch_projects()},o.on_delete_btn_click=function(){var e=C()(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){var e=C()(E.a.mark((function e(){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t);case 2:return o.setState({project_page:o.state.project_page-1}),e.next=5,o.fetch_projects();case 5:n=o.state.project_list,G()(n,(function(e){return e.id===t})),o.setState({project_list:n});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=U.a.warning({title:o.props.intl.formatMessage({id:"delete_project_dialog/warning"}),content:o.props.intl.formatMessage({id:"delete_project_dialog/delete_project"}),cancelText:o.props.intl.formatMessage({id:"delete_project_dialog/cancel"}),okText:o.props.intl.formatMessage({id:"delete_project_dialog/confirm"}),onCancel:function(){return r()},onOk:function(){n(),r()}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.get_context_menu_item=function(){return[o.create_menu_item(me[ue.ALL],ue.ALL),o.create_menu_item(me[ue.K4],ue.K4),o.create_menu_item(me[ue.K3],ue.K3)]},o.create_menu_item=function(e,t){var n={text:""};return n.text=o.props.intl.formatMessage({id:e}),n.on_click=o.select_version.bind(O()(o),Number(t)),n.style={justifyContent:"flex-start",width:"98px"},n.data_report="打开作品-版本选择",n.checked=o.state.selected_version===t,n},o.is_scroll_to_bottom=function(){if(o.content_wrap&&o.content){var e=o.content_wrap.getBoundingClientRect(),t=o.content.getBoundingClientRect(),n=e.bottom,r=t.bottom,a=e.height;return!!(t.height-a>0&&r-n<=10)}},o.state={search_keyword:"",project_total_number:0,project_list:[],project_page:1,project_loaded:!1,project_type:z.c.All,selected_version:ue.ALL,share_work_id:"",qr_code_position:{left:0,top:0}},o}var o;return u()(t,e),c()(t,[{key:"componentDidMount",value:function(){this.init(),window.addEventListener("resize",this.close_qr_code_tooltip),this.content_wrap.addEventListener("mousedown",this.close_qr_code_tooltip)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.close_qr_code_tooltip),this.content_wrap.removeEventListener("mousedown",this.close_qr_code_tooltip)}},{key:"handle_selection_click",value:function(){if(this.version_selection){var e=this.version_selection.getBoundingClientRect(),t=e.left,o=e.bottom;this.props.show_context_menu({x:t,y:o+5,menu_items:this.get_context_menu_item()})}}},{key:"select_version",value:function(e){var t=this;this.setState({selected_version:e,search_keyword:"",project_list:[],project_page:1,project_loaded:!1},(function(){return t.fetch_projects()}));var o=document.activeElement;o&&o.blur()}},{key:"report_project_type_select",value:function(e){switch(e){case z.c.All:return"全部";case z.c.Published:return"已发布";case z.c.UnPublished:return"未发布";default:return}}},{key:"fetch_projects",value:(o=C()(E.a.mark((function e(){var t,o,n,r,a,c,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le(this.state.project_type,this.state.project_page,void 0,this.state.selected_version);case 3:if((t=e.sent)&&t.project_list){e.next=6;break}return e.abrupt("return");case 6:o=t.project_list,n=t.project_page,r=t.project_total_number,a=this.state.project_list,c=S()(x()(a).concat(x()(o)),"id"),i=c.length>=r,this.setState({project_list:c,project_loaded:i,project_page:n}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(){return o.apply(this,arguments)})},{key:"load_more_content",value:function(){this.setState({share_work_id:""}),!this.is_scroll_to_bottom()||this.state.project_loaded||this.fetch_projects()}},{key:"get_content",value:function(){var e=this;return d.createElement("div",{className:"content_wrap--2LtTv",ref:function(t){t&&(e.content_wrap=t)},onScroll:this.debounced_load_more_project_page},d.createElement("div",{className:"content--50p2p",ref:function(t){t&&(e.content=t)}},this.state.project_list&&this.state.project_list.map((function(t){return d.createElement(Y,{key:t.id,user_project_info:t,project_type:"user",is_v3:!t.version,on_delete_btn_click:e.on_delete_btn_click,on_share_btn_click:function(o){o.stopPropagation(),e.setState({share_work_id:t.id,qr_code_position:{left:o.pageX,top:o.pageY}})}})})),""!==this.state.search_keyword&&(!this.state.project_list||!this.state.project_list.length)&&d.createElement("div",{className:"empty_bg_placeholder--s295c"},d.createElement(B.a,{text:this.props.intl.formatMessage({id:"open_project/empty_notice"})}))))}},{key:"render",value:function(){return d.createElement("div",{className:I()("open_project show",de,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},this.get_content(),""!==this.state.share_work_id&&d.createElement(ce,{url:"".concat(Object($.a)().player,"/new/").concat(this.state.share_work_id),left:this.state.qr_code_position.left,top:this.state.qr_code_position.top}))}}]),t}(d.Component);var fe=Object(h.b)(Object(f.connect)(void 0,(function(e){return Object(v.bindActionCreators)({close_dialog:j.c,action_load_bcm_by_file:F.b,show_context_menu:Z.d},e)}))(he));o("VQlr");var ve=function(e){function t(e){var o;return r()(this,t),(o=s()(this,p()(t).call(this,e))).on_request_close=function(){o.props.close_dialog({dialog_type:"manage_project"})},o}return u()(t,e),c()(t,[{key:"render",value:function(){return d.createElement(g.a,{type:"example",on_request_close:this.on_request_close,close_btn:{style:{top:21,right:15},icon_id:"#iconicon_close",icon_size:16}},d.createElement("div",{className:"manage-project-dialog--clNc6"},d.createElement(w,{title:this.props.intl.formatMessage({id:"manage_project/my_project"})}),d.createElement(fe,null)))}}]),t}(d.Component);var ge=Object(h.b)(Object(f.connect)((function(){return{}}),(function(e){return Object(v.bindActionCreators)({close_dialog:j.c},e)}))(ve))},E9nw:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,o=[],n=0;n<e.rangeCount;n++)o.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||o.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},UOev:function(e,t,o){e.exports={"dialog-header":"dialog-header--JP5YG",title:"title--RtgyR"}},VQlr:function(e,t,o){e.exports={"manage-project-dialog":"manage-project-dialog--clNc6"}},lWPa:function(e,t,o){e.exports={placehold_image:"placehold_image--O4xbF"}},oWei:function(e,t,o){e.exports={open_project:"open_project--1_lK1",show:"show--3pGC3",tab_bar:"tab_bar--1Ae_8",tab:"tab--1G2Ho",selected_tab:"selected_tab--3lrpH",selection_wrap:"selection_wrap--QCaiM",content_wrap:"content_wrap--2LtTv",content:"content--50p2p",sample_projects:"sample_projects--267jj",empty_bg_placeholder:"empty_bg_placeholder--s295c",project:"project--3QZHO",user:"user--1rsOe",project_content_wrap:"project_content_wrap--2r1To",project_content:"project_content--14Zd8",import_icon:"import_icon--32t2x",arrow:"arrow--1gT73",computer:"computer--3Owhi",title:"title--3dIpy",update_time:"update_time--JmqDO","local-project-file":"local-project-file--R4SUh",search_input_wrap:"search_input_wrap--1qv-T",search_icon:"search_icon--Ss5sN",clear_icon:"clear_icon--Qivj4",search_input:"search_input--3ME1I"}},vQ0X:function(e,t,o){e.exports={project:"project--3M2SP","hover-panel":"hover-panel--19m8h",btn:"btn--36isI",user:"user--2_GTh",project_content_wrap:"project_content_wrap--1JN39",project_content:"project_content--2xjXO",loading_icon:"loading_icon--3GHcx",portrait:"portrait--3SvaI",landscape:"landscape--2fTEv",title:"title--5Hbxo",example:"example--3ckXH",v3:"v3--o7G84",label:"label--LOWO3","tag-activity":"tag-activity--2f8Qo",en:"en--2csGJ",text:"text--Z1-Gw",icon:"icon--1cmmX",update_time:"update_time--wlMYR",preview_img:"preview_img--TdNGV",show:"show--6lFVU",project_name_tooltip:"project_name_tooltip--KVPqs"}},xfAC:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var n=o("q1tI"),r=o.n(n);o("lWPa");var a=function(e){return r.a.createElement("div",{className:"placehold_image--O4xbF"},r.a.createElement("span",{className:"th1-text-1 th1-text-s2"},e.text))}}}]);
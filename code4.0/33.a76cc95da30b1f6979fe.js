(this.webpackJsonp=this.webpackJsonp||[]).push([[33],{"6HIE":function(e,n,t){"use strict";t.r(n),t.d(n,"SignInDialogComponent",(function(){return Je}));var i,a=t("J4zp"),r=t.n(a),o=t("ODXe"),s=t("q1tI"),c=t("FdHU"),l=t("02PQ");!function(e){e[e.REGISTER=0]="REGISTER",e[e.LOGIN=1]="LOGIN",e[e.FORGET_PASSWORD=2]="FORGET_PASSWORD"}(i||(i={}));var g=t("iKuz"),u=t.n(g),d=t("3ZlJ"),p=t("HaE+"),m=t("o0o1"),b=t.n(m),f=t("HIk1"),h=t("5FhS"),C=t("clds"),I=t("5nnn"),U=t("Zo1w");function v(e){return w.apply(this,arguments)}function w(){return(w=Object(p.a)(b.a.mark((function e(n){var t,i,a,r,o,s,c,l,g,u,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.username,i=n.password,a=n.getCaptchaFallback,e.next=4,new Promise((function(e){try{Object(U.c)().getCaptcha(t,"",!0,function(){var n=Object(p.a)(b.a.mark((function n(t){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e(t));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),a,a)}catch(n){r=Object(U.c)().getErrorMsgType(n),e("")}}));case 4:if(o=e.sent){e.next=7;break}throw r;case 7:return e.next=9,Object(U.c)().getAuth().login_account_ticket(t,i,Object(U.c)().getPid(),o);case 9:return s=e.sent,c=s.data,l=c.user_info,g=l.nickname,u=l.id,d=l.avatar_url,e.abrupt("return",{isSuccess:!0,authInfo:{nickname:g,userId:u.toString(),avatar:d,authType:I.b.CODEMAO}});case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",{isSuccess:!1,error:Object(U.c)().getErrorMsgType(e.t0)});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function _(e){return S.apply(this,arguments)}function S(){return(S=Object(p.a)(b.a.mark((function e(n){var t,i,a,r,o,s,c,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.phone,i=n.code,e.next=4,Object(U.c)().getAuth().login_phone(t,i);case 4:return a=e.sent,r=a.data,o=r.user_info,s=o.nickname,c=o.id,l=o.avatar_url,e.abrupt("return",{isSuccess:!0,authInfo:{nickname:s,userId:c.toString(),avatar:l,authType:I.b.CODEMAO}});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{isSuccess:!1,error:Object(U.c)().getErrorMsgType(e.t0)});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function x(e,n,t){return E.apply(this,arguments)}function E(){return(E=Object(p.a)(b.a.mark((function e(n,t,i){var a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(U.c)().getPid(),e.next=3,new Promise((function(e){try{Object(U.c)().getCaptcha(n,"",!0,(function(n){return e(n)}),i,i)}catch(n){r=Object(U.c)().getErrorMsgType(n),e("")}}));case 3:if(o=e.sent){e.next=6;break}return e.abrupt("return",r);case 6:if(e.prev=6,"login"!==t){e.next=10;break}return e.next=10,Object(U.c)().getAuth().login_captcha(n,o,a);case 10:if("register"!==t){e.next=13;break}return e.next=13,Object(U.c)().getAuth().register_send_captcha(n,o,a);case 13:if("reset"!==t){e.next=16;break}return e.next=16,Object(U.c)().getAuth().reset_pwd_captcha(n,o,a);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(6),e.abrupt("return",Object(U.c)().getErrorMsgType(e.t0));case 21:case"end":return e.stop()}}),e,null,[[6,18]])})))).apply(this,arguments)}function O(e){return y.apply(this,arguments)}function y(){return(y=Object(p.a)(b.a.mark((function e(n){var t,i,a,r,o,s,c,l,g,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.phone,i=n.password,a=n.code,e.prev=1,e.next=4,Object(U.c)().getAgreements();case 4:if((r=e.sent)&&0!==r.length){e.next=7;break}return e.abrupt("return",{isSuccess:!1,error:Object(U.c)().getErrorMsgType("sign_in_dialog/error/other/network")});case 7:return e.next=9,Object(U.c)().getAuth().register({phone_number:t,password:i,captcha:a,agreement_ids:r});case 9:return o=e.sent,s=o.data,c=s.user_info,l=c.nickname,g=c.id,u=c.avatar_url,e.abrupt("return",{isSuccess:!0,authInfo:{nickname:l,userId:g.toString(),avatar:u,authType:I.b.CODEMAO}});case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",{isSuccess:!1,error:Object(U.c)().getErrorMsgType(e.t0)});case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function k(e){return j.apply(this,arguments)}function j(){return(j=Object(p.a)(b.a.mark((function e(n){var t,i,a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.phone,i=n.code,e.next=4,Object(U.c)().getAuth().reset_pwd_token(t,i);case 4:return a=e.sent,r=a.data,o=r.ticket,e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",Object(U.c)().getErrorMsgType(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function R(e){return N.apply(this,arguments)}function N(){return(N=Object(p.a)(b.a.mark((function e(n){var t,i,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.password,i=n.passwordConfirm,a=n.ticket,e.next=4,Object(U.c)().getAuth().reset_pwd(a,t,i);case 4:return e.abrupt("return",{isSuccess:!0});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{isSuccess:!1,error:Object(U.c)().getErrorMsgType(e.t0)});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}t("NK2K");function P(e){return/^1[3456789]\d{9}$/.test(e)}function M(e){return/^\d{6}$/.test(e)}function L(e){return/^[0-9a-zA-Z]{6,20}$/.test(e)}var T,F,q=s.useState,D=s.useEffect,A=s.useCallback,B=s.Fragment,z=s.useRef,G=function(e){var n=e.ticket,t=e.isRequesting,i=e.setIsRequesting,a=e.setResetSuccess,r=q(!0),c=Object(o.a)(r,2),l=c[0],g=c[1],u=q(void 0),m=Object(o.a)(u,2),U=m[0],v=m[1],w=q(void 0),_=Object(o.a)(w,2),S=_[0],x=_[1],E=q(void 0),O=Object(o.a)(E,2),y=O[0],k=O[1],j=z(!1),N=A((function(){return U&&U.type===I.a.PWD}),[U]),P=A((function(){return S&&S.type===I.a.PWD_CONFIRM}),[S]);D((function(){return j.current=!1,function(){j.current=!0}}));var M=function(){var e=Object(p.a)(b.a.mark((function e(){var r,o,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t&&!l){e.next=2;break}return e.abrupt("return");case 2:if(r=T.value,o=F.value,v(void 0),x(void 0),k(void 0),r===o){e.next=10;break}return x({msg:Object(d.a)("sign_in_dialog/error/password_confirm/not_same"),type:I.a.PWD_CONFIRM}),e.abrupt("return");case 10:if(L(r)){e.next=13;break}return v({type:I.a.PWD,msg:Object(d.a)("sign_in_dialog/error/password/format")}),e.abrupt("return");case 13:return e.next=15,R({ticket:n,password:r,passwordConfirm:o});case 15:s=e.sent,j.current||(i(!1),s.isSuccess?a(!0):k(s.error));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=F.value.length,n=T.value.length;g(0===e||0===n)};return s.createElement(B,null,s.createElement("div",{className:"CUI-sign-in-dialog-tip"},Object(d.a)("sign_in_dialog/reset_password_tip")),s.createElement("form",null,s.createElement(h.a,{autofocus:!0,inputStyle:{fontSize:18,width:"352px",height:"44px"},clearBtn:!0,onEnterDown:M,isError:N(),type:"password",label:Object(d.a)("sign_in_dialog/error/password/format"),getInputEl:function(e){T=e},onBlur:function(){(T.value.length<6||T.value.length>20)&&T.value.length>0?v({type:I.a.PWD,msg:Object(d.a)("sign_in_dialog/error/password/format")}):v(void 0),e.reportMethod&&e.reportMethod("用户信息-重置设置密码")},onChange:function(){G()}}),s.createElement("div",{className:"CUI-sign-in-dialog-input-error"},N()&&U&&U.msg),s.createElement(h.a,{clearBtn:!0,inputStyle:{fontSize:18,width:"352px",height:"44px"},isError:P(),type:"password",label:Object(d.a)("sign_in_dialog/placeholder/password_confirm"),getInputEl:function(e){F=e},onBlur:function(){T.value!==F.value?x({type:I.a.PWD_CONFIRM,msg:Object(d.a)("sign_in_dialog/error/password_confirm/not_same")}):x(void 0),e.reportMethod&&e.reportMethod("用户信息-重置设置密码")},onChange:function(){G()}}),s.createElement("div",{className:"CUI-sign-in-dialog-input-error"},P()&&S&&S.msg),s.createElement("div",{className:"CUI-sign-in-dialog-submit-error"},y&&y.type===I.a.OTHER&&y&&y.msg)),s.createElement(f.a,{height:"44px",onClick:M,disable:l,className:"CUI-sign-in-dialog-sign-in-btn","data-report":"用户信息-重置完成"},t?s.createElement(C.a,{size:18,themeColor:"10"}):s.createElement("span",{className:"CUI-sign-in-dialog-btn-text"},Object(d.a)("sign_in_dialog/finish"))))};G.defaultProps={reportMethod:function(){}};var W,H,V={"../../style_module.css":{wrap:"CUI-sign-in-dialog-wrap","login-header":"CUI-sign-in-dialog-login-header","dialog-btn-close":"CUI-sign-in-dialog-dialog-btn-close",main:"CUI-sign-in-dialog-main",content:"CUI-sign-in-dialog-content","fully-content":"CUI-sign-in-dialog-fully-content",error:"CUI-sign-in-dialog-error",text:"CUI-sign-in-dialog-text","tab-wrap":"CUI-sign-in-dialog-tab-wrap",tab:"CUI-sign-in-dialog-tab",slider:"CUI-sign-in-dialog-slider","footer-text":"CUI-sign-in-dialog-footer-text","text-wrap":"CUI-sign-in-dialog-text-wrap",left:"CUI-sign-in-dialog-left",right:"CUI-sign-in-dialog-right",center:"CUI-sign-in-dialog-center","tab-text":"CUI-sign-in-dialog-tab-text","get-code":"CUI-sign-in-dialog-get-code",enable:"CUI-sign-in-dialog-enable",disable:"CUI-sign-in-dialog-disable","input-error":"CUI-sign-in-dialog-input-error","submit-error":"CUI-sign-in-dialog-submit-error",footer:"CUI-sign-in-dialog-footer","third-party-btn-wrap":"CUI-sign-in-dialog-third-party-btn-wrap","third-party-btn":"CUI-sign-in-dialog-third-party-btn",tip:"CUI-sign-in-dialog-tip","btn-text":"CUI-sign-in-dialog-btn-text",link:"CUI-sign-in-dialog-link","tab-seleted":"CUI-sign-in-dialog-tab-seleted","tab-unseleted":"CUI-sign-in-dialog-tab-unseleted",clickable:"CUI-sign-in-dialog-clickable","sign-in-btn":"CUI-sign-in-dialog-sign-in-btn","text-main":"CUI-sign-in-dialog-text-main","text-second":"CUI-sign-in-dialog-text-second"}},Y=s.useState,K=s.useEffect,J=s.useCallback,Q=s.Fragment,Z=s.useRef,$=function(e){var n=e.switchView,t=e.smsTimeStamp,a=e.setSmsTimeStamp,r=e.isRequesting,c=e.setIsRequesting,l=e.setTicket,g=Y(!0),m=Object(o.a)(g,2),U=m[0],v=m[1],w=Y(0),_=Object(o.a)(w,2),S=_[0],E=_[1],O=Y(void 0),y=Object(o.a)(O,2),j=y[0],R=y[1],N=Z(!1),L=J((function(){return j&&j.type===I.a.PHONE}),[j]),T=J((function(){return j&&j.type===I.a.SMS_CODE}),[j]);K((function(){return N.current=!1,function(){N.current=!0}})),K((function(){L()&&W.focus(),T()&&H.focus();var e=(Date.now()-t)/1e3;if(!(e>60)){var n=Math.ceil(60-e);E(n);var i=setInterval((function(){n--,E(n),0===n&&clearInterval(i)}),1e3);return function(){clearInterval(i)}}}),[L,T,t]);var F=function(){var e=Object(p.a)(b.a.mark((function e(){var n,t,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r&&!U){e.next=2;break}return e.abrupt("return");case 2:if(R(void 0),P(n=W.value)){e.next=7;break}return R({msg:Object(d.a)("sign_in_dialog/error/phone/format"),type:I.a.PHONE}),e.abrupt("return");case 7:if(M(t=H.value)){e.next=11;break}return R({msg:Object(d.a)("sign_in_dialog/error/sms_code/fail"),type:I.a.SMS_CODE}),e.abrupt("return");case 11:return c(!0),e.next=14,k({phone:n,code:t});case 14:i=e.sent,N.current||(c(!1),"string"==typeof i?l(i):R(i));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){v(""===W.value||""===H.value)},D=function(){c(!1)},A=function(){var e=Object(p.a)(b.a.mark((function e(){var n,t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=2;break}return e.abrupt("return");case 2:if(R(void 0),P(n=W.value)){e.next=7;break}return R({msg:Object(d.a)("sign_in_dialog/error/phone/format"),type:I.a.PHONE}),e.abrupt("return");case 7:return e.next=9,x(n,"reset",D);case 9:(t=e.sent)?R(t):a(Date.now());case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.createElement(Q,null,s.createElement("div",{className:"CUI-sign-in-dialog-tip"},Object(d.a)("sign_in_dialog/forget_password/verify")),s.createElement("form",null,s.createElement(h.a,{autofocus:!0,clearBtn:!0,inputStyle:{fontSize:18,width:"352px",height:"44px"},maxLength:100,isError:L(),onChange:function(){q(),L()&&R(void 0)},label:Object(d.a)("sign_in_dialog/placeholder/mobile_phone"),autoComplete:"on",getInputEl:function(e){W=e},onBlur:function(){e.reportMethod&&e.reportMethod("用户信息-重置手机号")}}),s.createElement("div",{className:"CUI-sign-in-dialog-input-error"},L()&&j&&j.msg,j&&j.msg===Object(d.a)("sign_in_dialog/error/phone/unregisterd")&&s.createElement("span",{className:"CUI-sign-in-dialog-link",onClick:n.bind(void 0,i.REGISTER)},Object(d.a)("sign_in_dialog/register_now"))),s.createElement(h.a,{inputStyle:{fontSize:18,width:"352px",height:"44px"},onEnterDown:F,isError:T(),onChange:function(){q(),T()&&R(void 0)},label:Object(d.a)("sign_in_dialog/placeholder/code"),autoComplete:"off",maxLength:10,getInputEl:function(e){e&&(H=e)},iconsSuffix:s.createElement("span",{onClick:A,"data-report-click":"用户信息-重置验证码",className:u()("get-code ".concat(S?"disable":"enable"),V,{autoResolveMultipleImports:!0,handleMissingStyleName:"throw"})},Object(d.a)("sign_in_dialog/btn_code"),S?"(".concat(S,")"):"")}),s.createElement("div",{className:"CUI-sign-in-dialog-input-error"},T()&&j&&j.msg),s.createElement("div",{className:"CUI-sign-in-dialog-submit-error"},j&&j.type===I.a.OTHER&&j&&j.msg)),s.createElement(f.a,{height:"44px",onClick:F,disable:U,className:"CUI-sign-in-dialog-sign-in-btn","data-report":"用户信息-重置下一步"},r?s.createElement(C.a,{size:18,themeColor:"10"}):s.createElement("span",{className:"CUI-sign-in-dialog-btn-text"},Object(d.a)("sign_in_dialog/next"))))};$.defaultProps={reportMethod:function(){}};var X=s.Fragment,ee=function(e){var n=e.switchView;return s.createElement(X,null,s.createElement(c.a,{id:"#cui_iconicon_chenggong",size:92}),s.createElement("div",null,s.createElement("div",{className:"CUI-sign-in-dialog-text-main"},Object(d.a)("sign_in_dialog/forget_password/success")),s.createElement("div",{className:"CUI-sign-in-dialog-text-second"},Object(d.a)("sign_in_dialog/forget_password/login_notice"))),s.createElement(f.a,{height:"44px",onClick:function(){n(i.LOGIN)},className:"CUI-sign-in-dialog-sign-in-btn","data-report":"用户信息-去登录"},Object(d.a)("sign_in_dialog/go_to_login")))},ne={"../../style_module.css":{wrap:"CUI-sign-in-dialog-wrap","login-header":"CUI-sign-in-dialog-login-header","dialog-btn-close":"CUI-sign-in-dialog-dialog-btn-close",main:"CUI-sign-in-dialog-main",content:"CUI-sign-in-dialog-content","fully-content":"CUI-sign-in-dialog-fully-content",error:"CUI-sign-in-dialog-error",text:"CUI-sign-in-dialog-text","tab-wrap":"CUI-sign-in-dialog-tab-wrap",tab:"CUI-sign-in-dialog-tab",slider:"CUI-sign-in-dialog-slider","footer-text":"CUI-sign-in-dialog-footer-text","text-wrap":"CUI-sign-in-dialog-text-wrap",left:"CUI-sign-in-dialog-left",right:"CUI-sign-in-dialog-right",center:"CUI-sign-in-dialog-center","tab-text":"CUI-sign-in-dialog-tab-text","get-code":"CUI-sign-in-dialog-get-code",enable:"CUI-sign-in-dialog-enable",disable:"CUI-sign-in-dialog-disable","input-error":"CUI-sign-in-dialog-input-error","submit-error":"CUI-sign-in-dialog-submit-error",footer:"CUI-sign-in-dialog-footer","third-party-btn-wrap":"CUI-sign-in-dialog-third-party-btn-wrap","third-party-btn":"CUI-sign-in-dialog-third-party-btn",tip:"CUI-sign-in-dialog-tip","btn-text":"CUI-sign-in-dialog-btn-text",link:"CUI-sign-in-dialog-link","tab-seleted":"CUI-sign-in-dialog-tab-seleted","tab-unseleted":"CUI-sign-in-dialog-tab-unseleted",clickable:"CUI-sign-in-dialog-clickable","sign-in-btn":"CUI-sign-in-dialog-sign-in-btn","text-main":"CUI-sign-in-dialog-text-main","text-second":"CUI-sign-in-dialog-text-second"}},te=function(e){var n=e.smsTimeStamp,t=e.setSmsTimeStamp,a=e.isRequesting,r=e.setIsRequesting,c=e.switchView,l=e.reportMethod,g=Object(s.useState)(void 0),p=Object(o.a)(g,2),m=p[0],b=p[1],f=Object(s.useState)(!1),h=Object(o.a)(f,2),C=h[0],I=h[1];return s.createElement(s.Fragment,null,s.createElement("div",{className:u()(C?"fully-content":"content",ne,{autoResolveMultipleImports:!0,handleMissingStyleName:"throw"})},!C&&s.createElement("div",{className:"CUI-sign-in-dialog-tab-wrap"},s.createElement("div",{className:"CUI-sign-in-dialog-tab"},Object(d.a)("sign_in_dialog/reset_password"))),C?s.createElement(ee,{switchView:c}):m?s.createElement(G,{isRequesting:a,setIsRequesting:r,ticket:m,setResetSuccess:I,reportMethod:l}):s.createElement($,{smsTimeStamp:n,setSmsTimeStamp:t,isRequesting:a,setIsRequesting:r,switchView:c,setTicket:b,reportMethod:l})),!C&&s.createElement("div",{className:"CUI-sign-in-dialog-footer"},s.createElement("div",{className:"CUI-sign-in-dialog-footer-text"},s.createElement("span",{className:"CUI-sign-in-dialog-text-wrap"},s.createElement("span",{className:"CUI-sign-in-dialog-tab-text CUI-sign-in-dialog-center CUI-sign-in-dialog-clickable",onClick:c.bind(void 0,i.LOGIN)},Object(d.a)("sign_in_dialog/back_to_login"))))))};te.defaultProps={reportMethod:function(){}};var ie,ae,re,oe=t("/PzZ"),se=s.useState,ce=s.useEffect,le=s.useCallback,ge=s.Fragment,ue=s.useRef,de=function(e){var n=e.isRequesting,t=e.setIsRequesting,i=se(!0),a=Object(o.a)(i,2),r=a[0],c=a[1],l=se(void 0),g=Object(o.a)(l,2),u=g[0],m=g[1],U=ue(!1),w=le((function(){return u&&u.type===I.a.PHONE}),[u]),_=le((function(){return u&&u.type===I.a.PWD}),[u]),S=le((function(){return u&&u.type===I.a.OTHER}),[u]);ce((function(){return U.current=!1,function(){U.current=!0}})),ce((function(){w()&&ie.focus(),(_()||u&&u.msg===Object(d.a)("sign_in_dialog/error/other/acc_or_pwd"))&&re&&re()}),[u,_,w]);var x=function(){t(!1)},E=function(){var i=Object(p.a)(b.a.mark((function i(){var a,o,s;return b.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!n&&!r){i.next=2;break}return i.abrupt("return");case 2:if(a=ie.value,!((o=ae.value).length<6||o.length>20)){i.next=7;break}return m({type:I.a.PWD,msg:Object(d.a)("sign_in_dialog/error/password/format")}),i.abrupt("return");case 7:return t(!0),i.prev=8,i.next=11,v({username:a,password:o,getCaptchaFallback:x});case 11:if(s=i.sent,U.current){i.next=20;break}if(t(!1),s.isSuccess){i.next=19;break}throw m(s.error),s.error;case 19:e.onPasswordLoginSuccess&&e.onPasswordLoginSuccess(s.authInfo);case 20:i.next=25;break;case 22:i.prev=22,i.t0=i.catch(8),e.onPasswordLoginFailure&&e.onPasswordLoginFailure({source:"pwd-login",isSuccess:!1,error:i.t0});case 25:case"end":return i.stop()}}),i,null,[[8,22]])})));return function(){return i.apply(this,arguments)}}(),O=function(){c(""===ie.value||""===ae.value)};return s.createElement(ge,null,s.createElement("form",null,s.createElement(h.a,{autofocus:!0,clearBtn:!0,inputStyle:{fontSize:18,width:"352px",height:"44px"},maxLength:100,isError:w(),onChange:function(){O(),w()&&m(void 0)},label:Object(d.a)("sign_in_dialog/placeholder/username"),autoComplete:"on",getInputEl:function(e){(ie=e).focus()},onBlur:function(){e.reportMethod&&e.reportMethod("用户信息-输入账号")}}),s.createElement("div",{className:"CUI-sign-in-dialog-input-error"},w()&&u&&u.msg),s.createElement(h.a,{clearBtn:!0,inputStyle:{fontSize:18,width:"352px",height:"44px"},onEnterDown:E,isError:_(),onChange:function(){O(),_()&&ae.value&&m(void 0)},type:"password",label:Object(d.a)("sign_in_dialog/placeholder/password"),autoComplete:"on",getInputEl:function(e){ae=e},getClearInputFn:function(e){return re=e},onBlur:function(){e.reportMethod&&e.reportMethod("用户信息-输入账号密码")}}),s.createElement("div",{className:"CUI-sign-in-dialog-input-error"},_()&&u&&u.msg),s.createElement("div",{className:"CUI-sign-in-dialog-submit-error"},S()&&u&&u.msg)),s.createElement(f.a,{height:"44px",onClick:E,disable:r,className:"CUI-sign-in-dialog-sign-in-btn","data-report":"用户信息-密码登录"},n?s.createElement(C.a,{size:18,themeColor:"10"}):s.createElement("span",{className:"CUI-sign-in-dialog-btn-text"},Object(d.a)("sign_in_dialog/login"))))};de.defaultProps={onPasswordLoginSuccess:function(){},onPasswordLoginFailure:function(){},reportMethod:function(){}};var pe,me,be={"../../style_module.css":{wrap:"CUI-sign-in-dialog-wrap","login-header":"CUI-sign-in-dialog-login-header","dialog-btn-close":"CUI-sign-in-dialog-dialog-btn-close",main:"CUI-sign-in-dialog-main",content:"CUI-sign-in-dialog-content","fully-content":"CUI-sign-in-dialog-fully-content",error:"CUI-sign-in-dialog-error",text:"CUI-sign-in-dialog-text","tab-wrap":"CUI-sign-in-dialog-tab-wrap",tab:"CUI-sign-in-dialog-tab",slider:"CUI-sign-in-dialog-slider","footer-text":"CUI-sign-in-dialog-footer-text","text-wrap":"CUI-sign-in-dialog-text-wrap",left:"CUI-sign-in-dialog-left",right:"CUI-sign-in-dialog-right",center:"CUI-sign-in-dialog-center","tab-text":"CUI-sign-in-dialog-tab-text","get-code":"CUI-sign-in-dialog-get-code",enable:"CUI-sign-in-dialog-enable",disable:"CUI-sign-in-dialog-disable","input-error":"CUI-sign-in-dialog-input-error","submit-error":"CUI-sign-in-dialog-submit-error",footer:"CUI-sign-in-dialog-footer","third-party-btn-wrap":"CUI-sign-in-dialog-third-party-btn-wrap","third-party-btn":"CUI-sign-in-dialog-third-party-btn",tip:"CUI-sign-in-dialog-tip","btn-text":"CUI-sign-in-dialog-btn-text",link:"CUI-sign-in-dialog-link","tab-seleted":"CUI-sign-in-dialog-tab-seleted","tab-unseleted":"CUI-sign-in-dialog-tab-unseleted",clickable:"CUI-sign-in-dialog-clickable","sign-in-btn":"CUI-sign-in-dialog-sign-in-btn","text-main":"CUI-sign-in-dialog-text-main","text-second":"CUI-sign-in-dialog-text-second"}},fe=s.useState,he=s.useEffect,Ce=s.useCallback,Ie=s.Fragment,Ue=s.useRef,ve=function(e){var n=e.isRequesting,t=e.setIsRequesting,a=e.switchView,r=e.setSmsTimeStamp,c=e.smsTimeStamp,l=e.onlyLogin,g=fe(!0),m=Object(o.a)(g,2),U=m[0],v=m[1],w=fe(0),S=Object(o.a)(w,2),E=S[0],O=S[1],y=fe(void 0),k=Object(o.a)(y,2),j=k[0],R=k[1],N=Ue(!1),L=Ce((function(){return j&&j.type===I.a.PHONE}),[j]),T=Ce((function(){return j&&j.type===I.a.SMS_CODE}),[j]);he((function(){return N.current=!1,function(){N.current=!0}})),he((function(){L()&&pe.focus(),T()&&me.focus();var e=(Date.now()-c)/1e3;if(!(e>60)){var n=Math.ceil(60-e);O(n);var t=setInterval((function(){n--,O(n),0===n&&clearInterval(t)}),1e3);return function(){clearInterval(t)}}}),[L,T,c]);var F=function(){var i=Object(p.a)(b.a.mark((function i(){var a,r,o;return b.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!n&&!U){i.next=2;break}return i.abrupt("return");case 2:if(R(void 0),P(a=pe.value)){i.next=7;break}return R({msg:Object(d.a)("sign_in_dialog/error/phone/format"),type:I.a.PHONE}),i.abrupt("return");case 7:if(M(r=me.value)){i.next=11;break}return R({msg:Object(d.a)("sign_in_dialog/error/sms_code/fail"),type:I.a.SMS_CODE}),i.abrupt("return");case 11:return t(!0),i.prev=12,i.next=15,_({phone:a,code:r});case 15:if(o=i.sent,N.current){i.next=24;break}if(t(!1),o.isSuccess){i.next=23;break}throw R(o.error),o.error;case 23:e.onSmsLoginSuccess&&e.onSmsLoginSuccess(o.authInfo);case 24:i.next=29;break;case 26:i.prev=26,i.t0=i.catch(12),e.onSmsLoginFailure&&e.onSmsLoginFailure({source:"sms-login",isSuccess:!1,error:i.t0});case 29:case"end":return i.stop()}}),i,null,[[12,26]])})));return function(){return i.apply(this,arguments)}}(),q=function(){t(!1)},D=function(){var e=Object(p.a)(b.a.mark((function e(){var n,t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=2;break}return e.abrupt("return");case 2:if(R(void 0),P(n=pe.value)){e.next=7;break}return R({msg:Object(d.a)("sign_in_dialog/error/phone/format"),type:I.a.PHONE}),e.abrupt("return");case 7:return e.next=9,x(n,"login",q);case 9:(t=e.sent)?R(t):r(Date.now());case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){v(""===pe.value||""===me.value)};return s.createElement(Ie,null,s.createElement("form",null,s.createElement(h.a,{autofocus:!0,inputStyle:{fontSize:18,width:"352px",height:"44px"},maxLength:11,clearBtn:!0,isError:L(),onChange:function(){A(),L()&&R(void 0)},label:Object(d.a)("sign_in_dialog/placeholder/mobile_phone"),autoComplete:"on",getInputEl:function(e){e&&(pe=e)},onBlur:function(){e.reportMethod&&e.reportMethod("用户信息-输入手机号")}}),s.createElement("div",{className:"CUI-sign-in-dialog-input-error"},L()&&j&&j.msg,!l&&j&&j.msg===Object(d.a)("sign_in_dialog/error/phone/unregisterd")&&s.createElement("span",{className:"CUI-sign-in-dialog-link",onClick:a.bind(void 0,i.REGISTER)},Object(d.a)("sign_in_dialog/register_now"))),s.createElement(h.a,{inputStyle:{fontSize:18,width:"352px",height:"44px"},onEnterDown:F,isError:T(),onChange:function(){A(),T()&&R(void 0)},label:Object(d.a)("sign_in_dialog/placeholder/code"),autoComplete:"off",maxLength:10,getInputEl:function(e){e&&(me=e)},iconsSuffix:s.createElement("span",{onClick:D,"data-report-click":"用户信息-登录验证码",className:u()("get-code ".concat(E?"disable":"enable"),be,{autoResolveMultipleImports:!0,handleMissingStyleName:"throw"})},Object(d.a)("sign_in_dialog/btn_code"),E?"(".concat(E,")"):"")}),s.createElement("div",{className:"CUI-sign-in-dialog-input-error"},T()&&j&&j.msg),s.createElement("div",{className:"CUI-sign-in-dialog-submit-error"},j&&j.type===I.a.OTHER&&j&&j.msg)),s.createElement(f.a,{height:"44px",onClick:F,disable:U,className:"CUI-sign-in-dialog-sign-in-btn","data-report":"用户信息-短信登录"},n?s.createElement(C.a,{size:18,themeColor:"10"}):s.createElement("span",{className:"CUI-sign-in-dialog-btn-text"},Object(d.a)("sign_in_dialog/login"))))};ve.defaultProps={onSmsLoginSuccess:function(){},onSmsLoginFailure:function(){},reportMethod:function(){}};var we,_e={"../../style_module.css":{wrap:"CUI-sign-in-dialog-wrap","login-header":"CUI-sign-in-dialog-login-header","dialog-btn-close":"CUI-sign-in-dialog-dialog-btn-close",main:"CUI-sign-in-dialog-main",content:"CUI-sign-in-dialog-content","fully-content":"CUI-sign-in-dialog-fully-content",error:"CUI-sign-in-dialog-error",text:"CUI-sign-in-dialog-text","tab-wrap":"CUI-sign-in-dialog-tab-wrap",tab:"CUI-sign-in-dialog-tab",slider:"CUI-sign-in-dialog-slider","footer-text":"CUI-sign-in-dialog-footer-text","text-wrap":"CUI-sign-in-dialog-text-wrap",left:"CUI-sign-in-dialog-left",right:"CUI-sign-in-dialog-right",center:"CUI-sign-in-dialog-center","tab-text":"CUI-sign-in-dialog-tab-text","get-code":"CUI-sign-in-dialog-get-code",enable:"CUI-sign-in-dialog-enable",disable:"CUI-sign-in-dialog-disable","input-error":"CUI-sign-in-dialog-input-error","submit-error":"CUI-sign-in-dialog-submit-error",footer:"CUI-sign-in-dialog-footer","third-party-btn-wrap":"CUI-sign-in-dialog-third-party-btn-wrap","third-party-btn":"CUI-sign-in-dialog-third-party-btn",tip:"CUI-sign-in-dialog-tip","btn-text":"CUI-sign-in-dialog-btn-text",link:"CUI-sign-in-dialog-link","tab-seleted":"CUI-sign-in-dialog-tab-seleted","tab-unseleted":"CUI-sign-in-dialog-tab-unseleted",clickable:"CUI-sign-in-dialog-clickable","sign-in-btn":"CUI-sign-in-dialog-sign-in-btn","text-main":"CUI-sign-in-dialog-text-main","text-second":"CUI-sign-in-dialog-text-second"}},Se=s.useState;!function(e){e[e.BY_PASSWORD=0]="BY_PASSWORD",e[e.BY_SMS=1]="BY_SMS"}(we||(we={}));var xe=function(e){var n=e.isRequesting,t=e.setIsRequesting,a=e.switchView,r=e.smsTimeStamp,l=e.setSmsTimeStamp,g=e.onlyLogin,m=e.onSmsLoginSuccess,f=e.onSmsLoginFailure,h=e.onPasswordLoginSuccess,C=e.onPasswordLoginFailure,v=e.reportMethod,w=e.disableThirdParty,_=Se(we.BY_PASSWORD),S=Object(o.a)(_,2),x=S[0],E=S[1],O=function(e){x!==e&&E(e)},y=function(){var n=Object(p.a)(b.a.mark((function n(t){var i,a,r,o,s,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=Object(oe.a)().thirdPartyLoginPrefix,a=Object(oe.a)().redirectUrl,r="",o="",s=Object(U.c)().getPid(),"qq"===t?(o=Object(oe.a)().qqAppId,r="".concat(i,"/get-qq-code.html?appid=").concat(o,"&pid=").concat(s,"&redirect_uri=").concat(a,"/static/third_login-v3.html")):(o=Object(oe.a)().wechatAppId,r="".concat(i,"/get-weixin-code.html?appid=").concat(o,"&scope=snsapi_login&state=").concat(Date.now(),"&pid=").concat(s,"&redirect_uri=").concat(a,"/static/third_login-v3.html")),r="".concat(r,"?product_code=kitten+from=").concat(location.origin),window.open(r,"newwindow","height=580, width=600, top=200, left=300, toolbar=no,menubar=no, scrollbars=no, resizable=no,location=no, status=no"),c=function(){var n=Object(p.a)(b.a.mark((function n(i){var a,r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((a=JSON.parse(i.data)).existed){n.next=8;break}if(a.oauth_ticket){n.next=5;break}return window.removeEventListener("message",c),n.abrupt("return");case 5:Object(U.c)().getAuth().create_user_for_third_party(a.oauth_ticket).then(Object(p.a)(b.a.mark((function n(){var i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(U.c)().getProfile();case 2:return n.next=4,n.sent.data;case 4:i=n.sent,e.onThirdPartyLoginSuccess&&e.onThirdPartyLoginSuccess({nickname:i.nickname,userId:i.id.toString(),avatar:i.avatar_url,authType:I.b.CODEMAO,source:"qq"===t?"qq-login":"wc-login"}),window.removeEventListener("message",c);case 7:case"end":return n.stop()}}),n)})))).catch((function(n){console.error(n),e.onThirdPartyLoginFailure&&e.onThirdPartyLoginFailure({source:"qq"===t?"qq-login":"wc-login",isSuccess:!1,error:n})})),n.next=21;break;case 8:return n.prev=8,n.next=11,Object(U.c)().getProfile();case 11:return n.next=13,n.sent.data;case 13:r=n.sent,e.onThirdPartyLoginSuccess&&e.onThirdPartyLoginSuccess({nickname:r.nickname,userId:r.id.toString(),avatar:r.avatar_url,authType:I.b.CODEMAO,source:"qq"===t?"qq-login":"wc-login"}),window.removeEventListener("message",c),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(8),e.onThirdPartyLoginFailure&&e.onThirdPartyLoginFailure({source:"qq"===t?"qq-login":"wc-login",isSuccess:!1,error:n.t0});case 21:case"end":return n.stop()}}),n,null,[[8,18]])})));return function(e){return n.apply(this,arguments)}}(),window.addEventListener("message",c);case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return s.createElement(s.Fragment,null,s.createElement("div",{className:"CUI-sign-in-dialog-content"},s.createElement("div",{className:"CUI-sign-in-dialog-tab-wrap"},s.createElement("div",{onClick:O.bind(void 0,we.BY_PASSWORD),className:u()("tab clickable ".concat(x===we.BY_PASSWORD?"tab-seleted":"tab-unseleted"),_e,{autoResolveMultipleImports:!0,handleMissingStyleName:"throw"})},Object(d.a)("sign_in_dialog/sign_in_with_password")),s.createElement("div",{onClick:O.bind(void 0,we.BY_SMS),className:u()("tab clickable ".concat(x===we.BY_SMS?"tab-seleted":"tab-unseleted"),_e,{autoResolveMultipleImports:!0,handleMissingStyleName:"throw"})},Object(d.a)("sign_in_dialog/sign_in_with_sms"))),x===we.BY_PASSWORD&&s.createElement(de,{isRequesting:n,setIsRequesting:t,onPasswordLoginSuccess:h,onPasswordLoginFailure:C,reportMethod:v}),x===we.BY_SMS&&s.createElement(ve,{onlyLogin:g,isRequesting:n,setIsRequesting:t,smsTimeStamp:r,setSmsTimeStamp:l,switchView:a,onSmsLoginSuccess:m,onSmsLoginFailure:f,reportMethod:v})),s.createElement("div",{className:"CUI-sign-in-dialog-footer"},!w&&s.createElement("div",{className:"CUI-sign-in-dialog-third-party-btn-wrap"},s.createElement("span",{className:"CUI-sign-in-dialog-third-party-btn",onClick:function(){y("wechat").catch((function(e){return console.log(e)}))},"data-report-click":"用户信息-微信登录"},s.createElement(c.a,{id:"#cui_iconweixin",size:37,color:"#09b83e"})),s.createElement("span",{className:"CUI-sign-in-dialog-third-party-btn",onClick:function(){y("qq").catch((function(e){return console.log(e)}))},"data-report-click":"用户信息-QQ登录"},s.createElement(c.a,{id:"#cui_iconQQ1",size:37}))),!g&&s.createElement("div",{className:"CUI-sign-in-dialog-footer-text"},s.createElement("span",{className:"CUI-sign-in-dialog-text-wrap"},s.createElement("span",{className:"CUI-sign-in-dialog-left CUI-sign-in-dialog-clickable CUI-sign-in-dialog-tab-text",onClick:a.bind(void 0,i.FORGET_PASSWORD)},Object(d.a)("sign_in_dialog/find_password"))),"|",s.createElement("span",{className:"CUI-sign-in-dialog-text-wrap"},s.createElement("span",{className:"CUI-sign-in-dialog-right CUI-sign-in-dialog-clickable CUI-sign-in-dialog-tab-text",onClick:a.bind(void 0,i.REGISTER)},Object(d.a)("sign_in_dialog/sign_up_account"))))))};xe.defaultProps={onPasswordLoginSuccess:function(){},onPasswordLoginFailure:function(){},onSmsLoginSuccess:function(){},onSmsLoginFailure:function(){},onThirdPartyLoginSuccess:function(){},onThirdPartyLoginFailure:function(){},reportMethod:function(){},disableThirdParty:!1};var Ee=s.Fragment,Oe=function(e){var n=e.onRegisterConfirm;return s.createElement(Ee,null,s.createElement(c.a,{id:"#cui_iconicon_chenggong",size:92}),s.createElement("div",null,s.createElement("div",{className:"CUI-sign-in-dialog-text-main"},Object(d.a)("sign_in_dialog/register/success")),s.createElement("div",{className:"CUI-sign-in-dialog-text-second"},Object(d.a)("sign_in_dialog/register/account_login"))),s.createElement(f.a,{height:"44px",onClick:function(){n&&n()},className:"CUI-sign-in-dialog-sign-in-btn","data-report":"用户信息-注册成功确定"},Object(d.a)("sign_in_dialog/register/confirm")))};Oe.defaultProps={onRegisterConfirm:function(){}};var ye,ke,je,Re={"../../style_module.css":{wrap:"CUI-sign-in-dialog-wrap","login-header":"CUI-sign-in-dialog-login-header","dialog-btn-close":"CUI-sign-in-dialog-dialog-btn-close",main:"CUI-sign-in-dialog-main",content:"CUI-sign-in-dialog-content","fully-content":"CUI-sign-in-dialog-fully-content",error:"CUI-sign-in-dialog-error",text:"CUI-sign-in-dialog-text","tab-wrap":"CUI-sign-in-dialog-tab-wrap",tab:"CUI-sign-in-dialog-tab",slider:"CUI-sign-in-dialog-slider","footer-text":"CUI-sign-in-dialog-footer-text","text-wrap":"CUI-sign-in-dialog-text-wrap",left:"CUI-sign-in-dialog-left",right:"CUI-sign-in-dialog-right",center:"CUI-sign-in-dialog-center","tab-text":"CUI-sign-in-dialog-tab-text","get-code":"CUI-sign-in-dialog-get-code",enable:"CUI-sign-in-dialog-enable",disable:"CUI-sign-in-dialog-disable","input-error":"CUI-sign-in-dialog-input-error","submit-error":"CUI-sign-in-dialog-submit-error",footer:"CUI-sign-in-dialog-footer","third-party-btn-wrap":"CUI-sign-in-dialog-third-party-btn-wrap","third-party-btn":"CUI-sign-in-dialog-third-party-btn",tip:"CUI-sign-in-dialog-tip","btn-text":"CUI-sign-in-dialog-btn-text",link:"CUI-sign-in-dialog-link","tab-seleted":"CUI-sign-in-dialog-tab-seleted","tab-unseleted":"CUI-sign-in-dialog-tab-unseleted",clickable:"CUI-sign-in-dialog-clickable","sign-in-btn":"CUI-sign-in-dialog-sign-in-btn","text-main":"CUI-sign-in-dialog-text-main","text-second":"CUI-sign-in-dialog-text-second"}},Ne=s.useState,Pe=s.useEffect,Me=s.useCallback,Le=s.useRef,Te=function(e){var n=e.isRequesting,t=e.setIsRequesting,a=e.smsTimeStamp,r=e.setSmsTimeStamp,c=e.switchView,l=e.setResetSuccess,g=Ne(!0),m=Object(o.a)(g,2),U=m[0],v=m[1],w=Ne(0),_=Object(o.a)(w,2),S=_[0],E=_[1],y=Ne(void 0),k=Object(o.a)(y,2),j=k[0],R=k[1],N=Le(!1),L=Me((function(){return j&&j.type===I.a.PHONE}),[j]),T=Me((function(){return j&&j.type===I.a.PWD}),[j]),F=Me((function(){return j&&j.type===I.a.SMS_CODE}),[j]);Pe((function(){return N.current=!1,function(){N.current=!0}})),Pe((function(){L()&&ye.focus(),F()&&je.focus();var e=(Date.now()-a)/1e3;if(!(e>60)){var n=Math.ceil(60-e);E(n);var t=setInterval((function(){n--,E(n),0===n&&clearInterval(t)}),1e3);return function(){clearInterval(t)}}}),[F,L,a]);var q=function(){v(""===ye.value||ke.value.length<6||""===je.value)},D=function(){var n=Object(p.a)(b.a.mark((function n(){var i,a,r,o;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!U){n.next=2;break}return n.abrupt("return");case 2:if(R(void 0),P(i=ye.value)){n.next=7;break}return R({msg:Object(d.a)("sign_in_dialog/error/phone/format"),type:I.a.PHONE}),n.abrupt("return");case 7:if(M(a=je.value)){n.next=11;break}return R({msg:Object(d.a)("sign_in_dialog/error/sms_code/fail"),type:I.a.SMS_CODE}),n.abrupt("return");case 11:return t(!0),r=ke.value,n.prev=13,n.next=16,O({phone:i,password:r,code:a});case 16:if(o=n.sent,N.current){n.next=26;break}if(t(!1),o.isSuccess){n.next=24;break}throw R(o.error),o.error;case 24:e.onRegisterSuccess&&e.onRegisterSuccess(o.authInfo),l(!0);case 26:n.next=31;break;case 28:n.prev=28,n.t0=n.catch(13),e.onRegisterFailure&&e.onRegisterFailure({source:"register",isSuccess:!1,error:n.t0});case 31:case"end":return n.stop()}}),n,null,[[13,28]])})));return function(){return n.apply(this,arguments)}}(),A=function(){t(!1)},B=function(){var e=Object(p.a)(b.a.mark((function e(){var n,t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=2;break}return e.abrupt("return");case 2:if(R(void 0),P(n=ye.value)){e.next=7;break}return R({msg:Object(d.a)("sign_in_dialog/error/phone/format"),type:I.a.PHONE}),e.abrupt("return");case 7:return e.next=9,x(n,"register",A);case 9:(t=e.sent)?R(t):r(Date.now());case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.createElement(s.Fragment,null,s.createElement("div",{className:"CUI-sign-in-dialog-tab-wrap"},s.createElement("div",{className:"CUI-sign-in-dialog-tab"},Object(d.a)("sign_in_dialog/new_user_sign_up"))),s.createElement("form",null,s.createElement(h.a,{autofocus:!0,inputStyle:{fontSize:18,width:"352px",height:"44px"},clearBtn:!0,maxLength:100,isError:L(),onChange:function(){q(),L()&&R(void 0)},label:Object(d.a)("sign_in_dialog/placeholder/mobile_phone"),autoComplete:"on",getInputEl:function(e){ye=e},onBlur:function(){e.reportMethod&&e.reportMethod("用户信息-注册手机号")}}),s.createElement("div",{className:"CUI-sign-in-dialog-input-error"},L()&&j&&j.msg,j&&j.msg===Object(d.a)("sign_in_dialog/error/phone/registered")&&s.createElement("span",{className:"CUI-sign-in-dialog-link",onClick:c.bind(void 0,i.LOGIN)},Object(d.a)("sign_in_dialog/login_now"))),s.createElement(h.a,{inputStyle:{fontSize:18,width:"352px",height:"44px"},clearBtn:!0,onEnterDown:D,isError:T(),onChange:function(){q(),T()&&ke.value&&R(void 0)},type:"password",label:Object(d.a)("sign_in_dialog/placeholder/password_n_tip"),autoComplete:"on",getInputEl:function(e){ke=e},onBlur:function(){(ke.value.length<6||ke.value.length>20)&&ke.value.length>0&&R({type:I.a.PWD,msg:Object(d.a)("sign_in_dialog/error/password/format")}),e.reportMethod&&e.reportMethod("用户信息-注册设置密码")}}),s.createElement("div",{className:"CUI-sign-in-dialog-input-error"},T()&&j&&j.msg),s.createElement(h.a,{inputStyle:{fontSize:18,width:"352px",height:"44px"},onEnterDown:D,isError:F(),onChange:function(){q(),F()&&R(void 0)},label:Object(d.a)("sign_in_dialog/placeholder/code"),autoComplete:"off",maxLength:10,getInputEl:function(e){e&&(je=e)},iconsSuffix:s.createElement("span",{onClick:B,"data-report-click":"用户信息-注册验证码",className:u()("get-code ".concat(S?"disable":"enable"),Re,{autoResolveMultipleImports:!0,handleMissingStyleName:"throw"})},Object(d.a)("sign_in_dialog/btn_code"),S?"(".concat(S,")"):""),onBlur:function(){e.reportMethod&&e.reportMethod("用户信息-注册验证码")}}),s.createElement("div",{className:"CUI-sign-in-dialog-input-error"},F()&&j&&j.msg),s.createElement("div",{className:"CUI-sign-in-dialog-submit-error"},j&&j.type===I.a.OTHER&&j&&j.msg)),s.createElement(f.a,{height:"44px",width:"100%",className:"CUI-sign-in-dialog-sign-in-btn",disable:U,onClick:D,"data-report":"用户信息-注册完成"},n?s.createElement(C.a,{size:18,themeColor:"10"}):s.createElement("span",{className:"CUI-sign-in-dialog-btn-text"},Object(d.a)("sign_in_dialog/register"))))};Te.defaultProps={onRegisterSuccess:function(){},onRegisterFailure:function(){},reportMethod:function(){}};var Fe={"../../style_module.css":{wrap:"CUI-sign-in-dialog-wrap","login-header":"CUI-sign-in-dialog-login-header","dialog-btn-close":"CUI-sign-in-dialog-dialog-btn-close",main:"CUI-sign-in-dialog-main",content:"CUI-sign-in-dialog-content","fully-content":"CUI-sign-in-dialog-fully-content",error:"CUI-sign-in-dialog-error",text:"CUI-sign-in-dialog-text","tab-wrap":"CUI-sign-in-dialog-tab-wrap",tab:"CUI-sign-in-dialog-tab",slider:"CUI-sign-in-dialog-slider","footer-text":"CUI-sign-in-dialog-footer-text","text-wrap":"CUI-sign-in-dialog-text-wrap",left:"CUI-sign-in-dialog-left",right:"CUI-sign-in-dialog-right",center:"CUI-sign-in-dialog-center","tab-text":"CUI-sign-in-dialog-tab-text","get-code":"CUI-sign-in-dialog-get-code",enable:"CUI-sign-in-dialog-enable",disable:"CUI-sign-in-dialog-disable","input-error":"CUI-sign-in-dialog-input-error","submit-error":"CUI-sign-in-dialog-submit-error",footer:"CUI-sign-in-dialog-footer","third-party-btn-wrap":"CUI-sign-in-dialog-third-party-btn-wrap","third-party-btn":"CUI-sign-in-dialog-third-party-btn",tip:"CUI-sign-in-dialog-tip","btn-text":"CUI-sign-in-dialog-btn-text",link:"CUI-sign-in-dialog-link","tab-seleted":"CUI-sign-in-dialog-tab-seleted","tab-unseleted":"CUI-sign-in-dialog-tab-unseleted",clickable:"CUI-sign-in-dialog-clickable","sign-in-btn":"CUI-sign-in-dialog-sign-in-btn","text-main":"CUI-sign-in-dialog-text-main","text-second":"CUI-sign-in-dialog-text-second"}},qe=s.useState,De=function(e){var n=e.isRequesting,t=e.setIsRequesting,a=e.smsTimeStamp,r=e.setSmsTimeStamp,c=e.switchView,l=e.onRegisterSuccess,g=e.onRegisterFailure,p=e.onRegisterConfirm,m=e.reportMethod,b=qe(!1),f=Object(o.a)(b,2),h=f[0],C=f[1];return s.createElement(s.Fragment,null,s.createElement("div",{className:u()(h?"fully-content":"content",Fe,{autoResolveMultipleImports:!0,handleMissingStyleName:"throw"})},h?s.createElement(Oe,{onRegisterConfirm:p}):s.createElement(Te,{smsTimeStamp:a,setSmsTimeStamp:r,isRequesting:n,setIsRequesting:t,switchView:c,onRegisterSuccess:l,onRegisterFailure:g,setResetSuccess:C,reportMethod:m})),!h&&s.createElement("div",{className:"CUI-sign-in-dialog-footer"},s.createElement("div",{className:"CUI-sign-in-dialog-footer-text",style:{marginTop:0}},s.createElement("span",{className:"CUI-sign-in-dialog-text-wrap"},s.createElement("span",{className:"CUI-sign-in-dialog-center CUI-sign-in-dialog-clickable CUI-sign-in-dialog-tab-text",onClick:c.bind(void 0,i.LOGIN)},Object(d.a)("sign_in_dialog/back_to_login"))))))};De.defaultProps={onRegisterSuccess:function(){},onRegisterFailure:function(){},onRegisterConfirm:function(){},reportMethod:function(){}};var Ae=s.useState,Be=s.useEffect,ze=function(e){var n=Ae(i.LOGIN),t=Object(o.a)(n,2),a=t[0],r=t[1],g=Ae(!1),u=Object(o.a)(g,2),p=u[0],m=u[1],b=Ae(0),f=Object(o.a)(b,2),h=f[0],C=f[1],I=Ae(e.show),U=Object(o.a)(I,2),v=U[0],w=U[1],_=e.onlyLogin,S=e.onPasswordLoginSuccess,x=e.onPasswordLoginFailure,E=e.onSmsLoginSuccess,O=e.onSmsLoginFailure,y=e.onThirdPartyLoginSuccess,k=e.onThirdPartyLoginFailure,j=e.onRegisterSuccess,R=e.onRegisterFailure,N=e.onRegisterConfirm,P=e.onCloseAnimationEnd,M=e.reportMethod,L=e.disableThirdParty;Object(d.b)(e.language||""),Be((function(){w(e.show)}),[e.show]);var T=function(e){M&&M("用户信息-".concat(a===i.LOGIN?"登录":a===i.REGISTER?"注册":"找回密码")),r(e)},F=function(){w(!1)};return s.createElement(l.a,{centerShowUp:!0,show:v,mask:!0,maskClose:!1,header:function(){return s.createElement("div",{className:"CUI-sign-in-dialog-login-header"},s.createElement("div",{className:"CUI-sign-in-dialog-dialog-btn-close",onClick:F},s.createElement(c.a,{id:"#cui_iconnor2",size:10})))},footer:function(){return s.createElement("div",{id:"captcha_container"})},className:"CUI-sign-in-dialog-wrap",contentStyle:{width:434,height:579,padding:0,borderRadius:12},layout:"custom",onClose:function(){P?P():console.log("close")},top:"center"},s.createElement("div",{className:"CUI-sign-in-dialog-main"},a===i.LOGIN&&s.createElement(xe,{onlyLogin:_||!1,smsTimeStamp:h,setSmsTimeStamp:C,isRequesting:p,setIsRequesting:m,switchView:T,onPasswordLoginSuccess:S,onPasswordLoginFailure:x,onSmsLoginSuccess:E,onSmsLoginFailure:O,onThirdPartyLoginSuccess:y,onThirdPartyLoginFailure:k,reportMethod:M,disableThirdParty:L}),a===i.REGISTER&&s.createElement(De,{smsTimeStamp:h,setSmsTimeStamp:C,isRequesting:p,setIsRequesting:m,switchView:T,onRegisterSuccess:j,onRegisterFailure:R,onRegisterConfirm:N,reportMethod:M}),a===i.FORGET_PASSWORD&&s.createElement(te,{smsTimeStamp:h,setSmsTimeStamp:C,isRequesting:p,setIsRequesting:m,switchView:T,reportMethod:M})))};ze.defaultProps={onlyLogin:!1,language:"zh",onCloseAnimationEnd:function(){},onPasswordLoginSuccess:function(){},onSmsLoginSuccess:function(){},onThirdPartyLoginSuccess:function(){},onRegisterSuccess:function(){},onPasswordLoginFailure:function(){},onSmsLoginFailure:function(){},onThirdPartyLoginFailure:function(){},onRegisterFailure:function(){},onRegisterConfirm:function(){},reportMethod:function(){},disableThirdParty:!1};var Ge=t("2OET"),We=t("/MKj"),He=t("e/E2"),Ve=t("X8LL"),Ye=t("w1t0"),Ke=t("SnIo");t("Gjow");var Je=Object(Ge.b)((function(e){var n=Object(We.useDispatch)(),t=Object(s.useState)(!0),i=r()(t,2),a=i[0],o=i[1],c=function(e){console.log(e),e&&(n(Ke.b({nickname:e.nickname,user_id:e.userId,avatar:e.avatar,auth_type:e.authType,has_signed:void 0,is_login:!0})),o(!1),Object(Ye.d)(Ye.a.SUCCESS)?Object(Ye.c)(Ye.a.SUCCESS):Object(Ye.b)())};return s.createElement(s.Fragment,null,s.createElement(ze,{show:a,centerShowUp:!0,onCloseAnimationEnd:function(){n(Object(Ve.d)({dialog_type:"sign_in"})),Object(Ye.c)(Ye.a.CLOSE)},onlyLogin:!1,language:e.intl.formatMessage({id:"language"}),onPasswordLoginSuccess:c,onSmsLoginSuccess:c,onThirdPartyLoginSuccess:c,onRegisterSuccess:function(e,t){e&&(n(Ke.b({nickname:e.nickname,user_id:e.userId,avatar:e.avatar,auth_type:e.authType,has_signed:void 0,is_login:!0})),!t&&o(!1),Object(Ye.d)(Ye.a.SUCCESS)?Object(Ye.c)(Ye.a.SUCCESS):Object(Ye.b)())},onRegisterConfirm:function(){o(!1)},reportMethod:He.m}))}))},Gjow:function(e,n,t){},NK2K:function(e,n,t){}}]);
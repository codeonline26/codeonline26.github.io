(this.webpackJsonp=this.webpackJsonp||[]).push([[74],{m0Cu:function(e,t,n){"use strict";n.r(t),function(e,o){n.d(t,"MidiPainter",(function(){return rn}));var i=n("q1tI"),a=n.n(i),r=n("/MKj"),s=n("Bf/X"),c=n("02PQ"),l=n("FdHU"),d=n("YSDp"),h=n("HIk1"),m=n("IiLU"),p=n.n(m),u=n("Mpt7"),b=n("LvDl");const g={0:"ж",1:"Е",2:"ѵ",3:"ѕ",4:"х",5:"е",6:"Д",7:"Ѵ",8:"є",9:"ф",10:"д",11:"Г",12:"ѳ",13:"ѓ",14:"у",15:"г"},f={0:0,1:2,2:3,3:5,4:6,5:7,6:9,7:10,8:12,9:13,10:14,11:16,12:17,13:19,14:20,15:21},y={0:"ж",1:"Х",2:"Е",3:"ѵ",4:"ѥ",5:"ѕ",6:"х",7:"е",8:"Ф",9:"Д",10:"Ѵ",11:"Ѥ",12:"є",13:"ф",14:"д",15:"У",16:"Г",17:"ѳ",18:"ѣ",19:"ѓ",20:"у",21:"г"},v={0:0,2:1,3:2,5:3,6:4,7:5,9:6,10:7,12:8,13:9,14:10,16:11,17:12,19:13,20:14,21:15},w=[{background:new p.a.Color("#FA7A7A"),border:new p.a.Color("#C64141"),hover:new p.a.Color("#F8AFAF"),copy:new p.a.Color("#EDCDD7")},{background:new p.a.Color("#F499CE"),border:new p.a.Color("#AF5C9F"),hover:new p.a.Color("#FBB1DC"),copy:new p.a.Color("#F5DCF1")},{background:new p.a.Color("#9F77EB"),border:new p.a.Color("#7943C8"),hover:new p.a.Color("#C4A5FE"),copy:new p.a.Color("#DCD1F9")},{background:new p.a.Color("#6E9AF2"),border:new p.a.Color("#3A63B5"),hover:new p.a.Color("#97B9FF"),copy:new p.a.Color("#CDDCFC")},{background:new p.a.Color("#74D4F2"),border:new p.a.Color("#2590B2"),hover:new p.a.Color("#A5DEF0"),copy:new p.a.Color("#CFEEFC")},{background:new p.a.Color("#73D571"),border:new p.a.Color("#3A9941"),hover:new p.a.Color("#AFE9B3"),copy:new p.a.Color("#CEEED7")},{background:new p.a.Color("#FAB666"),border:new p.a.Color("#C07823"),hover:new p.a.Color("#FFD4A1"),copy:new p.a.Color("#F7E4D1")}],E=[{background:new p.a.Color("#FA7A7A"),border:new p.a.Color("#C64141"),hover:new p.a.Color("#F8AFAF"),copy:new p.a.Color("#EDCDD7")},{background:new p.a.Color("#9F77EB"),border:new p.a.Color("#7943C8"),hover:new p.a.Color("#C4A5FE"),copy:new p.a.Color("#DCD1F9")},{background:new p.a.Color("#6E9AF2"),border:new p.a.Color("#3A63B5"),hover:new p.a.Color("#97B9FF"),copy:new p.a.Color("#CDDCFC")},{background:new p.a.Color("#73D571"),border:new p.a.Color("#3A9941"),hover:new p.a.Color("#AFE9B3"),copy:new p.a.Color("#CEEED7")},{background:new p.a.Color("#FAB666"),border:new p.a.Color("#C07823"),hover:new p.a.Color("#FFD4A1"),copy:new p.a.Color("#F7E4D1")}],x={0:"C6",1:"B5",2:"A5",3:"G5",4:"F5",5:"E5",6:"D5",7:"C5",8:"B4",9:"A4",10:"G4",11:"F4",12:"E4",13:"D4",14:"C4",15:"B3",16:"A3",17:"G3",18:"F3",19:"E3",20:"D3",21:"C3"},_={0:"C6",1:"A5",2:"G5",3:"E5",4:"D5",5:"C5",6:"A4",7:"G4",8:"E4",9:"D4",10:"C4",11:"A3",12:"G3",13:"E3",14:"D3",15:"C3"};s.InstrumentEnum.PIANO,s.InstrumentEnum.BEAT,s.InstrumentEnum.DREAM,s.InstrumentEnum.ELECTRIC,s.InstrumentEnum.GAME,s.InstrumentEnum.GUITAR,s.InstrumentEnum.JOKER,s.ObbEnum.ROCK,s.ObbEnum.DANCE,s.ObbEnum.FUNK,s.ObbEnum.HIPHOP,s.ObbEnum.JAZZ,s.ObbEnum.LATIN,s.ObbEnum.ROCK_LOW,s.ObbEnum.DANCE_LOW,s.ObbEnum.FUNK_LOW,s.ObbEnum.HIPHOP_LOW,s.ObbEnum.JAZZ_LOW,s.ObbEnum.LATIN_LOW;let N=new s.MidiMao;function C(){return N}const O=new s.MidiMao;function M(){return O}var k,S;function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.Orange="orange",e.Violet="violet",e.Blue="blue",e.Pink="pink",e.Green="green",e.Yellow="yellow",e.Default="orange"}(k||(k={})),function(e){e.TC0="theme-color-0",e.TC1="theme-color-1",e.TC2="theme-color-2",e.TC3="theme-color-3",e.TC4="theme-color-4",e.TC5="theme-color-5",e.TC6="theme-color-6",e.TC7="theme-color-7",e.TC8="theme-color-8",e.TC9="theme-color-9",e.TCN1="theme-color-n1",e.TCN2="theme-color-n2",e.TCYS1="theme-color-ys1",e.TCYS2="theme-color-ys2",e.TT="theme-color-t",e.TT1="theme-color-t1",e.TT3="theme-color-t3",e.TT5="theme-color-t5",e.TT7="theme-color-t7",e.TTA="theme-color-a1",e.TCS10="theme-color-s1-0",e.TCS11="theme-color-s1-1",e.TCS12="theme-color-s1-2",e.TCS20="theme-color-s2-0",e.TCS21="theme-color-s2-1",e.TCS22="theme-color-s2-2",e.TCC="theme-color-c",e.TCC1="theme-color-c1",e.TCC2="theme-color-c2",e.SCN10="sup-color-n1-0",e.SCN11="sup-color-n1-1",e.SCN12="sup-color-n1-2",e.SCN20="sup-color-n2-0",e.SCN21="sup-color-n2-1",e.SCN22="sup-color-n2-2",e.SCN30="sup-color-n3-0",e.SCN31="sup-color-n3-1",e.SCN32="sup-color-n3-2",e.SCN40="sup-color-n4-0",e.SCN41="sup-color-n4-1",e.SCN42="sup-color-n4-2",e.SCN50="sup-color-n5-0",e.SCN51="sup-color-n5-1",e.SCN52="sup-color-n5-2",e.SCN60="sup-color-n6-0",e.SCN61="sup-color-n6-1",e.SCN62="sup-color-n6-2",e.SCN70="sup-color-n7-0",e.SCN71="sup-color-n7-1",e.SCN72="sup-color-n7-2",e.SCN80="sup-color-n8-0",e.SCN81="sup-color-n8-1",e.SCN82="sup-color-n8-2",e.SCN90="sup-color-n9-0",e.SCN91="sup-color-n9-1",e.SCN92="sup-color-n9-2"}(S||(S={}));var j,T="255,167,1",P="242,154,12",I="230,142,0",R="255,140,26",L="242,127,12",A="230,115,0",z="255,112,169",H="242,94,153",B="230,78,139",F="51,141,255",G="36,127,242",X="23,114,230",Y="41,169,255",V="27,156,242",U="14,143,230",$="66,213,101",W="52,201,88",q="40,189,76",J={"theme-color-0":"41,126,255","theme-color-1":"71,144,255","theme-color-2":"102,165,255","theme-color-3":"133,184,255","theme-color-4":"163,201,255","theme-color-5":"194,218,255","theme-color-6":"207,226,255","theme-color-7":"219,234,255","theme-color-8":"232,241,255","theme-color-9":"245,249,255","theme-color-10":"255,255,255","theme-color-n1":"27,112,242","theme-color-n2":"14,99,230","theme-color-t":" 33,35,38","theme-color-t1":"208,214,223","theme-color-t3":"163,174,191","theme-color-t5":"119,128,140;","theme-color-t7":"76,81,89","theme-color-s1-0":Y,"theme-color-s1-1":V,"theme-color-s1-2":U,"theme-color-s2-0":$,"theme-color-s2-1":W,"theme-color-s2-2":q,"theme-color-c":R,"theme-color-c1":L,"theme-color-c2":A},K={"theme-color-0":"30,184,108","theme-color-1":"40,199,119","theme-color-2":"51,214,133","theme-color-3":"123,219,171","theme-color-4":"41,224,183","theme-color-5":"161,230,195","theme-color-6":"181,235,208","theme-color-7":"201,240,221","theme-color-8":"223,245,234","theme-color-9":"245,250,247","theme-color-10":"255,255,255","theme-color-n1":"19,171,95","theme-color-n2":"9,158,84","theme-color-t":"33,38,35","theme-color-t1":"247,247,247","theme-color-t3":"163,191,177","theme-color-t5":"119,140,130","theme-color-t7":"76,89,83","theme-color-s1-0":F,"theme-color-s1-1":G,"theme-color-s1-2":X,"theme-color-s2-0":T,"theme-color-s2-1":P,"theme-color-s2-2":I,"theme-color-c":z,"theme-color-c1":H,"theme-color-c2":B},Z={"theme-color-0":"255,120,41","theme-color-1":"255,139,71","theme-color-2":"255,158,102","theme-color-3":"255,177,133","theme-color-4":"255,197,163","theme-color-5":"255,216,194","theme-color-6":"255,224,207","theme-color-7":"255,232,219","theme-color-8":"255,240,232","theme-color-9":"255,249,245","theme-color-10":"255,255,255","theme-color-n1":"242,109,31","theme-color-n2":"230,95,18","theme-color-t":" 38,35,33","theme-color-t1":"223,214,208","theme-color-t3":"191,173,163","theme-color-t5":"140,127,119;","theme-color-t7":"89,81,76","theme-color-s1-0":T,"theme-color-s1-1":P,"theme-color-s1-2":I,"theme-color-s2-0":"255,47,47","theme-color-s2-1":"242,31,33","theme-color-s2-2":"230,18,18","theme-color-c":F,"theme-color-c1":G,"theme-color-c2":X},Q={"theme-color-0":"255,41,112","theme-color-1":"255,71,133","theme-color-2":"255,102,153","theme-color-3":"255,133,173","theme-color-4":"255,163,194","theme-color-5":"255,194,214","theme-color-6":"255,207,223","theme-color-7":"255,219,231","theme-color-8":"255,232,240","theme-color-9":"255,245,248","theme-color-10":"255,255,255","theme-color-n1":"242,27,98","theme-color-n2":"230,14,86","theme-color-t":"38,33,34","theme-color-t1":"223,208,213","theme-color-t3":"191,163,172","theme-color-t5":"140,119,126","theme-color-t7":"89,76,80","theme-color-s1-0":z,"theme-color-s1-1":H,"theme-color-s1-2":B,"theme-color-s2-0":R,"theme-color-s2-1":L,"theme-color-s2-2":A,"theme-color-c":$,"theme-color-c1":W,"theme-color-c2":q},ee={"theme-color-0":"148,41,255","theme-color-1":"163,71,255","theme-color-2":"179,102,255","theme-color-3":"194,133,255","theme-color-4":"209,163,255","theme-color-5":"224,194,255","theme-color-6":"231,207,255","theme-color-7":"237,219,255","theme-color-8":"246,237,255","theme-color-9":"250,245,255","theme-color-10":"255,255,255","theme-color-n1":"134,27,242","theme-color-n2":"122,14,230","theme-color-t":" 35,33,38","theme-color-t1":"215,208,223","theme-color-t3":"177,163,191","theme-color-t5":"130,119,140;","theme-color-t7":"83,76,89","theme-color-s1-0":"231,71,255","theme-color-s1-1":"218,56,242","theme-color-s1-2":"205,41,230","theme-color-s2-0":Y,"theme-color-s2-1":V,"theme-color-s2-2":U,"theme-color-c":T,"theme-color-c1":P,"theme-color-c2":I},te={"theme-color-0":"255,219,41","theme-color-1":"255,224,71","theme-color-2":"255,230,102","theme-color-3":"255,235,133","theme-color-4":"255,240,163","theme-color-5":"255,245,194","theme-color-6":"255,247,207","theme-color-7":"240,240,240","theme-color-8":"245,245,245","theme-color-9":"250,250,250","theme-color-10":"191,112,0","theme-color-n1":"255,206,28","theme-color-n2":"255,191,15","theme-color-ys1":"166,97,0","theme-color-ys2":"217,126,0","theme-color-t":"26,25,22","theme-color-t1":"223,220,208","theme-color-t3":"191,186,163","theme-color-t5":"140,137,119;","theme-color-t7":"89,87,76","theme-color-a1":"224,224,224","theme-color-s1-0":R,"theme-color-s1-1":L,"theme-color-s1-2":A,"theme-color-s2-0":"120,105,255","theme-color-s2-1":"103,87,242","theme-color-s2-2":"87,71,230","theme-color-c":Y,"theme-color-c1":V,"theme-color-c2":U},ne=(D(j={},k.Blue,J),D(j,k.Orange,Z),D(j,k.Violet,ee),D(j,k.Pink,Q),D(j,k.Green,K),D(j,k.Yellow,te),j);function oe(){var e,t,n,o;return"undefined"!=typeof window&&null!==(e=null===(t=document)||void 0===t||null===(n=t.body)||void 0===n||null===(o=n.getAttribute("data-theme"))||void 0===o?void 0:o.replace("theme/",""))&&void 0!==e?e:k.Default}function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgb";return e?"rgb"===t?e:e.split(",").reduce((function(e,t){return e+Number(t).toString(16)}),""):""}function ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgb",o=ne[e];if(!o)return"";var i=o[t];return ie(i,n)}var re=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:o),se=function(){return Math.random().toString(36).substring(7).split("").join(".")},ce={INIT:"@@redux/INIT"+se(),REPLACE:"@@redux/REPLACE"+se(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+se()}};function le(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function de(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}const he=e=>({payload:e,type:"CONTEXT_MENU/SHOW_CONTEXT_MENU"}),me=e=>({payload:e,type:"CONTEXT_MENU/HIDE_CONTEXT_MENU"}),pe=Object(u.b)({positionX:0,positionY:0,type:"default",isShow:!1,callback:()=>{}})(),ue=e=>({payload:e,type:"CARTOON_ROLE/SHOW_ROLE"}),be=e=>({payload:e,type:"CARTOON_ROLE/SHOW_ROLE_DIALOG"}),ge=e=>({payload:e,type:"CARTOON_ROLE/SHOW_TIP_DIALOG"}),fe=e=>({payload:e,type:"CARTOON_ROLE/ROLE_INST"}),ye=e=>({payload:e,type:"CARTOON_ROLE/SHOW_OBB_ROLE"}),ve=Object(u.b)({isShowRole:!1,isShowRoleDialog:!1,isShowTipDialog:!1,isShowObbRole:!1,roleInst:s.InstrumentEnum.GAME,roleFrame:0})(),we=(e,t)=>{const n=document.getElementById("cartoon-role"),o=document.getElementById("role-dialog"),i=document.getElementById("cartoon-obb-role"),a=document.getElementById("speaker-left"),r=document.getElementById("speaker-right"),s=(e,t)=>{e.forEach(e=>{e.style.transitionDuration=t})},c=e=>{o.className=e?"role-dialog slided":"role-dialog",n.style.transform=e?"translateX(-50px)":"translateX(0)",a.style.transform=e?"translateX(-50px)":"translateX(0)",r.style.transform=e?"translateX(50px)":"translateX(0)"};t?(i.style.visibility=e?"inherit":"hidden",c(e)):(s([n,a,r],"200ms"),e?(c(!0),setTimeout(()=>{i.style.visibility="inherit",i.className="cartoon-obb-role pop-in",s([n,a,r],"0ms")},200)):(i.className="cartoon-obb-role pop-out",setTimeout(()=>{c(!1),setTimeout(()=>{i.style.visibility="hidden",s([n,a,r],"0ms")},200)},300)))},Ee=(e,t)=>{document.getElementById("cartoon-role").style.backgroundPositionX=`-${100*e}px`;document.getElementById("cartoon-obb-role").style.backgroundPositionX=`-${100*e}px`;document.getElementById("speaker-left").style.backgroundPositionX=`-${70*e}px`;document.getElementById("speaker-right").style.backgroundPositionX=`-${70*e}px`},xe=e=>({payload:e,type:"SECTION/SET_NOTE_PER_SECTIONBER"}),_e=Object(u.b)({section:6})(),Ne=e=>({payload:e,type:"midi/painter/set_bpm"}),Ce=e=>({payload:e,type:"midi/painter/set_inst"}),Oe=e=>({payload:e,type:"midi/painter/set_obb"}),Me=e=>({payload:e,type:"midi/painter/set_mode"}),ke=e=>({payload:e,type:"midi/painter/set_play_state"});var Se,De,je,Te;!function(e){e[e.NONE=0]="NONE",e[e.INST=1]="INST",e[e.OBB=2]="OBB",e[e.BPM=3]="BPM",e[e.MODE=4]="MODE"}(Se||(Se={})),function(e){e[e.COMPLEX=0]="COMPLEX",e[e.SIMPLE=1]="SIMPLE"}(De||(De={})),function(e){e[e.STATIC=0]="STATIC",e[e.DYNAMIC=1]="DYNAMIC"}(je||(je={})),function(e){e[e.PLAYING=1]="PLAYING",e[e.STOP=0]="STOP"}(Te||(Te={}));const Pe={[s.ObbEnum.NONE]:"midi/painter/obb/none",[s.ObbEnum.ROCK]:"midi/painter/obb/rock",[s.ObbEnum.FUNK]:"midi/painter/obb/funk",[s.ObbEnum.JAZZ]:"midi/painter/obb/jazz",[s.ObbEnum.DANCE]:"midi/painter/obb/dance",[s.ObbEnum.HIPHOP]:"midi/painter/obb/hiphop",[s.ObbEnum.LATIN]:"midi/painter/obb/latin"},Ie={mode:De.COMPLEX,bpm:s.BASE_BPM,inst:s.InstrumentEnum.GAME,obbName:s.ObbEnum.NONE,playState:Te.STOP};const Re=e=>({payload:e,type:"DOCS/SHOW_DOCS"}),Le=e=>({payload:e,type:"DOCS/SHOW_GUIDE"}),Ae=Object(u.b)({isShowDocs:!1,isShowGuide:!1})(),ze={lang:"zh"};const He=function e(t,n,o){var i;if("function"==typeof n&&"function"==typeof o||"function"==typeof o&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof n&&void 0===o&&(o=n,n=void 0),void 0!==o){if("function"!=typeof o)throw new Error("Expected the enhancer to be a function.");return o(e)(t,n)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var a=t,r=n,s=[],c=s,l=!1;function d(){c===s&&(c=s.slice())}function h(){if(l)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return r}function m(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(l)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return d(),c.push(e),function(){if(t){if(l)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,d();var n=c.indexOf(e);c.splice(n,1),s=null}}}function p(e){if(!le(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,r=a(r,e)}finally{l=!1}for(var t=s=c,n=0;n<t.length;n++){(0,t[n])()}return e}function u(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");a=e,p({type:ce.REPLACE})}function b(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(h())}return n(),{unsubscribe:t(n)}}})[re]=function(){return this},e}return p({type:ce.INIT}),(i={dispatch:p,subscribe:m,getState:h,replaceReducer:u})[re]=b,i}(function(e){for(var t=Object.keys(e),n={},o=0;o<t.length;o++){var i=t[o];"function"==typeof e[i]&&(n[i]=e[i])}var a,r=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:ce.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:ce.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+ce.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var o=!1,i={},s=0;s<r.length;s++){var c=r[s],l=n[c],d=e[c],h=l(d,t);if(void 0===h){var m=de(c,t);throw new Error(m)}i[c]=h,o=o||h!==d}return(o=o||r.length!==Object.keys(e).length)?i:e}}({contextMenu:(e=pe,t)=>{switch(t.type){case"CONTEXT_MENU/SHOW_CONTEXT_MENU":return e.merge(t.payload);case"CONTEXT_MENU/HIDE_CONTEXT_MENU":return e.merge(pe);default:return e}},docs:(e=Ae,t)=>{switch(t.type){case"DOCS/SHOW_DOCS":return e.merge(t.payload);case"DOCS/SHOW_GUIDE":return((e,t)=>{const n=document.getElementById("docs-guide-and-mask-container"),o=document.getElementById("docs-guide-container"),i=document.getElementById("guide-cartoon-role"),a=document.getElementById("guide-rest-element");t?n.style.visibility=e?"inherit":"hidden":e?(n.style.visibility="inherit",setTimeout(()=>{o.style.visibility="inherit"},200)):(i.className="guide-cartoon-role pop-out",setTimeout(()=>{i.style.visibility="hidden",a.className="guide-rest-element pop-out",setTimeout(()=>{n.style.visibility="hidden"},200)},200))})(t.payload.isShowGuide,t.payload.noAnimation),e.merge(t.payload);default:return e}},cartoonRole:(e=ve,t)=>{switch(t.type){case"CARTOON_ROLE/SHOW_ROLE":return(e=>{const t=document.getElementById("cartoon-role");e?"true"!==localStorage.getItem("has_visited_midi_guide")?setTimeout(()=>{t.style.visibility="inherit",t.className="cartoon-role pop-in-after-guide"},200):(t.style.visibility="inherit",t.className="cartoon-role pop-in"):(t.className="cartoon-role pop-out",setTimeout(()=>{t.style.visibility="hidden"},500))})(t.payload.isShowRole),e.merge(t.payload);case"CARTOON_ROLE/SHOW_ROLE_DIALOG":return(e=>{const t=document.getElementById("role-dialog"),n=document.getElementById("role-dialog-mask");e?(t.style.visibility="inherit",t.classList.remove("pop-out"),t.classList.add("pop-in"),n.style.visibility="inherit"):(t.classList.remove("pop-in"),t.classList.add("pop-out"),n.style.visibility="hidden",setTimeout(()=>{t.style.visibility="hidden"},200))})(t.payload.isShowRoleDialog),e.merge(t.payload);case"CARTOON_ROLE/SHOW_TIP_DIALOG":return(e=>{const t=document.getElementById("role-tip-dialog-container");e?setTimeout(()=>{t.style.visibility="inherit",t.className="role-tip-dialog-container pop-in",setTimeout(()=>{t.className="role-tip-dialog-container pop-out",setTimeout(()=>{t.style.visibility="hidden"},300)},3e3)},500):(t.className="role-tip-dialog-container pop-out",setTimeout(()=>{t.style.visibility="hidden"},300)),localStorage.setItem("has_visited_midi_guide","true")})(t.payload.isShowTipDialog),e.merge(t.payload);case"CARTOON_ROLE/ROLE_INST":return t.payload.roleInst!==e.roleInst&&((e,t)=>{const n=document.getElementById("cartoon-role"),o=`url('https://kn-cdn.codemao.cn/kitten/midi/docs/images/role_${e}.png')`;t?n.style.backgroundImage=o:(n.className="cartoon-role pop-out",setTimeout(()=>{n.style.backgroundImage=o,n.className="cartoon-role pop-in"},500))})(t.payload.roleInst,t.payload.noAnimation),e.merge(t.payload);case"CARTOON_ROLE/SHOW_OBB_ROLE":return e.isShowObbRole!==t.payload.isShowObbRole&&we(t.payload.isShowObbRole,t.payload.noAnimation),e.merge(t.payload);case"CARTOON_ROLE/ROLE_NEXT_FRAME":const n=(e.roleFrame+1)%10;return Ee(n,e.roleInst),e.merge({roleFrame:n});case"CARTOON_ROLE/ROLE_RESET_FRAME":return Ee(0,e.roleInst),e.merge({roleFrame:0});case"CARTOON_ROLE/RESET_ROLES":return document.getElementById("cartoon-role").style.backgroundImage='url("https://kn-cdn.codemao.cn/kitten/midi/docs/images/role_game.png")',we(!1,!0),e.merge({roleInst:s.InstrumentEnum.GAME,isShowObbRole:!1});default:return e}},section:(e=_e,t)=>{switch(t.type){case"SECTION/SET_NOTE_PER_SECTIONBER":return e.merge({section:t.payload});default:return e}},controlPanel:function(e=Ie,t){switch(t.type){case"midi/painter/set_bpm":return Object.assign(Object.assign({},e),{bpm:t.payload});case"midi/painter/set_inst":return Object.assign(Object.assign({},e),{inst:t.payload});case"midi/painter/set_obb":return Object.assign(Object.assign({},e),{obbName:t.payload});case"midi/painter/set_mode":return Object.assign(Object.assign({},e),{mode:t.payload});case"midi/painter/set_play_state":return Object.assign(Object.assign({},e),{playState:t.payload});case"midi/painter/reset_panel":return Object.assign(Object.assign({},Ie),{mode:e.mode});default:return e}},i18n:function(e=ze,t){switch(t.type){case"midi/lang":return Object.assign(Object.assign({},e),{lang:t.payload});default:return e}}}));function Be(){return He.getState().controlPanel.mode===De.COMPLEX?22:16}function Fe(){return He.getState().controlPanel.mode===De.COMPLEX?7:5}function Ge(){return He.getState().controlPanel.mode===De.COMPLEX?x:_}function Xe(){return He.getState().controlPanel.mode===De.COMPLEX?y:g}class Ye extends p.a.Layer{constructor(){super()}_createRect(e,t,n,o){const i=new p.a.Path;i.add(new p.a.Point(e,t),new p.a.Point(n,t),new p.a.Point(n,o),new p.a.Point(e,o)),i.closed=!0;const a="#"+ae(oe(),S.TC8,"16");return i.fillColor=new p.a.Color(a),i}createNoteRect(e,t,n,o){const i={top:0,left:e*n*8,bottom:Be()*o,right:t*n*8};let a=o*Fe();const r=[];for(;a<i.bottom;){const e=this._createRect(i.left,a,i.right,a+o);r.push(e),a+=o*Fe()}const s=new p.a.Group({children:r,data:{isNetGroup:!0}});return s.parent=this,s}clear(){this.removeChildren()}}class Ve extends p.a.Layer{constructor(){super()}_createNetWire(e,t,n,o){const i=new p.a.Path;i.add(new p.a.Point(e,t)),i.add(new p.a.Point(n,o));const a="#"+ae(oe(),S.TC7,"16");return i.strokeColor=new p.a.Color(a),i.strokeWidth=1,i.opacity=1,i}createNet(e,t,n,o){const i={top:0,left:e*n*8,bottom:Be()*o,right:t*n*8};let a=i.left,r=i.top;const s=[];let c=0;for(;a<i.right;){const e=this._createNetWire(a,i.top,a,i.bottom);if(c%8==0){const t="#"+ae(oe(),S.TC7,"16");e.strokeColor=new p.a.Color(t),e.strokeWidth=3,e.opacity=1}s.push(e),a+=n,c++}for(;r<i.bottom;){const e=this._createNetWire(i.left,r,i.right,r);s.push(e),r+=o}const l=new p.a.Group({children:s,data:{isNetGroup:!0}});return l.parent=this,l}clear(){this.removeChildren()}}class Ue extends p.a.Layer{constructor(){super(),this.fillColor=new p.a.Color("#ccc")}clear(){this.removeChildren()}}class $e extends p.a.Layer{constructor(){super(),this.createLine()}clear(){this.removeChildren()}moveLine(e){this.line.position.x+e<=1?this.line.position.x=1:this.line.position.x=this.line.position.x+e}createLine(){this.line&&this.line.remove(),this.line=new p.a.Path,this.line.add(new p.a.Point(0,0)),this.line.add(new p.a.Point(0,34*Be()));const e="#"+ae(oe(),S.TC0,"16");this.line.strokeColor=new p.a.Color(e),this.line.strokeWidth=1,this.line.opacity=1,this.addChild(this.line)}resetLine(){this.line.position.x=0}}const We=(e,t)=>{if(e===s.ObbEnum.NONE)return s.ObbEnum.NONE;const n=Object(s.judge_speed_state)(t),o=e.split("_")[0];return n===s.SpeedStateEnum.NORMAL?o:`${o}_${n}`},qe=e=>new p.a.Point(40*Math.floor(e.x/40)+20,34*Math.floor(e.y/34)+17);let Je;let Ke=!1;class Ze{constructor(e,t,n){this._offsetX=0;const o=new p.a.Point(0,0),i=new p.a.Point(t,e),a=new p.a.Rectangle(o,i);this.note=new p.a.Path.Rectangle(a,new p.a.Size(2,2)),this._color=(He.getState().controlPanel.mode===De.COMPLEX?w:E)[n%Fe()],this.note.fillColor=this._color.background,this._startLeft=this.note.bounds.left,this._startRight=this._startLeft+40-4,this.note.sendToBack()}getNote(){return this.note}setOffsetX(e){this._offsetX=this.note.position.x-e.x}getOffsetX(){return this._offsetX}checkCanScale(e){const t=this.note.bounds.top,n=this.note.bounds.right,o=new p.a.Path;o.add(new p.a.Point(n-40,t),new p.a.Point(n,t),new p.a.Point(n,t+34),new p.a.Point(n-40,t+34)),o.closed=!0;return o.contains(e)}scale(e){const t=((e,t)=>{const n=qe(t);return n.y=e.y,n})(this.note.bounds.center,e);if(!(t.x<=this._startLeft))if(t.x>this._startRight){const e=this.note.bounds.width,n=t.x+18-this.note.bounds.left,o=this.note.bounds.center.y,i=this.note.bounds.left;this.note.scale(n/e,1,new m.Point(i,o))}else{const e=this.note.bounds.width,t=36,n=this.note.bounds.center.y,o=this.note.bounds.left<this._startLeft?this.note.bounds.right:this.note.bounds.left;this.note.scale(t/e,1,new m.Point(o,n))}}moveTo(e){const t=new p.a.Point(e.x+this._offsetX,e.y);Math.ceil(this.note.bounds.width/40)%2==0&&(t.x-=20),this.note.bounds.center=t}moveToGrid(e){const t=qe(e);Math.ceil(this.note.bounds.width/40)%2==0&&(t.x-=20),this.note.bounds.center=t}remove(){this.note.remove()}setPosition(e){this.note.position=e,this._startLeft=this.note.bounds.left,this._startRight=this._startLeft+40-4}setSelected(){this.note.strokeWidth=2,this.note.strokeColor=this._color.border}setUnselected(){this.note.strokeWidth=0}setCopyColor(){this.note.fillColor=this._color.copy}setPlayColor(){this.note.fillColor=this._color.hover}setNormalColor(){this.note.fillColor=this._color.background}}class Qe{constructor(e,t,n){const o=new p.a.Point(0,0),i=new p.a.Point(t,e),a=new p.a.Rectangle(o,i);this.note=new p.a.Path.Rectangle(a,new p.a.Size(2,2));const r=oe();this.note.fillColor=new p.a.Color(`rgba(${ae(r,S.TC5,"rgb")}, 1)`),this.noteName=new p.a.PointText(o),this.noteName.fontFamily="MidiNote",this.noteName.fontSize="19px",this.noteName.content=Xe()[n],this.noteName.fillColor=new p.a.Color(`rgba(${ae(r,S.TT5,"rgb")}, 1)`),this.fontLoaded=Ke,this.noteName.visible=this.fontLoaded}hide(){this.note.visible=!1,this.noteName.visible=!1}show(){this.note.visible=!0,this.fontLoaded&&(this.noteName.visible=!0)}update(e,t){this.note.position=e,this.noteName.position.x=e.x,this.noteName.position.y=e.y+2,this.noteName.content=Xe()[t],this.fontLoaded||Ke&&(this.fontLoaded=!0,this.noteName.visible=!0)}remove(){this.note.remove(),this.noteName.remove()}sendToBack(){this.noteName.sendToBack(),this.note.sendToBack()}}let et,tt;class nt{constructor(){this.maxHistoryStep=30,this.timeData=[],this.playData={},this._playindex=0,this._playnote=[],this._isDataChange=!0,this._preventHistoryFlag=!1,this.type=De.COMPLEX,this._dataValidator={set:(e,t,n)=>(this.historyData.length>=this.maxHistoryStep&&this.historyData.shift(),this._preventHistoryFlag||this.historyData.push(Object(b.cloneDeep)(e)),e[t]=n,this._isDataChange=!0,!0)},this.data=new Proxy({},this._dataValidator),this.historyData=[],this.modeChangeData={}}setStartTime(e){this.timeData=[];const t=Object.keys(this.playData).sort((e,t)=>Number(e)<Number(t)?-1:1),n={};t.forEach(t=>{const o=Number(t),i=this.playData[Number(t)];if(o<e)return void i.forEach(e=>{const t=e.row;void 0===n[t]?"start"===e.type&&(n[t]=e.index):"end"===e.type&&(n[t]=void 0)});const a={time:o,data:i};this.timeData.push(a)}),Object.keys(n).forEach(e=>{if(void 0===n[e])return;const t=n[e];this.data[parseInt(e)][t].setPlayColor(),this._playnote.push(`${e}-${t}`)})}setData(e,t){this.data[t]=e}getDataByRow(e){return this.data[e]}getCurrentData(){return Object(b.cloneDeep)(this.data)}getDataIsChange(){return this._isDataChange}setDataIsChange(e){this._isDataChange=e}clearData(){Object.keys(this.data).length>0&&(this.historyData.length>=this.maxHistoryStep&&this.historyData.shift(),this.historyData.push(Object(b.cloneDeep)(this.data))),Object.keys(this.data).forEach(e=>{this.data[Number(e)].forEach(e=>{e.remove()})}),this.data=new Proxy({},this._dataValidator),this.modeChangeData={},this._isDataChange=!0}dataToToneNoteArr(){this.playData={},this.timeData=[];const e=[];return Object.keys(this.data).forEach(t=>{const n=this.data[Number(t)],o=function(e){return He.getState().controlPanel.mode===De.COMPLEX?e:f[e]}(Number(t));n.forEach((n,i)=>{const a=n.getNote().bounds,r=Math.floor(a.left/40),s=Math.round(a.width/40),c=a.left,l=a.right;this.playData[c]||(this.playData[c]=[]),this.playData[c].push({type:"start",row:Number(t),index:i}),this.playData[l]||(this.playData[l]=[]),this.playData[l].push({type:"end",row:Number(t),index:i}),e.push({name:String(o),time:r,duration:s})})}),this._isDataChange=!1,e}toneNoteArrToData(e,t){this.clearData(),t.forEach(t=>{const n=function(e,t){return t===De.COMPLEX?Object.values(x).indexOf(e):Object.values(_).indexOf(e)}(t.name,e),o=40*t.time,i=40*(t.time+t.duration),a=34*n,r=34*(n+1),s=new Ze(30,40*t.duration-4,n);s.setPosition(new paper.Point((o+i)/2,(a+r)/2)),this.data[n]||(this.data[n]=[]),this.data[n].push(s)}),this.type=e}play(e){const t=this.timeData[this._playindex];t&&e>t.time&&(t.data.forEach(e=>{const t=e.row,n=e.index;if("start"===e.type&&(this.data[t]&&this.data[t][n]&&this.data[t][n].setPlayColor(),this._playnote.push(`${t}-${n}`)),"end"===e.type){this.data[t]&&this.data[t][n]&&this.data[t][n].setNormalColor();const e=this._playnote.indexOf(`${t}-${n}`);-1!==e&&this._playnote.splice(e,1)}}),this._playindex++)}stop(){this._playnote.forEach(e=>{const t=e.split("-"),n=Number(t[0]),o=Number(t[1]);this.data[n]&&this.data[n][o]&&this.data[n][o].setNormalColor()}),this._playindex=0,this._playnote=[]}undo(){if(this.historyData.length>0){Object.keys(this.data).forEach(e=>{this.data[Number(e)].forEach(e=>{e.remove()})});const e=this.historyData.pop();if(!e||0===Object.keys(e).length)return this.data=new Proxy({},this._dataValidator),void(this._isDataChange=!0);const t={};Object.keys(e).forEach(n=>{const o=Number(n);e[o].forEach(e=>{const n=e.getNote().bounds,i=new Ze(n.height,n.width,o);t[o]||(t[o]=[]),i.setPosition(e.getNote().position),t[o].push(i)})}),this.data=new Proxy(t,this._dataValidator),this._isDataChange=!0}}clearHistory(){this.historyData=[]}setPreventHistoryFlag(e){this._preventHistoryFlag=e}addHistoryStack(e){this.historyData.length>=this.maxHistoryStep&&this.historyData.shift(),this.historyData.push(e)}modeDataChange(e){const t=this.data;Object.keys(this.data).forEach(e=>{this.data[Number(e)].forEach(e=>{e.remove()})});let n={};"c2s"===e&&this.type===De.SIMPLE||"s2c"===e&&this.type===De.COMPLEX?n=t:"c2s"===e?(Object.keys(t).forEach(e=>{const o=Number(e),i=v[o];if(void 0===i)this.modeChangeData[o]=t[o];else{const e=o-i;t[o].forEach(t=>{const n=t.getNote().position;n.y=n.y-34*e}),n[i]=t[o]}}),this.type=De.SIMPLE):(Object.keys(t).forEach(e=>{const o=Number(e),i=f[o];if(void 0!==i){const e=i-o;t[o].forEach(t=>{const n=t.getNote().position;n.y=n.y+34*e}),n[i]=t[o]}Object.keys(this.modeChangeData).forEach(e=>{const t=Number(e);n[t]=this.modeChangeData[t]})}),this.type=De.COMPLEX,this.modeChangeData={});const o={};Object.keys(n).forEach(e=>{const t=Number(e);n[t].forEach(e=>{const n=e.getNote().bounds,i=new Ze(n.height,n.width,t);o[t]||(o[t]=[]),i.setPosition(e.getNote().position),o[t].push(i)})}),this.data=new Proxy(o,this._dataValidator),this._isDataChange=!0,this.clearHistory()}}function ot(){return et||(et=new nt),et}class it{constructor(){this._noteGroup=[],this._noteRowIndex=[],this._offsetX=0}create(e,t){0!==this._noteGroup.length&&(this._noteGroup.forEach(e=>{e.setUnselected()}),this._noteGroup=[]);const n=[e.y,e.y+e.height],o=Math.floor(n[0]/34),i=Math.ceil(n[1]/34);for(let n=o;n<=i;n++){(ot().getDataByRow(n)||[]).forEach(o=>{if(e.intersects(o.getNote().bounds)){if(t&&!t.has(o))return;o.setSelected(),this._noteGroup.push(o),this._noteRowIndex.push(n)}})}}setCurrentNote(e,t){this._currentNote=e,this._offsetX=e.getNote().position.x-t.x}getCurrentNote(){return this._currentNote}dispose(){this._noteGroup.forEach(e=>{e.setUnselected()}),this._noteGroup=[],this._noteRowIndex=[],this._currentNote=void 0}getGroupData(){return this._noteGroup}getGroupRowIndex(){return this._noteRowIndex}setSelected(){this._noteGroup.forEach(e=>{e.setSelected()})}getBounds(){const e=this._noteGroup.map(e=>e.getNote()),t=new p.a.Group(e),n=t.bounds;return t.remove(),n}moveTo(e){if(this._currentNote){const t=this._currentNote.getNote().position,n=new p.a.Point(e.x+this._offsetX,e.y);this._currentNote.moveTo(n);const o=this._currentNote.getNote().position,i={x:o.x-t.x,y:o.y-t.y};this._noteGroup.forEach(e=>{const t=e.getNote().position;e!==this._currentNote&&(e.getNote().bounds.center=new p.a.Point(t.x+i.x,t.y+i.y))})}}getPath(){return this._noteGroup.map(e=>e.getNote())}bringToFront(){this._noteGroup.forEach(e=>e.getNote().bringToFront())}getOffsetX(){return this._offsetX}}function at(){return tt||(tt=new it),tt}class rt{constructor(e,t){this.handleMouseDrag=e=>{const t=e.point,n=this.project.view.bounds,o=this._prePosition.x-t.x,i=this._prePosition.y-t.y,a=He.getState().section.get("section"),r=this.project.viewController.getDeltaByDelta(n,o,i,8*a*40);this.project.viewController.move(-r.delta.x,-r.delta.y,r.xEnd),this._prePosition=new paper.Point(t.x+r.delta.x,t.y+r.delta.y)},this.project=e,this.switchCurrentHandles=t}handleMouseDown(e){this._prePosition=e.point,this.project.setMouseCursor("grabbing")}handleMouseMove(e){}handleMouseUp(e){this.project.setMouseCursor("grab")}dispose(){}}var st;!function(e){e[e.Selected=0]="Selected",e[e.UnSelected=1]="UnSelected",e[e.PasteSelected=2]="PasteSelected",e[e.Move=3]="Move",e[e.Hover=4]="Hover"}(st||(st={}));class ct extends p.a.Tool{constructor(){super(...arguments),this._effectListeners=[]}emitEffect(e){this._effectListeners.forEach(t=>{t.call(this,e)})}onEffect(e){this._effectListeners.includes(e)||this._effectListeners.push(e)}offEffect(e){const t=this._effectListeners.indexOf(e);t>-1&&this._effectListeners.splice(t,1)}}const lt=(e,t)=>{const n=ot().getDataByRow(t),o=[];n.forEach(t=>{t===e?t.remove():o.push(t)}),ot().setData(o,t)},dt=e=>{const t=e.getNote().bounds,n=t.left<0?0:t.left,o=t.top,i=t.right>=11520?11520:t.right,a=i-n,r=(i+n)/2,s=(t.bottom+o)/2,c=Math.floor(s/34);if(Number.isNaN(c)||Number.isNaN(a)||a<36||c<0||c>=Be())return;const l=new Ze(30,a,c);return l.setPosition(new p.a.Point(r,s)),l},ht=e=>{const t=Math.floor(e.getNote().position.y/34),n=ot().getDataByRow(t)||[],o=[];for(let t=0;t<n.length;t++){const i=n[t];i.getNote().bounds.intersects(e.getNote().bounds)?i.remove():o.push(i)}o.push(e),ot().setData(o,t)},mt=(e,t)=>{const n=s.MidiMao.create_plain_midi();if(n.header.setTempo(t),0===e.length)return Object.assign(Object.assign({},n.toJSON()),{duration:0});const o=Object(s.get_8n_time_by_bpm)(t),i={};e.forEach(e=>{i[e.name]||(i[e.name]=n.addTrack()),i[e.name].addNote({name:x[e.name],time:e.time*o,duration:e.duration*o})});let a=Math.round(n.duration/o);const r=a%8;return a=r>0?a-r+8:a,Object.assign(Object.assign({},n.toJSON()),{duration:a*o})},pt=e=>{const t=[],n=Object(s.get_8n_time_by_bpm)(e.header.tempos[0].bpm);return e.tracks.forEach(e=>e.notes.forEach(e=>t.push({name:e.name,time:Math.round(e.time/n),duration:e.duration/n}))),t},ut=(e,t,n)=>!(e<n.left||e>n.right)&&!(t<n.top||t>n.bottom);class bt{constructor(e,t){this.project=e,this.switchCurrentHandles=t}setCurrentGroup(e){this._currentGroup=e}handleMouseDown(e){}handleMouseMove(e){this._currentGroup&&this._currentGroup.moveTo(e.point)}handleMouseDrag(e){}handleMouseUp(e){if(!this._currentGroup)return;if(2===e.event.button)return this._currentGroup.dispose(),void this.switchCurrentHandles(st.Hover);const t=ot().getCurrentData();ot().setPreventHistoryFlag(!0),ot().addHistoryStack(t);const n=this._currentGroup;n.getGroupData().forEach(e=>{const t=dt(e);t&&ht(t)}),ot().setPreventHistoryFlag(!1),n.dispose(),this.switchCurrentHandles(st.Hover)}dispose(){this._currentGroup&&this._currentGroup.dispose()}}var gt,ft;!function(e){e.MOVE="MOVE",e.SCALE="SCALE"}(gt||(gt={}));class yt{constructor(e,t,n){this.x=0,this.y=0,this.project=e,this.switchCurrentHandles=t,this._currentNote=n}handleMouseDown(e){if(!this._currentNote)return;this.x=0,this.y=0;const t=e.point;this._startPosition=t,this._currentNote.setOffsetX(t),this._currentNote.getNote().contains(t)||(this._currentNote.setUnselected(),this._currentNote=void 0,this.switchCurrentHandles(st.Hover)),this._currentData=ot().getCurrentData()}handleMouseDrag(e){const t=e.point,n=this.project.view.bounds,o=ut(t.x,t.y,n);if(!this._currentNote)return;let i=void 0;if(!o){const e=He.getState().section.get("section"),o=this.project.viewController.getDeltaByDelta(n,t.x<n.left?t.x-n.left:t.x>n.right?t.x-n.right:0,t.y<n.top?t.y-n.top:t.y>n.bottom?t.y-n.bottom:0,8*e*40);i=o.delta.y||Math.abs(o.delta.x)>.5,!i&&this._time&&(clearInterval(this._time),this._time=void 0)}if(this.y=t.y,i&&!this._time&&(this.x=t.x,this.y=t.y,this._time=setInterval(()=>{const e=He.getState().section.get("section"),t=this.project.view.bounds,n=this.project.viewController.getDeltaByDelta(t,this.x<t.left?this.x-t.left:this.x>t.right?this.x-t.right:0,this.y<t.top?this.y-t.top:this.y>t.bottom?this.y-t.bottom:0,8*e*40);if(this.x+=Math.abs(n.delta.x)>.5?20*(n.delta.x>0?1:-1):0,this.y+=n.delta.y,this._itemOperatorMode===gt.SCALE&&this._currentNote&&this._currentNote.scale(new paper.Point(this.x,this.y)),this._itemOperatorMode===gt.MOVE&&this._currentNote){const e=new paper.Point(this.x,this.y);this.project.shadowNoteGroup.moveTo(e),this._currentNote.moveTo(e),this._currentNote.getNote().bringToFront()}this.project.viewController.move(-n.delta.x,-n.delta.y,n.xEnd)},100)),o&&this._time&&(clearInterval(this._time),this._time=void 0),i&&(t.x=this.x),!this._itemOperatorMode){const e=this._currentNote.checkCanScale(this._startPosition),n=qe(this._startPosition),o=qe(t);if(n.x===o.x&&n.y===o.y)return;if(n.x!==o.x&&e)this._itemOperatorMode=gt.SCALE;else{this._itemOperatorMode=gt.MOVE;const e=this._currentNote?this._currentNote.getOffsetX():0;this.project.shadowNoteGroup.create([this._currentNote.getNote()],this._currentNote,e)}}if(this._itemOperatorMode!==gt.SCALE)return this._itemOperatorMode===gt.MOVE?(this.project.shadowNoteGroup.moveTo(t),this._currentNote.moveTo(t),void this._currentNote.getNote().bringToFront()):void 0;this._currentNote.scale(t)}handleMouseMove(e){}handleMouseUp(e){if(!this._currentNote)return;if(this._time&&(clearInterval(this._time),this._time=void 0),!this._itemOperatorMode){if(2===e.event.button)return this.project.contextMenuGroup.create([this._currentNote]),He.dispatch(he({positionY:e.point.y,positionX:e.point.x,type:"item",isShow:!0,callback:()=>{this.switchCurrentHandles(st.Hover)}})),void e.preventDefault();if(this._currentNote.getNote().contains(e.point)){const e=Math.floor(this._startPosition.y/34);lt(this._currentNote,e),this._itemOperatorMode=void 0,this._currentNote=void 0,this.switchCurrentHandles(st.Hover)}return}ot().setPreventHistoryFlag(!0),ot().addHistoryStack(this._currentData);const t=Math.floor(this._startPosition.y/34);lt(this._currentNote,t);const n=dt(this.project.shadowNoteGroup.getGroupData()[0]||this._currentNote);n&&ht(n),ot().setPreventHistoryFlag(!1),this.project.shadowNoteGroup.dispose(),this._itemOperatorMode=void 0,this.switchCurrentHandles(st.Hover)}dispose(){if(this._time&&(clearInterval(this._time),this._time=void 0),this._itemOperatorMode&&this._currentNote){const e=Math.floor(this._startPosition.y/34);lt(this._currentNote,e);const t=dt(this.project.shadowNoteGroup.getGroupData()[0]||this._currentNote);t&&ht(t),this.project.shadowNoteGroup.dispose()}else this._currentNote&&this._currentNote.setUnselected()}}class vt{constructor(e,t,n){this.x=0,this.y=0,this.project=e,this.switchCurrentHandles=t,this._currentGroup=n,this.project.shadowNoteGroup.create(n.getPath(),n.getCurrentNote(),n.getOffsetX())}handleMouseDown(e){this._isDragging=!1,this.x=0,this.y=0,this._currentGroup&&this._currentGroup.bringToFront(),this._currentData=ot().getCurrentData()}handleMouseDrag(e){const t=e.point,n=this.project.view.bounds,o=ut(t.x,t.y,n);let i=void 0;if(!o){const e=He.getState().section.get("section"),o=this.project.viewController.getDeltaByDelta(n,t.x<n.left?t.x-n.left:t.x>n.right?t.x-n.right:0,t.y<n.top?t.y-n.top:t.y>n.bottom?t.y-n.bottom:0,8*e*40);i=o.delta.y||Math.abs(o.delta.x)>.5,!i&&this._time&&(clearInterval(this._time),this._time=void 0)}this.y=t.y,i&&!this._time&&(this.x=t.x,this.y=t.y,this._time=setInterval(()=>{const e=He.getState().section.get("section"),t=this.project.view.bounds,n=this.project.viewController.getDeltaByDelta(t,this.x<t.left?this.x-t.left:this.x>t.right?this.x-t.right:0,this.y<t.top?this.y-t.top:this.y>t.bottom?this.y-t.bottom:0,8*e*40);if(this.x+=Math.abs(n.delta.x)>.5?20*(n.delta.x>0?1:-1):0,this.y+=n.delta.y,this._currentGroup){const e=new paper.Point(this.x,this.y);this._isDragging=!0,this.project.shadowNoteGroup.moveTo(e),this._currentGroup.moveTo(e)}this.project.viewController.move(-n.delta.x,-n.delta.y,n.xEnd)},100)),o&&this._time&&(clearInterval(this._time),this._time=void 0),i&&(t.x=this.x),this._currentGroup&&(this._isDragging=!0,this.project.shadowNoteGroup.moveTo(t),this._currentGroup.moveTo(t))}handleMouseMove(e){}handleMouseUp(e){if(this._time&&(clearInterval(this._time),this._time=void 0),!this._currentGroup)return;const t=this._currentGroup;if(!this._isDragging)return void(2===e.event.button?(this.project.contextMenuGroup.create(t.getGroupData()),this.project.shadowNoteGroup.dispose(),He.dispatch(he({positionY:e.point.y,positionX:e.point.x,type:"group",isShow:!0,callback:()=>{this.switchCurrentHandles(st.Hover)}})),e.preventDefault()):(t.dispose(),this.project.shadowNoteGroup.getGroupData().forEach(e=>{const t=e.getNote().bounds.center.y,n=Math.floor(t/34),o=ot().getDataByRow(n),i=o.indexOf(e);-1!==i&&(o.splice(i,1),e.remove())}),this.project.shadowNoteGroup.dispose(),this.switchCurrentHandles(st.Hover)));const n=t.getBounds(),o=new Set,i=this.project.shadowNoteGroup.getGroupData();ot().setPreventHistoryFlag(!0),ot().addHistoryStack(this._currentData),t.getGroupData().forEach((e,n)=>{lt(e,t.getGroupRowIndex()[n]);const a=dt(i[n]);a&&(ht(a),o.add(a))}),this.project.shadowNoteGroup.dispose(),ot().setPreventHistoryFlag(!1),t.dispose(),this._isDragging=!1,this.switchCurrentHandles(st.Hover),t.create(n,o)}dispose(){this._time&&(clearInterval(this._time),this._time=void 0);const e=this._currentGroup;if(this._isDragging&&e){const t=new Set,n=this.project.shadowNoteGroup.getGroupData();e.getGroupData().forEach((o,i)=>{lt(o,e.getGroupRowIndex()[i]);const a=dt(n[i]);a&&(ht(a),t.add(a))})}else this._currentGroup&&this._currentGroup.dispose();this.project.shadowNoteGroup.dispose(),this._isDragging=!1}}class wt{constructor(e,t){this.project=e,this.switchCurrentHandles=t}setCurrentNote(e){this._currentSelector=new yt(this.project,this.switchCurrentHandles,e),e.setSelected()}setCurrentGroup(e){this._currentSelector=new vt(this.project,this.switchCurrentHandles,e)}handleMouseDown(e){this._currentSelector&&this._currentSelector.handleMouseDown(e)}handleMouseDrag(e){this._currentSelector&&this._currentSelector.handleMouseDrag(e)}handleMouseMove(e){}handleMouseUp(e){this._currentSelector&&this._currentSelector.handleMouseUp(e)}dispose(){this._currentSelector&&(this._currentSelector.dispose(),this._currentSelector=void 0)}}class Et{constructor(e,t,n){const{zoom:o}=e.view;this.project=e,this.rectangle=new p.a.Path.Rectangle(t,n),this.rectangle.data.creator="SelectTool",this.rectangle.strokeWidth=1/o,this.rectangle.strokeColor=new p.a.Color("rgba(102, 165, 255, 1)"),this.rectangle.fillColor=new p.a.Color("rgba(41, 126, 255, 0.1)"),e.workLayer.addChild(this.rectangle)}destroy(){this.rectangle.remove()}getBounds(){return this.rectangle.bounds}}!function(e){e.DrawNote="DRAW_NOTE",e.DrawSelector="DRAW_SELECTOR"}(ft||(ft={}));class xt{constructor(e,t){this.x=0,this.y=0,this.project=e,this.switchCurrentHandles=t}handleMouseDown(e){this._initializeState(),this._startPosition=e.point,this.x=0,this.y=0}handleMouseDrag(e){const t=e.point,n=this.project.view.bounds,o=ut(t.x,t.y,n);let i=void 0;if(!o){const e=He.getState().section.get("section"),o=this.project.viewController.getDeltaByDelta(n,t.x<n.left?t.x-n.left:t.x>n.right?t.x-n.right:0,t.y<n.top?t.y-n.top:t.y>n.bottom?t.y-n.bottom:0,8*e*40);i=o.delta.y||Math.abs(o.delta.x)>.5,!i&&this._time&&(clearInterval(this._time),this._time=void 0)}if(this.y=t.y,i&&!this._time&&(this.x=t.x,this.y=t.y,this._time=setInterval(()=>{const t=He.getState().section.get("section"),n=this.project.view.bounds,o=this.project.viewController.getDeltaByDelta(n,this.x<n.left?this.x-n.left:this.x>n.right?this.x-n.right:0,this.y<n.top?this.y-n.top:this.y>n.bottom?this.y-n.bottom:0,8*t*40);if(this.x+=Math.abs(o.delta.x)>.5?20*(o.delta.x>0?1:-1):0,this.y+=o.delta.y,this._currentNote&&this._currentNote.scale(new p.a.Point(this.x,this.y)),this.enclosureRectangle){this.enclosureRectangle.destroy();const t=new p.a.Point(.5,.5),n=new p.a.Point(this.x,this.y);this.enclosureRectangle=new Et(this.project,e.downPoint.add(t),n.add(t))}this.project.viewController.move(-o.delta.x,-o.delta.y,o.xEnd)},100)),o&&this._time&&(clearInterval(this._time),this._time=void 0),i&&(t.x=this.x),!this._currentMode){if(Math.abs(this._startPosition.x-t.x)<10&&Math.abs(this._startPosition.y-t.y)<10)return;if(Math.abs(this._startPosition.x-t.x)<2*Math.abs(this._startPosition.y-t.y))this._currentMode=ft.DrawSelector;else{this._currentMode=ft.DrawNote;const e=qe(this._startPosition),t=Math.floor(this._startPosition.y/34);this._currentNote=new Ze(30,36,t),this._currentNote.setPosition(e),s.MidiMao.play_note(He.getState().controlPanel.inst,Ge()[t])}}if(this._currentMode!==ft.DrawNote)if(this._currentMode!==ft.DrawSelector);else{this.enclosureRectangle&&this.enclosureRectangle.destroy();const t=new p.a.Point(.5,.5);this.enclosureRectangle=new Et(this.project,e.downPoint.add(t),e.point.add(t))}else{if(!this._currentNote)return;this._currentNote.scale(e.point)}}handleMouseMove(e){}handleMouseUp(e){if(this._time&&(clearInterval(this._time),this._time=void 0),2!==e.event.button||(this.project.contextMenuGroup.create([]),He.dispatch(he({positionY:e.point.y,positionX:e.point.x,type:"default",isShow:!0,callback:()=>{this.switchCurrentHandles(st.Hover)}})),e.preventDefault(),this._currentMode===ft.DrawNote))if(this._currentMode&&this._currentMode!==ft.DrawNote){if(this._currentMode===ft.DrawSelector){if(this.enclosureRectangle){const e=this.enclosureRectangle;at().create(e.rectangle.bounds),e.destroy(),this.switchCurrentHandles(st.Hover)}this.enclosureRectangle=void 0}}else{const t=e.point;if(t.x===this._startPosition.x){const e=qe(t),n=Math.floor(e.y/34);this._currentNote=new Ze(30,36,n),this._currentNote.setPosition(e),s.MidiMao.play_note(He.getState().controlPanel.inst,Ge()[n])}if(this._currentNote){const e=dt(this._currentNote);e&&ht(e),this._currentNote.remove(),this._currentNote=void 0,this._currentMode=void 0}this.switchCurrentHandles(st.Hover)}}_initializeState(){this._currentNote=void 0}dispose(){if(this._time&&(clearInterval(this._time),this._time=void 0),this._currentNote){const e=dt(this._currentNote);e&&ht(e),this._currentNote.remove(),this._currentMode=void 0}this.enclosureRectangle&&(this.enclosureRectangle.destroy(),this.enclosureRectangle=void 0),this._currentMode=void 0}}class _t{constructor(e,t){this.project=e,this.switchCurrentHandles=t,this.isShow=!0}handleMouseDown(e){}handleMouseUp(e){}handleMouseDrag(e){}handleMouseMove(e){const t=e.point;if(!ut(t.x,t.y,m.view.bounds)||this.project.player.getIsPlaying()||He.getState().docs.get("isShowGuide"))return void(this.isShow&&this.hideHoverNote());!this.isShow&&this.showHoverNote();const n=qe(t),o=Math.floor(n.y/34);this._currentNote?this._currentNotePosition!==n&&(this._currentNote.update(n,o),this._currentNotePosition=n):(this._currentNote=new Qe(30,36,o),this._currentNote.sendToBack(),this._currentNote.update(n,o),this._currentNotePosition=n)}dispose(){var e;this.isShow=!1,null===(e=this._currentNote)||void 0===e||e.remove(),this._currentNote=void 0,this._currentNotePosition=void 0}hideHoverNote(){this.isShow=!1,this._currentNote&&this._currentNote.hide()}showHoverNote(){this.isShow=!0,this._currentNote&&this._currentNote.show()}sendToBack(){this._currentNote&&this._currentNote.sendToBack()}}class Nt extends ct{constructor(e){super(),this._isMetaPress=!1,this._isEnable=!1,this.project=e,this.currentToolHandle=this.currentToolHandle=new _t(this.project,this.switchCurrentHandles.bind(this)),this._initTool()}switchCurrentHandles(e){return this.currentToolHandle&&this.currentToolHandle.dispose(),e===st.Selected?(this.project.setMouseCursor("default"),void(this.currentToolHandle=new wt(this.project,this.switchCurrentHandles.bind(this)))):e===st.UnSelected?(this.project.setMouseCursor("default"),void(this.currentToolHandle=new xt(this.project,this.switchCurrentHandles.bind(this)))):e===st.PasteSelected?(this.project.setMouseCursor("default"),void(this.currentToolHandle=new bt(this.project,this.switchCurrentHandles.bind(this)))):e===st.Move?(this.project.setMouseCursor("grab"),void(this.currentToolHandle=new rt(this.project,this.switchCurrentHandles.bind(this)))):e===st.Hover?(this.project.setMouseCursor("default"),void(this.currentToolHandle=new _t(this.project,this.switchCurrentHandles.bind(this)))):void 0}getCurrentToolHandle(){return this.currentToolHandle}copy(){const e=this.project.contextMenuGroup.getNoteArr();0!==e.length&&(this.project.copyPasteMenuGroup.create(e),this.switchCurrentHandles(st.Hover))}paste(e){at().dispose();const t=this.project.copyPasteMenuGroup.getPathArr();this.project.shadowNoteGroup.create(t);const n=this.project.shadowNoteGroup;n.moveTo(e),this.switchCurrentHandles(st.PasteSelected),this.currentToolHandle instanceof bt&&this.currentToolHandle.setCurrentGroup(n)}delete(){this.project.contextMenuGroup.getNoteArr().forEach(e=>{const t=e.getNote().bounds.center.y,n=Math.floor(t/34),o=ot().getDataByRow(n),i=o.indexOf(e);-1!==i&&(o.splice(i,1),e.remove())}),this.switchCurrentHandles(st.Hover)}deleteAll(){ot().clearData(),this.switchCurrentHandles(st.Hover)}setEnable(e){this._isEnable=e}isPlayState(){return He.getState().controlPanel.playState===Te.PLAYING&&(C().stop(),this.project.player.pausePlay(),He.dispatch({payload:null,type:"CARTOON_ROLE/ROLE_RESET_FRAME"}),He.dispatch(ke(Te.STOP)),!0)}_initTool(){this.on("keydown",e=>{if(this._isEnable&&!this.isPlayState())if("space"===e.key&&this.currentToolHandle instanceof _t&&this.switchCurrentHandles(st.Move),"meta"!==e.key&&"control"!==e.key||(this._isMetaPress=!0),"c"!==e.key)if("v"!==e.key){if("z"!==e.key)return"backspace"===e.key?(this.project.contextMenuGroup.create(at().getGroupData()),void this.delete()):void 0;this.currentToolHandle instanceof _t&&(Je("midi音乐-撤销"),this._isMetaPress&&ot().undo(),this.currentToolHandle.sendToBack())}else this._isMetaPress&&this.paste(this.project.view.center);else this._isMetaPress&&(this.project.contextMenuGroup.create(at().getGroupData()),this.copy())}),this.on("keyup",e=>{this._isEnable&&(this.isPlayState()||("space"===e.key&&this.currentToolHandle instanceof rt&&this.switchCurrentHandles(st.Hover),"meta"!==e.key&&"control"!==e.key||(this._isMetaPress=!1)))}),this.on("mousedown",e=>{if(this._isEnable&&!this.isPlayState()){if(this.currentToolHandle instanceof _t){if(He.getState().contextMenu.get("isShow"))return;const t=e.point,n=qe(t),o=Math.floor(n.y/34),i=ot().getDataByRow(o),a=i&&i.find(e=>e.getNote().contains(n));if(a){this.switchCurrentHandles(st.Selected);const e=at();e.getGroupData().some(e=>e===a)?this.currentToolHandle instanceof wt&&(e.setCurrentNote(a,t),this.currentToolHandle.setCurrentGroup(e)):(e.dispose(),this.currentToolHandle instanceof wt&&this.currentToolHandle.setCurrentNote(a))}else{this.switchCurrentHandles(st.UnSelected);const t=at();if(t.getGroupData().length>0)return t.dispose(),this.switchCurrentHandles(st.Hover),void(2===e.event.button&&(this.project.contextMenuGroup.create([]),He.dispatch(he({positionY:e.point.y,positionX:e.point.x,type:"default",isShow:!0,callback:()=>{}})),e.preventDefault()))}}this.currentToolHandle&&this.currentToolHandle.handleMouseDown(e)}}),this.on("mousedrag",e=>{this._isEnable&&(this.isPlayState()||this.currentToolHandle&&this.currentToolHandle.handleMouseDrag(e))}),this.on("mousemove",e=>{if(this._isEnable&&!He.getState().contextMenu.get("isShow")&&this.currentToolHandle){if("canvas"!==e.event.path[0].id)return void this.currentToolHandle.dispose();this.currentToolHandle.handleMouseMove(e)}}),this.on("mouseup",e=>{this._isEnable&&(this.isPlayState()||this.currentToolHandle&&this.currentToolHandle.handleMouseUp(e))})}}class Ct{constructor(){this._noteArr=[]}create(e){this._noteArr=e}getNoteArr(){return this._noteArr}clear(){this._noteArr=[]}}class Ot{constructor(){this._pathArr=[]}create(e){this._pathArr=[],e.forEach(e=>{this._pathArr.push(e.getNote().clone({insert:!1}))})}getPathArr(){return this._pathArr}clear(){this._pathArr=[]}}class Mt{constructor(e){this._noteGroup=[],this._currentNote=void 0,this._deltaX=0,this.project=e}create(e,t,n){if(e.forEach(e=>{const n=e.bounds,o=Math.floor(n.y/34),i=new Ze(n.height,n.width,o);if(i.setPosition(n.center),i.setCopyColor(),this._noteGroup.push(i),t)e===t.getNote()&&(this._currentNote=i);else if(this._currentNote){const e=i.getNote().bounds,t=this._currentNote.getNote().bounds;e.left<t.left?this._currentNote=i:e===t&&(this._currentNote=e.top<t.top?i:this._currentNote)}else this._currentNote=i}),this._currentNote){const e=this._currentNote.getNote().bounds;this._deltaX=e.x-e.left}this._deltaX=n||this._deltaX}getGroupData(){return this._noteGroup}dispose(){let e=0;this._noteGroup.forEach(t=>{t.remove(),e=Math.max(e,t.getNote().bounds.right)});const t=this.project.view.bounds.right;e<11520&&e>t&&this.project.viewController.move(t-e,0),this._noteGroup=[],this._currentNote=void 0}moveTo(e){if(this._currentNote){const t=this._currentNote.getNote().position,n=new p.a.Point(e.x+this._deltaX,e.y);this._currentNote.moveToGrid(n);const o=this._currentNote.getNote().position,i={x:o.x-t.x,y:o.y-t.y};this._noteGroup.forEach(e=>{const t=e.getNote().position;e!==this._currentNote&&(e.getNote().bounds.center=new p.a.Point(t.x+i.x,t.y+i.y))})}}}class kt{constructor(e){this._scrollXMethod=(e,t)=>{},this._scrollYMethod=e=>{},this.getDeltaByDelta=(e,t,n,o)=>{var i;const a=34*Be(),r=new p.a.Point(t,n),s=(null===(i=document.getElementById("right-scrollbar"))||void 0===i?void 0:i.clientHeight)||1/0;let c="default";return e.left+r.x<0&&(r.x=0-e.left,c="start"),e.right+r.x>=o&&(r.x=o-e.right,c="end"),e.top+r.y<0&&(r.y=0-e.top),e.y+r.y>=a-s&&(r.y=a-s-e.y),{delta:r,xEnd:c}},this.project=e}registerScrollXMethod(e){this._scrollXMethod=e}registerScrollYMethod(e){this._scrollYMethod=e}unRegisterScrollXMethod(){this._scrollXMethod=(e,t)=>{}}unRegisterScrollYMethod(){this._scrollYMethod=e=>{}}move(e,t,n){e&&this._scrollXMethod(e,n||"default"),t&&this._scrollYMethod(t)}reset(){this.resetX(),this.resetY()}resetY(){const e=this.project.view.bounds;this._scrollYMethod(e.top)}resetX(){const e=this.project.view.bounds;this._scrollXMethod(e.left,"default")}toEnd(e){const t=this.project.view.bounds;this._scrollXMethod(t.left,"default"),this._scrollYMethod(t.top),this._scrollXMethod(-(e-t.width),"end")}}class St{constructor(e){this._RAFID=0,this._isPlaying=!1,this._lastTime=0,this._cancelAutoMove=!1,this._position=0,this.start_position=0,this.start_view_position=0,this.getStartViewPosition=()=>{const e=this.project.view.bounds;if(this.start_position>e.left&&this.start_position<e.right)return e.left;const t=this.start_position-this.project.view.viewSize.width/2,n=40*He.getState().section.get("section")*8-31-this.project.view.bounds.width;return t<0?0:Math.min(t,n)},this.getViewStep=e=>{const t=He.getState().section.get("section"),n=this.project.view.bounds.right;return Math.min(40*t*8-1-n,e)},this._isPlaying=!1,this.project=e,this._position=0}startPlay(e,t){this.project.lineLayer.line.bringToFront(),this._lastTime=performance.now();const n=40/(1e3*e);this.start_position=this.project.lineLayer.line.position.x;const o=this.start_position/40;ot().setStartTime(2+40*o),this.start_view_position=this.getStartViewPosition(),this.project.viewController.reset(),this.project.viewController.move(-this.start_view_position,0),this._cancelAutoMove=!1,this._isPlaying=!0,this._play(n,t-o),this._position=this.start_position,document.getElementById("section-anchor").style.visibility="hidden"}_play(e,t){this._RAFID=requestAnimationFrame(()=>{const n=this.project.view.bounds,o=performance.now(),i=(o-this._lastTime)*e;if(this._lastTime=o,this._cancelAutoMove)this.project.lineLayer.moveLine(i);else if(Math.abs(this._position-(n.left+n.right)/2)<St.view_center_area){const e=this.getViewStep(i);e<=0?this.project.lineLayer.moveLine(i):this.project.viewController.move(-e,0)}else if(this._position<(n.left+n.right)/2-St.view_center_area)this.project.lineLayer.moveLine(i);else if(this._position>(n.left+n.right)/2+St.view_center_area){const e=this.getViewStep(i);e<=0?this.project.lineLayer.moveLine(i):(this.project.viewController.move(-e/St.speed_on_right_side*(St.speed_on_right_side+1),0),this.project.lineLayer.moveLine(-e/St.speed_on_right_side))}this._position+=i,ot().play(this._position),this._play(e,t)})}pausePlay(){void 0!==this._RAFID&&(cancelAnimationFrame(this._RAFID),this._isPlaying=!1,ot().stop(),this.project.lineLayer.resetLine(),this.project.lineLayer.line.position.x=this.start_position,this.project.viewController.reset(),this.project.viewController.move(-this.start_view_position,0),document.getElementById("section-anchor").style.visibility="inherit")}reset(){document.getElementById("section-anchor").style.transform="translateX(0px)",this._RAFID=0,this._isPlaying=!1,this._lastTime=0;const e=this.project.view.bounds.left;this.project.viewController.move(e,0),this.project.lineLayer.resetLine(),this._position=0,this._cancelAutoMove=!1}getIsPlaying(){return this._isPlaying}setCancelAutoMove(e){this._cancelAutoMove=e}}let Dt;St.view_center_area=10,St.speed_on_right_side=3;class jt extends p.a.Project{constructor(e){super(e),this.currentSection=0,this.backgroundLayer=new Ye,this.gridLayer=new Ve,this.workLayer=new Ue,this.addLayer(this.backgroundLayer),this.addLayer(this.gridLayer),this.addLayer(this.workLayer),this.workLayer.activate(),this.workLayer.bringToFront(),this.tool=new Nt(this),this.tool.activate(),this.player=new St(this),this.viewController=new kt(this),this.drawNetAndBackgroundNote(6),this.lineLayer=new $e,this.contextMenuGroup=new Ct,this.copyPasteMenuGroup=new Ot,this.shadowNoteGroup=new Mt(this),window.paper=p.a}resetProject(e){this.workLayer.clear(),this.gridLayer.clear(),this.backgroundLayer.clear(),this.lineLayer.createLine(),this.currentSection=0,this.activate(),this.tool.activate(),this.tool.setEnable(!0),this.tool.switchCurrentHandles(st.Hover),He.dispatch(xe(e)),this.drawNetAndBackgroundNote(e),this.player.reset(),this.viewController.reset(),this.contextMenuGroup.clear(),this.copyPasteMenuGroup.clear(),this.shadowNoteGroup.dispose(),this.workLayer.activate()}drawNetAndBackgroundNote(e){this.gridLayer.createNet(this.currentSection,e,40,34),this.backgroundLayer.createNoteRect(this.currentSection,e,40,34),this.currentSection=e,this.workLayer.activate()}setMouseCursor(e){this.view.element&&(this.view.element.style.cursor=e)}}function Tt(){if(Dt)return Dt}const Pt=Object(i.forwardRef)((e,t)=>{const n=Object(i.useRef)(null),o=Object(i.useRef)(0),[s,c]=Object(i.useState)(!1),l=Object(r.useDispatch)(),d=Object(i.useRef)(e=>{}),h=Object(i.useRef)(!1);Object(i.useEffect)(()=>(document.addEventListener("pointermove",p),document.addEventListener("pointerup",b),()=>{document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",b)})),Object(i.useEffect)(()=>{const t=n.current;if(t&&t.parentElement){let n=(t.parentElement.getBoundingClientRect().width-t.getBoundingClientRect().width-8)*e.rateX;n=n<2?0:n,t.style.transform=`translateX(${n}px)`}},[e.rateX]),Object(i.useImperativeHandle)(t,()=>({positionXHandler:m,setPointerMoveCallback:u}));const m=(t,o)=>{const i=Tt();if(!i)return;const a=!i.player.getIsPlaying();if(n.current&&document&&document.defaultView){const i=document.defaultView.getComputedStyle(n.current,null).transform,r=parseFloat(i.substring(6).split(",")[4])||0,s=f(r,-t,o);s.isExceed&&e.section<36?a&&l(xe(Math.min(e.section+2,36))):n.current.style.transform=`translateX(${s.position}px)`}},p=t=>{if(s&&o){const i=t.clientX-o.current;if(n.current&&document&&document.defaultView){const a=document.defaultView.getComputedStyle(n.current,null).transform,r=parseFloat(a.substring(6).split(",")[4]),s=g(r,i);o.current=t.clientX,s.isExceed&&e.section<36&&!h.current?(l(xe(Math.min(e.section+2,36))),h.current=!0):(n.current.style.transform=`translateX(${s.position}px)`,d.current(s.rate))}}},u=e=>{d.current=e},b=e=>{var t;if(s){const i=e.clientX-o.current,a=document.defaultView.getComputedStyle(n.current,null).transform,r=parseFloat(a.substring(6).split(",")[4]),s=g(r,i);d.current(s.rate),c(!1),null===(t=Tt())||void 0===t||t.tool.setEnable(!0),o.current=0,h.current=!1}},g=(e,t)=>{const o=n.current;if(!o||!o.parentElement)return{position:0,rate:0};const i=o.getBoundingClientRect().width,a=o.parentElement.getBoundingClientRect().width;return e+t<=2?{position:0,isExceed:!1,rate:0}:e+t>=a-i-8?{position:a-i-8,isExceed:!0,rate:1}:{position:e+t,isExceed:!1,rate:(e+t)/(a-i-8)}},f=(e,t,o)=>{if("start"===o)return{position:0,isExceed:!1};const i=n.current;if(!i||!i.parentElement)return{position:0,isExceed:!1};const a=i.getBoundingClientRect().width,r=i.parentElement.getBoundingClientRect().width-a-8;if("end"===o)return{position:r,isExceed:!0};const s=Tt();return e+r*t<=(s&&s.player.getIsPlaying()?0:2)?{position:0,isExceed:!1}:e+r*t>=r-8?{position:r,isExceed:!0}:{position:e+r*t,isExceed:!1}};return a.a.createElement("div",{className:"bottom-scroll-bar"},a.a.createElement("div",{ref:n,className:s?"dragging-botton-scroll-bar-thumb":"botton-scroll-bar-thumb",onPointerDown:e=>{c(!0);const t=Tt();t&&(t.tool.setEnable(!1),t.player.getIsPlaying()&&t.player.setCancelAutoMove(!0),o.current=e.clientX,h.current=!1)}}))});let It="zh",Rt={"midi/painter/instrument/piano":"钢琴","midi/painter/instrument/guitar":"吉他","midi/painter/instrument/dream":"梦境","midi/painter/instrument/electric":"电音","midi/painter/instrument/game":"游戏","midi/painter/instrument/joker":"小丑","midi/painter/obb/none":"无","midi/painter/obb/funk":"放克","midi/painter/obb/jazz":"爵士","midi/painter/obb/dance":"舞曲","midi/painter/obb/latin":"拉丁","midi/painter/obb/hiphop":"嘻哈","midi/painter/obb/rock":"摇滚","midi/painter/mode/simple":"即兴","midi/painter/mode/complex":"谱曲","midi/painter/panel/label/bpm":"节拍","midi/painter/panel/label/instrument":"音色","midi/painter/panel/label/obb":"伴奏","midi/painter/panel/label/mode":"模式","midi/painter/bpm/fast":"快","midi/painter/bpm/slow":"慢","midi/painter/panel/download":"下载MIDI音乐","midi/painter/panel/add":"确认添加","midi/painter/save/alert":"空白MIDI无法添加，请先放几个音符吖","midi/painter/download/alert":"空白MIDI无法导出，请先放几个音符吖","midi/painter/context/copy":"复制","midi/painter/context/paste":"粘贴","midi/painter/context/delete":"删除","midi/painter/context/deleteAll":"删除全部","midi/painter/guide/tooltip":"随时能在正上方点我查看帮助～","midi/painter/guide/help":"查看帮助","midi/painter/guide/template":"模板","midi/painter/dialog/guide":"欢迎使用酷炫的MIDI编辑器~ 需要介绍一下功能吗?","midi/painter/dialog/guide/btn":"搞起","midi/painter/dialog/close/header":"关闭MIDI编辑器","midi/painter/dialog/close/content":"注意，关闭后绘制音符不会被保存哦","midi/painter/dialog/close/btn/cancel":"取消","midi/painter/dialog/close/btn/ok":"确认关闭","midi/painter/dialog/clear/header":"清空音符","midi/painter/dialog/clear/content":"确定要清空所有音符吗？","midi/painter/dialog/clear/btn/cancel":"保留","midi/painter/dialog/clear/btn/ok":"清除","midi/painter/dialog/add/header":"添加示例到MIDI画板","midi/painter/dialog/add/content":"添加示例会清除当前画板内容，确定要添加吗？","midi/docs/dialog_title":"帮助手册","midi/docs/title/what_is_midi":"MIDI是什么？","midi/docs/title/basic_operation":"基础操作","midi/docs/title/midi_example":"示例MIDI","midi/docs/subtitle/note":"音符","midi/docs/subtitle/scale":"音阶","midi/docs/subtitle/tone":"音色","midi/docs/subtitle/bpm":"节拍","midi/docs/subtitle/delete_note":"删除音符","midi/docs/subtitle/modify_note":"修改/复制音符","midi/docs/subtitle/other_function":"其他功能","midi/docs/subtitle/jilejingtu":"极乐净土","midi/docs/subtitle/dalabengba":"达拉蹦吧","midi/docs/subtitle/badguy":"Bad Guy","midi/docs/subtitle/wonderfulu":"Wonderful U","midi/docs/subtitle/accompaniment_example":"伴奏示例","midi/docs/add_example_to_midi":"添加到当前MIDI","midi/docs/content_with_no_style/part1/1":" ","midi/docs/content_with_no_style/part1/2":" ","midi/docs/content_with_no_style/part1/3":" ","midi/docs/content/part1/1":"音乐是通过计算机合成的","midi/docs/content/part1/2":"数字音乐","midi/docs/content/part1/3":"它使用计算机进行","midi/docs/content/part1/4":"数字编曲","midi/docs/content/part1/5":"，将乐器演奏人员的演奏过程通过","midi/docs/content/part1/6":"数字形式","midi/docs/content/part1/7":"的消息表示出来，并且可以很方便的修改音乐的音符、音色（乐器）、节拍等参数，快速完成不同类型音乐制作","midi/docs/content/part1/8":"MIDI音乐都有哪些知识点呢？跟着喵喵一起看下吧！","midi/docs/content/part1/9":"音符是","midi/docs/content/part1/10":"记录不同长短音的符号","midi/docs/content/part1/11":"，常见的音符类型有八分音符、四分音符、二分音符及全音符等","midi/docs/content/part1/12":"通过不同的音符，我们可以控制单个音符","midi/docs/content/part1/13":"声音的持续时间","midi/docs/content/part1/14":"。我们可以通过点击滑动鼠标，在MIDI格子中添加音符","midi/docs/content/part1/15":"在自然界中，物体由于震动而发出声音，震动的频率越快，则发出的声音音调越高。而音阶是指将声音根据","midi/docs/content/part1/16":"音调按由高到低或者由低到高的顺序","midi/docs/content/part1/17":"，以阶梯状排列起来","midi/docs/content/part1/18":"在MIDI画板内，我们通过在不同音阶对应的行上画下音符，即可播放出对应音阶的声音","midi/docs/content/part1/19":"音色是声音的特征。不同的发声体由于其材料、结构不同，发出声音的音色也不同，通过音色我们可以判断钢琴声，吉他声等不同的乐器声音","midi/docs/content/part1/20":"在MIDI画板内，使用","midi/docs/content/part1/21":"不同的乐器","midi/docs/content/part1/22":"，可以赋予音乐","midi/docs/content/part1/23":"不同的感觉","midi/docs/content/part1/24":"哦~","midi/docs/content/part1/25":"节拍定义了每分钟的拍子数，它与乐曲的拍号","midi/docs/content/part1/26":"（拍号是一个分数，写在乐谱开始的地方，它定义了乐曲几分音符为一拍，一小节几拍）","midi/docs/content/part1/27":"共同决定了","midi/docs/content/part1/28":"音乐的快与慢","midi/docs/content/part1/29":"Kitten的MIDI音乐画板每一列代表一个八分音符，每八列作为一个音乐小节","midi/docs/content/part2/1":"点击已存在的音符","midi/docs/content/part2/2":"，即可将其删除","midi/docs/content/part2/3":"如果需要删除多个音符，可以通过","midi/docs/content/part2/4":"按住鼠标左键进行多音符框选","midi/docs/content/part2/5":"，然后按下键盘上的删除键","midi/docs/content/part2/6":"如果想修改已经存在的音符，我们可以通过按住鼠标左键进行多音符框选，然后","midi/docs/content/part2/7":"按住鼠标左键进行音符移动操作","midi/docs/content/part2/8":"；或","midi/docs/content/part2/9":"点击鼠标右键进行音符复制操作","midi/docs/content/part2/10":"，tips“点击复制后，只需移动到想要放置的位置上，点击右键选择粘贴，并且左键点击确认即可完成音符复制哦”","midi/docs/content/part2/11":"最后在MIDI编辑器底部，我们还可以","midi/docs/content/part2/12":"修改MIDI音乐的","midi/docs/content/part2/13":"音色","midi/docs/content/part2/14":"为其添加自动的","midi/docs/content/part2/15":"伴奏音乐","midi/docs/content/part2/16":"修改","midi/docs/content/part2/17":"音乐的节拍","midi/docs/content/part3/1":"除此以外，编程猫还预置了已经编辑好的MIDI音乐，快点击这里去体验一下吧"};function Lt(e){const{lang:t}=He.getState().i18n;return It=t,t&&Rt[e]?Rt[e]:(console.warn(`MidiMusic Painter i18n: Cannot find '${e}' in your '${t}' dictionary`),e)}const At={copy:!1,paste:!1,delete:!1,deleteAll:!1};function zt(e){const[t,n]=Object(i.useState)(At),o=()=>12+36*Object(b.filter)(t,e=>e).length,s=Object(r.useDispatch)();Object(i.useEffect)(()=>{"default"===e.type?n({copy:!1,paste:!0,delete:!1,deleteAll:!0}):n({copy:!0,paste:!0,delete:!0,deleteAll:!1})},[e.type]),Object(i.useEffect)(()=>{function t(t){const n=t.target;n instanceof HTMLElement&&!n.closest(".context-menu")&&(e.callback&&e.callback(),l(),t.stopPropagation())}return document.body.addEventListener("mousedown",t),function(){document.body.removeEventListener("mousedown",t)}});const l=()=>{s(me({isShow:!1})),e.callback&&e.callback();const t=Tt();t&&t.contextMenuGroup.clear()},d=()=>{const e=Tt();return!!e&&e.copyPasteMenuGroup.getPathArr().length>0};return a.a.createElement("ul",{className:"context-menu",style:{left:(()=>{const t=Tt();if(!t)return 0;const n=e.positionX+31+2+6-t.view.bounds.x;return e.positionX+151<t.view.bounds.right?n:n-151})()+"px",top:(()=>{const t=Tt();if(!t)return 0;const n=e.positionY+25-t.view.bounds.y;return e.positionY+o()<t.view.bounds.bottom?n:n-o()})()+"px"}},t.copy&&a.a.createElement("li",{onClick:e=>{const t=Tt();t&&(t.tool.copy(),l(),e.stopPropagation())}},Lt("midi/painter/context/copy")),t.paste&&a.a.createElement("li",{className:d()?"":"disabled",onClick:d()?t=>{const n=Tt();if(!n)return;const o=new paper.Point(e.positionX,e.positionY);l(),n.tool.paste(o),t.stopPropagation()}:void 0},Lt("midi/painter/context/paste")),t.delete&&a.a.createElement("li",{onClick:e=>{const t=Tt();t&&(t.tool.delete(),l(),e.stopPropagation())}},Lt("midi/painter/context/delete")),t.deleteAll&&a.a.createElement("li",{onClick:e=>{l();const t=c.a.warning({top:"center",title:Lt("midi/painter/dialog/clear/header"),content:Lt("midi/painter/dialog/clear/content"),okText:Lt("midi/painter/dialog/clear/btn/ok"),cancelText:Lt("midi/painter/dialog/clear/btn/cancel"),onOk:()=>{var e;null===(e=Tt())||void 0===e||e.tool.deleteAll(),t()},onCancel:()=>t()});e.stopPropagation()}},Lt("midi/painter/context/deleteAll")))}const Ht=Object(i.forwardRef)((e,t)=>{const n=Object(i.useRef)(null),o=Object(i.useRef)(0),[r,s]=Object(i.useState)(!1),c=Object(i.useRef)(e=>{});Object(i.useEffect)(()=>(document.addEventListener("pointermove",d),document.addEventListener("pointerup",h),()=>{document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",h)})),Object(i.useImperativeHandle)(t,()=>({positionYHandler:l,setPointerMoveCallback:m}));const l=e=>{if(n.current&&document&&document.defaultView){const t=document.defaultView.getComputedStyle(n.current,null).transform,o=parseFloat(t.substring(6).split(",")[5]),i=u(o,-e);n.current.style.transform=`translateY(${i}px)`}},d=e=>{if(r&&o){const t=e.clientY-o.current;if(n.current&&document&&document.defaultView){const i=document.defaultView.getComputedStyle(n.current,null).transform,a=parseFloat(i.substring(6).split(",")[5]),r=p(a,t);n.current.style.transform=`translateY(${r.position}px)`,c.current(r.rate),o.current=e.clientY}}},h=e=>{if(r){s(!1);const e=Tt();if(!e)return;e.tool.setEnable(!0),o.current=0}},m=e=>{c.current=e},p=(e,t)=>{const o=n.current;if(!o||!o.parentElement)return{position:0,rate:0};const i=o.getBoundingClientRect().height,a=o.parentElement.getBoundingClientRect().height;return e+t<=0?{position:0,rate:0}:e+t>=a-i-8?{position:a-i-8,rate:1}:{position:e+t,rate:(e+t)/(a-i-8)}},u=(e,t)=>{const o=n.current;if(!o||!o.parentElement)return 0;const i=o.getBoundingClientRect().height,a=o.parentElement.getBoundingClientRect().height-i-4;return e+a*t<=0?0:e+a*t>=a-4?a-4:e+a*t};return a.a.createElement("div",{id:"right-scrollbar",className:e.show?"right-scroll-bar":"right-scroll-bar hidden"},a.a.createElement("div",{ref:n,className:r?"dragging-right-scroll-bar-thumb":"right-scroll-bar-thumb",onPointerDown:e=>{var t;s(!0),null===(t=Tt())||void 0===t||t.tool.setEnable(!1),o.current=e.clientY}}))});function Bt(e){const t=Object(r.useDispatch)(),n=Object(i.useRef)(null),o=Object(i.useRef)(null),s=Object(i.useRef)(null),c=Object(i.useRef)(null),d=Object(i.useRef)(null),h=Object(i.useRef)(),m=Object(i.useRef)(),p=Object(i.useRef)(),u=Object(r.useSelector)(e=>e.contextMenu),b=Object(r.useSelector)(e=>e.section.get("section")),[g,f]=Object(i.useState)(0),y=Object(r.useSelector)(e=>e.controlPanel.mode);Object(i.useEffect)(()=>{const e=new FontFace("MidiNote","url(https://kn-cdn.codemao.cn/kitten/midi/font/midi-note-font.woff)");e.load().then(()=>{document.fonts.add(e),Ke=!0}).catch(()=>{})},[]),Object(i.useEffect)(()=>{p.current||(p.current=!0,Dt=new jt("canvas"),n.current&&n.current.setAttribute("resize","true"),document.oncontextmenu=function(e){e.returnValue=!1})},[]),Object(i.useEffect)(()=>{const e=Tt();if(!e)return()=>{h&&h.current&&h.current.setPointerMoveCallback(e=>{}),m&&m.current&&m.current.setPointerMoveCallback(e=>{})};if(h&&h.current){const t=h.current;e.viewController.registerScrollXMethod((o,i)=>{e.view.translate(new paper.Point(o,0));const a=e.view.bounds.left;if(s&&s.current&&(s.current.style.transform=`translateX(${-a}px)`),e.player.getIsPlaying()&&e.lineLayer.moveLine(-o),n&&n.current){const e=n.current.clientWidth,a=o/(40*b*8-e);t.positionXHandler(a,i)}}),t.setPointerMoveCallback(t=>{if(n&&n.current){const o=n.current.clientWidth,i=40*b*8-o,a=e.view.bounds.left,r=i*t;e.view.translate(new paper.Point(a-r,0)),s&&s.current&&(s.current.style.transform=`translateX(${-a}px)`)}})}if(m&&m.current){const t=m.current;e.viewController.registerScrollYMethod(o=>{e.view.translate(new paper.Point(0,o));const i=e.view.bounds.top;if(c&&c.current&&(c.current.style.transform=`translateY(${-i}px)`),n&&n.current){const e=document.getElementById("midi-container"),n=e?e.clientHeight-27-22:0,i=o/(34*Be()-n);t.positionYHandler(i)}}),t.setPointerMoveCallback(t=>{if(n.current){const n=document.getElementById("midi-container"),o=n?n.clientHeight-27-22:0,i=34*Be()-o,a=e.view.bounds.top,r=i*t;e.view.translate(new paper.Point(0,a-r)),c&&c.current&&(c.current.style.transform=`translateY(${-r}px)`)}})}return()=>{h&&h.current&&h.current.setPointerMoveCallback(e=>{}),e.viewController.unRegisterScrollXMethod(),m&&m.current&&m.current.setPointerMoveCallback(e=>{}),e.viewController.unRegisterScrollYMethod()}}),Object(i.useEffect)(()=>{const e=Tt();if(p.current){const e=Tt();if(!e)return;e.drawNetAndBackgroundNote(b)}else p.current=!0;if(b>6&&n.current&&e){const t=n.current.clientWidth,o=e.view.bounds.left;f(o/(40*b*8-t))}},[b,e.width]);Object(i.useEffect)(()=>{const e=Tt();if(!e)return;if(!(d&&d.current&&o&&o.current))return;const t=d.current,n=o.current;let i=!1,a=0,r=0,s=void 0;const c=()=>t.style.transform?parseFloat(t.style.transform.match(/translateX\((\d*)px\)/)[1]):0,l=n.getBoundingClientRect().left+31+2+6;t.addEventListener("mousedown",()=>{i=!0,e.tool.setEnable(!1)});const h=n=>{if(i){const o=e.view.bounds.left+n.clientX-l,i=ut(o,e.view.bounds.top,e.view.bounds),d=He.getState().section.get("section");if(i||s||(a=o,s=setInterval(()=>{const n=e.view.bounds,o=e.viewController.getDeltaByDelta(n,a<n.left?a-n.left:a>n.right?a-n.right:0,0,8*d*40);if(a+=Math.abs(o.delta.x)>.5?20*(o.delta.x>0?1:-1):0,r+=o.delta.x,Math.abs(r)>40){const n=c()+(r>0?40:-40);ut(n,e.view.bounds.top,e.view.bounds)&&(t.style.transform=`translateX(${n}px)`,e.lineLayer.line.position.x=n,r+=r>0?-40:40)}e.viewController.move(-o.delta.x,-o.delta.y,o.xEnd)},100)),i){s&&(clearInterval(s),s=void 0);const n=Math.floor(o/40)+(o%40>20?1:0),i=40*Math.min(n,288);i!==c()&&ut(i,e.view.bounds.top,e.view.bounds)&&(t.style.transform=`translateX(${i}px)`,e.lineLayer.line.position.x=i)}}};document.addEventListener("mousemove",h);const m=()=>{i&&(s&&clearInterval(s),s=void 0,i=!1,e.tool.setEnable(!0))};return document.addEventListener("mouseup",m),function(){document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",m)}},[e.width]);const v=e.height<(e=>e===De.COMPLEX?748:544)(y);return a.a.createElement("div",{id:"midi-container",className:"container"},u.get("isShow")&&a.a.createElement(zt,{positionX:u.get("positionX"),positionY:u.get("positionY"),type:u.get("type"),isShow:u.get("isShow"),callback:u.get("callback")}),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{ref:o,className:"fixed-section"}),a.a.createElement("ul",{ref:s,className:"section-bar",onMouseDown:e=>{const n=Tt();if(!n)return;if(!(d&&d.current&&o&&o.current))return;const i=d.current,a=o.current;if(n.player.getIsPlaying())return C().stop(),n.player.pausePlay(),t({payload:null,type:"CARTOON_ROLE/ROLE_RESET_FRAME"}),void t(ke(Te.STOP));const r=n.view.bounds,s=a.getBoundingClientRect().left+31+2+6,c=r.left+e.clientX-s,l=40*(Math.floor(c/40)+(c%40>20?1:0));ut(l,r.top,r)&&(i.style.transform=`translateX(${l}px)`,n.lineLayer.line.position.x=l)},"data-report-click":"midi音乐-设置播放起始位置"},a.a.createElement("li",{className:"first-section"}),a.a.createElement("li",{className:"second-section"},a.a.createElement("div",{ref:d,id:"section-anchor",className:"anchor"},a.a.createElement("div",{className:"anchor-body"},a.a.createElement(l.a,{id:"#iconbofangqishi2",size:28})),a.a.createElement("div",{className:"anchor-pause"},a.a.createElement(l.a,{id:"#iconbofangqishi1",size:10})))),Array(b).fill(1).map((e,t)=>t).map(e=>a.a.createElement("li",{className:"section-item",key:e},a.a.createElement("div",{className:"section-text"},8*(e+1)))))),a.a.createElement("ul",{className:"note-bar",ref:c},a.a.createElement("li",{className:"note-item do"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#iconc6",size:36}))),y===De.COMPLEX&&a.a.createElement("li",{className:"note-item si"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#iconb5",size:36}))),a.a.createElement("li",{className:"note-item la"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#icona5",size:36}))),a.a.createElement("li",{className:"note-item sol"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#icong5",size:36}))),y===De.COMPLEX&&a.a.createElement("li",{className:"note-item fa"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#iconf5",size:36}))),a.a.createElement("li",{className:"note-item mi"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#icone5",size:36}))),a.a.createElement("li",{className:"note-item re"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#icond5",size:36}))),a.a.createElement("li",{className:"note-item do"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#iconc5",size:36}))),y===De.COMPLEX&&a.a.createElement("li",{className:"note-item si"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#iconb4",size:36}))),a.a.createElement("li",{className:"note-item la"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#icona4",size:36}))),a.a.createElement("li",{className:"note-item sol"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#icong4",size:36}))),y===De.COMPLEX&&a.a.createElement("li",{className:"note-item fa"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#iconf4",size:36}))),a.a.createElement("li",{className:"note-item mi"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#icone4",size:36}))),a.a.createElement("li",{className:"note-item re"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#icond4",size:36}))),a.a.createElement("li",{className:"note-item do"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#iconc4",size:36}))),y===De.COMPLEX&&a.a.createElement("li",{className:"note-item si"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#iconb3",size:36}))),a.a.createElement("li",{className:"note-item la"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#icona3",size:36}))),a.a.createElement("li",{className:"note-item sol"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#icong3",size:36}))),y===De.COMPLEX&&a.a.createElement("li",{className:"note-item fa"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#iconf3",size:36}))),a.a.createElement("li",{className:"note-item mi"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#icone3",size:36}))),a.a.createElement("li",{className:"note-item re"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#icond3",size:36}))),a.a.createElement("li",{className:"note-item do"},a.a.createElement("div",{className:"note-icon"},a.a.createElement(l.a,{id:"#iconc3",size:36})))),a.a.createElement(Pt,{rateX:g,section:b,ref:h}),a.a.createElement(Ht,{mode:y,show:v,height:e.height,ref:m}),a.a.createElement("div",{className:y===De.COMPLEX?"canvas-container complex":"canvas-container simple",onWheelCapture:e=>{e.stopPropagation();const n=Tt();if(!n)return;if(t(me({isShow:!1})),n.player.getIsPlaying())return C().stop(),n.player.pausePlay(),t({payload:null,type:"CARTOON_ROLE/ROLE_RESET_FRAME"}),void t(ke(Te.STOP));const o=n.view.bounds,i=n.viewController.getDeltaByDelta(o,e.deltaX,e.deltaY,8*b*40);n.viewController.move(-i.delta.x,-i.delta.y,i.xEnd)}},a.a.createElement("canvas",{id:"canvas",ref:n,className:"canvas"})))}const Ft=e=>a.a.createElement("div",{style:e.style,className:"bpm-slider-container midi-panel-common-popup",onClick:e=>e.stopPropagation()},a.a.createElement("span",null,Lt("midi/painter/bpm/slow")),a.a.createElement("input",{id:"bpm-range",name:"bpm-range",className:"slider",style:{background:((e,t)=>{const n=(o=oe(),ne[o]);var o;const i=(e-30)/(t-30)*100;return`linear-gradient(to right, rgba(${n[S.TC2]}, 1) ${i}%, rgba(${n[S.TC6]}, 1) ${i}%)`})(e.bpm,240)},type:"range",min:"30",max:"240",step:"1",value:e.bpm,onChange:t=>{e.setBpm(Number(t.target.value))}}),a.a.createElement("span",null,Lt("midi/painter/bpm/fast")));Ft.defaultProps={style:void 0};const Gt=e=>{const[t,n]=Object(i.useState)(je.STATIC),{inst:o,selectedInst:r}=e;return a.a.createElement("li",{className:"inst-box"},a.a.createElement("div",{className:o===r?"selected":"",onClick:()=>e.onSelectInst(e.inst),onMouseEnter:()=>{M().set_instrument(e.inst),M().play(),n(je.DYNAMIC)},onMouseLeave:()=>{M().stop(),n(je.STATIC)},"data-report-click":"midi音乐-音乐切换-"+e.name},a.a.createElement("img",{style:{display:t===je.STATIC?"block":"none"},src:`https://kn-cdn.codemao.cn/kitten/midi/img/${e.inst}_first.png`,width:"58",height:"58"}),a.a.createElement("img",{style:{display:t===je.DYNAMIC?"block":"none"},src:`https://kn-cdn.codemao.cn/kitten/midi/img/${e.inst}.gif`,width:"58",height:"58"})),a.a.createElement("p",{className:"inst-title"},e.name))},Xt=[{title:s.InstrumentEnum.GAME,name:"midi/painter/instrument/game"},{title:s.InstrumentEnum.JOKER,name:"midi/painter/instrument/joker"},{title:s.InstrumentEnum.ELECTRIC,name:"midi/painter/instrument/electric"},{title:s.InstrumentEnum.DREAM,name:"midi/painter/instrument/dream"},{title:s.InstrumentEnum.PIANO,name:"midi/painter/instrument/piano"},{title:s.InstrumentEnum.GUITAR,name:"midi/painter/instrument/guitar"}],Yt=e=>{Object(i.useEffect)(()=>{var t;"hidden"===(null===(t=e.style)||void 0===t?void 0:t.visibility)&&M().get_midi_info().state!==s.StateEnum.STOP&&M().stop()},[e.style]);const t=t=>{e.selectInst(t)};return a.a.createElement("div",{style:e.style,className:"inst-container midi-panel-common-popup",onClick:e=>e.stopPropagation()},a.a.createElement("ul",null,Xt.map(n=>a.a.createElement(Gt,{key:n.title,selectedInst:e.inst,inst:n.title,name:Lt(n.name),onSelectInst:t}))))};Yt.defaultProps={style:void 0};const Vt=e=>{const t=t=>()=>{t!==e.selectedMode&&e.selectMode(t)};return a.a.createElement("div",{className:"mode-container midi-panel-common-popup",style:e.style},a.a.createElement("ul",null,a.a.createElement("li",{className:"menu-list-item "+(e.selectedMode===De.COMPLEX?"selected":""),onClick:t(De.COMPLEX),"data-report-click":"midi音乐-模式选择-谱曲",key:"complex-mode"},a.a.createElement("p",null,Lt("midi/painter/mode/complex"))),a.a.createElement("li",{className:"menu-list-item "+(e.selectedMode===De.SIMPLE?"selected":""),onClick:t(De.SIMPLE),"data-report-click":"midi音乐-模式选择-即兴",key:"simple-mode"},a.a.createElement("p",null,Lt("midi/painter/mode/simple")))))};Vt.defaultProps={style:void 0};const Ut=e=>{const[t,n]=Object(i.useState)(!1),[o,r]=Object(i.useState)(!1);Object(i.useEffect)(()=>{r(e.obb===e.playing)},[e.obb,e.playing]);const c=t=>{t.stopPropagation(),e.playing===e.obb?e.onStop():e.onPlay(e.obb)},d=e=>{e.stopPropagation()};return a.a.createElement("li",{className:`obb-box menu-list-item ${e.selected?"selected":""} `,onClick:()=>e.onSelect(e.obb),onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),"data-report-click":"midi音乐-伴奏-"+e.title},e.obb===s.ObbEnum.NONE?null:a.a.createElement("div",{className:"obb-icon",onClick:c,onMouseDown:d},e.playing===e.obb?a.a.createElement(l.a,{id:"#iconicon-shitingtingzhistop",size:16}):a.a.createElement(l.a,{id:"#iconicon_shitingkaishi",size:16})),a.a.createElement("div",{className:"obb-title"},a.a.createElement("label",null,e.title)),e.obb===s.ObbEnum.NONE?null:a.a.createElement("div",{className:"gif-container"},a.a.createElement("img",{className:"obb-effect",style:{display:t||o?"none":"block"},src:`https://kn-cdn.codemao.cn/kitten/midi/img/${e.obb}_first.png`,width:"88",height:"44"}),a.a.createElement("img",{className:"obb-effect",style:{display:t||o?"block":"none"},src:`https://kn-cdn.codemao.cn/kitten/midi/img/${e.obb}.gif`,width:"88",height:"44"})))},$t=[{obb:s.ObbEnum.NONE,title:Pe[s.ObbEnum.NONE]},{obb:s.ObbEnum.FUNK,title:Pe[s.ObbEnum.FUNK]},{obb:s.ObbEnum.JAZZ,title:Pe[s.ObbEnum.JAZZ]},{obb:s.ObbEnum.LATIN,title:Pe[s.ObbEnum.LATIN]},{obb:s.ObbEnum.DANCE,title:Pe[s.ObbEnum.DANCE]},{obb:s.ObbEnum.HIPHOP,title:Pe[s.ObbEnum.HIPHOP]},{obb:s.ObbEnum.ROCK,title:Pe[s.ObbEnum.ROCK]}];let Wt,qt;const Jt=e=>{const[t,n]=Object(i.useState)(s.ObbEnum.NONE);Object(i.useEffect)(()=>(qt=new s.ObbMao,r),[e.style]);const o=e=>{const t=s.MidiMao.get_obb(e);t&&(qt.update({data:t._buffer,name:e}).play(),clearTimeout(Wt),Wt=setTimeout(r,4e3),n(e))},r=()=>{qt.stop(),clearTimeout(Wt),n(s.ObbEnum.NONE)},c=t=>{r(),e.selectObb(We(t,e.bpm))};return a.a.createElement("div",{style:e.style,className:"obb-container midi-panel-common-popup",onClick:e=>e.stopPropagation()},a.a.createElement("ul",null,$t.map(n=>a.a.createElement(Ut,{key:n.title,obb:n.obb,title:Lt(n.title),selected:e.selectedObb.split("_")[0]===n.obb||e.selectedObb===n.obb,playing:t,onPlay:o,onStop:r,onSelect:c}))))};Jt.defaultProps={style:void 0};const Kt=e=>{const[t,n]=Object(i.useState)(Se.NONE),[o,c]=Object(i.useState)(s.BASE_BPM),m=Object(i.useRef)(null),{playState:p,bpm:u,inst:b,obbName:g,mode:f}=Object(r.useSelector)(e=>e.controlPanel),{lang:y}=Object(r.useSelector)(e=>e.i18n),v=Object(r.useDispatch)();Object(i.useEffect)(()=>{var e;null===(e=Tt())||void 0===e||e.tool.setEnable(!t)},[t]),Object(i.useEffect)(()=>{const e=()=>{var e;n(Se.NONE),null===(e=m.current)||void 0===e||e.blur()};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}},[]),Object(i.useEffect)(()=>{c(u)},[u]);const w=()=>{const e=ot(),t=C(),n=(()=>{const e=document.getElementById("section-anchor");if(e&&e.style.transform){return parseInt(e.style.transform.match(/translateX\((\d*)px\)/)[1])/40}return 0})();if(e.getDataIsChange()){const o=e.dataToToneNoteArr(),i=mt(o,C().get_midi_info().bpm);if(t.update({midi:Object.assign(Object.assign({},t.get_raw_midi()),{tracks:i.tracks,duration:i.duration,inst:b,obb:g})}).set_playback_rate_by_bpm(u),0===o.length||n>=t.get_midi_info().length)return!1;t.play_part(n,288)}else{const{length:e}=t.get_midi_info();if(0===e||n>=e)return!1;t.play_part(n,288)}return!0},E=e=>{if(!Tt())return;if(!e){const e=C();return void(e.get_midi_info().state!==s.StateEnum.STOP&&e.stop())}w()&&v(ke(e))},x=(e,t)=>{e!==Se.BPM&&n(Se.NONE),N[e]&&N[e](t)},_=e=>o=>{o.stopPropagation(),E(Te.STOP),n(t===e?Se.NONE:e)},N=Object(i.useMemo)(()=>({[Se.BPM]:e=>O(e),[Se.INST]:e=>{v(Ce(e)),v(fe({roleInst:e})),C().set_instrument(e)},[Se.OBB]:e=>{if(v(Oe(e)),v(ye({isShowObbRole:e!==s.ObbEnum.NONE})),e===s.ObbEnum.NONE)return C().clear_obb();const t=s.MidiMao.get_obb(e);t&&C().update({obb:{data:t._buffer,name:e,bpm:u}})},[Se.MODE]:e=>v(Me(e))}),[u,g,f]),O=e=>{M(e),v(Ne(e)),C().set_playback_rate_by_bpm(e)},M=e=>{const t=Object(s.judge_speed_state)(u),n=Object(s.judge_speed_state)(e);if(g!==s.ObbEnum.NONE&&t!==n){const t=We(g,e);v(Oe(t));const n=s.MidiMao.get_obb(t);if(!n)return;C().update({obb:{data:n._buffer,name:t,bpm:e}})}},k=()=>{const e=ot().dataToToneNoteArr();if(0===e.length)return null;const t=mt(e,u);return{header:Object.assign(Object.assign({},C().get_raw_midi().header),{tempos:t.header.tempos}),tracks:t.tracks,duration:t.duration,inst:b,obb:g}};return a.a.createElement("div",{className:"midi-control-panel",onClick:()=>{const e=Tt();e&&(e.tool.switchCurrentHandles(st.Hover),at().dispose())}},a.a.createElement("div",{className:"wrap-play-btn","data-report-click":"midi-弹窗-播放"},a.a.createElement("div",{className:"play-btn",onClick:()=>E(Number(!p))},p?a.a.createElement(l.a,{className:"btn-stop",id:"#iconanniu-tingzhi",size:60}):a.a.createElement(l.a,{className:"btn-play",id:"#iconanniu-bofang",size:60}))),a.a.createElement("div",{className:"wrap-panel-content"},a.a.createElement("div",{className:"content-object"},a.a.createElement("label",null,Lt("midi/painter/panel/label/instrument")),a.a.createElement("div",{style:{cursor:"pointer"},onClick:_(Se.INST)},a.a.createElement("img",{src:`https://kn-cdn.codemao.cn/kitten/midi/img/${b}_first.png`,width:"48",height:"48"}),a.a.createElement(Yt,{style:{visibility:t===Se.INST?"visible":"hidden"},inst:b,selectInst:e=>x(Se.INST,e)}))),a.a.createElement("div",{className:"content-object"},a.a.createElement("label",null,Lt("midi/painter/panel/label/obb")),a.a.createElement("div",{className:"text-box",onClick:_(Se.OBB)},a.a.createElement("span",null,Lt(Pe[g===s.ObbEnum.NONE?s.ObbEnum.NONE:g.split("_")[0]])),a.a.createElement(Jt,{style:{visibility:t===Se.OBB?"visible":"hidden"},lang:y,selectedObb:g,bpm:u,selectObb:e=>x(Se.OBB,e)}))),a.a.createElement("div",{className:"content-object"},a.a.createElement("label",null,Lt("midi/painter/panel/label/bpm")),a.a.createElement("div",{className:"text-box",onClick:_(Se.BPM)},a.a.createElement("input",{className:"midi-bpm-input",value:o,onClick:e=>{e.stopPropagation(),t!==Se.BPM&&_(Se.BPM)(e)},onChange:e=>{e.stopPropagation();const t=e.target.value.replace(/[^\d]/g,"");c(t)},onBlur:e=>{e.stopPropagation();const t=(e=>{const t=Number(e);return isNaN(t)?u:t<30?30:t>240?240:Number(t)})(e.target.value);c(t),O(t)},onKeyDown:e=>{"Enter"===e.key&&e.currentTarget.blur()},ref:m}),a.a.createElement(Ft,{style:{visibility:t===Se.BPM?"visible":"hidden"},bpm:Number(o),setBpm:e=>x(Se.BPM,e)}))),a.a.createElement("div",{className:"content-object"},a.a.createElement("label",null,Lt("midi/painter/panel/label/mode")),a.a.createElement("div",{className:"text-box",onClick:_(Se.MODE)},a.a.createElement("span",{style:{minWidth:"52px"}},f===De.COMPLEX?Lt("midi/painter/mode/complex"):Lt("midi/painter/mode/simple")),t===Se.MODE&&a.a.createElement(Vt,{style:{visibility:t===Se.MODE?"visible":"hidden"},selectedMode:f,selectMode:e=>x(Se.MODE,e)})))),a.a.createElement("div",{className:"wrap-options-btn"},a.a.createElement(h.a,{wrapClassName:"download-btn",width:38,height:38,type:"secondary",tooltip:Lt("midi/painter/panel/download"),onClick:()=>{const e=k();if(!e)return void d.a.custom({duration:3e3,content:Lt("midi/painter/download/alert"),uniqueType:"alert_download"});C().update({midi:e});const t=e.header.name,n=encodeURIComponent(`${s.MIDI_NAME_PREFIX}${t}?obb=${g}&inst=${b}&mode=${f}`),o=Object.assign(Object.assign({},e),{header:Object.assign(Object.assign({},e.header),{name:n}),mode:f}),i=URL.createObjectURL(new Blob([JSON.stringify(o)])),a=document.createElement("a");a.download=t+".cmmid",a.href=i,a.click()}},a.a.createElement(l.a,{id:"#icondow",size:20})),a.a.createElement(h.a,{wrapClassName:"save-btn",height:38,type:"primary",onClick:()=>{E(Te.STOP);const t=k();t?e.onSave&&e.onSave(t):d.a.custom({duration:3e3,content:Lt("midi/painter/save/alert"),uniqueType:"alert_add"})}},a.a.createElement("div",{className:"save-btn-text"},Lt("midi/painter/panel/add")))))};function Zt(){const e=Object(r.useDispatch)(),t=Object(r.useSelector)(e=>e.cartoonRole.get("isShowRoleDialog")),n=Object(r.useSelector)(e=>e.cartoonRole.get("isShowTipDialog")),{lang:o}=Object(r.useSelector)(e=>e.i18n),[s,c]=Object(i.useState)(0);Object(i.useEffect)(()=>{"true"===localStorage.getItem("has_visited_midi_guide")&&setTimeout(()=>{e(ue({isShowRole:!0}))},200)},[]),Object(i.useEffect)(()=>{const e=Lt("midi/painter/guide/tooltip"),t=l(e)/2;c(Math.max(t,140))},[o]);const l=e=>{const t=document.createElement("div");t.style.display="inline-block",t.innerHTML=e,document.body.appendChild(t);const n=t.offsetWidth;return document.body.removeChild(t),n};return a.a.createElement("div",{className:"cartoon-role-container"},a.a.createElement("div",{className:"header-background"},a.a.createElement("img",{className:"bg-left",src:"https://kn-cdn.codemao.cn/kitten/midi/docs/images/bg_left.png",alt:""}),a.a.createElement("img",{className:"bg-middle",src:"https://kn-cdn.codemao.cn/kitten/midi/docs/images/bg_middle.png",alt:""}),a.a.createElement("img",{className:"bg-right",src:"https://kn-cdn.codemao.cn/kitten/midi/docs/images/bg_right.png",alt:""})),a.a.createElement("div",{id:"speaker-left",className:"speaker left"}),a.a.createElement("div",{id:"role-dialog-mask",className:"role-dialog-mask",onClick:()=>{e(be({isShowRoleDialog:!1}))}}),a.a.createElement("div",{id:"role-dialog",className:"role-dialog"},a.a.createElement("div",{className:"role-dialog-text open-midi-docs",onClick:()=>{e(be({isShowRoleDialog:!1})),e(Re({isShowDocs:!0}))},"data-report-click":"midi音乐-查看帮助"},Lt("midi/painter/guide/help")),a.a.createElement("div",{className:"role-dialog-text open-midi-demo",onClick:()=>{e(be({isShowRoleDialog:!1})),e(Re({isShowDocs:!0})),setTimeout(()=>{const e=document.getElementById("content-wrap"),t=document.getElementById("示例MIDI").offsetTop;e.scrollTo({top:t-60})},50)},"data-report-click":"midi音乐-打开模板"},Lt("midi/painter/guide/template"))),a.a.createElement("div",{id:"role-tip-dialog-container",style:{width:s+40+"px",left:`calc(50% - ${s+80}px)`},className:"role-tip-dialog-container"},a.a.createElement("img",{className:"role-tip-dialog",src:"https://kn-cdn.codemao.cn/kitten/midi/docs/images/tip_dialog.png",alt:""}),a.a.createElement("p",{className:"role-tip-dialog-content"},Lt("midi/painter/guide/tooltip"))),a.a.createElement("div",{id:"cartoon-role",className:"cartoon-role",onClick:()=>{e(n?ge({isShowTipDialog:!1}):be({isShowRoleDialog:!t}))}}),a.a.createElement("div",{id:"cartoon-obb-role",className:"cartoon-obb-role"}),a.a.createElement("div",{id:"speaker-right",className:"speaker right"}))}function Qt(e){return a.a.createElement("div",{className:"header",onClick:e=>{const t=Tt();t&&(t.tool.switchCurrentHandles(st.Hover),at().dispose())}},a.a.createElement(Zt,null),a.a.createElement("div",{className:"close-btn",onClick:()=>{e.onClose()}},a.a.createElement(l.a,{id:"#iconclose",size:16})))}function en(e){const t=Object(r.useDispatch)();Object(i.useEffect)(()=>{let e;const t=document.getElementById("content-wrap"),n=document.getElementById("sidebar-wrap").getElementsByClassName("anchor-item"),o=[];Object(b.forEach)(n,e=>{var n;const i=e.getAttribute("href").replace("#",""),a=null===(n=document.getElementById(i))||void 0===n?void 0:n.offsetTop;a&&(o.push({id:i,offsetTop:a-60}),e.addEventListener("click",e=>{e.preventDefault(),t.scrollTo({top:a-60,behavior:"smooth"})}))}),t.addEventListener("scroll",()=>{const i=t.scrollTop-60,a=Object(b.find)(o,e=>i<=e.offsetTop),r=a?a.id:"";r&&e!==r&&(e=r,Object(b.forEach)(n,e=>{e.getAttribute("href")==="#"+r?e.classList.add("active"):e.classList.remove("active")}))})});const n=n=>{const o=`https://kn-cdn.codemao.cn/kitten/midi/docs/demo/${n}.mid`;s.MidiMao.parse_midi_file(o).then(n=>{e.addMidiJSONFromModel(n),t(Re({isShowDocs:!1})),"true"!==localStorage.getItem("has_visited_midi_guide")&&t(ge({isShowTipDialog:!0}))}).catch(e=>console.log(e))},o=e=>{if(0===ot().dataToToneNoteArr().length)return void n(e);const t=c.a.warning({top:"center",title:Lt("midi/painter/dialog/add/header"),content:Lt("midi/painter/dialog/add/content"),okText:Lt("midi/painter/panel/add"),cancelText:Lt("midi/painter/dialog/close/btn/cancel"),onOk:()=>{n(e),t()},onCancel:()=>t()})};return a.a.createElement("div",{className:"midi-docs"},a.a.createElement("div",{id:"sidebar-wrap",className:"sidebar-wrap"},a.a.createElement("div",{className:"chapter"},a.a.createElement("a",{className:"anchor-item chapter-title active",href:"#MIDI是什么"},"1."+Lt("midi/docs/title/what_is_midi")),a.a.createElement("a",{className:"anchor-item chapter-subtitle",href:"#音符"},Lt("midi/docs/subtitle/note")),a.a.createElement("a",{className:"anchor-item chapter-subtitle",href:"#音阶"},Lt("midi/docs/subtitle/scale")),a.a.createElement("a",{className:"anchor-item chapter-subtitle",href:"#音色"},Lt("midi/docs/subtitle/tone")),a.a.createElement("a",{className:"anchor-item chapter-subtitle",href:"#节拍"},Lt("midi/docs/subtitle/bpm"))),a.a.createElement("div",{className:"chapter"},a.a.createElement("a",{className:"anchor-item chapter-title",href:"#基础操作"},"2."+Lt("midi/docs/title/basic_operation")),a.a.createElement("a",{className:"anchor-item chapter-subtitle",href:"#删除音符"},Lt("midi/docs/subtitle/delete_note")),a.a.createElement("a",{className:"anchor-item chapter-subtitle",href:"#修改复制音符"},Lt("midi/docs/subtitle/modify_note")),a.a.createElement("a",{className:"anchor-item chapter-subtitle",href:"#其他功能"},Lt("midi/docs/subtitle/other_function"))),a.a.createElement("div",{className:"chapter"},a.a.createElement("a",{className:"anchor-item chapter-title",href:"#示例MIDI"},"3."+Lt("midi/docs/title/midi_example")),a.a.createElement("a",{className:"anchor-item chapter-subtitle",href:"#极乐净土"},Lt("midi/docs/subtitle/jilejingtu")),a.a.createElement("a",{className:"anchor-item chapter-subtitle",href:"#达拉蹦吧"},Lt("midi/docs/subtitle/dalabengba")),a.a.createElement("a",{className:"anchor-item chapter-subtitle",href:"#badguy"},Lt("midi/docs/subtitle/badguy")),a.a.createElement("a",{className:"anchor-item chapter-subtitle",href:"#wonderfulu"},Lt("midi/docs/subtitle/wonderfulu")),a.a.createElement("a",{className:"anchor-item chapter-subtitle",href:"#伴奏示例"},Lt("midi/docs/subtitle/accompaniment_example")))),a.a.createElement("div",{className:"vertical-line"}),a.a.createElement("div",{className:"content-wrap",id:"content-wrap"},a.a.createElement("h1",{id:"MIDI是什么"},"1."+Lt("midi/docs/title/what_is_midi")),"zh"===It?a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:"with-dot"},"MIDI",a.a.createElement("span",null,"（Musical Instrument Digital Interface）"),Lt("midi/docs/content/part1/1"),a.a.createElement("strong",null,Lt("midi/docs/content/part1/2"))),a.a.createElement("p",{className:"with-dot"},Lt("midi/docs/content/part1/3"),a.a.createElement("strong",null,Lt("midi/docs/content/part1/4")),Lt("midi/docs/content/part1/5"),a.a.createElement("strong",null,Lt("midi/docs/content/part1/6")),Lt("midi/docs/content/part1/7")),a.a.createElement("p",null,Lt("midi/docs/content/part1/8"))):a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:"with-dot"},Lt("midi/docs/content_with_no_style/part1/1")),a.a.createElement("p",{className:"with-dot"},Lt("midi/docs/content_with_no_style/part1/2")),a.a.createElement("p",null,Lt("midi/docs/content_with_no_style/part1/3"))),a.a.createElement("h2",{id:"音符"},Lt("midi/docs/subtitle/note")),a.a.createElement("p",{className:"with-dot"},Lt("midi/docs/content/part1/9"),a.a.createElement("strong",null,Lt("midi/docs/content/part1/10")),Lt("midi/docs/content/part1/11")),a.a.createElement("p",{className:"with-dot"},Lt("midi/docs/content/part1/12"),a.a.createElement("strong",null,Lt("midi/docs/content/part1/13")),Lt("midi/docs/content/part1/14")),a.a.createElement("video",{autoPlay:!0,loop:!0},a.a.createElement("source",{src:"https://kn-cdn.codemao.cn/kitten/midi/docs/videos/help1-1.mp4",type:"video/mp4"})),a.a.createElement("h2",{id:"音阶"},Lt("midi/docs/subtitle/scale")),a.a.createElement("p",{className:"with-dot"},Lt("midi/docs/content/part1/15"),a.a.createElement("strong",null,Lt("midi/docs/content/part1/16")),Lt("midi/docs/content/part1/17")),a.a.createElement("p",{className:"with-dot"},Lt("midi/docs/content/part1/18")),a.a.createElement("video",{autoPlay:!0,loop:!0},a.a.createElement("source",{src:"https://kn-cdn.codemao.cn/kitten/midi/docs/videos/help1-2.mp4",type:"video/mp4"})),a.a.createElement("h2",{id:"音色"},Lt("midi/docs/subtitle/tone")),a.a.createElement("p",{className:"with-dot"},Lt("midi/docs/content/part1/19")),a.a.createElement("p",{className:"with-dot"},Lt("midi/docs/content/part1/20"),a.a.createElement("strong",null,Lt("midi/docs/content/part1/21")),Lt("midi/docs/content/part1/22"),a.a.createElement("strong",null,Lt("midi/docs/content/part1/23")),Lt("midi/docs/content/part1/24")),a.a.createElement("video",{className:"long-width",autoPlay:!0,loop:!0},a.a.createElement("source",{src:"https://kn-cdn.codemao.cn/kitten/midi/docs/videos/help1-3.mp4",type:"video/mp4"})),a.a.createElement("h2",{id:"节拍"},Lt("midi/docs/subtitle/bpm")),a.a.createElement("p",null,Lt("midi/docs/content/part1/25"),a.a.createElement("span",null,Lt("midi/docs/content/part1/26")),Lt("midi/docs/content/part1/27"),a.a.createElement("strong",null,Lt("midi/docs/content/part1/28"))),a.a.createElement("p",null,a.a.createElement("span",{className:"with-dot"},Lt("midi/docs/content/part1/29"))),a.a.createElement("video",{autoPlay:!0,loop:!0},a.a.createElement("source",{src:"https://kn-cdn.codemao.cn/kitten/midi/docs/videos/help1-4.mp4",type:"video/mp4"})),a.a.createElement("h1",{id:"基础操作"},"2."+Lt("midi/docs/title/basic_operation")),a.a.createElement("h2",{id:"删除音符"},Lt("midi/docs/subtitle/delete_note")),a.a.createElement("p",{className:"with-dot"},a.a.createElement("strong",null,Lt("midi/docs/content/part2/1")),Lt("midi/docs/content/part2/2")),a.a.createElement("p",{className:"with-dot"},Lt("midi/docs/content/part2/3"),a.a.createElement("strong",null,Lt("midi/docs/content/part2/4")),Lt("midi/docs/content/part2/5")),a.a.createElement("video",{autoPlay:!0,loop:!0},a.a.createElement("source",{src:"https://kn-cdn.codemao.cn/kitten/midi/docs/videos/help2-1.mp4",type:"video/mp4"})),a.a.createElement("h2",{id:"修改复制音符"},Lt("midi/docs/subtitle/modify_note")),a.a.createElement("p",null,Lt("midi/docs/content/part2/6"),a.a.createElement("strong",null,Lt("midi/docs/content/part2/7")),Lt("midi/docs/content/part2/8"),a.a.createElement("strong",null,Lt("midi/docs/content/part2/9")),Lt("midi/docs/content/part2/10")),a.a.createElement("video",{autoPlay:!0,loop:!0},a.a.createElement("source",{src:"https://kn-cdn.codemao.cn/kitten/midi/docs/videos/help2-2.mp4",type:"video/mp4"})),a.a.createElement("h2",{id:"其他功能"},Lt("midi/docs/subtitle/other_function")),a.a.createElement("p",null,Lt("midi/docs/content/part2/11")),a.a.createElement("ul",null,a.a.createElement("li",null,Lt("midi/docs/content/part2/12"),a.a.createElement("strong",null,Lt("midi/docs/content/part2/13"))),a.a.createElement("li",null,Lt("midi/docs/content/part2/14"),a.a.createElement("strong",null,Lt("midi/docs/content/part2/15"))),a.a.createElement("li",null,Lt("midi/docs/content/part2/16"),a.a.createElement("strong",null,Lt("midi/docs/content/part2/17")))),a.a.createElement("video",{autoPlay:!0,loop:!0},a.a.createElement("source",{src:"https://kn-cdn.codemao.cn/kitten/midi/docs/videos/help2-3.mp4",type:"video/mp4"})),a.a.createElement("h1",{id:"示例MIDI"},"3."+Lt("midi/docs/title/midi_example")),a.a.createElement("p",null,Lt("midi/docs/content/part3/1")),a.a.createElement("h2",{id:"极乐净土"},Lt("midi/docs/subtitle/jilejingtu")),a.a.createElement("video",{className:"demo",controls:!0},a.a.createElement("source",{src:"https://kn-cdn.codemao.cn/kitten/midi/docs/videos/demo_极乐净土.mp4",type:"video/mp4"})),a.a.createElement("div",{className:"add-btn",onClick:()=>{o("极乐净土")},"data-report-click":"midi音乐-示例MIDI添加到当前"},a.a.createElement("span",{className:"add-btn-icon"},"+"),a.a.createElement("p",null,Lt("midi/docs/add_example_to_midi"))),a.a.createElement("h2",{id:"达拉蹦吧"},Lt("midi/docs/subtitle/dalabengba")),a.a.createElement("video",{className:"demo",controls:!0},a.a.createElement("source",{src:"https://kn-cdn.codemao.cn/kitten/midi/docs/videos/demo_达拉蹦吧.mp4",type:"video/mp4"})),a.a.createElement("div",{className:"add-btn",onClick:()=>{o("达拉蹦吧")},"data-report-click":"midi音乐-示例MIDI添加到当前"},a.a.createElement("span",{className:"add-btn-icon"},"+"),a.a.createElement("p",null,Lt("midi/docs/add_example_to_midi"))),a.a.createElement("h2",{id:"badguy"},Lt("midi/docs/subtitle/badguy")),a.a.createElement("video",{className:"demo",controls:!0},a.a.createElement("source",{src:"https://kn-cdn.codemao.cn/kitten/midi/docs/videos/demo_badguy.mp4",type:"video/mp4"})),a.a.createElement("div",{className:"add-btn",onClick:()=>{o("Bad Guy")},"data-report-click":"midi音乐-示例MIDI添加到当前"},a.a.createElement("span",{className:"add-btn-icon"},"+"),a.a.createElement("p",null,Lt("midi/docs/add_example_to_midi"))),a.a.createElement("h2",{id:"wonderfulu"},Lt("midi/docs/subtitle/wonderfulu")),a.a.createElement("video",{className:"demo",controls:!0},a.a.createElement("source",{src:"https://kn-cdn.codemao.cn/kitten/midi/docs/videos/demo_wonderfulu.mp4",type:"video/mp4"})),a.a.createElement("div",{className:"add-btn",onClick:()=>{o("Wonderful U")},"data-report-click":"midi音乐-示例MIDI添加到当前"},a.a.createElement("span",{className:"add-btn-icon"},"+"),a.a.createElement("p",null,Lt("midi/docs/add_example_to_midi"))),a.a.createElement("h2",{id:"伴奏示例"},Lt("midi/docs/subtitle/accompaniment_example")),a.a.createElement("video",{className:"demo",controls:!0},a.a.createElement("source",{src:"https://kn-cdn.codemao.cn/kitten/midi/docs/videos/demo_伴奏示例.mp4",type:"video/mp4"})),a.a.createElement("div",{className:"add-btn",onClick:()=>{o("伴奏示例")},"data-report-click":"midi音乐-示例MIDI添加到当前"},a.a.createElement("span",{className:"add-btn-icon"},"+"),a.a.createElement("p",null,Lt("midi/docs/add_example_to_midi"))),a.a.createElement("div",{className:"padding-div"})))}function tn(e){const t=Object(r.useDispatch)();return a.a.createElement("div",{className:"midi-docs-container"},a.a.createElement("div",{className:"midi-docs-mask"}),a.a.createElement("div",{className:"docs-container"},a.a.createElement("div",{className:"docs-header"},a.a.createElement("div",{className:"docs-header-logo"},Lt("midi/docs/dialog_title")),a.a.createElement("div",{className:"close-btn",onClick:()=>{t(Re({isShowDocs:!1})),"true"!==localStorage.getItem("has_visited_midi_guide")&&t(ge({isShowTipDialog:!0}))}},a.a.createElement(l.a,{id:"#iconclose",size:16}))),a.a.createElement("div",{className:"midi-docs-body"},a.a.createElement(en,{addMidiJSONFromModel:e.addMidiJSONFromModel}))))}function nn(e){const t=Object(r.useDispatch)();return a.a.createElement("div",{id:"docs-guide-and-mask-container",className:"docs-guide-and-mask-container"},a.a.createElement("div",{className:"docs-guide-mask"}),a.a.createElement("div",{id:"docs-guide-container",className:"docs-guide-container"},a.a.createElement("div",{className:"guide-cartoon-role-container"},a.a.createElement("div",{id:"guide-cartoon-role",className:"guide-cartoon-role"})),a.a.createElement("div",{id:"guide-rest-element",className:"guide-rest-element"},a.a.createElement("img",{className:"guide-dialog",src:"https://kn-cdn.codemao.cn/kitten/midi/docs/images/guide_dialog.png",alt:""}),a.a.createElement("div",{className:"guide-content"},Lt("midi/painter/dialog/guide")),a.a.createElement("div",{className:"guide-close-btn",onClick:()=>{t(Le({isShowGuide:!1})),t(ue({isShowRole:!0})),t(ge({isShowTipDialog:!0}))},"data-report-click":"midi音乐-新手-关闭"}),a.a.createElement("button",{className:"guide-open-btn",onClick:()=>{t(Le({isShowGuide:!1,noAnimation:!0})),t(Re({isShowDocs:!0})),t(ue({isShowRole:!0}))},"data-report-click":"midi音乐-新手-搞起"},Lt("midi/painter/dialog/guide/btn")))))}function on(e){return a.a.createElement("div",{className:"loading-wrap"},a.a.createElement("div",{className:e.ishidden?"loading":"loading show"},a.a.createElement("div",{className:"loadingIcon"}),a.a.createElement("span",{className:"loaddingContent"},"加载中")))}function an(e){const[t,n]=Object(i.useState)(0),[o,l]=Object(i.useState)(0),[d,h]=Object(i.useState)(!0),m=Object(r.useSelector)(e=>e.docs.get("isShowDocs")),p=Object(r.useSelector)(e=>e.controlPanel.mode),u=Object(r.useSelector)(e=>e.section.get("section")),b=Object(r.useDispatch)();Object(i.useEffect)(()=>{"true"!==localStorage.getItem("has_visited_midi_guide")&&b(Le({isShowGuide:!0}))},[]),Object(i.useEffect)(()=>{window.onresize=y,s.MidiMao.parse_midi_file("https://kn-cdn.codemao.cn/kitten/midi/inst/example/inst-example.mid").then(e=>M().update({midi:e})).catch(e=>console.error(e))},[]);const g=Object(i.useCallback)(()=>{const{instrument_name:e,obb_name:t,bpm:n}=C().get_midi_info();b(Ce(e)),b(Oe(t)),b(Ne(n))},[b]);Object(i.useEffect)(()=>{h(!0)},[e.isHidden]),Object(i.useEffect)(()=>{s.MidiMao.reset_global_bpm();const t=Tt();if(e.isHidden)return N=new s.MidiMao,b({payload:null,type:"midi/painter/reset_panel"}),null==t||t.tool.setEnable(!1),b({payload:null,type:"CARTOON_ROLE/RESET_ROLES"}),void ot().clearData();if(v(),t){if(void 0!==e.mode&&e.mode!==p&&b(Me(e.mode)),f(),e.midiJSON){const n=C();n.update({midi:e.midiJSON}),w(n,e.midiJSON.obb),g(),b(fe({roleInst:e.midiJSON.inst,noAnimation:!0})),b(ye({isShowObbRole:e.midiJSON.obb!==s.ObbEnum.NONE,noAnimation:!0})),t.resetProject(Math.max(Math.ceil(n.get_midi_info().length/8),6)),ot().toneNoteArrToData(e.mode||De.COMPLEX,pt(e.midiJSON))}else t.resetProject(6);setTimeout(()=>{h(!1)},0),ot().clearHistory()}},[e.isHidden,e.mode]),Object(i.useEffect)(()=>{const e=Tt();e&&(e.resetProject(u),p===De.COMPLEX?ot().modeDataChange("s2c"):ot().modeDataChange("c2s"),f())},[p]);const f=()=>{const e=Tt();if(!e)return;const t=e.view.element.offsetParent;if(t){const o=t.clientHeight,i=t.clientWidth;e.view.bounds.y>100&&e.viewController.resetY(),e.view.viewSize=new paper.Size(i,o),e.view.element.style.width=i+"px",e.view.element.style.height=o+"px";const a=document.getElementById("midi-container");l(a?a.clientHeight:0),n(i);const r=He.getState().section.get("section"),s=8*r*40;36===r?e.viewController.toEnd(s):e.view.bounds.left+i>=s&&b(xe(Math.min(r+2,36)))}},y=function(e,t){let n;return function(...o){(this||o.length)&&(window.clearTimeout(n),n=window.setTimeout(()=>e.apply(this,o),t))}}(f,100),v=()=>{const e=C();e.register_event(s.MidiMaoEventType.STOP,()=>{const e=Tt();e&&(e.player.pausePlay(),b({payload:null,type:"CARTOON_ROLE/ROLE_RESET_FRAME"}),b(ke(Te.STOP)))}),e.register_event(s.MidiMaoEventType.START,()=>{const t=Tt();if(!t)return;const{length:n}=e.get_midi_info(),o=He.getState().controlPanel.bpm;t.player.startPlay(Object(s.get_8n_time_by_bpm)(o),n)}),e.register_event(s.MidiMaoEventType.PLAYING,()=>{Tt()&&b({payload:null,type:"CARTOON_ROLE/ROLE_NEXT_FRAME"})})},w=(e,t=s.ObbEnum.NONE)=>{if(t===s.ObbEnum.NONE)return void e.clear_obb();const n=s.MidiMao.get_obb(t);e.update({obb:{data:n._buffer,name:t,bpm:e.get_midi_info().bpm}})};return a.a.createElement("div",{className:p===De.COMPLEX?"music-painter-main complex":"music-painter-main simple"},d&&a.a.createElement(on,{ishidden:e.isHidden}),m&&a.a.createElement("div",{className:"midi-docs-dialog"},a.a.createElement(tn,{addMidiJSONFromModel:e=>{const t=Tt();if(ot().clearData(),p===De.SIMPLE&&b(Me(De.COMPLEX)),t&&e){const n=C();n.update({midi:Object.assign(Object.assign({},e),{header:Object.assign(Object.assign({},e.header),{name:n.get_midi_info().name})})}),w(n,e.obb),g(),b(fe({roleInst:e.inst})),b(ye({isShowObbRole:e.obb!==s.ObbEnum.NONE})),t.resetProject(Math.max(Math.ceil(n.get_midi_info().length/8),6)),ot().toneNoteArrToData(De.COMPLEX,pt(e)),ot().clearHistory()}}})),a.a.createElement(nn,null),a.a.createElement("div",{className:"midi-painter-dialog"},a.a.createElement(Qt,{onClose:()=>{C().get_midi_info().state!==s.StateEnum.STOP&&C().stop();const t=Tt();if(!t)return;if(0===ot().dataToToneNoteArr().length)return t.player.pausePlay(),b({payload:null,type:"CARTOON_ROLE/ROLE_RESET_FRAME"}),b(ke(Te.STOP)),void(e.onClose&&e.onClose());const n=c.a.warning({top:"center",title:Lt("midi/painter/dialog/close/header"),content:Lt("midi/painter/dialog/close/content"),okText:Lt("midi/painter/dialog/close/btn/ok"),cancelText:Lt("midi/painter/dialog/close/btn/cancel"),onOk:()=>{t.player.pausePlay(),b({payload:null,type:"CARTOON_ROLE/ROLE_RESET_FRAME"}),b(ke(Te.STOP)),e.onClose&&e.onClose(),n()},onCancel:()=>n()})}}),a.a.createElement(Bt,{width:t,height:o}),a.a.createElement(Kt,{onSave:t=>{e.onSave&&e.onSave(t,p)}})))}Kt.defaultProps={onSave:void 0},function(e){var t,n,o,i,a,r,s='<svg><symbol id="iconpress" viewBox="0 0 1024 1024"><path d="M640 409.6a51.2 51.2 0 0 1 51.072 47.36L691.2 460.8v230.4a51.2 51.2 0 0 1-47.36 51.072L640 742.4H384a51.2 51.2 0 0 1-51.072-47.36L332.8 691.2v-230.4a51.2 51.2 0 0 1 47.36-51.072L384 409.6h256z m-76.8 64a25.6 25.6 0 0 0-25.4208 22.6048L537.6 499.2v153.6a25.6 25.6 0 0 0 51.0208 2.9952L588.8 652.8v-153.6a25.6 25.6 0 0 0-25.6-25.6z m-102.4 0a25.6 25.6 0 0 0-25.4208 22.6048L435.2 499.2v153.6a25.6 25.6 0 0 0 51.0208 2.9952L486.4 652.8v-153.6a25.6 25.6 0 0 0-25.6-25.6zM546.048 230.4a51.2 51.2 0 0 1 38.8864 17.8688l28.2112 32.9216a25.6 25.6 0 0 0 19.4304 8.96h75.6992a34.1248 34.1248 0 0 1 0 68.2496H315.7248a34.1248 34.1248 0 0 1 0-68.2752h75.6992a25.6 25.6 0 0 0 19.456-8.9344l28.1856-32.9216A51.2 51.2 0 0 1 477.952 230.4z"  ></path></symbol><symbol id="iconb42" viewBox="0 0 1024 1024"><path d="M480.512 660.736c17.408-38.912 129.696-291.168 137.216-308.224 1.696-5.12 4.192-13.504 0.544-20C615.232 327.04 610.112 324.352 597.76 324.352H429.312C418.272 324.352 410.88 328.928 410.88 344.32c0 11.616 7.168 17.408 18.432 17.408h144.864l-131.04 289.28c-1.024 2.4-6.336 20.288 6.208 26.496 17.088 8.48 28.448-10.976 31.168-16.768z"  ></path></symbol><symbol id="iconb32" viewBox="0 0 1024 1024"><path d="M512 768a32 32 0 1 1 0 64 32 32 0 0 1 0-64zM597.984 324.064c12.384 0 17.504 2.72 20.544 8.16 3.68 6.496 1.152 14.88-0.544 20L555.2 493.472l-12.48 28.032C514.976 583.712 488.512 643.2 480.768 660.48c-2.72 5.792-14.08 25.248-31.136 16.768-12.576-6.208-7.264-24.096-6.24-26.496l131.04-289.28H429.568c-11.264 0-18.432-5.792-18.432-17.408 0-15.392 7.392-19.968 18.432-19.968z"  ></path></symbol><symbol id="iconb52" viewBox="0 0 1024 1024"><path d="M597.952 324.416c12.384 0 17.504 2.72 20.544 8.128 3.68 6.528 1.184 14.912-0.544 20.032-7.488 17.056-119.808 269.312-137.216 308.224-2.72 5.76-14.08 25.248-31.136 16.768-12.576-6.24-7.264-24.128-6.24-26.496l131.04-289.28H429.536c-11.264 0-18.432-5.824-18.432-17.408 0-15.424 7.392-19.968 18.432-19.968zM512 192a32 32 0 1 1 0 64 32 32 0 0 1 0-64z"  ></path></symbol><symbol id="iconb41" viewBox="0 0 1024 1024"><path d="M480.512 660.736a313954.4 313954.4 0 0 0 83.456-186.88l12.576-28.288 16.864-38.016c8.704-19.616 16.8-37.984 24.32-55.04 1.696-5.12 2.56-8.864 2.56-11.264 0-11.264-7.168-16.896-21.504-16.896H429.312c-6.816 0-11.616 1.44-14.336 4.352C412.256 331.584 410.88 336.8 410.88 344.32c0 11.616 5.632 17.408 16.896 17.408h148.48l-133.12 289.28c-1.024 2.4-6.336 20.288 6.208 26.496 17.088 8.48 28.448-10.976 31.168-16.768z"  ></path></symbol><symbol id="iconb51" viewBox="0 0 1024 1024"><path d="M598.816 324.352c14.336 0 21.504 5.632 21.504 16.896 0 2.4-0.864 6.144-2.56 11.264a20752.96 20752.96 0 0 1-24.32 55.04l-16.864 38.016a110614.432 110614.432 0 0 1-49.44 110.976l-46.592 104.192c-2.752 5.792-14.08 25.248-31.168 16.768-12.544-6.208-7.232-24.096-6.208-26.496l133.12-289.28h-148.48c-11.264 0-16.896-5.792-16.896-17.408 0-7.52 1.344-12.704 4.096-15.616 2.72-2.88 7.488-4.352 14.336-4.352zM512 192a32 32 0 1 1 0 64 32 32 0 0 1 0-64z"  ></path></symbol><symbol id="iconb31" viewBox="0 0 1024 1024"><path d="M512 768a32 32 0 1 1 0 64 32 32 0 0 1 0-64zM598.816 324.288c14.336 0 21.504 5.632 21.504 16.896 0 2.368-0.864 6.144-2.56 11.264l-24.32 55.04-16.864 37.984A110609.472 110609.472 0 0 1 527.136 556.48l-46.592 104.192c-2.72 5.792-14.08 25.248-31.168 16.768-12.544-6.208-7.232-24.128-6.208-26.496l133.12-289.28h-148.48C416.544 361.664 410.88 355.84 410.88 344.256 410.88 336.736 412.288 331.52 415.008 328.64c2.72-2.912 7.52-4.352 14.336-4.352z"  ></path></symbol><symbol id="iconmidishijian" viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#FFFFFF" ></path><path d="M512 0c282.766222 0 512 229.233778 512 512s-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0z m0 28.444444C244.935111 28.444444 28.444444 244.935111 28.444444 512s216.490667 483.555556 483.555556 483.555556 483.555556-216.490667 483.555556-483.555556S779.064889 28.444444 512 28.444444z" fill="#7E5BC9" ></path><path d="M654.222222 270.222222a142.222222 142.222222 0 0 1 142.222222 142.222222v199.111112a142.222222 142.222222 0 0 1-142.222222 142.222222H369.777778a142.222222 142.222222 0 0 1-142.222222-142.222222v-199.111112a142.222222 142.222222 0 0 1 142.222222-142.222222h284.444444z m-256 56.888889h-28.444444a85.333333 85.333333 0 0 0-85.333334 85.333333v199.111112a85.333333 85.333333 0 0 0 85.333334 85.333333h56.888889v-201.528889l-3.726223-1.536A42.666667 42.666667 0 0 1 398.222222 455.111111v-128z m142.222222 0h-56.888888V455.111111l-0.199112 4.238222A42.695111 42.695111 0 0 1 455.111111 495.331556L455.111111 696.888889h113.777778v-201.528889l-3.726222-1.536A42.666667 42.666667 0 0 1 540.444444 455.111111v-128z m113.777778 0h-28.444444V455.111111l-0.199111 4.238222A42.695111 42.695111 0 0 1 597.333333 495.331556L597.333333 696.888889h56.888889a85.333333 85.333333 0 0 0 85.333334-85.333333v-199.111112a85.333333 85.333333 0 0 0-85.333334-85.333333z" fill="#A073FF" ></path></symbol><symbol id="icondianziqin1" viewBox="0 0 1024 1024"><path d="M153.6 158.474667h716.8A68.266667 68.266667 0 0 1 938.666667 226.741333v582.709334a68.266667 68.266667 0 0 1-68.266667 68.266666H153.6a68.266667 68.266667 0 0 1-68.266667-68.266666V226.741333A68.266667 68.266667 0 0 1 153.6 158.474667z" fill="#595959" ></path><path d="M192.608 780.192h126.784a34.133333 34.133333 0 0 0 34.133333-34.133333V377.888a24.384 24.384 0 0 0-24.384-24.373333H182.858667a24.384 24.384 0 0 0-24.384 24.373333v368.16a34.133333 34.133333 0 0 0 34.133333 34.133333zM448.608 780.192h126.784a34.133333 34.133333 0 0 0 34.133333-34.133333V377.888a24.384 24.384 0 0 0-24.384-24.373333H438.858667a24.384 24.384 0 0 0-24.384 24.373333v368.16a34.133333 34.133333 0 0 0 34.133333 34.133333zM704.608 780.192h126.784a34.133333 34.133333 0 0 0 34.133333-34.133333V377.888a24.384 24.384 0 0 0-24.384-24.373333H694.858667a24.384 24.384 0 0 0-24.384 24.373333v368.16a34.133333 34.133333 0 0 0 34.133333 34.133333z" fill="#FFFFFF" ></path><path d="M329.141333 646.090667h109.717334a24.384 24.384 0 0 0 24.384-24.373334V353.525333H304.746667v268.192a24.384 24.384 0 0 0 24.384 24.373334zM585.141333 646.090667h109.717334a24.384 24.384 0 0 0 24.384-24.373334V353.525333H560.746667v268.192a24.384 24.384 0 0 0 24.384 24.373334zM512 275.808h330.666667a21.333333 21.333333 0 1 0 0-42.666667H512a21.333333 21.333333 0 1 0 0 42.666667z" fill="#3B3B3B" ></path><path d="M474.666667 302.474667m0-24.384l0-47.232q0-24.384 24.384-24.384l79.232 0q24.384 0 24.384 24.384l0 47.232q0 24.384-24.384 24.384l-79.232 0q-24.384 0-24.384-24.384Z" fill="#898989" ></path><path d="M499.818667 268.181333m0-12.192l0-12.192q0-12.192 12.192-12.192l0 0q12.192 0 12.192 12.192l0 12.192q0 12.192-12.192 12.192l0 0q-12.192 0-12.192-12.192Z" fill="#6D6D6D" ></path><path d="M548.576 268.181333m0-12.192l0-12.192q0-12.192 12.192-12.192l0 0q12.192 0 12.192 12.192l0 12.192q0 12.192-12.192 12.192l0 0q-12.192 0-12.192-12.192Z" fill="#6D6D6D" ></path><path d="M270.933333 233.141333a25.6 25.6 0 1 1 0 51.2 25.6 25.6 0 0 1 0-51.2z" fill="#FF9393" ></path><path d="M185.6 233.141333a25.6 25.6 0 1 1 0 51.2 25.6 25.6 0 0 1 0-51.2z" fill="#ACE66B" ></path></symbol><symbol id="iconclose" viewBox="0 0 1024 1024"><path d="M924.992 99.712a46.528 46.528 0 0 1 0 65.856L578.304 512.192l346.688 346.624c16.896 16.896 18.048 43.52 3.584 61.76l-4.16 4.672a46.528 46.528 0 0 1-65.856 0L512 578.56l-346.624 346.688a46.528 46.528 0 0 1-61.76 3.584l-4.672-4.16a46.528 46.528 0 0 1 0-65.856l346.688-346.624-346.688-346.624a46.528 46.528 0 0 1-3.584-61.76l4.16-4.672a46.528 46.528 0 0 1 65.856 0l346.624 346.688 346.624-346.688a46.528 46.528 0 0 1 61.76-3.584l4.672 4.16z"  ></path></symbol><symbol id="iconanniu-tingzhi" viewBox="0 0 1024 1024"><path d="M512 0c282.765241 0 512 229.234759 512 512S794.765241 1024 512 1024 0 794.765241 0 512 229.234759 0 512 0z m0 35.310345C248.726069 35.310345 35.310345 248.726069 35.310345 512s213.415724 476.689655 476.689655 476.689655 476.689655-213.415724 476.689655-476.689655S775.273931 35.310345 512 35.310345z m141.241379 300.137931a35.310345 35.310345 0 0 1 35.310345 35.310345v282.482758a35.310345 35.310345 0 0 1-35.310345 35.310345H370.758621a35.310345 35.310345 0 0 1-35.310345-35.310345V370.758621a35.310345 35.310345 0 0 1 35.310345-35.310345h282.482758z"  ></path></symbol><symbol id="iconanniu-bofang" viewBox="0 0 1024 1024"><path d="M512 0c282.765241 0 512 229.234759 512 512S794.765241 1024 512 1024 0 794.765241 0 512 229.234759 0 512 0z m-97.103448 304.781241a35.310345 35.310345 0 0 0-35.310345 35.310345v343.816828a35.310345 35.310345 0 0 0 55.066483 29.272276l254.675862-171.908414a35.310345 35.310345 0 0 0 0-58.544552L434.670345 310.81931a35.310345 35.310345 0 0 0-19.756138-6.038069z"  ></path></symbol><symbol id="iconbofangqishi2" viewBox="0 0 1024 1024"><path d="M368.64 20.48c-28.2624 0-53.8624 11.4688-72.41728 29.98272A102.07232 102.07232 0 0 0 266.24 122.88v469.44256a143.36 143.36 0 0 0 25.96864 82.28864l169.49248 241.8688a61.2352 61.2352 0 0 0 100.63872 0l169.45152-241.8688a143.36 143.36 0 0 0 25.96864-82.28864V122.88c0-28.2624-11.4688-53.8624-29.98272-72.41728A102.07232 102.07232 0 0 0 655.36 20.48H368.64z"  ></path></symbol><symbol id="iconbofangqishi1" viewBox="0 0 1024 1024"><path d="M341.333333 0a113.777778 113.777778 0 0 1 113.777778 113.777778v796.444444a113.777778 113.777778 0 1 1-227.555555 0V113.777778a113.777778 113.777778 0 0 1 113.777777-113.777778zM682.666667 0a113.777778 113.777778 0 0 1 113.777777 113.777778v796.444444a113.777778 113.777778 0 1 1-227.555555 0V113.777778a113.777778 113.777778 0 0 1 113.777778-113.777778z"  ></path></symbol><symbol id="iconicon_shitingkaishi" viewBox="0 0 1024 1024"><path d="M512 0a512 512 0 1 1 0 1024A512 512 0 0 1 512 0z m0 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64zM435.2 300.48a51.2 51.2 0 0 1 28.416 8.576l240.512 160.32a51.2 51.2 0 0 1 0 85.248L463.616 714.88A51.2 51.2 0 0 1 384 672.32v-320.64a51.2 51.2 0 0 1 51.2-51.2z"  ></path></symbol><symbol id="iconicon-shitingtingzhistop" viewBox="0 0 1024 1024"><path d="M512 0a512 512 0 1 1 0 1024A512 512 0 0 1 512 0zM384 320a64 64 0 0 0-64 64v256a64 64 0 0 0 128 0V384a64 64 0 0 0-64-64z m256 0a64 64 0 0 0-64 64v256a64 64 0 0 0 128 0V384a64 64 0 0 0-64-64z"  ></path></symbol><symbol id="icondow" viewBox="0 0 1024 1024"><path d="M512.256 102.4c40.8576 0 73.984 33.1264 73.984 73.984V456.192h143.4112c6.9632 0 13.7728 1.9968 19.6096 5.632l4.1984 3.072a37.0176 37.0176 0 0 1 4.5568 52.1216l-189.3376 225.4848a73.984 73.984 0 0 1-113.3568 0l-189.3376-225.4848A37.0176 37.0176 0 0 1 294.4 456.192h143.36V176.384C437.76 135.5264 470.9376 102.4 511.7952 102.4h0.512z"  ></path><path d="M153.6 819.2m51.2 0l614.4 0q51.2 0 51.2 51.2l0 0q0 51.2-51.2 51.2l-614.4 0q-51.2 0-51.2-51.2l0 0q0-51.2 51.2-51.2Z"  ></path></symbol><symbol id="iconb3" viewBox="0 0 1024 1024"><path d="M512 768a32 32 0 1 1 0 64 32 32 0 0 1 0-64zM598.784 324.352l4.096 0.16c11.616 1.024 17.408 6.592 17.408 16.736 0 2.4-0.864 6.144-2.56 11.264-7.52 17.056-15.616 35.424-24.32 55.04l-16.864 38.016a110625.632 110625.632 0 0 1-49.44 110.976l-46.592 104.192a32.448 32.448 0 0 1-10.24 13.056c-4.096 2.88-9.568 4.352-16.384 4.352-4.8 0-8.192-0.96-10.24-2.816a12.352 12.352 0 0 1-3.84-7.168 20.096 20.096 0 0 1 0.512-8.96c0.864-3.072 1.792-5.792 2.816-8.192l133.12-289.28h-148.48l-3.2-0.16C415.456 360.512 410.88 354.752 410.88 344.32 410.88 336.8 412.256 331.616 414.976 328.704c2.72-2.88 7.52-4.352 14.336-4.352h169.472z"  ></path></symbol><symbol id="icona4" viewBox="0 0 1024 1024"><path d="M501.76 679.168c16.032 0 30.624-3.328 43.776-9.984 13.12-6.656 24.416-15.36 33.792-26.112 9.376-10.752 16.64-23.04 21.76-36.864 5.12-13.824 7.68-27.904 7.68-42.24a145.6 145.6 0 0 0-6.912-45.312 109.664 109.664 0 0 0-19.968-36.864 96.48 96.48 0 0 0-31.744-24.832 94.24 94.24 0 0 0-42.24-9.216 75.84 75.84 0 0 0-25.856 3.84c-3.584 1.184-7.168 2.88-10.752 5.12-3.584 2.24-7.424 4.864-11.52 7.936 6.144-13.664 12.288-25.92 18.432-36.864 6.144-10.912 12.544-20.896 19.2-29.952a255.04 255.04 0 0 1 20.992-25.088c7.36-7.68 15.104-15.104 23.296-22.272a19.52 19.52 0 0 0 6.656-10.752 18.144 18.144 0 0 0-7.68-18.688 16.32 16.32 0 0 0-9.728-3.328c-9.216 0-26.624 14.496-52.224 43.52a289.12 289.12 0 0 0-33.024 44.8A336.48 336.48 0 0 0 404.992 510.208 259.232 259.232 0 0 0 399.36 562.944c0 15.36 2.24 30.112 6.656 44.288 4.448 14.176 11.008 26.56 19.712 37.12 8.704 10.56 19.456 19.04 32.256 25.344 12.8 6.304 27.392 9.472 43.776 9.472z m0-36.352c-10.24 0-19.296-2.24-27.136-6.656a62.528 62.528 0 0 1-19.968-17.92 81.312 81.312 0 0 1-12.288-25.344 103.04 103.04 0 0 1-4.096-28.928c0-11.264 1.536-21.856 4.608-31.744 3.072-9.92 7.424-18.432 13.056-25.6 5.632-7.168 12.64-12.8 20.992-16.896s17.664-6.144 27.904-6.144c19.456 0 34.976 6.912 46.592 20.736 11.616 13.824 17.408 33.376 17.408 58.624 0 10.24-1.536 20.224-4.608 29.952-3.072 9.728-7.424 18.24-13.056 25.6-5.632 7.36-12.64 13.216-20.992 17.664a59.68 59.68 0 0 1-28.416 6.656z"  ></path></symbol><symbol id="iconb5" viewBox="0 0 1024 1024"><path d="M598.784 324.352l4.096 0.16c11.616 1.024 17.408 6.592 17.408 16.736 0 2.4-0.864 6.144-2.56 11.264-7.52 17.056-15.616 35.424-24.32 55.04l-16.864 38.016a110625.632 110625.632 0 0 1-49.44 110.976l-46.592 104.192a32.448 32.448 0 0 1-10.24 13.056c-4.096 2.88-9.568 4.352-16.384 4.352-4.8 0-8.192-0.96-10.24-2.816a12.352 12.352 0 0 1-3.84-7.168 20.096 20.096 0 0 1 0.512-8.96c0.864-3.072 1.792-5.792 2.816-8.192l133.12-289.28h-148.48l-3.2-0.16C415.456 360.512 410.88 354.752 410.88 344.32c0-7.52 1.376-12.704 4.096-15.616 2.72-2.88 7.52-4.352 14.336-4.352h169.472zM512 192a32 32 0 1 1 0 64 32 32 0 0 1 0-64z"  ></path></symbol><symbol id="iconb4" viewBox="0 0 1024 1024"><path d="M453.888 678.144c6.816 0 12.288-1.44 16.384-4.352 4.096-2.88 7.52-7.264 10.24-13.056a313954.4 313954.4 0 0 0 83.456-186.88l12.576-28.288 16.864-38.016c8.704-19.616 16.8-37.984 24.32-55.04 1.696-5.12 2.56-8.864 2.56-11.264 0-11.264-7.168-16.896-21.504-16.896H429.312c-6.816 0-11.616 1.44-14.336 4.352C412.256 331.584 410.88 336.8 410.88 344.32c0 11.616 5.632 17.408 16.896 17.408h148.48l-133.12 289.28c-1.024 2.4-1.952 5.12-2.816 8.192a20.096 20.096 0 0 0-0.512 8.96c0.512 2.88 1.792 5.28 3.84 7.168s5.44 2.816 10.24 2.816z"  ></path></symbol><symbol id="icona5" viewBox="0 0 1024 1024"><path d="M530.944 317.696a16.32 16.32 0 0 1 9.728 3.328 18.144 18.144 0 0 1 7.68 18.688 19.52 19.52 0 0 1-6.656 10.752c-8.192 7.168-15.968 14.592-23.296 22.272a255.04 255.04 0 0 0-20.992 25.088 292.192 292.192 0 0 0-19.2 29.952c-6.144 10.912-12.288 23.2-18.432 36.864 4.096-3.072 7.936-5.728 11.52-7.936 3.584-2.24 7.168-3.936 10.752-5.12a75.84 75.84 0 0 1 25.856-3.84c15.68 0 29.76 3.072 42.24 9.216 12.48 6.144 23.04 14.4 31.744 24.832 8.704 10.4 15.36 22.72 19.968 36.864 4.608 14.176 6.912 29.28 6.912 45.312 0 14.336-2.56 28.416-7.68 42.24-5.12 13.824-12.384 26.112-21.76 36.864a110.816 110.816 0 0 1-33.792 26.112c-13.12 6.656-27.744 9.984-43.776 9.984-16.384 0-30.976-3.168-43.776-9.472a96.384 96.384 0 0 1-32.256-25.344 109.024 109.024 0 0 1-19.712-37.12 147.296 147.296 0 0 1-6.656-44.288c0-17.056 1.888-34.656 5.632-52.736a336.48 336.48 0 0 1 40.704-104.192 289.12 289.12 0 0 1 33.024-44.8c25.6-29.024 43.008-43.52 52.224-43.52z m-26.112 165.888c-10.24 0-19.52 2.048-27.904 6.144-8.352 4.096-15.36 9.728-20.992 16.896-5.632 7.168-9.984 15.68-13.056 25.6a106.56 106.56 0 0 0-4.608 31.744c0 9.92 1.376 19.52 4.096 28.928 2.72 9.376 6.816 17.824 12.288 25.344 5.44 7.52 12.128 13.472 19.968 17.92 7.84 4.448 16.896 6.656 27.136 6.656 10.56 0 20.064-2.24 28.416-6.656 8.352-4.448 15.36-10.336 20.992-17.664 5.632-7.36 9.984-15.872 13.056-25.6a98.88 98.88 0 0 0 4.608-29.952c0-25.28-5.792-44.8-17.408-58.624-11.616-13.824-27.136-20.736-46.592-20.736zM512 192a32 32 0 1 1 0 64 32 32 0 0 1 0-64z"  ></path></symbol><symbol id="icona3" viewBox="0 0 1024 1024"><path d="M512 768a32 32 0 1 1 0 64 32 32 0 0 1 0-64zM530.944 317.696a16.32 16.32 0 0 1 9.728 3.328 18.144 18.144 0 0 1 7.68 18.688 19.52 19.52 0 0 1-6.656 10.752c-8.192 7.168-15.968 14.592-23.296 22.272a255.04 255.04 0 0 0-20.992 25.088 292.192 292.192 0 0 0-19.2 29.952c-6.144 10.912-12.288 23.2-18.432 36.864 4.096-3.072 7.936-5.728 11.52-7.936 3.584-2.24 7.168-3.936 10.752-5.12a75.84 75.84 0 0 1 25.856-3.84c15.68 0 29.76 3.072 42.24 9.216 12.48 6.144 23.04 14.4 31.744 24.832 8.704 10.4 15.36 22.72 19.968 36.864 4.608 14.176 6.912 29.28 6.912 45.312 0 14.336-2.56 28.416-7.68 42.24-5.12 13.824-12.384 26.112-21.76 36.864a110.816 110.816 0 0 1-33.792 26.112c-13.12 6.656-27.744 9.984-43.776 9.984-16.384 0-30.976-3.168-43.776-9.472a96.384 96.384 0 0 1-32.256-25.344 109.024 109.024 0 0 1-19.712-37.12A147.296 147.296 0 0 1 399.36 562.944c0-17.056 1.888-34.656 5.632-52.736a336.48 336.48 0 0 1 40.704-104.192 289.12 289.12 0 0 1 33.024-44.8c25.6-29.024 43.008-43.52 52.224-43.52z m-26.112 165.888c-10.24 0-19.52 2.048-27.904 6.144-8.352 4.096-15.36 9.728-20.992 16.896-5.632 7.168-9.984 15.68-13.056 25.6a106.56 106.56 0 0 0-4.608 31.744c0 9.92 1.376 19.52 4.096 28.928 2.72 9.376 6.816 17.824 12.288 25.344 5.44 7.52 12.128 13.472 19.968 17.92 7.84 4.448 16.896 6.656 27.136 6.656 10.56 0 20.064-2.24 28.416-6.656 8.352-4.448 15.36-10.336 20.992-17.664 5.632-7.36 9.984-15.872 13.056-25.6a98.88 98.88 0 0 0 4.608-29.952c0-25.28-5.792-44.8-17.408-58.624-11.616-13.824-27.136-20.736-46.592-20.736z"  ></path></symbol><symbol id="icond3" viewBox="0 0 1024 1024"><path d="M512 768a32 32 0 1 1 0 64 32 32 0 0 1 0-64zM498.944 317.696c15.04 0 28.416 2.304 40.192 6.912 11.776 4.608 21.664 11.104 29.696 19.456 8 8.352 14.08 18.432 18.176 30.208 4.096 11.776 6.144 24.832 6.144 39.168 0 12.96-2.144 26.016-6.4 39.168-4.256 13.12-9.92 26.112-16.896 38.912-7.008 12.8-14.944 25.344-23.808 37.632-8.864 12.288-17.92 23.712-27.136 34.304a685.824 685.824 0 0 1-74.24 73.216h141.312l3.296 0.192c9.408 1.088 14.112 7.168 14.112 18.24 0 12.64-5.792 18.944-17.408 18.944H414.464l-2.496-0.192a14.944 14.944 0 0 1-6.72-2.88 18.88 18.88 0 0 1-6.144-7.936 26.08 26.08 0 0 1-1.792-11.264 30.016 30.016 0 0 1 3.84-13.056c0-4.096 1.376-8.352 4.096-12.8 6.496-6.816 14.592-14.944 24.32-24.32s19.968-19.52 30.72-30.464c10.752-10.912 21.504-22.528 32.256-34.816 10.752-12.288 20.48-24.992 29.184-38.144 8.704-13.12 15.776-26.624 21.248-40.448 5.44-13.824 8.192-27.552 8.192-41.216 0-18.432-4.96-33.28-14.848-44.544-9.92-11.264-23.36-16.896-40.448-16.896-19.456 0-33.6 6.56-42.496 19.712-8.864 13.12-13.312 29.952-13.312 50.432 0 8.544-1.44 14.688-4.352 18.432-2.88 3.744-8.096 5.632-15.616 5.632-8.544 0-14.176-1.6-16.896-4.864-2.72-3.232-4.096-9.632-4.096-19.2 0-33.12 8.192-59.296 24.576-78.592S465.152 317.696 498.944 317.696z"  ></path></symbol><symbol id="iconc3" viewBox="0 0 1024 1024"><path d="M512 768a32 32 0 1 1 0 64 32 32 0 0 1 0-64zM509.184 324.352l4.16 0.128c14.624 1.056 21.952 7.84 21.952 20.352v317.44l-0.192 3.2c-1.184 9.12-7.584 13.696-19.264 13.696-13.312 0-19.968-5.632-19.968-16.896V363.776h-23.04l-3.264-0.128c-4.096-0.384-7.104-1.536-9.024-3.456C458.144 357.792 456.96 352.672 456.96 344.832S458.336 331.616 461.056 328.704c2.72-2.88 7.008-4.352 12.8-4.352h35.328z"  ></path></symbol><symbol id="iconc4" viewBox="0 0 1024 1024"><path d="M515.84 679.168c12.96 0 19.456-5.632 19.456-16.896V344.832c0-13.664-8.704-20.48-26.112-20.48H473.856c-5.792 0-10.08 1.44-12.8 4.352C458.336 331.584 456.96 336.992 456.96 344.832s1.184 12.96 3.584 15.36c2.4 2.4 6.496 3.584 12.288 3.584h23.04v298.496c0 11.264 6.656 16.896 19.968 16.896z"  ></path></symbol><symbol id="iconc5" viewBox="0 0 1024 1024"><path d="M509.184 324.352l4.16 0.128c14.624 1.056 21.952 7.84 21.952 20.352v317.44l-0.192 3.2c-1.184 9.12-7.584 13.696-19.264 13.696-13.312 0-19.968-5.632-19.968-16.896V363.776h-23.04l-3.264-0.128c-4.096-0.384-7.104-1.536-9.024-3.456-2.4-2.4-3.584-7.52-3.584-15.36s1.376-13.216 4.096-16.128c2.72-2.88 7.008-4.352 12.8-4.352h35.328zM512 192a32 32 0 1 1 0 64 32 32 0 0 1 0-64z"  ></path></symbol><symbol id="icone3" viewBox="0 0 1024 1024"><path d="M512 768a32 32 0 1 1 0 64 32 32 0 0 1 0-64zM502.272 317.696c12.288 0 24.064 1.696 35.328 5.12 11.264 3.424 21.152 8.544 29.696 15.36 8.544 6.816 15.36 15.52 20.48 26.112 5.12 10.56 7.68 23.2 7.68 37.888 0 11.936-1.952 22.528-5.888 31.744a90.56 90.56 0 0 1-15.36 24.576 107.072 107.072 0 0 1-20.992 18.432 162.24 162.24 0 0 1-22.784 12.8c9.568 1.376 19.296 4.096 29.184 8.192 9.92 4.096 18.944 9.632 27.136 16.64A77.984 77.984 0 0 1 614.4 575.744c0 16.032-2.72 30.4-8.192 43.008a95.68 95.68 0 0 1-22.784 32.512A98.976 98.976 0 0 1 548.608 672c-13.472 4.8-28.416 7.168-44.8 7.168-18.784 0-34.816-2.976-48.128-8.96a98.4 98.4 0 0 1-32.512-22.528 88.704 88.704 0 0 1-18.432-29.44 84.512 84.512 0 0 1-5.888-29.184 25.984 25.984 0 0 1 5.632-15.104c3.424-4.256 8-6.4 13.824-6.4 4.096 0 8.352 1.536 12.8 4.608 4.448 3.072 7.008 8.192 7.68 15.36 0.32 6.816 1.952 13.472 4.864 19.968a59.008 59.008 0 0 0 33.28 30.976c8.352 3.232 18.336 4.864 29.952 4.864 10.24 0 19.52-1.6 27.904-4.864 8.352-3.232 15.52-7.776 21.504-13.568 5.984-5.792 10.56-12.704 13.824-20.736 3.232-8 4.864-16.64 4.864-25.856 0-11.616-2.304-21.664-6.912-30.208a60.8 60.8 0 0 0-18.432-20.992 79.52 79.52 0 0 0-26.112-12.032 119.232 119.232 0 0 0-30.464-3.84 26.912 26.912 0 0 1-13.824-3.584 17.504 17.504 0 0 1-8.192-10.752c-1.696-3.744-1.696-8.352 0-13.824 2.048-7.52 8.704-11.264 19.968-11.264 8.864 0 17.312-1.888 25.344-5.632 8-3.744 15.04-8.64 20.992-14.592a70.4 70.4 0 0 0 14.336-20.736c3.584-7.84 5.376-15.872 5.376-24.064 0-18.08-5.44-31.904-16.384-41.472a57.824 57.824 0 0 0-39.424-14.336c-16.032 0-29.12 5.024-39.168 15.104-10.08 10.08-15.104 23.648-15.104 40.704 0 6.816-1.6 12.192-4.864 16.128-3.232 3.936-8.288 5.888-15.104 5.888a15.072 15.072 0 0 1-12.544-6.4C411.232 418.144 409.6 412.416 409.6 405.248c0-13.984 2.4-26.464 7.168-37.376 4.8-10.912 11.424-20.064 19.968-27.392 8.544-7.36 18.336-12.96 29.44-16.896A107.488 107.488 0 0 1 502.272 317.696z"  ></path></symbol><symbol id="iconc6" viewBox="0 0 1024 1024"><path d="M514.048 395.625412l3.915294 0.12047c13.793882 0.993882 20.660706 7.378824 20.660706 19.154824v298.767059l-0.180706 3.011764c-1.084235 8.583529-7.137882 12.890353-18.130823 12.890353-12.528941 0-18.793412-5.300706-18.793412-15.902117v-280.937412h-21.684706l-3.072-0.120471c-3.855059-0.361412-6.686118-1.445647-8.493177-3.252706-2.228706-2.258824-3.373176-7.077647-3.373176-14.45647s1.295059-12.438588 3.855059-15.179294c2.590118-2.710588 6.595765-4.096 12.047059-4.096h33.249882zM516.698353 240.941176a30.117647 30.117647 0 1 1 0 60.235295 30.117647 30.117647 0 0 1 0-60.235295z m0-120.470588a30.117647 30.117647 0 1 1 0 60.235294 30.117647 30.117647 0 0 1 0-60.235294z"  ></path></symbol><symbol id="icond5" viewBox="0 0 1024 1024"><path d="M498.944 317.696c15.04 0 28.416 2.304 40.192 6.912 11.776 4.608 21.664 11.104 29.696 19.456 8 8.352 14.08 18.432 18.176 30.208 4.096 11.776 6.144 24.832 6.144 39.168 0 12.96-2.144 26.016-6.4 39.168-4.256 13.12-9.92 26.112-16.896 38.912-7.008 12.8-14.944 25.344-23.808 37.632-8.864 12.288-17.92 23.712-27.136 34.304a685.824 685.824 0 0 1-74.24 73.216h141.312l3.296 0.192c9.408 1.088 14.112 7.168 14.112 18.24 0 12.64-5.792 18.944-17.408 18.944H414.464l-2.496-0.192a14.944 14.944 0 0 1-6.72-2.88 18.88 18.88 0 0 1-6.144-7.936 26.08 26.08 0 0 1-1.792-11.264 30.016 30.016 0 0 1 3.84-13.056c0-4.096 1.376-8.352 4.096-12.8 6.496-6.816 14.592-14.944 24.32-24.32s19.968-19.52 30.72-30.464c10.752-10.912 21.504-22.528 32.256-34.816 10.752-12.288 20.48-24.992 29.184-38.144 8.704-13.12 15.776-26.624 21.248-40.448 5.44-13.824 8.192-27.552 8.192-41.216 0-18.432-4.96-33.28-14.848-44.544-9.92-11.264-23.36-16.896-40.448-16.896-19.456 0-33.6 6.56-42.496 19.712-8.864 13.12-13.312 29.952-13.312 50.432 0 8.544-1.44 14.688-4.352 18.432-2.88 3.744-8.096 5.632-15.616 5.632-8.544 0-14.176-1.6-16.896-4.864-2.72-3.232-4.096-9.632-4.096-19.2 0-33.12 8.192-59.296 24.576-78.592s41.472-28.928 75.264-28.928zM512 192a32 32 0 1 1 0 64 32 32 0 0 1 0-64z"  ></path></symbol><symbol id="icone5" viewBox="0 0 1024 1024"><path d="M502.272 317.696c12.288 0 24.064 1.696 35.328 5.12 11.264 3.424 21.152 8.544 29.696 15.36 8.544 6.816 15.36 15.52 20.48 26.112 5.12 10.56 7.68 23.2 7.68 37.888 0 11.936-1.952 22.528-5.888 31.744a90.56 90.56 0 0 1-15.36 24.576 107.072 107.072 0 0 1-20.992 18.432 162.24 162.24 0 0 1-22.784 12.8c9.568 1.376 19.296 4.096 29.184 8.192 9.92 4.096 18.944 9.632 27.136 16.64a77.984 77.984 0 0 1 27.648 61.184c0 16.032-2.72 30.4-8.192 43.008a95.68 95.68 0 0 1-22.784 32.512A98.976 98.976 0 0 1 548.608 672c-13.472 4.8-28.416 7.168-44.8 7.168-18.784 0-34.816-2.976-48.128-8.96a98.4 98.4 0 0 1-32.512-22.528 88.704 88.704 0 0 1-18.432-29.44 84.512 84.512 0 0 1-5.888-29.184 25.984 25.984 0 0 1 5.632-15.104c3.424-4.256 8-6.4 13.824-6.4 4.096 0 8.352 1.536 12.8 4.608 4.448 3.072 7.008 8.192 7.68 15.36 0.32 6.816 1.952 13.472 4.864 19.968a59.008 59.008 0 0 0 33.28 30.976c8.352 3.232 18.336 4.864 29.952 4.864 10.24 0 19.52-1.6 27.904-4.864 8.352-3.232 15.52-7.776 21.504-13.568 5.984-5.792 10.56-12.704 13.824-20.736 3.232-8 4.864-16.64 4.864-25.856 0-11.616-2.304-21.664-6.912-30.208a60.8 60.8 0 0 0-18.432-20.992 79.52 79.52 0 0 0-26.112-12.032 119.232 119.232 0 0 0-30.464-3.84 26.912 26.912 0 0 1-13.824-3.584 17.504 17.504 0 0 1-8.192-10.752c-1.696-3.744-1.696-8.352 0-13.824 2.048-7.52 8.704-11.264 19.968-11.264 8.864 0 17.312-1.888 25.344-5.632 8-3.744 15.04-8.64 20.992-14.592a70.4 70.4 0 0 0 14.336-20.736c3.584-7.84 5.376-15.872 5.376-24.064 0-18.08-5.44-31.904-16.384-41.472a57.824 57.824 0 0 0-39.424-14.336c-16.032 0-29.12 5.024-39.168 15.104-10.08 10.08-15.104 23.648-15.104 40.704 0 6.816-1.6 12.192-4.864 16.128-3.232 3.936-8.288 5.888-15.104 5.888a15.072 15.072 0 0 1-12.544-6.4C411.232 418.144 409.6 412.416 409.6 405.248c0-13.984 2.4-26.464 7.168-37.376 4.8-10.912 11.424-20.064 19.968-27.392 8.544-7.36 18.336-12.96 29.44-16.896a107.488 107.488 0 0 1 36.096-5.888zM512 192a32 32 0 1 1 0 64 32 32 0 0 1 0-64z"  ></path></symbol><symbol id="icond4" viewBox="0 0 1024 1024"><path d="M585.984 674.048c11.616 0 17.408-6.304 17.408-18.944 0-12.288-5.792-18.432-17.408-18.432H444.672a685.824 685.824 0 0 0 74.24-73.216c9.216-10.56 18.24-22.016 27.136-34.304 8.864-12.288 16.8-24.832 23.808-37.632 7.008-12.8 12.64-25.76 16.896-38.912 4.256-13.12 6.4-26.208 6.4-39.168 0-14.336-2.048-27.392-6.144-39.168a81.792 81.792 0 0 0-18.176-30.208 81.76 81.76 0 0 0-29.696-19.456A109.632 109.632 0 0 0 498.944 317.696c-33.792 0-58.88 9.632-75.264 28.928-16.384 19.296-24.576 45.472-24.576 78.592 0 9.568 1.376 15.968 4.096 19.2 2.72 3.232 8.352 4.864 16.896 4.864 7.52 0 12.704-1.888 15.616-5.632 2.88-3.744 4.352-9.92 4.352-18.432 0-20.48 4.448-37.28 13.312-50.432 8.864-13.12 23.04-19.712 42.496-19.712 17.056 0 30.56 5.632 40.448 16.896 9.92 11.264 14.848 26.112 14.848 44.544 0 13.664-2.72 27.392-8.192 41.216-5.44 13.824-12.544 27.296-21.248 40.448-8.704 13.12-18.432 25.856-29.184 38.144-10.752 12.288-21.504 23.904-32.256 34.816-10.752 10.912-20.992 21.088-30.72 30.464-9.728 9.376-17.824 17.504-24.32 24.32a24.48 24.48 0 0 0-4.096 12.8 30.016 30.016 0 0 0-3.84 13.056 26.08 26.08 0 0 0 1.792 11.264 18.88 18.88 0 0 0 6.144 7.936 14.976 14.976 0 0 0 9.216 3.072h171.52z"  ></path></symbol><symbol id="iconf3" viewBox="0 0 1024 1024"><path d="M512 768a32 32 0 1 1 0 64 32 32 0 0 1 0-64zM569.344 317.696c6.816 0 11.68 2.304 14.592 6.912 2.88 4.608 4.352 13.408 4.352 26.368v210.432h23.552l3.008 0.224c7.552 1.216 11.328 7.296 11.328 18.208 0 12.288-4.8 18.432-14.336 18.432h-23.552v63.488l-0.16 3.84c-0.448 4.704-1.76 7.968-3.936 9.728-2.72 2.24-8 3.328-15.872 3.328-7.52 0-12.64-1.28-15.36-3.84-2.72-2.56-4.096-6.912-4.096-13.056V598.272h-143.36L401.6 598.08c-9.92-0.96-15.776-5.856-17.6-14.656a43.232 43.232 0 0 1 1.536-16.896c1.696-6.496 5.632-14.496 11.776-24.064l111.104-172.032 4.064-6.368c8.064-12.224 15.744-21.728 23.072-28.448 8.544-7.84 19.808-13.824 33.792-17.92z m-20.48 52.736l-120.32 190.976h120.32V370.432z"  ></path></symbol><symbol id="icong5" viewBox="0 0 1024 1024"><path d="M586.24 324.352l3.008 0.192c8.576 1.12 12.864 7.36 12.864 18.752 0 12.288-5.28 18.432-15.872 18.432H475.648l-16.384 94.208 7.936-1.568a185.6 185.6 0 0 1 37.632-3.552c16.384 0 31.232 2.656 44.544 7.936 13.312 5.28 24.576 12.704 33.792 22.272 9.216 9.568 16.384 21.152 21.504 34.816 5.12 13.664 7.68 28.832 7.68 45.568 0 15.68-2.816 30.72-8.448 45.056-5.632 14.336-13.568 26.88-23.808 37.632a114.88 114.88 0 0 1-36.352 25.6 109.504 109.504 0 0 1-45.568 9.472c-10.912 0-20.736-1.024-29.44-3.072a96.192 96.192 0 0 1-23.552-8.704 108.576 108.576 0 0 1-19.2-13.056 162.272 162.272 0 0 1-16.384-16.128 19.296 19.296 0 0 1-5.376-15.36 23.744 23.744 0 0 1 5.888-14.336 17.28 17.28 0 0 1 10.496-4.864c4.256-0.512 8.288 1.28 12.032 5.376 9.568 11.264 20.224 19.52 32 24.832 11.776 5.28 22.784 7.936 33.024 7.936 10.56 0 20.384-2.24 29.44-6.656 9.056-4.448 16.896-10.336 23.552-17.664 6.656-7.36 11.936-15.968 15.872-25.856 3.936-9.92 5.888-20.16 5.888-30.72 0-22.528-5.984-40.448-17.92-53.76-11.936-13.312-29.344-19.968-52.224-19.968a104.928 104.928 0 0 0-38.4 6.4c-4.448 1.536-8.544 2.88-12.288 4.096a40.32 40.32 0 0 1-12.288 1.792c-7.52 0-12.96-2.304-16.384-6.912a20.384 20.384 0 0 1-3.584-16.128l20.992-127.488 1.12-5.024c1.6-6.272 3.584-10.912 6.048-13.92 3.072-3.744 9.056-5.632 17.92-5.632H586.24zM512 192a32 32 0 1 1 0 64 32 32 0 0 1 0-64z"  ></path></symbol><symbol id="icong4" viewBox="0 0 1024 1024"><path d="M498.176 679.168c16.384 0 31.584-3.168 45.568-9.472a114.88 114.88 0 0 0 36.352-25.6c10.24-10.752 18.176-23.296 23.808-37.632 5.632-14.336 8.448-29.344 8.448-45.056 0-16.736-2.56-31.904-7.68-45.568a100.032 100.032 0 0 0-21.504-34.816 94.912 94.912 0 0 0-33.792-22.272 119.68 119.68 0 0 0-44.544-7.936 185.6 185.6 0 0 0-23.296 1.28 292.8 292.8 0 0 0-22.272 3.84l16.384-94.208H586.24c10.56 0 15.872-6.144 15.872-18.432 0-12.64-5.28-18.944-15.872-18.944H465.408c-8.864 0-14.848 1.888-17.92 5.632-3.072 3.744-5.44 10.08-7.168 18.944l-20.992 127.488a20.384 20.384 0 0 0 3.584 16.128c3.424 4.608 8.864 6.912 16.384 6.912 4.448 0 8.544-0.608 12.288-1.792 3.744-1.184 7.84-2.56 12.288-4.096s9.632-2.976 15.616-4.352c5.984-1.376 13.568-2.048 22.784-2.048 22.88 0 40.288 6.656 52.224 19.968 11.936 13.312 17.92 31.232 17.92 53.76 0 10.56-1.952 20.8-5.888 30.72-3.936 9.92-9.216 18.528-15.872 25.856-6.656 7.36-14.496 13.216-23.552 17.664a65.92 65.92 0 0 1-29.44 6.656c-10.24 0-21.248-2.656-33.024-7.936a90.976 90.976 0 0 1-32-24.832c-3.744-4.096-7.776-5.888-12.032-5.376a17.28 17.28 0 0 0-10.496 4.864 23.744 23.744 0 0 0-5.888 14.336 19.296 19.296 0 0 0 5.376 15.36c5.12 5.792 10.56 11.2 16.384 16.128 5.792 4.96 12.192 9.28 19.2 13.056 7.008 3.744 14.848 6.656 23.552 8.704 8.704 2.048 18.528 3.072 29.44 3.072z"  ></path></symbol><symbol id="iconf4" viewBox="0 0 1024 1024"><path d="M568.32 678.656c7.84 0 13.12-1.12 15.872-3.328 2.72-2.24 4.096-6.72 4.096-13.568V598.272h23.552c9.568 0 14.336-6.144 14.336-18.432 0-12.288-4.8-18.432-14.336-18.432h-23.552V350.976c0-12.96-1.44-21.76-4.352-26.368C581.056 320 576.16 317.696 569.344 317.696c-13.984 4.096-25.28 10.08-33.792 17.92-8.544 7.84-17.6 19.456-27.136 34.816L397.312 542.464c-6.144 9.568-10.08 17.6-11.776 24.064-1.696 6.496-2.24 12.128-1.536 16.896 2.048 9.92 9.216 14.848 21.504 14.848h143.36v63.488c0 6.144 1.376 10.496 4.096 13.056 2.72 2.56 7.84 3.84 15.36 3.84z m-19.456-117.248h-120.32l120.32-190.976v190.976z"  ></path></symbol><symbol id="icone4" viewBox="0 0 1024 1024"><path d="M503.808 679.168c16.384 0 31.328-2.4 44.8-7.168 13.472-4.8 25.088-11.68 34.816-20.736a95.68 95.68 0 0 0 22.784-32.512c5.44-12.64 8.192-26.976 8.192-43.008a77.984 77.984 0 0 0-27.648-61.184 100.992 100.992 0 0 0-27.136-16.64 121.12 121.12 0 0 0-29.184-8.192 162.24 162.24 0 0 0 22.784-12.8c7.68-5.12 14.688-11.264 20.992-18.432a90.56 90.56 0 0 0 15.36-24.576c3.936-9.216 5.888-19.808 5.888-31.744 0-14.688-2.56-27.296-7.68-37.888a74.272 74.272 0 0 0-20.48-26.112 87.68 87.68 0 0 0-29.696-15.36 121.152 121.152 0 0 0-35.328-5.12c-12.96 0-24.992 1.952-36.096 5.888a91.488 91.488 0 0 0-29.44 16.896c-8.544 7.36-15.2 16.48-19.968 27.392-4.8 10.912-7.168 23.36-7.168 37.376 0 7.168 1.6 12.896 4.864 17.152 3.232 4.256 7.424 6.4 12.544 6.4 6.816 0 11.84-1.952 15.104-5.888 3.232-3.936 4.864-9.28 4.864-16.128 0-17.056 5.024-30.624 15.104-40.704 10.08-10.08 23.136-15.104 39.168-15.104 15.36 0 28.48 4.8 39.424 14.336 10.912 9.568 16.384 23.36 16.384 41.472 0 8.192-1.792 16.224-5.376 24.064a70.4 70.4 0 0 1-14.336 20.736 73.408 73.408 0 0 1-20.992 14.592c-8 3.744-16.48 5.632-25.344 5.632-11.264 0-17.92 3.744-19.968 11.264-1.696 5.44-1.696 10.08 0 13.824 1.376 4.8 4.096 8.352 8.192 10.752a26.912 26.912 0 0 0 13.824 3.584c10.56 0 20.736 1.28 30.464 3.84 9.728 2.56 18.432 6.56 26.112 12.032 7.68 5.44 13.824 12.48 18.432 20.992 4.608 8.544 6.912 18.592 6.912 30.208 0 9.216-1.6 17.824-4.864 25.856-3.232 8-7.84 14.944-13.824 20.736s-13.12 10.336-21.504 13.568a76.608 76.608 0 0 1-27.904 4.864c-11.616 0-21.6-1.6-29.952-4.864a59.008 59.008 0 0 1-33.28-30.976 55.296 55.296 0 0 1-4.864-19.968c-0.672-7.168-3.232-12.288-7.68-15.36a22.624 22.624 0 0 0-12.8-4.608 16.768 16.768 0 0 0-13.824 6.4 25.984 25.984 0 0 0-5.632 15.104c0 8.864 1.952 18.592 5.888 29.184 3.936 10.56 10.08 20.384 18.432 29.44 8.352 9.056 19.2 16.544 32.512 22.528 13.312 5.984 29.344 8.96 48.128 8.96z"  ></path></symbol><symbol id="icong3" viewBox="0 0 1024 1024"><path d="M512 768a32 32 0 1 1 0 64 32 32 0 0 1 0-64zM586.24 324.352l3.008 0.192c8.576 1.12 12.864 7.36 12.864 18.752 0 12.288-5.28 18.432-15.872 18.432H475.648l-16.384 94.208 7.936-1.568a185.6 185.6 0 0 1 37.632-3.552c16.384 0 31.232 2.656 44.544 7.936 13.312 5.28 24.576 12.704 33.792 22.272 9.216 9.568 16.384 21.152 21.504 34.816 5.12 13.664 7.68 28.832 7.68 45.568 0 15.68-2.816 30.72-8.448 45.056-5.632 14.336-13.568 26.88-23.808 37.632a114.88 114.88 0 0 1-36.352 25.6 109.504 109.504 0 0 1-45.568 9.472c-10.912 0-20.736-1.024-29.44-3.072a96.192 96.192 0 0 1-23.552-8.704 108.576 108.576 0 0 1-19.2-13.056A162.272 162.272 0 0 1 409.6 638.208a19.296 19.296 0 0 1-5.376-15.36 23.744 23.744 0 0 1 5.888-14.336 17.28 17.28 0 0 1 10.496-4.864c4.256-0.512 8.288 1.28 12.032 5.376 9.568 11.264 20.224 19.52 32 24.832 11.776 5.28 22.784 7.936 33.024 7.936 10.56 0 20.384-2.24 29.44-6.656 9.056-4.448 16.896-10.336 23.552-17.664 6.656-7.36 11.936-15.968 15.872-25.856 3.936-9.92 5.888-20.16 5.888-30.72 0-22.528-5.984-40.448-17.92-53.76-11.936-13.312-29.344-19.968-52.224-19.968a104.928 104.928 0 0 0-38.4 6.4c-4.448 1.536-8.544 2.88-12.288 4.096a40.32 40.32 0 0 1-12.288 1.792c-7.52 0-12.96-2.304-16.384-6.912a20.384 20.384 0 0 1-3.584-16.128L440.32 348.928l1.12-5.024c1.6-6.272 3.584-10.912 6.048-13.92 3.072-3.744 9.056-5.632 17.92-5.632H586.24z"  ></path></symbol><symbol id="iconf5" viewBox="0 0 1024 1024"><path d="M569.344 317.696c6.816 0 11.68 2.304 14.592 6.912 2.88 4.608 4.352 13.408 4.352 26.368v210.432h23.552l3.008 0.224c7.552 1.216 11.328 7.296 11.328 18.208 0 12.288-4.8 18.432-14.336 18.432h-23.552v63.488l-0.16 3.84c-0.448 4.704-1.76 7.968-3.936 9.728-2.72 2.24-8 3.328-15.872 3.328-7.52 0-12.64-1.28-15.36-3.84-2.72-2.56-4.096-6.912-4.096-13.056v-63.488h-143.36l-3.904-0.192c-9.92-0.96-15.776-5.856-17.6-14.656a43.232 43.232 0 0 1 1.536-16.896c1.696-6.496 5.632-14.496 11.776-24.064l111.104-172.032 4.064-6.368c8.064-12.224 15.744-21.728 23.072-28.448 8.544-7.84 19.808-13.824 33.792-17.92z m-20.48 52.736l-120.32 190.976h120.32V370.432zM512 192a32 32 0 1 1 0 64 32 32 0 0 1 0-64z"  ></path></symbol></svg>',c=(c=document.getElementsByTagName("script"))[c.length-1].getAttribute("data-injectcss");if(c&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(e){console&&console.log(e)}}function l(){a||(a=!0,o())}t=function(){var e,t,n,o;(o=document.createElement("div")).innerHTML=s,s=null,(n=o.getElementsByTagName("svg")[0])&&(n.setAttribute("aria-hidden","true"),n.style.position="absolute",n.style.width=0,n.style.height=0,n.style.overflow="hidden",e=n,(t=document.body).firstChild?(o=e,(n=t.firstChild).parentNode.insertBefore(o,n)):t.appendChild(e))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(o=t,i=e.document,a=!1,(r=function(){try{i.documentElement.doScroll("left")}catch(e){return void setTimeout(r,50)}l()})(),i.onreadystatechange=function(){"complete"==i.readyState&&(i.onreadystatechange=null,l())})}(window);function rn(e){var t;return Object(i.useEffect)(()=>{var t;t=e.reportCommonEvent,Je=t},[e]),Object(i.useEffect)(()=>{var t;t=e.language_data,Rt=t.messages,He.dispatch({payload:e.language_data.lang,type:"midi/lang"})},[e.language_data]),a.a.createElement(r.Provider,{store:He},a.a.createElement(an,{isHidden:e.isHidden,midiJSON:null!==(t=e.midiJSON)&&void 0!==t?t:null,onSave:e.onSave,onClose:e.onClose,mode:e.mode}))}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}('@charset "UTF-8";\n/* 补充色 1 对应 -1，2 对应 -2，0 对应默认，该变量不能直接用作于 css 颜色 */\n/* 主题色变量快速检索，仅提供主题色 scss 变量 */\n/* 重要文字 */\n/* 画板辅助线 */\n/* 提示、不可操作、标签角标、按钮边线 */\n/* 辅助文字 */\n/* 常规文字 */\n/* 黄色用于区别其他颜色的别名*/\n.music-painter-main {\n  width: calc(100% - 100px);\n  height: calc(100% - 40px);\n  max-width: 1448px;\n  min-width: 996px;\n  min-height: 600px;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  background-color: white;\n  border-radius: 4px;\n}\n\n.music-painter-main.complex {\n  max-height: 938px;\n}\n\n.music-painter-main.simple {\n  max-height: 739px;\n}\n\n.music-painter-main .footer {\n  position: absolute;\n  width: 100%;\n  height: 90px;\n  bottom: 0;\n  background-color: #fff;\n}\n\n.midi-painter-btn-feedback:hover {\n  filter: brightness(0.95);\n}\n\n.midi-painter-btn-feedback:hover:active {\n  filter: brightness(0.9);\n}\n\n.midi-painter-dialog {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  z-index: 1;\n}\n\n.midi-docs-dialog {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  z-index: 2;\n}\n\n.midi-control-panel {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 2px;\n  height: 78px;\n}\n\n.midi-control-panel button {\n  outline: none;\n}\n\n.wrap-play-btn {\n  display: flex;\n  flex: 0 1 200px;\n  padding-left: 24px;\n}\n.wrap-play-btn .play-btn {\n  width: 60px;\n  height: 60px;\n  border-radius: 30px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n}\n.wrap-play-btn .play-btn .btn-stop {\n  color: rgba(var(--theme-color-s2-0), 1);\n}\n.wrap-play-btn .play-btn .btn-stop:hover {\n  color: rgba(var(--theme-color-s2-1), 1);\n}\n.wrap-play-btn .play-btn .btn-play {\n  color: rgba(var(--theme-color-c), 1);\n}\n.wrap-play-btn .play-btn .btn-play:hover {\n  color: rgba(var(--theme-color-c1), 1);\n}\n\n.wrap-options-btn {\n  display: flex;\n  justify-content: flex-end;\n  flex: 0 1 200px;\n  padding-right: 24px;\n}\n\n.wrap-panel-content {\n  display: flex;\n  z-index: 5;\n}\n\n.save-btn {\n  margin-left: 12px;\n}\n\n.download-btn .CUI-button-btn {\n  min-width: 0;\n  min-height: 0;\n  border-width: 1px;\n}\n.download-btn .CUI-button-btn-tooltip {\n  top: -30px;\n  padding: 3px 6px;\n  z-index: 3;\n}\n\n.save-btn-text {\n  min-width: calc(120px - 14px * 2);\n  text-align: center;\n}\n\n.content-object {\n  display: flex;\n  flex: auto;\n  justify-content: flex-start;\n  align-items: center;\n  margin-right: 30px;\n}\n\n.content-object:last-child {\n  margin-right: 0;\n}\n\n.content-object > label {\n  display: block;\n  color: #4c5159;\n}\n\n.content-object > div {\n  margin-left: 8px;\n  height: 48px;\n}\n\n.content-object .text-box > span,\n.content-object .text-box > input {\n  min-width: 40px;\n  display: inline-block;\n}\n\n.content-object .text-box {\n  height: 28px;\n  line-height: 22px;\n  padding: 3px 8px;\n  border-radius: 5px;\n  background-color: rgba(126, 125, 125, 0.05);\n  color: #212326;\n  cursor: pointer;\n  text-align: center;\n}\n\n.midi-panel-common-popup {\n  position: absolute;\n  bottom: 70px;\n  transform: translate(-40%, 0px);\n  background: #fff;\n  border-radius: 6px;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.1);\n  z-index: 999;\n}\n\n.midi-bpm-input {\n  width: 28px;\n  border: none;\n  outline: none;\n  background-color: transparent;\n  text-align: center;\n}\n\n.menu-list-item {\n  list-style: none;\n  width: 100%;\n  height: 60px;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  position: relative;\n}\n.menu-list-item * {\n  cursor: pointer;\n}\n.menu-list-item:hover {\n  background-color: rgba(var(--theme-color-y6, var(--theme-color-8)), 1);\n}\n\n.menu-list-item.selected {\n  background-color: rgba(var(--theme-color-y6, var(--theme-color-8)), 1);\n}\n.menu-list-item.selected::before {\n  display: block;\n  content: "";\n  position: absolute;\n  width: 4px;\n  border-top-right-radius: 3px;\n  border-bottom-right-radius: 3px;\n  top: 0;\n  bottom: 0;\n  background-color: rgba(var(--theme-color-ys2, var(--theme-color-1)), 1);\n}\n\n.bpm-slider-container {\n  min-width: 220px;\n  height: 50px;\n  padding: 5px 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.bpm-slider-container span {\n  font-size: 14px;\n}\n\n.bpm-slider-container .slider {\n  display: block;\n  height: 6px;\n  margin: 0 12px;\n  cursor: pointer;\n  -webkit-appearance: none;\n  -ms-progress-appearance: none;\n  width: 136px;\n  background: transparent;\n  outline: none;\n  border-radius: 4px;\n}\n\n.bpm-slider-container .slider::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  width: 14px;\n  height: 14px;\n  margin-top: -5px;\n  border-radius: 50%;\n  cursor: pointer;\n  background-color: rgba(var(--theme-color-0), 1);\n}\n\n.bpm-slider-container .slider::-webkit-slider-runnable-track {\n  position: relative;\n  height: 4px;\n}\n\n.inst-container {\n  width: 296px;\n  height: 248px;\n  padding: 24px 16px;\n}\n\n.inst-container > ul {\n  display: flex;\n  flex-flow: wrap;\n  cursor: default;\n}\n\n.inst-container .inst-box {\n  list-style: none;\n  display: flow-root;\n  width: 72px;\n  margin: 0 8px;\n  box-sizing: content-box;\n}\n\n.inst-container .inst-box > div {\n  width: 72px;\n  height: 72px;\n  padding: 7px;\n  border-radius: 8px;\n  cursor: pointer;\n}\n\n.inst-container .inst-box > div.selected {\n  border: 2px solid rgba(var(--theme-color-1), 1);\n  padding: 5px;\n  background-color: rgba(var(--theme-color-5), 1);\n}\n\n.inst-container .inst-box > div:hover {\n  background-color: rgba(var(--theme-color-5), 1);\n}\n\n.inst-container .inst-title {\n  height: 28px;\n  padding: 5px;\n  text-align: center;\n  font-size: 14px;\n  line-height: 18px;\n  color: #77808c;\n}\n\n.mode-container {\n  width: 160px;\n  padding: 8px 0;\n}\n.mode-container ul li p {\n  width: 100%;\n  text-align: center;\n}\n\n.obb-container {\n  min-width: 205px;\n  padding: 8px 0;\n}\n.obb-container ul .obb-box:first-child .obb-title {\n  margin-left: 20px;\n}\n\n.obb-container .obb-icon {\n  margin-left: 20px;\n  color: rgba(var(--theme-color-1), 1);\n}\n.obb-container .obb-icon:hover {\n  color: rgba(var(--theme-color-n1), 1);\n}\n\n.obb-container .obb-title {\n  display: flex;\n  flex: 1 1 auto;\n  height: 20px;\n  margin: 0 16px 0 12px;\n  line-height: 20px;\n  color: #77808c;\n  text-align: left;\n}\n\n.obb-container .gif-container {\n  display: flex;\n  flex: 0 1 88px;\n  height: 44px;\n  margin-right: 16px;\n}\n\n.container {\n  position: relative;\n  height: calc(100% - 140px);\n  width: 100%;\n  background: white;\n  overflow: hidden;\n  border-top: 1px solid #E6E6E6;\n}\n\n.canvas-container {\n  position: absolute;\n  top: 27px;\n  left: 33px;\n  /* 27和33分别对应左右偏移量 22代表滚动条高度 */\n  height: calc(100% - 27px - 22px);\n  /* 6px 是margin-left的 */\n  width: calc(100% - 33px - 6px);\n  background-color: rgba(var(--theme-color-9), 1);\n  margin-left: 6px;\n  min-height: 544px;\n}\n\n.canvas {\n  height: 100%;\n  width: 100%;\n}\n\n.fixed-section {\n  position: absolute;\n  left: 0;\n  top: 0;\n  background-color: white;\n  height: 27px;\n  width: 33px;\n  z-index: 4;\n  border-bottom: 1px solid rgba(var(--theme-color-5), 1);\n  border-right: 1px solid rgba(var(--theme-color-5), 1);\n}\n\n.section-bar {\n  height: 27px;\n  display: flex;\n  flex-direction: row;\n  position: absolute;\n  top: 0;\n  list-style: none;\n  z-index: 2;\n  transform: translate(0px, 0px);\n}\n\n.first-section {\n  flex-grow: 0;\n  flex-shrink: 0;\n  width: 33px;\n  height: 27px;\n  border-right: 1px solid rgba(var(--theme-color-5), 1);\n  border-bottom: 1px solid rgba(var(--theme-color-5), 1);\n}\n\n.second-section {\n  width: 6px;\n  border-right: 1px solid rgba(var(--theme-color-5), 1);\n  border-bottom: 1px solid rgba(var(--theme-color-5), 1);\n}\n\n.section-item {\n  position: relative;\n  width: 320px;\n  height: 100%;\n  flex-grow: 0;\n  flex-shrink: 0;\n  border-right: 1px solid rgba(var(--theme-color-5), 1);\n  text-align: right;\n  border-bottom: 1px solid rgba(var(--theme-color-5), 1);\n}\n\n.section-text {\n  margin-left: 4px;\n  font-size: 12px;\n  font-weight: 400;\n  color: #A3AEBF;\n  line-height: 27px;\n  width: 40px;\n  display: inline-block;\n  text-align: center;\n}\n\n.anchor {\n  position: relative;\n  height: 26px;\n  width: 12px;\n  /* 使锚点和线对齐 */\n  left: 0.4px;\n  transform: translateX(0px);\n  z-index: 1;\n  cursor: pointer;\n}\n\n.anchor .anchor-body {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  color: rgba(var(--theme-color-1), 1);\n}\n\n.anchor .anchor-pause {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 5px;\n  color: white;\n}\n\n.note-bar {\n  width: 33px;\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  left: 0;\n  list-style: none;\n  z-index: 2;\n  top: 27px;\n  transform: translateY(0px);\n  padding-top: 1px;\n}\n\n.note-item {\n  display: flex;\n  position: relative;\n  width: 33px;\n  /* 有1px的描边 所以加了1px的高度去对齐*/\n  height: 35px;\n  background: #FFFFFF;\n  flex-grow: 0;\n  flex-shrink: 0;\n  justify-content: center;\n  align-items: center;\n  border-right: 1px solid rgba(var(--theme-color-5), 1);\n  margin-top: -1px;\n}\n\n.note-icon {\n  border-top: 1px solid #F5F5F5;\n  width: 32px;\n}\n\n.note-bar .si {\n  color: #D45AD7;\n}\n\n.note-bar .la {\n  color: #9E59ED;\n}\n\n.note-bar .sol {\n  color: #467CE8;\n}\n\n.note-bar .fa {\n  color: #45B2E8;\n}\n\n.note-bar .mi {\n  color: #68CC47;\n}\n\n.note-bar .re {\n  color: #FFAF50;\n}\n\n.note-bar .do {\n  color: #FF2F2F;\n}\n\n.bottom-scroll-bar {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 22px;\n  background-color: white;\n  z-index: 3;\n  padding: 4px;\n  border: 1px solid #e6e6e6;\n}\n\n.botton-scroll-bar-thumb {\n  width: 300px;\n  height: 100%;\n  background-color: rgba(179, 179, 179, 0.3);\n  border-radius: 4px;\n  transform: translateX(0px);\n}\n\n.dragging-botton-scroll-bar-thumb {\n  width: 300px;\n  height: 100%;\n  background-color: rgba(179, 179, 179, 0.6);\n  border-radius: 4px;\n  transform: translateX(0px);\n}\n\n.cartoon-role-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n.header-background {\n  width: 100%;\n  height: 100%;\n  transform: translateY(1px);\n  overflow: hidden;\n}\n\n.header-background .bg-left {\n  height: 100%;\n  width: 33%;\n}\n\n.header-background .bg-middle {\n  height: 100%;\n  width: 34%;\n}\n\n.header-background .bg-right {\n  height: 100%;\n  width: 33%;\n}\n\n.speaker {\n  position: absolute;\n  height: 70px;\n  width: 70px;\n  bottom: -20px;\n}\n\n.speaker.left {\n  left: calc(50% - 120px);\n  background-image: url("https://kn-cdn.codemao.cn/kitten/midi/docs/images/speaker_left.png");\n  background-position-x: 0;\n  background-position-y: 0;\n  background-size: 700px 70px;\n}\n\n.speaker.right {\n  left: calc(50% + 50px);\n  background-image: url("https://kn-cdn.codemao.cn/kitten/midi/docs/images/speaker_right.png");\n  background-position-x: 0;\n  background-position-y: 0;\n  background-size: 700px 70px;\n}\n\n@keyframes showRoleAfterGuide {\n  from {\n    bottom: -120px;\n    opacity: 0;\n  }\n  to {\n    bottom: -20px;\n    opacity: 1;\n  }\n}\n@keyframes showRole {\n  0% {\n    bottom: -120px;\n    width: 100px;\n    opacity: 0;\n    filter: brightness(50%);\n  }\n  20% {\n    bottom: -10px;\n    width: 80px;\n    background-size: 800px 100px;\n    opacity: 0.2;\n    filter: brightness(70%);\n    left: calc(50% - 40px);\n  }\n  100% {\n    bottom: -20px;\n    width: 100px;\n    opacity: 1;\n    filter: brightness(100%);\n  }\n}\n@keyframes hideRole {\n  0% {\n    bottom: -20px;\n    height: 100px;\n    width: 100px;\n    opacity: 1;\n    filter: brightness(100%);\n  }\n  20% {\n    bottom: -5px;\n    width: 80px;\n    background-size: 800px 100px;\n    opacity: 0.2;\n    filter: brightness(70%);\n    left: calc(50% - 40px);\n  }\n  100% {\n    bottom: -120px;\n    width: 100px;\n    filter: brightness(50%);\n    opacity: 0;\n  }\n}\n.cartoon-role {\n  position: absolute;\n  left: calc(50% - 50px);\n  bottom: -20px;\n  cursor: pointer;\n  height: 100px;\n  width: 100px;\n  background-image: url("https://kn-cdn.codemao.cn/kitten/midi/docs/images/role_game.png");\n  background-position-x: 0;\n  background-position-y: 0;\n  background-size: 1000px 100px;\n  visibility: hidden;\n}\n\n.cartoon-role.pop-in {\n  animation: showRole 500ms;\n}\n\n.cartoon-role.pop-out {\n  animation: hideRole 500ms;\n}\n\n.cartoon-role.pop-in-after-guide {\n  animation: showRoleAfterGuide 300ms;\n}\n\n@keyframes showObbRole {\n  0% {\n    bottom: -120px;\n    width: 100px;\n    opacity: 0;\n    filter: brightness(50%);\n  }\n  20% {\n    bottom: -5px;\n    width: 80px;\n    background-size: 800px 100px;\n    opacity: 0.2;\n    filter: brightness(70%);\n    left: calc(50% + 10px);\n  }\n  100% {\n    bottom: -20px;\n    width: 100px;\n    opacity: 1;\n    filter: brightness(100%);\n  }\n}\n@keyframes hideObbRole {\n  0% {\n    bottom: -20px;\n    width: 100px;\n    opacity: 1;\n    filter: brightness(100%);\n  }\n  20% {\n    bottom: -5px;\n    width: 80px;\n    background-size: 800px 100px;\n    opacity: 0.2;\n    filter: brightness(70%);\n    left: calc(50% + 10px);\n  }\n  100% {\n    bottom: -120px;\n    width: 100px;\n    opacity: 0;\n    filter: brightness(50%);\n  }\n}\n.cartoon-obb-role {\n  position: absolute;\n  left: calc(50%);\n  bottom: -20px;\n  height: 100px;\n  width: 100px;\n  background-image: url("https://kn-cdn.codemao.cn/kitten/midi/docs/images/obb_role.png");\n  background-position-x: 0;\n  background-position-y: 0;\n  background-size: 1000px 100px;\n  visibility: hidden;\n}\n\n.cartoon-obb-role.pop-in {\n  animation: showObbRole 500ms;\n}\n\n.cartoon-obb-role.pop-out {\n  animation: hideObbRole 500ms;\n}\n\n@keyframes showRoleDialog {\n  from {\n    transform: scale(0);\n    transform-origin: 120% 50%;\n    opacity: 0;\n  }\n  to {\n    transform: scale(1);\n    transform-origin: 120% 50%;\n    opacity: 1;\n  }\n}\n@keyframes hideRoleDialog {\n  from {\n    transform: scale(1);\n    transform-origin: 100% 50%;\n    opacity: 1;\n  }\n  to {\n    transform: scale(0);\n    transform-origin: 100% 50%;\n    opacity: 0;\n  }\n}\n.role-dialog-mask {\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100vw;\n  z-index: 6;\n  visibility: hidden;\n}\n\n.role-dialog {\n  position: absolute;\n  right: calc(50% + 50px);\n  bottom: -20px;\n  height: 90px;\n  visibility: hidden;\n  z-index: 7;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.role-dialog.pop-in {\n  animation: showRoleDialog 200ms;\n}\n\n.role-dialog.pop-out {\n  animation: hideRoleDialog 200ms;\n}\n\n.role-dialog.slided {\n  left: calc(50% - 190px);\n}\n\n.role-dialog.slided.pop-in {\n  animation: showRoleDialog 200ms;\n}\n\n.role-dialog.slided.pop-out {\n  animation: hideRoleDialog 200ms;\n}\n\n.role-dialog-text {\n  height: 40px;\n  padding: 0 15px;\n  margin-left: auto;\n  line-height: 36px;\n  font-size: 14px;\n  padding: 0 15px;\n  color: #4C5159;\n  background-color: white;\n  box-shadow: 0px 2px 8px 0px rgba(0, 0, 0, 0.2);\n  border: 2px solid rgba(194, 218, 255, 0.2);\n  border-radius: 20px;\n  cursor: pointer;\n}\n\n.role-dialog-text.open-midi-demo {\n  transform: translateX(5px);\n}\n\n@keyframes showTipDialog {\n  from {\n    transform: scale(0);\n    transform-origin: 100% 100%;\n    opacity: 0;\n  }\n  to {\n    transform: scale(1);\n    transform-origin: 100% 100%;\n    opacity: 1;\n  }\n}\n@keyframes hideTipDialog {\n  from {\n    transform: scale(1);\n    transform-origin: 100% 100%;\n    opacity: 1;\n  }\n  to {\n    transform: scale(0);\n    transform-origin: 100% 100%;\n    opacity: 0;\n  }\n}\n.role-tip-dialog-container {\n  position: absolute;\n  left: calc(50% - 225px);\n  bottom: 10px;\n  height: 75px;\n  width: 183px;\n  visibility: hidden;\n  z-index: 5;\n}\n\n.role-tip-dialog-container.pop-in {\n  animation: showTipDialog 300ms;\n}\n\n.role-tip-dialog-container.pop-out {\n  animation: hideTipDialog 300ms;\n}\n\n.role-tip-dialog {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n.role-tip-dialog-content {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  padding: 10px 20px;\n  font-size: 14px;\n  line-height: 20px;\n  color: #4C5159;\n}\n\n.context-menu {\n  position: absolute;\n  z-index: 1;\n  padding: 6px 0px;\n  width: 152px;\n  background: #FFFFFF;\n  box-shadow: 0px 1px 6px 0px rgba(0, 0, 0, 0.25);\n  border-radius: 4px;\n  list-style: none;\n}\n\n.context-menu li {\n  padding: 10px 20px;\n  font-size: 14px;\n  color: #4C5159;\n  line-height: 16px;\n  height: 36px;\n}\n\n.context-menu li:hover {\n  background: #E8F1FF;\n}\n\n.context-menu .disabled {\n  color: #ccc;\n}\n\n.music-painter-main .header {\n  height: 60px;\n  width: 100%;\n  background-color: white;\n  position: relative;\n  border-radius: 4px 4px 0px 0px;\n}\n\n.close-btn {\n  position: absolute;\n  top: 22px;\n  right: 24px;\n  cursor: pointer;\n  color: #A3AEBF;\n}\n\n.close-btn:hover {\n  color: #77808C;\n}\n\n@keyframes showDialog {\n  from {\n    transform: scale(0);\n  }\n  to {\n    transform: scale(1);\n  }\n}\n@keyframes showMask {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n.midi-docs-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n.midi-docs-mask {\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100vw;\n  background: rgba(0, 0, 0, 0.6);\n  animation: showMask 200ms;\n}\n\n.docs-container {\n  height: 100%;\n  width: 100%;\n  position: relative;\n  padding: 0;\n  display: flex;\n  background-color: #ffffff;\n  animation: showDialog 250ms;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.docs-header {\n  position: relative;\n  width: 100%;\n  height: 54px;\n  box-shadow: 0 1px 6px 0 rgba(139, 92, 43, 0.1);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #ffffff;\n}\n\n.docs-header-logo {\n  position: absolute;\n  top: 20px;\n  left: 24px;\n  height: 14px;\n  font-size: 16px;\n  font-weight: 500;\n  color: #4c5159;\n  line-height: 13px;\n}\n\n.close-btn {\n  position: absolute;\n  top: 22px;\n  right: 24px;\n  cursor: pointer;\n  color: #a3aebf;\n}\n\n.close-btn:hover {\n  color: #77808c;\n}\n\n.midi-docs-body {\n  position: absolute;\n  top: 60px;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: calc(100% - 60px);\n}\n\n.content-wrap::-webkit-scrollbar {\n  border-radius: 3px;\n  width: 8px;\n  height: 8px;\n  background: inherit;\n  margin-right: 5px;\n}\n\n.content-wrap::-webkit-scrollbar-thumb {\n  border-radius: 6px;\n  height: 8px;\n  background: rgba(0, 0, 0, 0.1);\n}\n\n.content-wrap::-webkit-scrollbar-thumb:hover {\n  background: rgba(0, 0, 0, 0.3);\n}\n\n.content-wrap::-webkit-scrollbar-thumb:active {\n  background: rgba(0, 0, 0, 0.4);\n}\n\n.chapter-title, .chapter-subtitle {\n  display: block;\n  line-height: 40px;\n  text-decoration: none;\n  transition: all 0.1s;\n}\n\n.chapter-title.active:after, .chapter-subtitle.active:after {\n  content: "";\n  float: right;\n  height: 12px;\n  width: 12px;\n  background-color: white;\n  border-top: 1.5px solid #eaecef;\n  border-left: 1.5px solid #eaecef;\n  transform: translateX(3px) translateY(14px) rotate(-45deg);\n}\n\n.midi-docs {\n  height: 100%;\n  width: 100%;\n  background: white;\n}\n\n.vertical-line {\n  position: absolute;\n  height: 100%;\n  width: 278px;\n  border-right: 1.5px solid #eaecef;\n  background-color: white;\n}\n\n.sidebar-wrap {\n  position: absolute;\n  height: 100%;\n  width: 280px;\n  padding: 60px 0 0 60px;\n  overflow-y: scroll;\n  z-index: 1;\n}\n\n.sidebar-wrap::-webkit-scrollbar {\n  width: 0 !important;\n}\n\n.sidebar-wrap .chapter .chapter-title {\n  color: #4c5159;\n  font-size: 16px;\n  z-index: 1;\n}\n\n.sidebar-wrap .chapter .chapter-subtitle {\n  padding-left: 20px;\n  color: #77808c;\n  font-size: 16px;\n  z-index: 1;\n}\n\n.sidebar-wrap .chapter .chapter-title.active, .sidebar-wrap .chapter .chapter-subtitle.active {\n  color: rgba(var(--theme-color-0), 1);\n}\n\n.content-wrap {\n  position: relative;\n  overflow: scroll;\n  left: 280px;\n  height: 100%;\n  width: calc(100% - 283px);\n  padding: 0 60px;\n  margin: 0;\n  color: #77808c;\n  background-color: white;\n}\n\n.content-wrap h1 {\n  margin-top: 60px;\n  color: #4c5159;\n  font-size: 32px;\n}\n\n.content-wrap h2 {\n  color: #4c5159;\n  margin-top: 60px;\n  margin-bottom: 10px;\n  padding-bottom: 16px;\n  font-size: 24px;\n  border-bottom: 1px solid #eaecef;\n}\n\n.content-wrap p {\n  padding: 5px 0;\n  color: #77808c;\n  font-size: 14px;\n  line-height: 21px;\n}\n\n.content-wrap .add-btn {\n  cursor: pointer;\n}\n\n.content-wrap .add-btn .add-btn-icon {\n  color: rgba(var(--theme-color-0), 1);\n  padding-left: 5px;\n  padding-right: 15px;\n  font-size: 18px;\n  font-weight: bold;\n}\n\n.content-wrap .add-btn p {\n  display: inline-block;\n}\n\n.content-wrap strong {\n  font-size: 14px;\n  font-weight: normal;\n  color: rgba(var(--theme-color-0), 1);\n}\n\n.content-wrap span {\n  font-size: 12px;\n  color: #a3aebf;\n}\n\n.content-wrap .with-dot:before {\n  content: "•";\n}\n\n.content-wrap ul {\n  list-style: none;\n}\n\n.content-wrap ul li {\n  padding-left: 0 0 0 12px;\n  color: #77808c;\n  font-size: 14px;\n  line-height: 21px;\n}\n\n.content-wrap ul li:before {\n  content: "•";\n}\n\n.content-wrap img {\n  padding: 10px 0;\n  height: 240px;\n  width: 240px;\n}\n\n.content-wrap img.demo {\n  height: 300px;\n  width: 470px;\n}\n\n.content-wrap video {\n  padding: 10px 0;\n  height: 240px;\n  width: 240px;\n  outline: 0;\n}\n\n.content-wrap video.long-width {\n  height: 190px;\n  width: 420px;\n}\n\n.content-wrap video.demo {\n  height: 300px;\n  width: 470px;\n}\n\n.content-wrap .padding-div {\n  height: 50vh;\n  width: 100%;\n}\n\n@keyframes showMask {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes showRestElement {\n  from {\n    transform: scale(0);\n  }\n  to {\n    transform: scale(1);\n  }\n}\n@keyframes hideRestElement {\n  from {\n    transform: scale(1);\n  }\n  to {\n    transform: scale(0);\n  }\n}\n@keyframes showGuideRole {\n  from {\n    opacity: 0;\n    bottom: -180px;\n  }\n  to {\n    opacity: 1;\n    bottom: 0;\n  }\n}\n@keyframes hideGuideRole {\n  from {\n    opacity: 1;\n    bottom: 0;\n    filter: brightness(100%);\n  }\n  to {\n    opacity: 0;\n    bottom: -180px;\n    filter: brightness(20%);\n  }\n}\n@keyframes showDocsGuide {\n  from {\n    transform: scale(0);\n    opacity: 0;\n  }\n  to {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n.docs-guide-and-mask-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: 3;\n  visibility: hidden;\n}\n\n.docs-guide-mask {\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100vw;\n  background: rgba(0, 0, 0, 0.6);\n  animation: showMask 200ms;\n  visibility: inherit;\n}\n\n.docs-guide-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: 3;\n  visibility: hidden;\n  animation: showDocsGuide 200ms;\n}\n\n.guide-rest-element {\n  position: absolute;\n  top: calc(50% - 150px);\n  left: calc(50% - 175px);\n  height: 250px;\n  width: 350px;\n  z-index: 2;\n}\n\n.guide-rest-element.pop-out {\n  animation: hideRestElement 200ms;\n}\n\n.guide-cartoon-role-container {\n  position: absolute;\n  top: calc(50% - 175px);\n  left: calc(50% - 100px);\n  overflow: hidden;\n}\n\n.guide-cartoon-role {\n  position: relative;\n  height: 180px;\n  width: 180px;\n  animation-delay: 200ms;\n  background-image: url("https://kn-cdn.codemao.cn/kitten/midi/docs/images/role_guitar.png");\n  background-position: 0 0;\n  background-size: 1800px 180px;\n  z-index: 1;\n}\n\n.guide-cartoon-role.pop-out {\n  animation: hideGuideRole 200ms;\n}\n\n.guide-dialog {\n  position: relative;\n  transform: translate(0px, 80px);\n  height: 142px;\n  width: 336px;\n  object-fit: contain;\n}\n\n.guide-content {\n  position: relative;\n  transform: translate(35px, -20px);\n  font-size: 16px;\n  color: #4C5159;\n  text-align: center;\n  height: 60px;\n  width: 250px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.guide-close-btn {\n  position: relative;\n  transform: translate(305px, -140px);\n  background-image: url("https://kn-cdn.codemao.cn/kitten/midi/docs/images/guide_close_btn.png");\n  height: 32px;\n  width: 32px;\n  cursor: pointer;\n  background-size: contain;\n}\n\n.guide-close-btn:hover {\n  background-image: url("https://kn-cdn.codemao.cn/kitten/midi/docs/images/guide_close_btn_hover.png");\n}\n\n.guide-open-btn {\n  position: relative;\n  transform: translate(98px, -45px);\n  width: 122px;\n  height: 44px;\n  color: white;\n  background: #297EFF;\n  border-radius: 27px;\n  cursor: pointer;\n  outline: none;\n  border: 2px solid rgba(194, 218, 255, 0.2);\n}\n\n.guide-open-btn:hover {\n  background: #0E63E6;\n  border: 2px solid rgba(186, 213, 255, 0.21);\n}\n\n.popup-dialog {\n  width: 392px;\n  height: 179px;\n  background: #FFFFFF;\n  box-shadow: 0px 2px 10px 0px rgba(0, 0, 0, 0.15);\n  padding: 36px 48px;\n}\n\n.popup-dialog-header {\n  height: 18px;\n  font-size: 16px;\n  color: #212326;\n  line-height: 18px;\n}\n\n.popup-dialog-content {\n  margin-top: 16px;\n  height: 21px;\n  font-size: 14px;\n  color: rgba(11, 24, 38, 0.7);\n  line-height: 21px;\n}\n\n.popup-dialog-btn {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-around;\n  margin-top: 30px;\n}\n\n.popup-dialog .btn {\n  width: 110px;\n  height: 36px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 6px;\n  font-size: 16px;\n  line-height: 36px;\n  border-style: solid;\n  border-width: 1px;\n}\n\n.popup-dialog .btn:hover {\n  opacity: 0.8;\n}\n\n.popup-dialog .btn:active {\n  opacity: 0.6;\n}\n\n.popup-dialog .danger {\n  border: 2px solid #FF472E;\n  background-color: #FF472E;\n  color: white;\n}\n\n.popup-dialog .normal-plain {\n  border: 2px solid rgba(var(--theme-color-0), 1);\n  background: white;\n  color: rgba(var(--theme-color-0), 1);\n}\n\n.popup-dialog .normal {\n  border: 2px solid rgba(var(--theme-color-0), 1);\n  background-color: rgba(var(--theme-color-0), 1);\n  color: rgba(var(--theme-color-10), 1);\n}\n\n.right-scroll-bar {\n  position: absolute;\n  right: 0;\n  width: 18px;\n  height: calc(100% - 27px - 22px);\n  background-color: white;\n  z-index: 3;\n  top: 27px;\n  padding: 4px;\n  border: 1px solid #e6e6e6;\n  border-bottom-width: 0px;\n  border-top-width: 0px;\n}\n\n.right-scroll-bar.hidden {\n  visibility: hidden;\n}\n\n.right-scroll-bar-thumb {\n  width: 100%;\n  height: 400px;\n  transform: translateY(0px);\n  background-color: rgba(179, 179, 179, 0.3);\n  border-radius: 4px;\n}\n\n.dragging-right-scroll-bar-thumb {\n  width: 100%;\n  height: 400px;\n  border-radius: 4px;\n  background-color: rgba(179, 179, 179, 0.6);\n  transform: translateY(0px);\n}\n\n.loading-wrap {\n  height: 100%;\n  width: 100%;\n  background-color: transparent;\n  z-index: 2;\n  border-top-right-radius: 150px;\n}\n\n.loading {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  display: flex;\n  align-items: center;\n  padding: 14px 26px;\n  font-size: 18px;\n  transform: translate(-50%, -50%);\n  -webkit-transform: translate(-50%, -50%);\n  -moz-transform: translate(-50%, -50%);\n  -ms-transform: translate(-50%, -50%);\n  -o-transform: translate(-50%, -50%);\n  opacity: 0;\n}\n\n.loading.show {\n  animation: show 1s;\n  opacity: 1;\n}\n\n.loaddingContent {\n  position: relative;\n  z-index: 2;\n  color: rgba(var(--theme-color-ys2, var(--theme-color-0)));\n}\n\n.loadingIcon {\n  width: 20px;\n  height: 20px;\n  border-width: 2px;\n  border-style: solid;\n  border-left-color: transparent !important;\n  border-radius: 50%;\n  margin-right: 15px;\n  position: relative;\n  z-index: 2;\n  animation: rotate 0.8s infinite linear;\n  -webkit-animation: rotate 0.8s infinite linear;\n  color: rgba(var(--theme-color-ys2, var(--theme-color-0)));\n}\n\n@keyframes rotate {\n  0% {\n    transform: rotate(0deg);\n    -webkit-transform: rotate(0deg);\n    -moz-transform: rotate(0deg);\n    -ms-transform: rotate(0deg);\n    -o-transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n    -webkit-transform: rotate(360deg);\n    -moz-transform: rotate(360deg);\n    -ms-transform: rotate(360deg);\n    -o-transform: rotate(360deg);\n  }\n}\n@keyframes show {\n  0% {\n    opacity: 0;\n  }\n  99% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}'),rn.defaultProps={midiJSON:null,mode:void 0}}.call(this,n("yLpj"),n("3UD+")(e))}}]);
{"version":3,"sources":["webpack://@crc/kitten-ai-lab/webpack/universalModuleDefinition","webpack://@crc/kitten-ai-lab/webpack/bootstrap","webpack://@crc/kitten-ai-lab/external \"react\"","webpack://@crc/kitten-ai-lab/external \"@babel/runtime/helpers/assertThisInitialized\"","webpack://@crc/kitten-ai-lab/external \"@babel/runtime/helpers/defineProperty\"","webpack://@crc/kitten-ai-lab/external \"@babel/runtime/helpers/classCallCheck\"","webpack://@crc/kitten-ai-lab/external \"@babel/runtime/helpers/createClass\"","webpack://@crc/kitten-ai-lab/external \"lodash\"","webpack://@crc/kitten-ai-lab/external \"@kitten-team/babel-plugin-react-css-modules/dist/browser/getClassName\"","webpack://@crc/kitten-ai-lab/external \"react-redux\"","webpack://@crc/kitten-ai-lab/external \"@babel/runtime/helpers/possibleConstructorReturn\"","webpack://@crc/kitten-ai-lab/external \"@babel/runtime/helpers/getPrototypeOf\"","webpack://@crc/kitten-ai-lab/external \"@babel/runtime/helpers/inherits\"","webpack://@crc/kitten-ai-lab/external \"react-intl\"","webpack://@crc/kitten-ai-lab/external \"redux\"","webpack://@crc/kitten-ai-lab/external \"@babel/runtime/regenerator\"","webpack://@crc/kitten-ai-lab/external \"d3-selection\"","webpack://@crc/kitten-ai-lab/external \"d3-scale\"","webpack://@crc/kitten-ai-lab/external \"redux-saga/effects\"","webpack://@crc/kitten-ai-lab/external \"@babel/runtime/helpers/toConsumableArray\"","webpack://@crc/kitten-ai-lab/external \"xlsx\"","webpack://@crc/kitten-ai-lab/external \"d3-axis\"","webpack://@crc/kitten-ai-lab/external \"react-dom\"","webpack://@crc/kitten-ai-lab/external \"react-intl/locale-data/zh\"","webpack://@crc/kitten-ai-lab/external \"react-intl/locale-data/en\"","webpack://@crc/kitten-ai-lab/external \"react-intl/locale-data/fr\"","webpack://@crc/kitten-ai-lab/external \"redux-saga\"","webpack://@crc/kitten-ai-lab/external \"d3-array\"","webpack://@crc/kitten-ai-lab/external \"d3-color\"","webpack://@crc/kitten-ai-lab/external \"d3-shape\"","webpack://@crc/kitten-ai-lab/external \"@babel/runtime/helpers/asyncToGenerator\"","webpack://@crc/kitten-ai-lab/external \"@babel/runtime/helpers/objectSpread\"","webpack://@crc/kitten-ai-lab/./src/controllers/machine_learning/worker.ts","webpack://@crc/kitten-ai-lab/external \"convnetjs\"","webpack://@crc/kitten-ai-lab/./src/dialogs/choose_type_dialog/style.scss?01b6","webpack://@crc/kitten-ai-lab/./src/header/style.scss?db45","webpack://@crc/kitten-ai-lab/./src/content/model_name/style.scss?e761","webpack://@crc/kitten-ai-lab/./src/content/edit_data/table/style.scss?a056","webpack://@crc/kitten-ai-lab/./src/content/edit_data/style.scss?83ac","webpack://@crc/kitten-ai-lab/./src/content/data_set_library/style.scss?e21d","webpack://@crc/kitten-ai-lab/./src/content/import_data/style.scss?b81a","webpack://@crc/kitten-ai-lab/./src/components/switch/style.scss?1311","webpack://@crc/kitten-ai-lab/./src/components/dropdown/style.scss?6f3d","webpack://@crc/kitten-ai-lab/./src/content/train/nn_diagram/style.scss?7ec1","webpack://@crc/kitten-ai-lab/./src/content/train/result_demonstrator/style.scss?4fb7","webpack://@crc/kitten-ai-lab/./src/content/train/model_test/style.scss?af69","webpack://@crc/kitten-ai-lab/./src/content/train/style.scss?065c","webpack://@crc/kitten-ai-lab/./src/content/common.scss?bec2","webpack://@crc/kitten-ai-lab/./src/dialogs/notification_dialog/style.scss?b875","webpack://@crc/kitten-ai-lab/./src/context_menu/style.scss?c60b","webpack://@crc/kitten-ai-lab/./src/notice/style.scss?20d3","webpack://@crc/kitten-ai-lab/./src/main.scss?2df4","webpack://@crc/kitten-ai-lab/./src/i18n/index.tsx","webpack://@crc/kitten-ai-lab/./src/models/def.ts","webpack://@crc/kitten-ai-lab/./src/i18n/zh_CN.ts","webpack://@crc/kitten-ai-lab/./src/controllers/machine_learning/index.ts","webpack://@crc/kitten-ai-lab/./src/redux/reducers/data_reducer.ts","webpack://@crc/kitten-ai-lab/./src/deps.ts","webpack://@crc/kitten-ai-lab/./src/connected_deps.ts","webpack://@crc/kitten-ai-lab/./src/redux/reducers/notice_reducer.ts","webpack://@crc/kitten-ai-lab/./src/redux/reducers/confirm_reducer.ts","webpack://@crc/kitten-ai-lab/./src/models/utils.ts","webpack://@crc/kitten-ai-lab/./src/redux/reducers/model_reducer.ts","webpack://@crc/kitten-ai-lab/./src/redux/reducers/training_reducer.ts","webpack://@crc/kitten-ai-lab/./src/redux/reducers/main_reducer.ts","webpack://@crc/kitten-ai-lab/./src/redux/reducers/contextmenu_reducer.ts","webpack://@crc/kitten-ai-lab/./src/redux/sagas/model_sagas.ts","webpack://@crc/kitten-ai-lab/./src/redux/index.ts","webpack://@crc/kitten-ai-lab/./src/controllers/store_manager.ts","webpack://@crc/kitten-ai-lab/./src/controllers/diagrams/heatmap.ts","webpack://@crc/kitten-ai-lab/./src/controllers/diagrams/linechart.ts","webpack://@crc/kitten-ai-lab/./src/dialogs/choose_type_dialog/index.tsx","webpack://@crc/kitten-ai-lab/./src/header/index.tsx","webpack://@crc/kitten-ai-lab/./src/content/model_name/index.tsx","webpack://@crc/kitten-ai-lab/./src/content/edit_data/table/index.tsx","webpack://@crc/kitten-ai-lab/./src/content/edit_data/index.tsx","webpack://@crc/kitten-ai-lab/./src/cfg.ts","webpack://@crc/kitten-ai-lab/./src/content/data_set_library/default_data.ts","webpack://@crc/kitten-ai-lab/./src/content/data_set_library/index.tsx","webpack://@crc/kitten-ai-lab/./src/content/import_data/index.tsx","webpack://@crc/kitten-ai-lab/./src/components/switch/index.tsx","webpack://@crc/kitten-ai-lab/./src/components/dropdown/index.tsx","webpack://@crc/kitten-ai-lab/./src/content/train/nn_diagram/index.tsx","webpack://@crc/kitten-ai-lab/./src/content/train/result_demonstrator/index.tsx","webpack://@crc/kitten-ai-lab/./src/content/train/model_test/index.tsx","webpack://@crc/kitten-ai-lab/./src/content/train/index.tsx","webpack://@crc/kitten-ai-lab/./src/content/index.tsx","webpack://@crc/kitten-ai-lab/./src/dialogs/notification_dialog/index.tsx","webpack://@crc/kitten-ai-lab/./src/context_menu/index.tsx","webpack://@crc/kitten-ai-lab/./src/notice/index.tsx","webpack://@crc/kitten-ai-lab/./src/main.tsx","webpack://@crc/kitten-ai-lab/./src/ConnectedIntlProvider.tsx","webpack://@crc/kitten-ai-lab/./src/index.tsx"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","Worker","dialog-wrapper","dialog-header","dialog-name","close-btn","dialog-content","outside-wrapper","inside-wrapper","img_recognition-illustration","data_recognition-illustration","title","abstract","header-wrapper","dialog-detail","current-step","other-step","icon_wrapper","icon_arrow","btn_group","btn_help","btn_close","model-name","prefix","model-name-input","content-wrapper","main-content-wrapper","content-footer","tips","btn-group","btn-positive","btn-negative","btn-normal","left","abandon","table-body","table-container","hightlight","header-r","table_inner_wrapper","tabs-container","tab","tab-chosen","btn-del-class","btn-del-feature","add_btn_container","add_classification","add_feature","icon","text","split","table-content","classification-name","input-editing","add_row_btn_container","btn-add-row","table","thead-wrapper","table-head","index-column","feature-head","index-cell","new-index-cell","btn-del-row","before-chosen-row","chosen-row","table-header","chosen-column","chosen-column-bottom","chosen-column-header","after-chosen-column","feature_name_container","feature-name","editing-wrapper","import-data-wrapper","import-option","upload-input","training_btn","disable_hint","hint_label","data-sets-container","data-set-wrapper","preview-container","preview-label","zh","data-set-title","data-set-classification","back-to-last-step","content","table_container","scrollable-body","header","cancel_btn","confirm_btn","positive","negative","table_header","item_container","input","unselected","selected","dropdown","expand","dropdown_menu","menu_item","disabled","status","divider","border_bottom","switch_container_hint","switch_container","switch_label","switch","slider","dropdown-wrapper","label","input-area","menu","selection","diagram-container","diagram-controller-container","diagram-title","controller-wrapper","layer-controller","layer-info","control-btn-group","btn-add","btn-del","neurons-controller","animate-path","move","result-demonstrator","info-title","info-content","num-training","accuracy","loss","training-times","acc-percent","loss-percent","test-wrapper","test-header","test-header-notice","feature-area","feature-wrapper","feature-label","feature-input","btn_wrapper","btn-test","minimize","expand-wrapper","res-wrapper","res-header","res-header-notice","res","res-area","line","res-area-header","res-area-content","classification","training-controller-wrapper","edit_data_btn","start-btn-wrapper","btn-restart-hint","en","btn-restart","btn-start","btn-loading","btn-loading-stop","spin","start-content","training-state","start-time","custom-mode-wrapper","custom-parameters-wrapper","training-preview-wrapper","input-view","input-title","input-pic","result-view","result-title","result-content","result-left","result-preview","feature-notice","preview-info","info-wrapper","color","result-right","numbers-preview","dialog-title","btn","dialog-container","mask","context_menu_container","item","notice-top","notice-top-hide","show_top","ai-wrapper","main-wrapper","showDialog","INTL","intl","addLocaleData","toConsumableArray_default","concat","fr","TrainingStep","ModelType","locale","ai_lab_messages","language","data","img","word","word_recognition","img_recognition","img_recognition_abstract","data_recognition","data_recognition_abstract","edit_feature","confirm","delete","cancel","back","feature","train","probability","result","test","custom_mode","arbitrary","learning_rate","complete","edit_data","untitled_model","data_set_label","up_down_matrix","rotation_matrix","left_right_matrix","round_matrix","iris_data_set","blue_point","red_point","order_no","length_of_calyx","width_of_calyx","length_of_petal","width_of_petal","iris_setosa","iris_versicolour","iris_virginica","upload_error","new_feature_notice","del_feature","del_feature_content","data_insufficient_notice","add_data_set","import_data","edit_data_tips","cannot_add_data","max_feature_length_exceed","ai_lab/cannot_add_data_confirm","invalid_data_deleted","add_data","adding_classes","cancel_add","confirm_add","result_of_predicting","network_title","num_of_hidden_layers","epoch","times","start_to_train","traininging","training_subtitle","continue_to_train","input_title","result_title","training_tips","exit_ai_lab","exit_ai_lab_notice","save","exit","classification_not_selected","import_data_tips","restart_trainging_hint","input_can_only_be_number","please_enter_name","illegal_name","illegal_charaters_are_deleted","custom_mode_hint","feature_is_needed_to_predict","import_file_contains_no_legal_data","features_count_is_more_than_2_and_unable_to_show_result_pic","ai_lab/model_type_prefix","ai_lab/select_data_set","ai_lab/edit_data_set","ai_lab/save_and_exit","ai_lab/model_name_prefix","ai_lab/unselected","ai_lab/clear_selection","ai_lab/move_to_left","ai_lab/move_to_right","ai_lab/rename","ai_lab/delete_classification","ai_lab/delete_classification_content","ai_lab/delete_feature","ai_lab/delete_feature_content","ai_lab/give_up_data","ai_lab/give_up_data_content","ai_lab/confirm_give_up","ai_lab/at_least_1_feature_and_1_classification","ai_lab/feature_maxmiun","ai_lab/classification_maxmiun","ai_lab/add_data_fail_due_to_classification_maxium","ai_lab/at_most_4_classificaitons","ai_lab/at_most_4_features","ai_lab/invalid_file_data","set_language","language_data","lang","messages","LastStepBeforeSaving","model_type_dict","ITER_PER_ROUND","TARGET_RANGE","SIZE_PREVIEW","RANGE_TRAINING_ITERATIONS","RANGE_LEARNING_RATE","STABLE_ROUND","DEFAULT_DATA_LENGTH","MIN_DATA_LENGTH","RANGE_NUM_FEATURES","RANGE_NUM_CLASSES","CLASS_COLORS","ACC_LINE_COLOR","LOSS_LINE_COLOR","convnetjs","machine_learning","Net","feature_index","min","_this","max","target_min","target_max","Number","message","round_callback","type","total_training_iters","draw_data","net","history_accuracy","push","history_loss","judge_train_process","fromJSON","JSON","parse","end_callback","training_counter","worker","postMessage","stringify","should_reset","callback","this","is_custom_mode","iterations","num_training_iterations","new_data","dimension","_this2","Array","fill","Infinity","forEach","data_row","data_cell","set_boundary","justify_boundary","formatted_data","map","justify_range","index","num","Math","length","offset","ceil","floor","hidden_layers","json_net","init_worker","arguments","undefined","force_reset","manually_stop","training_iterations","onmessage","worker_listener","current_training_rounds","current_statble_round","Vol","forward","w","weight","feature_number","classification_number","layers","out_sx","out_sy","out_depth","num_neurons","activation","num_classes","makeLayers","toJSON","initial_data_state","valid_rows","should_hightlight","symbol_index","SET_DATA","RESET_DATA_STATE","CHANGE_DATA","change_data","payload","SHOW_HIGHTLIGHT","show_hightlight","HIDE_HIGHTLIGHT","hide_hightlight","props_show_notice","props_show_confirm_dialog","report_event","get_intl","id","formatMessage","show_notice","options","store_manager","dispatch","timeout","SHOW_NOTICE","native_show_notice","show_confirm_dialog","right","pos_btn","neg_btn","SHOW_CONFIRM_DIALOG","native_show_confirm_dialog","get_dynamic_theme_class","classname","current_theme","minus_num","light_theme_colors","replace","RegExp","matched","abs","parseInt","ev","get_validated_name","old_name","name_list","trim","prev_len","match_res","match","processed_name","join","indexOf","includes","get_oversize_number","auto_rename","name_number","start","substring","end","end_string","toString","pow","is_valid_number","rename_base_on_range","range","name_index_used","filter","parseFloat","available_name_index","from","v","k","uniqueId","is_modified","set_model_modified","is_m","initial_model_state","model_name","model_type","DATA","features","classifications","SET_MODEL_INFO","CHANGE_MODEL_NAME","change_model_name","CHANGE_CLASSIFICATION","change_classification","CHANGE_FEATURE","change_feature","ADD_CLASSIFICATION","DEL_CLASSIFICATION","del_classification","EDIT_CLASSIFICATION","edit_classification","new_name","ADD_FEATURE","DEL_FEATURE","SWAP_FEATURE","swap_feature","index1","index2","EDIT_FEATURE","CHANGE_HIDDEN_LAYER","change_hidden_layer","SET_MODEL_TYPE","set_model_type","SET_NET","set_net","RESET_MODEL_STATE","initial_training_state","training_status","training_started_at","current_training_times","current_acc","current_loss","data_flag","SET_TRAINING_INFO","SET_TRAINING_STATUS","set_training_status","REFRESH_TRAINING_RESULT","refresh_training_result","acc","SET_START_TIME","set_start_time","date","SET_CUSTOM_MODE","set_custom_mode","SET_NUM_TRAINING_ITERATIONS","set_num_training_iterations","SET_LEARNING_RATE","set_learning_rate","RESET_DATA_FLAG","reset_data_flag","RESET_TRAINING_STATE","initial_main_state","current_step","EDITING_DATA","chosen_data_set","should_show_feature_add_notice","is_visible","theme","primary_color","second_color","extra_color","n1","n2","CHOOSE_STEP","choose_step","next_step","CHOOSE_DATA_SET","choose_data_set","data_set","RESET_MAIN_STATE","SET_FEATURE_NOTICED","set_feature_noticed","SET_THEME","SET_AI_LAB_VISIBILITY","set_ai_lab_visibility","initial_confirm_dialog_state","Function","is_show","CLOSE_CONFIRM_DIALOG","close_confirm_dialog","initial_notice_state","HIDE_NOTICE","hide_notice","initial_context_menu_state","x","y","menu_items","SHOW_CONTEXT_MENU","show_context_menu","HIDE_CONTEXT_MENU","hide_context_menu","model_sagas","watch_model_modification","regenerator_default","a","wrap","_context","prev","next","fork","stop","_marked","MODEL_OPERATION","_context2","takeLatest","debounce","_marked2","app_reducer","combineReducers","model_state","state","action","assign","cloneDeep","default_classification_name_prefix","splice","default_feature_name_prefix","_action$payload","index2_value","data_state","group_data","class_index","row_index","every","training_state","main_state","confirm_dialog_state","notice_state","context_menu_state","RESET_STORE","reset_store","root_reducer","saga_root","sagas","all","saga","spawn","mark","_callee","t0","console","error","store_manager_marked","get_path_object","obj","object_path","path_list","path","shift","remain_path","StoreManager","classCallCheck_default","defineProperty_default","store","middlewares","saga_middleware","createSagaMiddleware","createStore","__REDUX_DEVTOOLS_EXTENSION__","compose","applyMiddleware","apply","run","create_store","getState","listener","subscribe","cb","current_value","get_state","new_value","old_value","generate_net","data_boundary","get_data_boundary","omit","NUM_SHADES","HeatMap","width","numSamples","containerSelector","userSettings","showAxes","noSvg","settings","padding","color_arr","tmp_scale","scaleLinear","domain","clamp","color_range","scaleQuantize","container","select","append","style","canvas","attr","svg","tooltip","createClass_default","discretize","dx","dy","Error","context","node","getContext","image","createImageData","density","rgb","g","b","putImageData","xDomain","yDomain","points","labels","resetRange","selectAll","remove","updatePoints","updateCircles","xScale","yScale","xAxis","axisBottom","yAxis","axisRight","on","html","event","pageX","pageY","enter","LineChart","lineColors","MAX_VALUE","MIN_VALUE","numLines","margin","offsetWidth","height","offsetHeight","paths","redraw","minY","maxY","dataPoint","getPathMap","lineIndex","datum","ChooseType","external_react_","className","onClick","props","choose_type","getClassName_default","_styleModuleImportMap","autoResolveMultipleImports","handleMissingStyleName","save_and_close","get_types","React","ChooseTypeDialog","connect","bindActionCreators","injectIntl","LabHeader","possibleConstructorReturn_default","getPrototypeOf_default","assertThisInitialized_default","step","_text_map","with_arrow","text_map","TRAINING","CHOOSING_DATA_SET","IMPORTING","header_styleModuleImportMap","aria-hidden","xlinkHref","open","Close","_map","arr","get_step_text","get_steps","data-report-click","handle_help_btn_click","handle_close_btn_click","AILabHeader","ModelName","default_name","nextprops","setState","maxLength","ref","el","onFocus","e","onChange","target","onKeyUp","keyCode","blur","onBlur","ModelNameComponent","CmTable","index_data_row","current_tab","stop_training_and_force_reset","current_row","empty_row","is_classification_reached_maxium","new_tab","training_data","stopPropagation","update_data","validated_name","last_name","handle_classification_name_edit","is_feature_reached_maxium","data_c","should_notice_feature_add","handle_feature_name_edit","idx1","idx2","idx2_value","button","tab_click_count","setTimeout","tab_prev_selected","tab_index_to_show_input","tabs","can_delete_classification","class_name","onMouseUp","handle_tab_mouse_up","onContextMenu","preventDefault","table_styleModuleImportMap","autoFocus","handle_classification_name_validation","handle_classsification_del","handle_classification_add","handle_feature_add","column_click_count","column_prev_selected","current_column","column_index_to_show_input","can_delete_feature","column_style","tabIndex","HTMLInputElement","handle_column_mouse_up","handle_feature_swap","handle_feature_name_validation","handle_feature_del","row_style","new_index","can_delete_data_row","index_cell_style","handle_row_del","bg_class_name","onFocusCapture","localStorage","getItem","setItem","new_val","handle_data_edit","last_value","is_editing_data","val","String","isNaN","get_data_row","document","activeElement","prevProps","prevState","table_el","scrollHeight","prev_props","prev_state","snapshot","scrollTop","clientHeight","addEventListener","handle_keydown","onKeyUpCapture","current_focus","onClickCapture","get_class_tabs","borderRadius","get_table_header","get_table_content","handle_row_add","next_props","next_state","findIndex","valid_row","CmTableComponent","acceptable_file_types","EditData","is_data_valid","file","files","file_extension","lastIndexOf","some","Boolean","file_el","click","accept","handle_file_change","SaveInTheDataEditPage","go_to_training","onMouseEnter","should_show_hint","onMouseLeave","edit_data_styleModuleImportMap","render_add_dataset","render_import_data","render_footer","EditDataComponent","own_props","cdn_path","get_path","DataSets","data_sets","preview","source","has_label","handle_click_data_set","backgroundImage","startsWith","data_set_library_styleModuleImportMap","DataSetComponent","ImportData","column_of_classification","grouped_rows","groupBy","rows","row","keys","filtered","column_map_to_feature","dropped_on","class_data","res_data","feature_rows","feature_row_len","rows_remain","j","title_id","message_id","extra_default_classification","classifications_remain","new_classification","feature_name_arr","del_feature_idx","get_feature_index_by_id","edit_feature_idx","should_add_data","last_step","handle_add_data","import_data_styleModuleImportMap","dropdown_div","contains","header_index_to_show_dropdown_menu","_this$state","table_headers","_loop","found","is_selected_feature","f","is_selected_classfication","find","handle_feature_name_edit_on_blur","inputs","onKeyDown","data_report","hide","_ref2","display","data_rows","is_even_row","column_index","source_input","render_table_header","render_table_content","render_table","File","is_csv","reader","FileReader","onload","workbook","xlsx","sheet_to_arr","Sheets","SheetNames","err","readAsText","readAsBinaryString","objectSpread_default","handle_click_dropdown_ouside","removeEventListener","sheet","decode_range","is_column_valid","row_num","col_num","current_cell","encode_cell","res_rows","col","col_index","render_header","render_content","ImportDataComponent","SwitchComponent","_React$Component","Switch","_getPrototypeOf2","_len","args","_key","set_status","current_status","inherits_default","hint","checked","toggle_mode","DropdownComponent","Dropdown","current_selection","choose_callback","dropdown_styleModuleImportMap","selections","set_selection","input_color","transition_color","svg_width","in_out_dis","neuron_d","neuron_top_dis","MAX_NUM_LAYERS","MAX_NUM_NEURONS","DEFAULT_NUM_NEURONS","SINGLE_DIS_LEFT","arc_ratio","arc_ratio_between_layers","NeuralNetworkDiagram","neurons_area_width","network_data","layer_index","on_network_change","dis_between_layers","pop","training_style","is_training","opacity","pointerEvents","controller_style","justifyContent","generate_btn_style","is_clickable","on_add_layer","nn_diagram_styleModuleImportMap","on_del_layer","number","on_add_neuron","on_del_neuron","layer_i","prev_node_i","next_node_i","distance","get_opacity","end_x","end_y","stroke","strokeDasharray","start_x","start_y","get_in_path","get_out_path","elements","num_neuron","last_end_x","path_y","last_i","last_path_y","version","xmlns","cx","cy","x1","y1","x2","y2","stopColor","stopOpacity","filterUnits","stdDeviation","in","strokeWidth","fillRule","transform","strokeLinecap","strokeLinejoin","get_in_out_paths","get_neurons_and_paths","fc_layers","layer","layer_type","filters_range","filters","fc_layer","_filter","num_inputs","_loop2","last_node_i","last_node","next_node","update_weight","get_layer_controller","get_diagram","NNDiagramComponent","ResultDemonstrator","toFixed","ResultDemonstratorComponent","AIModelTest","probabilities","minimized","handle_input_change","_this3","prob","sort","result_list","res_prob","unshift","_this4","get_input_area","predict","get_result","AIModelTestComponent","WIDTH_PREVIEW","Train","is_custom","get_input_view","get_result_view","color_style","background","wrap_style","set_round_callback","heat_map","updateBackground","line_chart","addDataPoint","set_callback_function","just_reset","ori_data","class_idx","row_data","row_idx","is_data_in_valid_rows","start_training","current_date","Date","valid_data","get_valid_data","new_domains","set_training_data","reset_heatmap","reset","set_trainer_params","reset_data","is_stopped","FinishTraining","train_styleModuleImportMap","sdate","start_time","toLocaleString","hour12","training_title","btn_class","change_training_status","get_training_parameters","domains","train_data","classification_data","resetPoints","set_hidden_layers","destroy","init_training","is_show_test_area","get_controllers","get_training_previews","get_training_footer","TrainComponent","LabContent","AILabContent","own_pros","Confirm","confirm_callback","ConfirmDialog","ContextMenu","context_menu_div","handle_mouse_down_outside","top","_ref","context_menu_styleModuleImportMap","ContextMenuComponent","Notice","is_disappearing","timer","clearTimeout","onTransitionEnd","notice_styleModuleImportMap","notice_content","NoticeComponent","AILab","current_intl","save_data","has_data","model","get_save_info","init_model_info","model_id","save_reset_and_close","should_show_confirm_dialog","should_show_notice","is_context_menu_show","AILabWrapper","has_trained","ConnectedIntlProvider","_get_locale_data","IntlProvider","KittenAILab","element","_element","get_store","ReactDOM","external_react_redux_","model_info","model_modified_flag","set_model_info","idx_arr","idx","has_extra_data","set_theme"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@crc/kitten-ai-lab\"] = factory();\n\telse\n\t\troot[\"@crc/kitten-ai-lab\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 30);\n","module.exports = require(\"react\");","module.exports = require(\"@babel/runtime/helpers/assertThisInitialized\");","module.exports = require(\"@babel/runtime/helpers/defineProperty\");","module.exports = require(\"@babel/runtime/helpers/classCallCheck\");","module.exports = require(\"@babel/runtime/helpers/createClass\");","module.exports = require(\"lodash\");","module.exports = require(\"@kitten-team/babel-plugin-react-css-modules/dist/browser/getClassName\");","module.exports = require(\"react-redux\");","module.exports = require(\"@babel/runtime/helpers/possibleConstructorReturn\");","module.exports = require(\"@babel/runtime/helpers/getPrototypeOf\");","module.exports = require(\"@babel/runtime/helpers/inherits\");","module.exports = require(\"react-intl\");","module.exports = require(\"redux\");","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"d3-selection\");","module.exports = require(\"d3-scale\");","module.exports = require(\"redux-saga/effects\");","module.exports = require(\"@babel/runtime/helpers/toConsumableArray\");","module.exports = require(\"xlsx\");","module.exports = require(\"d3-axis\");","module.exports = require(\"react-dom\");","module.exports = require(\"react-intl/locale-data/zh\");","module.exports = require(\"react-intl/locale-data/en\");","module.exports = require(\"react-intl/locale-data/fr\");","module.exports = require(\"redux-saga\");","module.exports = require(\"d3-array\");","module.exports = require(\"d3-color\");","module.exports = require(\"d3-shape\");","module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");","module.exports = require(\"@babel/runtime/helpers/objectSpread\");","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"36cf02fc423b8288e3b7.worker.js\");\n};","module.exports = require(\"convnetjs\");","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog-wrapper\":\"ai_lab_dialog-wrapper_3Lku-\",\"dialog-header\":\"ai_lab_dialog-header_2ZH9e\",\"dialog-name\":\"ai_lab_dialog-name_1KwQw\",\"close-btn\":\"ai_lab_close-btn_bamo5\",\"dialog-content\":\"ai_lab_dialog-content_24OwA\",\"outside-wrapper\":\"ai_lab_outside-wrapper_1IEDF\",\"inside-wrapper\":\"ai_lab_inside-wrapper_1TxAv\",\"img_recognition-illustration\":\"ai_lab_img_recognition-illustration_36hd2\",\"data_recognition-illustration\":\"ai_lab_data_recognition-illustration_3Qvd0\",\"title\":\"ai_lab_title_2YFrA\",\"abstract\":\"ai_lab_abstract_2_Zn4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header-wrapper\":\"ai_lab_header-wrapper_1Kixo\",\"dialog-detail\":\"ai_lab_dialog-detail_PCzzH\",\"current-step\":\"ai_lab_current-step_3KdLT\",\"other-step\":\"ai_lab_other-step_2mvNH\",\"icon_wrapper\":\"ai_lab_icon_wrapper_1HhiF\",\"icon_arrow\":\"ai_lab_icon_arrow_1CKCC\",\"btn_group\":\"ai_lab_btn_group_YIHPq\",\"btn_help\":\"ai_lab_btn_help_3yyst\",\"btn_close\":\"ai_lab_btn_close_2On4D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"model-name\":\"ai_lab_model-name_1yPKZ\",\"prefix\":\"ai_lab_prefix_35rQA\",\"model-name-input\":\"ai_lab_model-name-input_P5vI_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content-wrapper\":\"ai_lab_content-wrapper_2T5mn\",\"main-content-wrapper\":\"ai_lab_main-content-wrapper_36oss\",\"content-footer\":\"ai_lab_content-footer_tpnCa\",\"tips\":\"ai_lab_tips_3qjiJ\",\"btn-group\":\"ai_lab_btn-group_1zB2C\",\"btn-positive\":\"ai_lab_btn-positive_2dlj3\",\"btn-negative\":\"ai_lab_btn-negative_tjgra\",\"btn-normal\":\"ai_lab_btn-normal_1OFFz\",\"left\":\"ai_lab_left_Ggm7v\",\"abandon\":\"ai_lab_abandon_3uf1J\",\"table-body\":\"ai_lab_table-body_33xr5\",\"table-container\":\"ai_lab_table-container__ludL\",\"hightlight\":\"ai_lab_hightlight_35WiQ\",\"header-r\":\"ai_lab_header-r_2bG5-\",\"table_inner_wrapper\":\"ai_lab_table_inner_wrapper_1RCyb\",\"tabs-container\":\"ai_lab_tabs-container_2IQWG\",\"tab\":\"ai_lab_tab_3jp3W\",\"tab-chosen\":\"ai_lab_tab-chosen_24wk2\",\"btn-del-class\":\"ai_lab_btn-del-class_3Wg9d\",\"btn-del-feature\":\"ai_lab_btn-del-feature_2IyOm\",\"add_btn_container\":\"ai_lab_add_btn_container_3wAs_\",\"add_classification\":\"ai_lab_add_classification_3VO7C\",\"add_feature\":\"ai_lab_add_feature_288de\",\"icon\":\"ai_lab_icon_3ssTO\",\"text\":\"ai_lab_text_CiGBt\",\"split\":\"ai_lab_split_1tRDd\",\"table-content\":\"ai_lab_table-content_lyVVW\",\"classification-name\":\"ai_lab_classification-name_3A1XY\",\"input-editing\":\"ai_lab_input-editing_1BAbS\",\"add_row_btn_container\":\"ai_lab_add_row_btn_container_3ak_G\",\"btn-add-row\":\"ai_lab_btn-add-row_1EFYd\",\"table\":\"ai_lab_table_2VcTs\",\"thead-wrapper\":\"ai_lab_thead-wrapper_1fhyy\",\"table-head\":\"ai_lab_table-head_1OW86\",\"index-column\":\"ai_lab_index-column_1pK4N\",\"feature-head\":\"ai_lab_feature-head_2AD4i\",\"index-cell\":\"ai_lab_index-cell_17p8a\",\"new-index-cell\":\"ai_lab_new-index-cell_1cvTh\",\"btn-del-row\":\"ai_lab_btn-del-row_2fKrF\",\"before-chosen-row\":\"ai_lab_before-chosen-row_1hoSn\",\"chosen-row\":\"ai_lab_chosen-row_1E__l\",\"table-header\":\"ai_lab_table-header_2GGo2\",\"chosen-column\":\"ai_lab_chosen-column_f_tGV\",\"chosen-column-bottom\":\"ai_lab_chosen-column-bottom_3jJxb\",\"chosen-column-header\":\"ai_lab_chosen-column-header_1h7g4\",\"after-chosen-column\":\"ai_lab_after-chosen-column_1KDPW\",\"feature_name_container\":\"ai_lab_feature_name_container_3USPl\",\"feature-name\":\"ai_lab_feature-name_1v60s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content-wrapper\":\"ai_lab_content-wrapper_36ZQZ\",\"main-content-wrapper\":\"ai_lab_main-content-wrapper_2ZpP5\",\"editing-wrapper\":\"ai_lab_editing-wrapper_Ul1iS\",\"content-footer\":\"ai_lab_content-footer_21ou-\",\"tips\":\"ai_lab_tips_1ar8P\",\"btn-group\":\"ai_lab_btn-group_3Srf6\",\"btn-positive\":\"ai_lab_btn-positive_2DuLx\",\"btn-negative\":\"ai_lab_btn-negative_2SLZI\",\"btn-normal\":\"ai_lab_btn-normal_2WFRT\",\"left\":\"ai_lab_left_1HTe0\",\"abandon\":\"ai_lab_abandon_JXfjQ\",\"import-data-wrapper\":\"ai_lab_import-data-wrapper_1L9zg\",\"import-option\":\"ai_lab_import-option_3biPj\",\"upload-input\":\"ai_lab_upload-input_ENn1I\",\"training_btn\":\"ai_lab_training_btn_1T0mB\",\"disable_hint\":\"ai_lab_disable_hint_F2t7Q\",\"hint_label\":\"ai_lab_hint_label_1vKbR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content-wrapper\":\"ai_lab_content-wrapper_ppHFh\",\"main-content-wrapper\":\"ai_lab_main-content-wrapper_1Gt6K\",\"content-footer\":\"ai_lab_content-footer_3l7Tw\",\"tips\":\"ai_lab_tips_Xj1mR\",\"btn-group\":\"ai_lab_btn-group_2UaBj\",\"btn-positive\":\"ai_lab_btn-positive_3plrj\",\"btn-negative\":\"ai_lab_btn-negative_36QXV\",\"btn-normal\":\"ai_lab_btn-normal_hQGA-\",\"left\":\"ai_lab_left_7OdMo\",\"abandon\":\"ai_lab_abandon_2dpzo\",\"data-sets-container\":\"ai_lab_data-sets-container_12CYz\",\"data-set-wrapper\":\"ai_lab_data-set-wrapper_2SQ6L\",\"preview-container\":\"ai_lab_preview-container_3jupb\",\"preview-label\":\"ai_lab_preview-label_1R_U-\",\"zh\":\"ai_lab_zh_2n58e\",\"data-set-title\":\"ai_lab_data-set-title_1aW9Y\",\"data-set-classification\":\"ai_lab_data-set-classification_1Xo53\",\"back-to-last-step\":\"ai_lab_back-to-last-step_1YSzs\",\"icon\":\"ai_lab_icon_17tCN\",\"text\":\"ai_lab_text_3JlhS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content-wrapper\":\"ai_lab_content-wrapper_2h2P9\",\"main-content-wrapper\":\"ai_lab_main-content-wrapper_27cZv\",\"content-footer\":\"ai_lab_content-footer_1mwuN\",\"tips\":\"ai_lab_tips_qCJAY\",\"btn-group\":\"ai_lab_btn-group_3lfJ5\",\"btn-positive\":\"ai_lab_btn-positive_1pBWi\",\"btn-negative\":\"ai_lab_btn-negative_223ou\",\"btn-normal\":\"ai_lab_btn-normal_3PE96\",\"left\":\"ai_lab_left_1RrAT\",\"abandon\":\"ai_lab_abandon_3h15b\",\"content\":\"ai_lab_content_1WPDZ\",\"table_container\":\"ai_lab_table_container_gcZH0\",\"scrollable-body\":\"ai_lab_scrollable-body_KTZyO\",\"header\":\"ai_lab_header_FU4Vu\",\"cancel_btn\":\"ai_lab_cancel_btn_2E4b5\",\"icon\":\"ai_lab_icon_1ProF\",\"text\":\"ai_lab_text_3KbSv\",\"confirm_btn\":\"ai_lab_confirm_btn_3JGQv\",\"positive\":\"ai_lab_positive_33KRS\",\"negative\":\"ai_lab_negative_2wV0K\",\"disable_hint\":\"ai_lab_disable_hint_lAzIv\",\"hint_label\":\"ai_lab_hint_label_vb2n1\",\"title\":\"ai_lab_title_2HRtY\",\"table_header\":\"ai_lab_table_header_2aXOl\",\"item_container\":\"ai_lab_item_container_2E1tG\",\"input\":\"ai_lab_input_3kA3N\",\"unselected\":\"ai_lab_unselected_3LjJv\",\"selected\":\"ai_lab_selected_2baF_\",\"dropdown\":\"ai_lab_dropdown_R1Biq\",\"expand\":\"ai_lab_expand_3yxkg\",\"dropdown_menu\":\"ai_lab_dropdown_menu_1KDM0\",\"menu_item\":\"ai_lab_menu_item_3VNwG\",\"disabled\":\"ai_lab_disabled_2TZ-y\",\"status\":\"ai_lab_status_iGGUe\",\"divider\":\"ai_lab_divider_ub8yt\",\"border_bottom\":\"ai_lab_border_bottom_3SdTd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"switch_container_hint\":\"ai_lab_switch_container_hint_Nbgzb\",\"switch_container\":\"ai_lab_switch_container_2idjS\",\"switch_label\":\"ai_lab_switch_label_208cF\",\"switch\":\"ai_lab_switch_2Y49z\",\"slider\":\"ai_lab_slider_2cxqZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dropdown-wrapper\":\"ai_lab_dropdown-wrapper_3sTNa\",\"label\":\"ai_lab_label_2kL93\",\"disabled\":\"ai_lab_disabled_2ufUO\",\"input-area\":\"ai_lab_input-area_1SYKE\",\"menu\":\"ai_lab_menu_3Y8SN\",\"selection\":\"ai_lab_selection_2vDi6\",\"selected\":\"ai_lab_selected_shR6-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"diagram-container\":\"ai_lab_diagram-container_22_Hc\",\"diagram-controller-container\":\"ai_lab_diagram-controller-container_2U5lG\",\"diagram-title\":\"ai_lab_diagram-title_hWLEz\",\"controller-wrapper\":\"ai_lab_controller-wrapper_1F3Bo\",\"layer-controller\":\"ai_lab_layer-controller_r2231\",\"layer-info\":\"ai_lab_layer-info_3pCap\",\"control-btn-group\":\"ai_lab_control-btn-group_14dxl\",\"btn-add\":\"ai_lab_btn-add_3lVlq\",\"btn-del\":\"ai_lab_btn-del_N8VEO\",\"neurons-controller\":\"ai_lab_neurons-controller_2Siji\",\"animate-path\":\"ai_lab_animate-path_2_9_1\",\"move\":\"ai_lab_move_3YVvZ\",\"disabled\":\"ai_lab_disabled_Ux2Xu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"result-demonstrator\":\"ai_lab_result-demonstrator_DYKDa\",\"info-title\":\"ai_lab_info-title_3DuUE\",\"info-content\":\"ai_lab_info-content_3f3-L\",\"num-training\":\"ai_lab_num-training_2mzoc\",\"accuracy\":\"ai_lab_accuracy_2p387\",\"loss\":\"ai_lab_loss_2ZSxS\",\"training-times\":\"ai_lab_training-times_5U6e0\",\"acc-percent\":\"ai_lab_acc-percent_2Te-G\",\"loss-percent\":\"ai_lab_loss-percent_JMN4Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"test-wrapper\":\"ai_lab_test-wrapper_1YZ2b\",\"test-header\":\"ai_lab_test-header_3WzZO\",\"test-header-notice\":\"ai_lab_test-header-notice_3nw-o\",\"feature-area\":\"ai_lab_feature-area_3fSvG\",\"feature-wrapper\":\"ai_lab_feature-wrapper__VqtS\",\"feature-label\":\"ai_lab_feature-label_2M7zV\",\"feature-input\":\"ai_lab_feature-input_3Y2a2\",\"btn_wrapper\":\"ai_lab_btn_wrapper_3WQmz\",\"btn-test\":\"ai_lab_btn-test_2lqaa\",\"minimize\":\"ai_lab_minimize_14Hl3\",\"expand\":\"ai_lab_expand_wpL-t\",\"expand-wrapper\":\"ai_lab_expand-wrapper_krrzM\",\"res-wrapper\":\"ai_lab_res-wrapper_atWNj\",\"res-header\":\"ai_lab_res-header_12itQ\",\"res-header-notice\":\"ai_lab_res-header-notice_tM6AS\",\"res\":\"ai_lab_res_sEc4Y\",\"res-area\":\"ai_lab_res-area_1t2Ke\",\"line\":\"ai_lab_line_3k5ev\",\"res-area-header\":\"ai_lab_res-area-header_1Xg9a\",\"res-area-content\":\"ai_lab_res-area-content_Pq7Gv\",\"classification\":\"ai_lab_classification_PlKIs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content-wrapper\":\"ai_lab_content-wrapper_3mONt\",\"main-content-wrapper\":\"ai_lab_main-content-wrapper_1kfyf\",\"content-footer\":\"ai_lab_content-footer_bu-DJ\",\"tips\":\"ai_lab_tips_1LoYD\",\"btn-group\":\"ai_lab_btn-group_aqwnP\",\"btn-positive\":\"ai_lab_btn-positive_1Mio1\",\"btn-negative\":\"ai_lab_btn-negative_J94iR\",\"btn-normal\":\"ai_lab_btn-normal_1jid7\",\"left\":\"ai_lab_left_3AfEU\",\"abandon\":\"ai_lab_abandon_2TBxf\",\"training-controller-wrapper\":\"ai_lab_training-controller-wrapper_2P_Jr\",\"edit_data_btn\":\"ai_lab_edit_data_btn_BQMkM\",\"start-btn-wrapper\":\"ai_lab_start-btn-wrapper_1dGy_\",\"btn-restart-hint\":\"ai_lab_btn-restart-hint_2rgt8\",\"en\":\"ai_lab_en_UZl2E\",\"btn-restart\":\"ai_lab_btn-restart_WZU7P\",\"btn-start\":\"ai_lab_btn-start_BEwFa\",\"btn-loading\":\"ai_lab_btn-loading_3VDdr\",\"btn-loading-stop\":\"ai_lab_btn-loading-stop_2M7Um\",\"spin\":\"ai_lab_spin_33sqX\",\"start-content\":\"ai_lab_start-content_Nf4ZT\",\"training-state\":\"ai_lab_training-state_3RdYL\",\"start-time\":\"ai_lab_start-time_3V_hy\",\"custom-mode-wrapper\":\"ai_lab_custom-mode-wrapper_3qbte\",\"custom-parameters-wrapper\":\"ai_lab_custom-parameters-wrapper_j5oWz\",\"training-preview-wrapper\":\"ai_lab_training-preview-wrapper_c4LsM\",\"input-view\":\"ai_lab_input-view_LrbFA\",\"input-title\":\"ai_lab_input-title_RfmxO\",\"input-pic\":\"ai_lab_input-pic_fQo14\",\"result-view\":\"ai_lab_result-view_fYhYJ\",\"result-title\":\"ai_lab_result-title_3PBZZ\",\"result-content\":\"ai_lab_result-content_2yn1H\",\"result-left\":\"ai_lab_result-left_EtReB\",\"result-preview\":\"ai_lab_result-preview_3tJY_\",\"feature-notice\":\"ai_lab_feature-notice_3eAcs\",\"preview-info\":\"ai_lab_preview-info_11p8U\",\"info-wrapper\":\"ai_lab_info-wrapper_dCMiz\",\"color\":\"ai_lab_color_2FhZs\",\"name\":\"ai_lab_name_3vL_C\",\"result-right\":\"ai_lab_result-right_2IFSr\",\"numbers-preview\":\"ai_lab_numbers-preview_1RlSS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content-wrapper\":\"ai_lab_content-wrapper_1bXf1\",\"main-content-wrapper\":\"ai_lab_main-content-wrapper_jzaPJ\",\"content-footer\":\"ai_lab_content-footer_3dd4g\",\"tips\":\"ai_lab_tips_yiqec\",\"btn-group\":\"ai_lab_btn-group_3vaH_\",\"btn-positive\":\"ai_lab_btn-positive_3LQjQ\",\"btn-negative\":\"ai_lab_btn-negative_dsT-t\",\"btn-normal\":\"ai_lab_btn-normal_2uwCV\",\"left\":\"ai_lab_left_1r556\",\"abandon\":\"ai_lab_abandon_14ZP1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog-wrapper\":\"ai_lab_dialog-wrapper_eW1Bc\",\"dialog-title\":\"ai_lab_dialog-title_3bqx0\",\"dialog-content\":\"ai_lab_dialog-content_3ZTFq\",\"btn-group\":\"ai_lab_btn-group_1hdpQ\",\"btn\":\"ai_lab_btn_2sd22\",\"positive\":\"ai_lab_positive_3VaZz\",\"negative\":\"ai_lab_negative_1LcDq\",\"left\":\"ai_lab_left_2hCo5\",\"dialog-container\":\"ai_lab_dialog-container_sR_p4\",\"mask\":\"ai_lab_mask_2B2aL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"context_menu_container\":\"ai_lab_context_menu_container_3sq38\",\"item\":\"ai_lab_item_15d_F\",\"disabled\":\"ai_lab_disabled_YNhip\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notice-top\":\"ai_lab_notice-top_pxhAg\",\"notice-top-hide\":\"ai_lab_notice-top-hide_DI8S8\",\"show_top\":\"ai_lab_show_top_dSBN-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ai-wrapper\":\"ai_lab_ai-wrapper_2chqh\",\"main-wrapper\":\"ai_lab_main-wrapper_q-Bjm\",\"showDialog\":\"ai_lab_showDialog_2L1hG\"};","import { addLocaleData, InjectedIntl } from 'react-intl';\nimport * as zh from 'react-intl/locale-data/zh';\nimport * as en from 'react-intl/locale-data/en';\nimport * as fr from 'react-intl/locale-data/fr';\nimport { zh_CN } from './zh_CN';\n\naddLocaleData([...zh, ...en, ...fr]);\n\nlet INTL:InjectedIntl;\nexport function set_current_intl(current_intl:InjectedIntl) {\n  INTL = current_intl;\n}\n\nexport function intl() {\n  return INTL;\n}\n\nexport interface MsgType {\n  [id:string]:string;\n}\n\nexport interface LanguageDataType {\n  lang:string;\n  messages:MsgType;\n}\n\nlet locale:string = 'zh';\nlet ai_lab_messages:MsgType = zh_CN;\n\nexport function set_language(language_data:LanguageDataType) {\n  const { lang, messages } = language_data;\n  switch (lang) {\n    case 'tw':\n      locale = 'zh-Hant';\n      break;\n    default:\n      locale = lang;\n  }\n  ai_lab_messages = messages;\n}\n\nexport function get_locale_data() {\n  return {\n    locale,\n    messages: ai_lab_messages,\n  };\n}\n","import { LanguageDataType } from '@src/i18n';\nimport { ShowNoticeFunction, ShowConfirmDialogFunction, DataReportFunc } from '../deps';\n\n/**\n * Expressions in this project:\n *\n * iteration - call the trainer.train function once, i.e. train the net exactly once per iteration.\n * round - train the net several (ITER_PER_ROUND) times and draw the preview diagram once\n *         i.e. communicate between main thread (control layout) and worker (train & preview) once every round.\n *\n */\n\nexport enum TrainingStep {\n  EDITING_DATA,\n  CHOOSING_DATA_SET,\n  IMPORTING,\n  TRAINING,\n}\nexport enum ModelType {\n  IMG,\n  DATA,\n}\nexport const model_type_dict = ['img_recognition', 'data_recognition'];\n\n/**\n * Predict result and redraw the preview every round.\n * Train for 5 iterations per round.\n */\nexport const ITER_PER_ROUND = 5;\n\n/**\n * Target range of training.\n * Project all input data into this range before training to improve training perfermance.\n */\nexport const TARGET_RANGE = [-5, 5];\n\n/**\n * The edge of preview diagram.\n * Actual size of the diagram is 50x50\n */\nexport const SIZE_PREVIEW = 50;\n\n/**\n * Range of total training iterations in custom mode.\n */\nexport const RANGE_TRAINING_ITERATIONS = [50, 100, 200, 500, 1000, 2000];\n\n/**\n * Default training iterations for custom mode without user settings.\n */\nexport const DEFAULT_TRAINING_ITERATIONS = 100;\n\n/**\n * Selections for learning rate\n */\nexport const RANGE_LEARNING_RATE = [0.00001, 0.0001, 0.001, 0.003, 0.01, 0.03, 0.1, 0.3, 1, 3, 10];\n\n/**\n * Default learning rate without user settings.\n */\nexport const DEFAULT_LEARNING_RATE = 0.03;\n\n/**\n * Target accuracy (least accuracy) of training.\n * Training should be stoped when target accuracy and target loss are both reach.\n */\nexport const TARGET_ACCURACY = 0.95;\n\n/**\n * Target loss (max loss) of training.\n * Training should be stoped when target accuracy and target loss are both reach.\n */\nexport const TARGET_LOSS = 0.05;\n\n/**\n * Training should be stopped when it is stable, i.e. more iterations are meaningless for improving accuracy and reduce loss.\n * Only judge stable status when training rounds > 100 (training iterations: STABLE_BASE * ITER_PER_ROUND, in current case, 500)\n */\nexport const STABLE_BASE = 100;\n\n/**\n * Parameter to decide wheater a model is stable.\n */\nexport const STABLE_STANDARD = 0.0001;\n\n/**\n * The judgement of stability happens between current round and the round before STABLE_ROUND rounds.\n * When the differences of current accuracy and loss and that round is within STABLE_STANDARD, the model is stable.\n */\nexport const STABLE_ROUND = 500 / ITER_PER_ROUND; // 500 iterations, 100 rounds here\n\n/**\n * Length of empty data of every classification at the beginning of opening ai lab.\n */\nexport const DEFAULT_DATA_LENGTH = 5;\n\n/**\n * Least number of data rows per classification to start training.\n */\nexport const MIN_DATA_LENGTH = 5;\n\n/**\n * Range of number of features.\n */\nexport const RANGE_NUM_FEATURES = [1, 4];\n\n/**\n * Range of number of classifications.\n */\nexport const RANGE_NUM_CLASSES = [2, 4];\n\n/**\n * Colors for drawing preview diagram, indexed by classification.\n */\nexport const CLASS_COLORS = [\n  '#0057FF',\n  '#FF9948',\n  '#3DD1AE',\n  '#FF4B4B',\n];\n\nexport const ACC_LINE_COLOR = '#FF9948';\nexport const LOSS_LINE_COLOR = '#757575';\n\n/**\n * Data structure of the message data from main thread to worker.\n * Each message starts a round.\n */\nexport type TrainMessage = PreviewMessage | StartMessage | ContinueMessage;\n\ntype PreviewMessage = {\n  type:'preview',\n  data:number[][][], // data, indexed by classes -> row_index -> feature_index\n  dimension:number, // length of features\n  hidden_layers:number[], // structure of hidden layers\n};\n\ntype StartMessage = {\n  type:'start',\n  should_reset:boolean,\n\n  data?:number[][][], // data, indexed by classes -> row_index -> feature_index\n  dimension?:number, // length of features\n  hidden_layers?:number[], // structure of hidden layers\n\n  // Training parameters\n  is_custom_mode?:boolean,\n  // Can be modified any time\n  training_iterations?:number,\n  learning_rate?:number,\n};\n\ntype ContinueMessage = {\n  type:'continue',\n  should_reset:boolean,\n\n  // Can be modified any time\n  training_iterations?:number,\n  learning_rate?:number,\n};\n\n/**\n * Data structure of the message data from work to main thread at the end of every round.\n */\nexport interface TrainResult {\n  /**\n   * the value 'preview' is used when there is no model available\n   * i.e. before any train started, show the preview result of the random network\n   */\n  type:'preview' | 'update';\n  net:string;\n  draw_data:DrawData[][];\n  accuracy:number;\n  loss:number;\n}\n\n/**\n * 1. In status 'wait_start', the last train cannot be continued.\n *    i.e. although in custom mode, the user can only restart\n * 2. 'training' status indicates the train is processing.\n * 3. In status 'stopped', user can continue the train without resetting net in custom mode.\n */\nexport type TrainingStatus = 'wait_start' | 'training' | 'stopped';\n\n/**\n * Data structure of official data sets.\n */\nexport interface DataSet {\n  name:string;\n  classifications:string[];\n  preview:string;\n  source:(string | number)[][];\n  has_label:boolean;\n}\n\n/**\n * Default hidden layers without user settings.\n */\nexport const DEFAULT_HIDDEN_LAYERS:number[] = [4, 4];\n\n/**\n * Data structure for drawing preview diagram.\n */\nexport interface DrawData {\n  class_index:number;\n  density:number;\n}\n\nexport interface SavedTrainingState {\n  is_custom_mode:boolean;\n  training_status:TrainingStatus;\n  training_started_at:undefined | Date;\n  num_training_iterations:number;\n  learning_rate:number;\n\n  current_training_times:number;\n  current_acc:number;\n  current_loss:number;\n\n}\n\nexport interface TrainingState extends SavedTrainingState {\n  data_flag:string;\n}\n\n/**\n * Info about the model itself.\n */\nexport interface ModelState {\n  id?:string;\n  model_name:string;\n  model_type:undefined | ModelType;\n  features:string[]; // Used only in data recognition\n  classifications:string[];\n  hidden_layers:number[];\n  net:undefined | string;\n  max:number[];\n  min:number[];\n}\n\nexport interface DataState {\n  data:(number | string)[][][];\n  valid_rows:number[][];\n  should_hightlight:boolean;\n  // 用来标明从第几列到第几列需要加一个特殊标志\n  symbol_index:number[][];\n}\n\nexport interface AIModelForSave {\n  /**\n * Functionality-related data is stored in model_state.\n */\n  model_state:ModelState;\n\n  /**\n   * Stores non-functionl data.\n   * Used only for revoking training parameters when editing a model\n   */\n  training_state:SavedTrainingState;\n\n  /**\n   * data-state\n   * Used for data edit\n  */\n  data_state:DataState;\n}\n\nexport enum LastStepBeforeSaving {\n  Close,\n  FinishTraining,\n  SaveInTheDataEditPage,\n}\n\nexport interface KittenAILabProps {\n  element:HTMLElement;\n  language_data:LanguageDataType;\n  cdn_path?:string;\n  /**\n   * callback to hide the rendered dom in kitten.\n   */\n  save_and_close:(model:AIModelForSave, lase_step?:LastStepBeforeSaving) => void;\n  show_notice?:ShowNoticeFunction;\n  show_confirm_dialog?:ShowConfirmDialogFunction;\n  report_event?:DataReportFunc;\n}\n","export const zh_CN = {\n  'language': 'cn',\n  'data': '数值',\n  'img': '图像',\n  'word': '语言',\n  'word_recognition': '语言识别',\n  'img_recognition': '图像识别',\n  'img_recognition_abstract': '让AI学会分辨图像',\n  'data_recognition': '数值识别',\n  'data_recognition_abstract': '让AI学会分辨数值',\n  'edit_feature': '编辑特征',\n  'confirm': '确定',\n  'delete': '删除',\n  'cancel': '取消',\n  'back': '返回',\n  'classification': '分类',\n  'feature': '特征',\n  'train': '训练',\n  'probability': '可能性',\n  'result': '结果',\n  'test': '测试',\n  'accuracy': '正确率',\n  'loss': '损失率',\n  'custom_mode': '手动调参',\n  'arbitrary': '自由',\n  'learning_rate': '学习率',\n  'complete': '完成',\n  'edit_data': '编辑数据',\n  'untitled_model': '未命名模型',\n\n  'data_set_label': '模板',\n  'up_down_matrix': '上下分布矩阵',\n  'rotation_matrix': '螺旋分布矩阵',\n  'left_right_matrix': '左右分布矩阵',\n  'round_matrix': '圆形分布矩阵',\n  'iris_data_set': '鸢尾花数据集', // \"Anderson's Irisdataset\"\n\n  'blue_point': '蓝点',\n  'red_point': '红点',\n  'order_no': '序号',\n  'length_of_calyx': '花萼长度',\n  'width_of_calyx': '花萼宽度',\n  'length_of_petal': '花瓣长度',\n  'width_of_petal': '花瓣宽度',\n  'iris_setosa': '山鸢尾',\n  'iris_versicolour': '杂色鸢尾',\n  'iris_virginica': '维吉尼亚鸢尾',\n\n  'upload_error': '上传失败，仅支持xls及xlsx类型文件',\n  'new_feature_notice': '新增特征后，每个分类下都会有此特征',\n  'del_feature': '删除特征',\n  'del_feature_content': '删除特征会改变数据结构，是否继续删除？',\n  'data_insufficient_notice': '每个分类下至少需要五组有效数据才能进行训练哦',\n\n  'add_data_set': '添加数据集',\n  'import_data': '导入数据',\n  'edit_data_tips': '小贴士：每个分类下至少需要五组有效数据',\n\n  'cannot_add_data': '无法添加数据',\n  'max_feature_length_exceed': '分类中最多添加4个类别，请修改',\n  'ai_lab/cannot_add_data_confirm': '我知道了',\n\n  'invalid_data_deleted': '已将不符合规则的数据剔除',\n\n  'add_data': '确定使用当前模型吗?',\n  'adding_classes': '模型分类为：{classifications}',\n  'cancel_add': '取消添加',\n  'confirm_add': '确定使用',\n\n  'result_of_predicting': '模型识别的结果是',\n\n  'network_title': '神经网络学习',\n  'num_of_hidden_layers': '{number}个隐含层',\n\n  'epoch': '训练次数',\n  'times': '次',\n\n  'start_to_train': '开始训练',\n  'traininging': '正在训练中...',\n  'training_subtitle': '模型稳定后，将自动停止训练',\n  'continue_to_train': '继续训练',\n\n  'input_title': '数据输入',\n  'result_title': '训练结果',\n  'training_tips': '小贴士：如果数据不理想，可重新训练模型，或添加更多数据来训练哦',\n\n  'exit_ai_lab': '退出AI实验室',\n  'exit_ai_lab_notice': '退出后不会保存模型',\n\n  'save': '保存',\n  'exit': '退出',\n\n  'classification_not_selected': '必须指定分类和至少一个特征才能添加成功',\n  'import_data_tips': '小贴士：必须将分类和至少一个数据填入表格中才能添加成功哦',\n  'restart_trainging_hint': '重新训练',\n  'input_can_only_be_number': '只可输入数字哦',\n\n  'please_enter_name': '输入不能为空',\n  'illegal_name': '输入不包含合法字符',\n  'illegal_charaters_are_deleted': '已经为你替换所有非法字符',\n  'custom_mode_hint': '支持对隐含层、神经元、训练次数、学习率的设置',\n  'feature_is_needed_to_predict': '需填写特征数据才可以进行测试',\n  'import_file_contains_no_legal_data': '表格中没有有效数据，请重新设置',\n  'features_count_is_more_than_2_and_unable_to_show_result_pic': '特征数大于2|无法显示图片',\n\n  'ai_lab/model_type_prefix': '编辑模型数据({model_type})',\n  'ai_lab/select_data_set': '选择数据集',\n  'ai_lab/edit_data_set': '编辑数据集',\n  'ai_lab/save_and_exit': '保存并退出',\n  'ai_lab/model_name_prefix': '名称：',\n\n  'ai_lab/unselected': '未选择',\n  'ai_lab/clear_selection': '清空选择',\n\n  'ai_lab/move_to_left': '左移1列',\n  'ai_lab/move_to_right': '右移1列',\n  'ai_lab/rename': '更改名称',\n\n  'ai_lab/delete_classification': '删除分类“{classification}”吗?',\n  'ai_lab/delete_classification_content': '删除后数据无法恢复，并且会改变数据结构',\n\n  'ai_lab/delete_feature': '删除特征“{feature}”吗?',\n  'ai_lab/delete_feature_content': '删除后数据无法恢复，并且会改变数据结构',\n\n  'ai_lab/give_up_data': '放弃本次编辑的内容吗？',\n  'ai_lab/give_up_data_content': '退出后编辑的内容不会保存，请谨慎操作',\n  'ai_lab/confirm_give_up': '放弃',\n\n  'ai_lab/at_least_1_feature_and_1_classification': '必须选择分类和至少一个特征才能添加成功哦',\n\n  'ai_lab/feature_maxmiun': '特征数量已达上限，无法继续选择',\n  'ai_lab/classification_maxmiun': '最多只能添加1个分类',\n\n  'ai_lab/add_data_fail_due_to_classification_maxium': '添加失败，分类的类别过多',\n\n  'ai_lab/at_most_4_classificaitons': '最多添加4个分类',\n  'ai_lab/at_most_4_features': '最多添加4个特征',\n\n  'ai_lab/invalid_file_data': '文件异常，请导入正确格式的文件',\n};\n","import {\n  TrainMessage, ITER_PER_ROUND, TARGET_ACCURACY, TARGET_LOSS, STABLE_ROUND,\n  STABLE_STANDARD, STABLE_BASE, TrainResult, DrawData, TARGET_RANGE,\n} from '../../models/def';\nimport { Net } from '../../types';\n\nconst Worker = require('worker-loader!./worker.ts') as any;\nconst convnetjs = require<any>('convnetjs');\n\nclass MachineLearning {\n  private formatted_data:number[][][];\n  private dimension:number; // number of features\n  private hidden_layers:number[];\n  private net:Net = new convnetjs.Net();\n  private worker:Worker;\n\n  // Boundaries of data, indexed by features\n  private max:number[];\n  private min:number[];\n\n  // Custom Training parameters\n  private is_custom_mode:boolean;\n  private num_training_iterations:number;\n  private learning_rate:number;\n\n  /**\n   * Indicates whether the last time of train is manually stopped or not.\n   * *Manually Stop* contains 3 situations:\n   * 1. Stopped by user in auto mode by clicking stop btn.\n   * 2. Stops when user change data.\n   * 3. Stops when user change neuron network structure.\n   */\n  private manually_stop:boolean;\n  /**\n   * The training after manually stop should reset the net and all other demonstrated data.\n   */\n  private force_reset:boolean;\n\n  // Counters, for callback every round & at the end of a train\n  private history_accuracy:number[] = [];\n  private history_loss:number[] = [];\n  /**\n   * Note the total training iterations of current model, reset when the model is reset.\n   * For demonstration\n   */\n  private total_training_iters:number = 0;\n  /**\n   * Note the training iterations of since the latest start action, reset when start btn is clicked\n   * For controlling training process\n   */\n  private training_counter:number = 0;\n  private end_callback:() => void;\n  private round_callback:(current_training_times:number, current_acc:number, current_loss:number, draw_data:DrawData[][], net:string) => void;\n\n  /** ************ Change parameters ************/\n  public set_callback_function(callback:() => void) {\n    this.end_callback = callback;\n  }\n\n  public set_round_callback(\n    callback:(current_training_times:number, current_acc:number, current_loss:number, draw_data:DrawData[][], net:string) => void) {\n    this.round_callback = callback;\n  }\n\n  public set_trainer_params(is_custom_mode:boolean, iterations?:number, learning_rate?:number) {\n    this.is_custom_mode = is_custom_mode;\n    this.num_training_iterations = iterations || this.num_training_iterations;\n    this.learning_rate = learning_rate || this.learning_rate;\n  }\n\n  public set_training_data(new_data:(number | string)[][][], dimension:number):[number, number][] {\n    this.dimension = dimension;\n    this.max = new Array(this.dimension).fill(-Infinity);\n    this.min = new Array(this.dimension).fill(Infinity);\n\n    new_data.forEach((classification) => {\n      classification.forEach((data_row) => {\n        data_row.forEach((data_cell, feature_index) => {\n          this.set_boundary(feature_index, data_cell);\n        });\n      });\n    });\n    this.justify_boundary();\n\n    this.formatted_data =\n      new_data.map((classification) =>\n        classification.map((data_row) =>\n          data_row.map(this.justify_range)));\n\n    // used in diagram\n    return [[this.min[0], this.max[0]], [this.min[1], this.max[1]]];\n  }\n\n  private set_boundary(index:number, value:number | string) {\n    const num = Number(value);\n    if (this.max && this.min) {\n      this.max[index] = Math.max(this.max[index], num);\n      this.min[index] = Math.min(this.min[index], num);\n    }\n  }\n\n  // For drawing.\n  // In the preview diagram, a 10% padding should be kept (so that the input points will not be put in the axes)\n  private justify_boundary() {\n    if (!(this.min && this.max)) { return; }\n    for (let i = 0; i < this.min.length; i++) {\n      const offset = (this.max[i] - this.min[i]) * 0.1;\n      this.max[i] = Math.ceil(this.max[i] + offset);\n      this.min[i] = Math.floor(this.min[i] - offset);\n    }\n  }\n\n  public set_hidden_layers(hidden_layers:number[]) {\n    this.hidden_layers = hidden_layers;\n  }\n\n  public set_net(json_net:string) {\n    this.net.fromJSON(JSON.parse(json_net));\n  }\n\n  /** ************ Training ************/\n\n  public preview() {\n    if (!this.worker) {\n      this.init_worker();\n    }\n\n    const message:TrainMessage = {\n      type: 'preview',\n      data: this.formatted_data,\n      dimension: this.dimension,\n      hidden_layers: this.hidden_layers,\n    };\n    this.worker.postMessage(JSON.stringify(message));\n  }\n\n  public start(should_reset:boolean = true) {\n    if (!this.worker) {\n      this.init_worker();\n    }\n\n    should_reset = should_reset || this.force_reset;\n    this.training_counter = 0;\n    this.manually_stop = false;\n\n    if (should_reset) {\n      this.total_training_iters = 0;\n      this.history_accuracy = [];\n      this.history_loss = [];\n      this.force_reset = false;\n    }\n\n    const message:TrainMessage = {\n      type: 'start',\n      should_reset,\n\n      data: should_reset ? this.formatted_data : undefined,\n      dimension: should_reset ? this.dimension : undefined,\n      hidden_layers: should_reset ? this.hidden_layers : undefined,\n\n      is_custom_mode: this.is_custom_mode,\n      training_iterations: ITER_PER_ROUND,\n      learning_rate: this.learning_rate,\n    };\n\n    this.worker.postMessage(JSON.stringify(message));\n  }\n\n  public reset_data() {\n    if (!this.worker) {\n      this.init_worker();\n    }\n\n    this.total_training_iters = 0;\n    this.history_accuracy = [];\n    this.history_loss = [];\n\n    const message:TrainMessage = {\n      type: 'preview',\n      data: this.formatted_data,\n      dimension: this.dimension,\n      hidden_layers: this.hidden_layers,\n    };\n    this.worker.postMessage(JSON.stringify(message));\n  }\n\n  // Project the input values into range [-5, 5] (the target range)\n  private justify_range = (value:number | string, feature_index:number) => {\n    const min = this.min[feature_index];\n    const max = this.max[feature_index];\n\n    // 避免出现 0除以 0 的问题\n    if (min === max) {\n      return 0;\n    }\n\n    const target_min = TARGET_RANGE[0];\n    const target_max = TARGET_RANGE[1];\n\n    return (Number(value) - min) / (max - min) *\n    (target_max - target_min) + target_min;\n  }\n\n  private init_worker() {\n    this.worker = new Worker();\n    this.worker.onmessage = this.worker_listener;\n  }\n\n  private worker_listener = (message:MessageEvent) => {\n    const result:TrainResult = message.data;\n\n    this.round_callback(\n      result.type === 'preview' ? 0 : this.total_training_iters,\n      result.type === 'preview' ? 0 : result.accuracy,\n      result.type === 'preview' ? 0 : result.loss,\n      result.draw_data,\n      result.net,\n    );\n\n    if (result.type === 'preview') {\n      return;\n    }\n    this.history_accuracy.push(result.accuracy);\n    this.history_loss.push(result.loss);\n\n    const should_continue = this.judge_train_process();\n\n    if (!should_continue) {\n      this.net.fromJSON(JSON.parse(result.net));\n      this.end_callback && this.end_callback();\n      return;\n    }\n\n    // Start next train round when necessary\n    const train_message:TrainMessage = {\n      type: 'continue',\n      should_reset: false,\n    };\n    this.total_training_iters += ITER_PER_ROUND;\n    this.training_counter += ITER_PER_ROUND;\n    this.worker.postMessage(JSON.stringify(train_message));\n  }\n\n  /**\n   * Decide whether the train process should continue or not.\n   * @returns {Boolean} true if should continue, false if should end\n   */\n  private judge_train_process() {\n    if (this.manually_stop) {\n      this.manually_stop = false;\n      __DEV__ && console.info('Manually force stop');\n      return false;\n    }\n    if (this.is_custom_mode) {\n      if (this.training_counter < this.num_training_iterations) {\n        return true;\n      }\n      __DEV__ && console.info('Reach customized training iterations');\n      return false;\n    }\n\n    const current_training_rounds = this.history_accuracy.length - 1;\n    if (this.history_accuracy[current_training_rounds] >= TARGET_ACCURACY &&\n      this.history_loss[current_training_rounds] <= TARGET_LOSS) {\n      __DEV__ && console.info('Reach acceptale targets');\n      return false;\n    }\n    const current_statble_round = current_training_rounds - STABLE_ROUND;\n    if (current_training_rounds > STABLE_BASE &&\n      (this.history_loss[current_statble_round] - this.history_loss[current_training_rounds] < STABLE_STANDARD) &&\n      this.history_accuracy[current_training_rounds] - this.history_accuracy[current_statble_round] < STABLE_STANDARD) {\n      __DEV__ && console.info('Not perfect but stable');\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Manually stop current training.\n   * And force the next train process to reset net.\n   */\n  public stop(force_reset:boolean = true) {\n    // the parameter 'manually_stop' affects judge_train_process\n    // if this function is called, the training process will stop when the current round ends\n    this.manually_stop = true;\n    this.force_reset = force_reset;\n  }\n\n  /** ************ Predict ************/\n  public predict(data:number[]):number[] {\n    const formatted_data =\n      new convnetjs.Vol(data.map(this.justify_range));\n    const result = this.net.forward(formatted_data);\n    return Array.prototype.map.call(result.w, (weight:number) => weight);\n  }\n\n  public generate_net(feature_number:number, classification_number:number) {\n    const layers:any[] = [];\n    layers.push({ type: 'input', out_sx: 1, out_sy: 1, out_depth: feature_number });\n    [4, 4].forEach((num_neurons) => {\n      layers.push({ type: 'fc', num_neurons, activation: 'tanh' }); // TODO: choose proper activation function\n    });\n    layers.push({ type: 'softmax', num_classes: classification_number });\n    const net = new convnetjs.Net();\n    net.makeLayers(layers);\n    return JSON.stringify(net.toJSON());\n  }\n\n  public get_data_boundary(new_data:(number | string)[][][], dimension:number) {\n    const max = new Array(dimension).fill(-Infinity);\n    const min = new Array(dimension).fill(Infinity);\n    new_data.forEach((classification) => {\n      classification.forEach((data_row) => {\n        data_row.forEach((data_cell, feature_index) => {\n          const num = Number(data_cell);\n          if (max && min) {\n            max[feature_index] = Math.max(max[feature_index], num);\n            min[feature_index] = Math.min(min[feature_index], num);\n          }\n        });\n      });\n    });\n    for (let i = 0; i < dimension; i++) {\n      const offset = (max[i] - min[i]) * 0.1;\n      max[i] = Math.ceil(max[i] + offset);\n      min[i] = Math.floor(min[i] - offset);\n    }\n    return {\n      max,\n      min,\n    };\n  }\n}\n\nexport const machine_learning = new MachineLearning();\n","import { Action } from 'redux';\nimport { cloneDeep } from 'lodash';\nimport { DataState } from '../../models/def';\n\nexport const initial_data_state:DataState = {\n  data: [\n    [[''], [''], [''], [''], ['']],\n    [[''], [''], [''], [''], ['']],\n  ],\n  valid_rows: [\n    [],\n    [],\n  ],\n  should_hightlight: false,\n  symbol_index: [\n    [-1, -1],\n    [-1, -1],\n  ],\n};\n\nexport interface DataAction extends Action {\n  payload?:DataState;\n}\n\n// Actions\nexport const SET_DATA = 'ai_lab/set_data';\nexport function set_data(state:DataState) {\n  return { type: SET_DATA, payload: state };\n}\n\nexport const RESET_DATA_STATE = 'ai_lab/reset_data_state';\nexport function reset_data_state() {\n  return { type: RESET_DATA_STATE };\n}\n\nexport const CHANGE_DATA = 'ai_lab/change_data';\nexport function change_data(data:(number | string)[][][], symbol_index?:number[][]) {\n  return { type: CHANGE_DATA, payload: { data, symbol_index } };\n}\n\nexport const SHOW_HIGHTLIGHT = 'ai_lab/show_hightlight';\nexport function show_hightlight() {\n  return { type: SHOW_HIGHTLIGHT, payload: { should_hightlight: true } };\n}\n\nexport const HIDE_HIGHTLIGHT = 'ai_lab/hide_hightlight';\nexport function hide_hightlight() {\n  return { type: HIDE_HIGHTLIGHT, payload: { should_hightlight: false } };\n}\n\nexport function data_reducer(state = initial_data_state, action:any) {\n  switch (action.type) {\n    case SET_DATA:\n      return Object.assign({}, state, action.payload);\n    case CHANGE_DATA:\n      const data:(string | number)[][][] = cloneDeep(action.payload.data);\n      const valid_rows:number[][] = [];\n      const symbol_index:number[][] = cloneDeep(action.payload.symbol_index) || [];\n      data.forEach((group_data, class_index) => {\n        // 用来是否显示合法行数\n        valid_rows[class_index] = [];\n        // 用来是否显示外部添加标签\n        // change_data的时候如果有symbol_index直接使用，不用重新算\n        if (!action.payload.symbol_index) {\n          symbol_index[class_index] = [];\n          if (state.symbol_index[class_index]) {\n            symbol_index[class_index] = state.symbol_index[class_index];\n          } else {\n            symbol_index[class_index] = [-1, -1];\n          }\n        }\n        group_data.forEach((data_row, row_index) => {\n          if (data_row.every((data_cell) => data_cell !== '')) {\n            valid_rows[class_index].push(row_index);\n          }\n        });\n      });\n      return Object.assign({}, state, { data, valid_rows, symbol_index });\n    case RESET_DATA_STATE:\n      return cloneDeep(initial_data_state);\n    case SHOW_HIGHTLIGHT:\n      return Object.assign({}, state, action.payload);\n    case HIDE_HIGHTLIGHT:\n      return Object.assign({}, state, action.payload);\n    default:\n      return state;\n  }\n}","export type NoticeType = 'notice' | 'success' | 'error' | 'progress' | 'loading' | 'custom';\n\nexport type ShowNoticeFunction = (\n  content:string,\n  type?:NoticeType,\n) => void;\n\nlet props_show_notice:ShowNoticeFunction|null = null;\nexport function set_props_show_notice(s_n:ShowNoticeFunction) {\n  props_show_notice = s_n;\n}\n\nexport function get_props_show_notice() {\n  return props_show_notice;\n}\n\nexport type ShowConfirmDialogFunction = (callback:Function, title:string, content:string, right:{ text:string, type?:string }, left?:string) => void;\n\nlet props_show_confirm_dialog:ShowConfirmDialogFunction|null = null;\nexport function set_props_show_confirm_dialog(s_c_d:ShowConfirmDialogFunction) {\n  props_show_confirm_dialog = s_c_d;\n}\n\nexport function get_props_show_confirm_dialog() {\n  return props_show_confirm_dialog;\n}\n\n\nexport type DataReportFunc = (ev:string) => void;\n\nlet report_event:DataReportFunc|null = null;\nexport function set_props_report_event(r_e:DataReportFunc) {\n  report_event = r_e;\n}\n\nexport function get_props_report_event() {\n  return report_event;\n}\n","import { intl } from './i18n';\nimport { store_manager } from './controllers';\nimport {\n  show_notice as native_show_notice,\n  show_confirm_dialog as native_show_confirm_dialog,\n  Theme,\n} from './redux';\nimport { get_props_show_notice, get_props_show_confirm_dialog, NoticeType, get_props_report_event } from './deps';\n\nfunction get_intl(id:string) {\n  return intl().formatMessage({ id });\n}\n\n/**\n * 若父组件没有传 show_notice 则调用本地的 show_notice\n * @param options 选项\n */\nexport function show_notice(options:{\n  id:string,\n  type?:NoticeType,\n}) {\n  const { id, type } = options;\n  const content = get_intl(id);\n\n  const props_show_notice = get_props_show_notice();\n  if (props_show_notice) {\n    props_show_notice(content, type);\n    return;\n  }\n\n  store_manager.dispatch(native_show_notice(content));\n}\n\n\n/**\n * 若父组件没有传 show_confirm_dialog 则调用本地的 show_confirm_dialog\n *\n * @export\n * @param {Function} callback 确认 callback\n * @param {string} title 标题\n * @param {string} content 内容\n * @param {{ text:string, type?:string }} right 确定按钮\n * @param {string} [left] 取消按钮文字\n * @returns\n */\nexport function show_confirm_dialog(callback:Function, title:string, content:string, right:{ text:string, type?:string }, left?:string) {\n  title = get_intl(title);\n  right.text = get_intl(right.text);\n  left && (left = get_intl(left));\n\n  const props_show_confirm_dialog = get_props_show_confirm_dialog();\n  if (props_show_confirm_dialog) {\n    props_show_confirm_dialog(callback, title, content, right, left);\n    return;\n  }\n\n  store_manager.dispatch(native_show_confirm_dialog(callback, title, content, right.text, left));\n}\n\n/**\n * 动态获取主题class名，传入类名，如果是浅色主题，则色号自动加深2\n * @param classname 默认类名\n * @param current_theme 当前主题\n */\nexport function get_dynamic_theme_class(\n    classname:string,\n    current_theme:Theme,\n    minus_num:number = 2,\n) {\n  if (!current_theme.light_theme_colors) {\n    return classname;\n  }\n  return classname.replace(new RegExp(/-\\d+(\\.\\d+)?/, 'g'), (matched) => {\n    const num = Math.abs(parseInt(matched)) - minus_num; // 浅色主题自动减2个色号\n    switch (num) {\n      case -1:\n        return '-m1';\n      case -2:\n        return '-m2';\n      default:\n        return `-${num}`;\n    }\n  });\n}\n\nexport function report_event(ev:string) {\n  const report_event = get_props_report_event();\n  report_event && report_event(ev);\n}\n","export interface NoticeState {\n  content:string;\n  timeout:number;\n  is_show:boolean;\n}\n\nexport const initial_notice_state:NoticeState = {\n  content: '',\n  timeout: 2000,\n  is_show: false,\n};\n\n// Actions\nexport const SHOW_NOTICE = 'ai_lab/show_notice';\nexport function show_notice(content:string, timeout:number = 2000) {\n  return { type: SHOW_NOTICE, payload: { content, timeout } };\n}\n\nexport const HIDE_NOTICE = 'ai_lab/hide_notice';\nexport function hide_notice() {\n  return { type: HIDE_NOTICE };\n}\n\nexport function notice_reducer(state = initial_notice_state, action:any) {\n  switch (action.type) {\n    case SHOW_NOTICE:\n      return {\n        is_show: true,\n        content: action.payload.content,\n        timeout: action.payload.timeout,\n      };\n    case HIDE_NOTICE:\n      return initial_notice_state;\n    default:\n      return state;\n  }\n}","export interface ConfirmDialogState {\n  callback:Function;\n  title:string;\n  content:string;\n  pos_btn:string;\n  neg_btn:string;\n  is_show:boolean;\n}\n\nexport const initial_confirm_dialog_state:ConfirmDialogState = {\n  callback: Function,\n  title: '',\n  content: '',\n  pos_btn: '',\n  neg_btn: '',\n  is_show: false,\n};\n\n// Actions\nexport const SHOW_CONFIRM_DIALOG = 'ai_lab/show_confirm_dialog';\nexport function show_confirm_dialog(callback:Function, title:string, content:string, pos_btn:string, neg_btn?:string) {\n  return { type: SHOW_CONFIRM_DIALOG, payload: { callback, title, content, pos_btn, neg_btn } };\n}\n\nexport const CLOSE_CONFIRM_DIALOG = 'ai_lab/close_confirm_dialog';\nexport function close_confirm_dialog() {\n  return { type: CLOSE_CONFIRM_DIALOG };\n}\n\nexport function confirm_dialog_reducer(state = initial_confirm_dialog_state, action:any) {\n  switch (action.type) {\n    case SHOW_CONFIRM_DIALOG:\n      return Object.assign({}, state, {\n        is_show: true,\n        callback: action.payload.callback,\n        title: action.payload.title,\n        content: action.payload.content,\n        pos_btn: action.payload.pos_btn,\n        neg_btn: action.payload.neg_btn,\n      });\n    case CLOSE_CONFIRM_DIALOG:\n      return initial_confirm_dialog_state;\n    default:\n      return state;\n  }\n}","import { uniqueId } from 'lodash';\nimport { show_notice } from '../connected_deps';\n\nexport function get_validated_name(name:string, old_name:string, name_list:string[]):string {\n  if (!name || !name.trim()) {\n    // 提示输入不能为空\n    show_notice({\n      id: 'please_enter_name',\n      type: 'error',\n    });\n    return old_name;\n  }\n\n  name = name.trim();\n  const prev_len = name.length;\n\n  // 过滤非法字符\n  const match_res = name.match(/[0-9a-z\\s\\u4e00-\\u9fa5()（）_-]/gi);\n  const processed_name = match_res && match_res.join('').trim() || '';\n  if (!processed_name) {\n    // 提示输入不包含合法字符\n    show_notice({\n      id: 'illegal_name',\n      type: 'error',\n    });\n    return old_name;\n  }\n\n  const processed_len = processed_name.length;\n  // 若删除了非法字符，提示已经为你替换了所有非法字符\n  if (prev_len !== processed_len) {\n    show_notice({\n      id: 'illegal_charaters_are_deleted',\n      type: 'success',\n    });\n  }\n\n  if (processed_name === old_name) {\n    return processed_name;\n  }\n\n  const duplicated_index = name_list.indexOf(processed_name);\n  if (duplicated_index >= 0) {\n    return get_validated_name(auto_rename(name_list, processed_name), old_name, name_list);\n  }\n\n  return processed_name;\n}\n\nfunction auto_rename(name_list:string[], name:string):string {\n  while (name_list.includes(name)) {\n    const r = name.match(/^(.*?)\\((\\d+)\\)$/);\n    if (!r) {\n      name += '(1)';\n    } else {\n      name = `${r[1]}(${get_oversize_number(r[2])})`;\n    }\n  }\n  return name;\n}\n\nfunction get_oversize_number(name_number:string) {\n  // this function is for dealing with number precision in JS when integer is larger than 2^53\n  if (name_number.length > 15) {\n    let start = parseInt(name_number.substring(0, 15), 10);\n    const end = parseInt(name_number.substring(15, name_number.length), 10) + 1;\n    let end_string = end.toString();\n    if (end > Math.pow(name_number.length - 15, 10) - 1) {\n      start += 1;\n      end_string = end_string.substring(1, end_string.length);\n    }\n    return start + end_string;\n  }\n  return parseInt(name_number, 10) + 1;\n}\n\n/**\n * Checked if the given string is a valid number.\n *\n * @param text The string to be checked.\n */\nexport function is_valid_number(text:string) {\n  return /^[+-]?\\d*\\.?\\d+(e[+-]?\\d+)?$/.test(text);\n}\n\n/**\n * Auto rename by increase the number in the suffix.\n *\n * e.g. \"Number1\" --> \"Number2\"\n *\n * @param prefix Prefix of the name\n * @param name_list Array of all names\n * @param range Rename range\n */\nexport function rename_base_on_range(prefix:string, name_list:string[], range:number) {\n  // 已经使用的名字后缀\n  const name_index_used = name_list\n    .filter((name) => name.includes(prefix))\n    .map((name) => parseFloat(name.split(prefix)[1]));\n\n  // 可用的后缀\n  const available_name_index = Array.from({ length: range }, (v, k) => k + 1).filter((i) => !name_index_used.includes(i));\n\n  if (available_name_index.length === 0) {\n    // No available name provided. Generate a random id foe name.\n    return prefix + uniqueId();\n  }\n\n  // 取第一个作为后缀\n  return `${prefix}${available_name_index[0]}`;\n}\n\nlet is_modified:boolean = false;\n\n/**\n * 设置模型数据是否被修改过，包括模型数据，训练数据，训练配置等\n * @param is_m 模型被修改过了\n */\nexport function set_model_modified(is_m:boolean) {\n  is_modified = is_m;\n}\n\n/**\n * 模型在打开 ai 实验室的期间是否被修改过\n */\nexport function is_model_modified() {\n  return is_modified;\n};\n\n","import { cloneDeep } from 'lodash';\nimport { Action } from 'redux';\nimport { ModelType, ModelState, RANGE_NUM_CLASSES, RANGE_NUM_FEATURES } from '../../models/def';\nimport { intl } from '../../i18n';\nimport { rename_base_on_range } from '../../models/utils';\n\nexport const initial_model_state:ModelState = {\n  model_name: '',\n  model_type: ModelType.DATA,\n  features: [],\n  classifications: [],\n  hidden_layers: [4, 4],\n  net: undefined,\n  max: [],\n  min: [],\n};\n\nexport interface ModelAction extends Action {\n  payload:Partial<ModelState> & { index:number } & { index:number, new_name:string } & { num:number } & { index1:number, index2:number };\n}\n\n// Actions\nexport const SET_MODEL_INFO = 'ai_lab/set_model_info';\nexport function set_model_info(model_info:ModelState) {\n  return { type: SET_MODEL_INFO, payload: model_info };\n}\n\nexport const CHANGE_MODEL_NAME = 'ai_lab/change_model_name';\nexport function change_model_name(model_name:string) {\n  return { type: CHANGE_MODEL_NAME, payload: { model_name } };\n}\n\n// For data importing\nexport const CHANGE_CLASSIFICATION = 'ai_lab/change_classification';\nexport function change_classification(classifications:string[]) {\n  return { type: CHANGE_CLASSIFICATION, payload: { classifications } };\n}\n\nexport const CHANGE_FEATURE = 'ai_lab/change_feature';\nexport function change_feature(features:string[]) {\n  return { type: CHANGE_FEATURE, payload: { features } };\n}\n\n// For data edit\nexport const ADD_CLASSIFICATION = 'ai_lab/add_classification';\nexport function add_classification(num:number = 1) {\n  return { type: ADD_CLASSIFICATION, payload: { num } };\n}\n\nexport const DEL_CLASSIFICATION = 'ai_lab/del_classification';\nexport function del_classification(index:number) {\n  return { type: DEL_CLASSIFICATION, payload: { index } };\n}\n\nexport const EDIT_CLASSIFICATION = 'ai_lab/edit_classification';\nexport function edit_classification(index:number, new_name:string) {\n  return { type: EDIT_CLASSIFICATION, payload: { index, new_name } };\n}\n\nexport const ADD_FEATURE = 'ai_lab/add_feature';\nexport function add_feature() {\n  return { type: ADD_FEATURE };\n}\n\nexport const DEL_FEATURE = 'ai_lab/del_feature';\nexport function del_feature(index:number) {\n  return { type: DEL_FEATURE, payload: { index } };\n}\n\nexport const SWAP_FEATURE = 'ai_lab/swap_feature';\nexport function swap_feature(index1:number, index2:number) {\n  return { type: SWAP_FEATURE, payload: { index1, index2 } };\n}\n\nexport const EDIT_FEATURE = 'ai_lab/edit_feature';\nexport function edit_feature(index:number, new_name:string) {\n  return { type: EDIT_FEATURE, payload: { index, new_name } };\n}\n\nexport const CHANGE_HIDDEN_LAYER = 'ai_lab/change_hidden_layer';\nexport function change_hidden_layer(hidden_layers:number[]) {\n  return { type: CHANGE_HIDDEN_LAYER, payload: { hidden_layers } };\n}\n\nexport const SET_MODEL_TYPE = 'ai_lab/set_model_type';\nexport function set_model_type(model_type:ModelType) {\n  return { type: SET_MODEL_TYPE, payload: { model_type } };\n}\n\nexport const SET_NET = 'set_net';\nexport function set_net(net:string) {\n  return { type: SET_NET, payload: { net } };\n}\n\nexport const RESET_MODEL_STATE = 'ai_lab/reset_model_state';\nexport function reset_model_state() {\n  return { type: RESET_MODEL_STATE };\n}\n\n// Reducer\nexport function model_reducer(state = initial_model_state, action:ModelAction) {\n  if (action.type === SET_MODEL_INFO) {\n    return Object.assign({}, state, action.payload);\n  } else if (action.type === CHANGE_MODEL_NAME) {\n    return Object.assign({}, state, { model_name: action.payload.model_name });\n\n  } else if (action.type === CHANGE_CLASSIFICATION) {\n    return Object.assign({}, state, { classifications: action.payload.classifications });\n\n  } else if (action.type === CHANGE_FEATURE) {\n    return Object.assign({}, state, { features: action.payload.features });\n\n  } else if (action.type === ADD_CLASSIFICATION) {\n    if (state.classifications.length >= RANGE_NUM_CLASSES[1]) {\n      return state;\n    }\n    const classifications = cloneDeep(state.classifications);\n    // 默认分类名前缀\n    const default_classification_name_prefix = intl().formatMessage({ id: 'classification' });\n\n    let num = action.payload.num;\n    while (num--) {\n      classifications.push(rename_base_on_range(default_classification_name_prefix, classifications, RANGE_NUM_CLASSES[1]));\n    }\n    return Object.assign({}, state, { classifications });\n\n  } else if (action.type === DEL_CLASSIFICATION) {\n    if (state.classifications.length <= RANGE_NUM_CLASSES[0]) {\n      return state;\n    }\n    const classifications = cloneDeep(state.classifications);\n    classifications.splice(action.payload.index, 1);\n    return Object.assign({}, state, { classifications });\n\n  } else if (action.type === EDIT_CLASSIFICATION) {\n    const classifications = cloneDeep(state.classifications);\n    classifications[action.payload.index] = action.payload.new_name;\n    return Object.assign({}, state, { classifications });\n\n  } else if (action.type === ADD_FEATURE) {\n    if (state.features.length >= RANGE_NUM_FEATURES[1]) {\n      return state;\n    }\n    const features = cloneDeep(state.features);\n\n    // 默认特征名前缀\n    const default_feature_name_prefix = intl().formatMessage({ id: 'feature' });\n    features.push(rename_base_on_range(default_feature_name_prefix, features, RANGE_NUM_FEATURES[1]));\n    return Object.assign({}, state, { features });\n\n  } else if(action.type === SWAP_FEATURE) {\n    const features = cloneDeep(state.features);\n    const { index1, index2 } = action.payload;\n\n    const index2_value = features[index2];\n    features[index2] = features[index1];\n    features[index1] = index2_value;\n\n    return Object.assign({}, state, { features });\n  } else if (action.type === DEL_FEATURE) {\n    if (state.features.length <= RANGE_NUM_FEATURES[0]) {\n      return state;\n    }\n    const features = cloneDeep(state.features);\n    features.splice(action.payload.index, 1);\n    return Object.assign({}, state, { features });\n\n  } else if (action.type === EDIT_FEATURE) {\n    const features = cloneDeep(state.features);\n    features[action.payload.index] = action.payload.new_name;\n    return Object.assign({}, state, { features });\n\n  } else if (action.type === CHANGE_HIDDEN_LAYER) {\n    const hidden_layers = cloneDeep(action.payload.hidden_layers);\n    return Object.assign({}, state, { hidden_layers });\n\n  } else if (action.type === SET_MODEL_TYPE) {\n    return Object.assign({}, state, { model_type: action.payload.model_type });\n\n  } else if (action.type === SET_NET) {\n    return Object.assign({}, state, { net: action.payload.net });\n\n  } else if (action.type === RESET_MODEL_STATE) {\n    return Object.assign({}, state, initial_model_state);\n\n  } else {\n    return state;\n  }\n}","import { uniqueId } from 'lodash';\nimport { TrainingStatus, TrainingState, DEFAULT_TRAINING_ITERATIONS, DEFAULT_LEARNING_RATE, SavedTrainingState } from '../../models/def';\n\nexport const initial_training_state:TrainingState = {\n  is_custom_mode: false,\n  training_status: 'wait_start',\n  training_started_at: undefined,\n\n  num_training_iterations: DEFAULT_TRAINING_ITERATIONS,\n  learning_rate: DEFAULT_LEARNING_RATE,\n\n  current_training_times: 0,\n  current_acc: 0,\n  current_loss: 0,\n\n  data_flag: uniqueId(),\n};\n\n// Actions\nexport const SET_TRAINING_INFO = 'ai_lab/set_training_info';\nexport function set_training_info(state:SavedTrainingState) {\n  return { type: SET_TRAINING_INFO, payload: state };\n}\n\nexport const SET_TRAINING_STATUS = 'ai_lab/set_training_status';\nexport function set_training_status(status:TrainingStatus) {\n  return { type: SET_TRAINING_STATUS, payload: { status } };\n}\n\nexport const REFRESH_TRAINING_RESULT = 'ai_lab/refresh_training_result';\nexport function refresh_training_result(times:number, acc:number, loss:number) {\n  return { type: REFRESH_TRAINING_RESULT, payload: { times, acc, loss } };\n}\n\nexport const SET_START_TIME = 'ai_lab/set_start_time';\nexport function set_start_time(date:Date) {\n  return { type: SET_START_TIME, payload: { date } };\n}\n\nexport const SET_CUSTOM_MODE = 'ai_lab/set_custom_mode';\nexport function set_custom_mode(is_custom_mode:boolean) {\n  return { type: SET_CUSTOM_MODE, payload: { is_custom_mode } };\n}\n\nexport const SET_NUM_TRAINING_ITERATIONS = 'ai_lab/set_num_training_iterations';\nexport function set_num_training_iterations(num_training_iterations:number) {\n  return { type: SET_NUM_TRAINING_ITERATIONS, payload: { num_training_iterations } };\n}\n\nexport const SET_LEARNING_RATE = 'ai_lab/set_learning_rate';\nexport function set_learning_rate(learning_rate:number) {\n  return { type: SET_LEARNING_RATE, payload: { learning_rate } };\n}\n\nexport const RESET_DATA_FLAG = 'ai_lab/reset_data_flag';\nexport function reset_data_flag() {\n  return { type: RESET_DATA_FLAG, payload: uniqueId() };\n}\n\nexport const RESET_TRAINING_STATE = 'ai_lab/reset_training_state';\nexport function reset_training_state() {\n  return { type: RESET_TRAINING_STATE };\n}\n\nexport function training_reducer(state = initial_training_state, action:any) {\n  switch (action.type) {\n    case SET_TRAINING_INFO:\n      return Object.assign({}, state, action.payload);\n    case SET_TRAINING_STATUS:\n      return Object.assign({}, state, { training_status: action.payload.status });\n    case REFRESH_TRAINING_RESULT:\n      return Object.assign({}, state, {\n        current_training_times: action.payload.times,\n        current_acc: action.payload.acc,\n        current_loss: action.payload.loss,\n      });\n    case SET_START_TIME:\n      return Object.assign({}, state, { training_started_at: action.payload.date });\n    case SET_CUSTOM_MODE:\n      return Object.assign({}, state, { is_custom_mode: action.payload.is_custom_mode });\n    case SET_NUM_TRAINING_ITERATIONS:\n      return Object.assign({}, state, { num_training_iterations: action.payload.num_training_iterations });\n    case SET_LEARNING_RATE:\n      return Object.assign({}, state, { learning_rate: action.payload.learning_rate });\n    case RESET_TRAINING_STATE:\n      return initial_training_state;\n    case RESET_DATA_FLAG:\n      return Object.assign({}, state, { data_flag: action.payload });\n    default:\n      return state;\n  }\n}","import { TrainingStep, DataSet } from '../../models/def';\n\nexport type HSB = [number, number, number];\n\nexport interface Theme {\n  id:string;\n  primary_color:[number, number, number]; // HSB格式\n  second_color:[number, number, number]; // HSB格式\n  light_theme_colors?:{ [id:string]:string }; // 浅色主题专有色号\n  extra_color:{ // 主题的其他固定色号，16进制即可，c对比色，n补充色\n    c:HSB,\n    n1:HSB,\n    n2:HSB,\n  };\n}\nexport interface MainState {\n  current_step:TrainingStep;\n  chosen_data_set:File | DataSet | undefined;\n  should_show_feature_add_notice:boolean;\n  is_visible:boolean;\n  theme:Theme;\n}\n\nexport const initial_main_state:MainState = {\n  current_step: TrainingStep.EDITING_DATA,\n  chosen_data_set: undefined,\n  should_show_feature_add_notice: true,\n  is_visible: false,\n  theme: {\n    id: 'theme/blue',\n    primary_color: [216, 84, 100],\n    second_color: [22, 84, 100],\n    extra_color: {\n      c: [30, 90, 100],\n      n1: [204, 84, 100],\n      n2: [134, 69, 84],\n    },\n  },\n};\n\n// Actions\nexport const CHOOSE_STEP = 'ai_lab/choose_step';\nexport function choose_step(next_step:TrainingStep) {\n  return { type: CHOOSE_STEP, payload: { next_step } };\n}\n\nexport const CHOOSE_DATA_SET = 'ai_lab/choose_data_set';\nexport function choose_data_set(data_set:File | DataSet) {\n  return { type: CHOOSE_DATA_SET, payload: { data_set } };\n}\n\nexport const RESET_MAIN_STATE = 'ai_lab/reset_main_state';\nexport function reset_main_state() {\n  return { type: RESET_MAIN_STATE };\n}\n\nexport const SET_FEATURE_NOTICED = 'ai_lab/set_feature_noticed';\nexport function set_feature_noticed() {\n  return { type: SET_FEATURE_NOTICED };\n}\n\nexport const SET_THEME = 'ai_lab/set_theme';\nexport function set_theme(theme:Theme) {\n  return { type: SET_THEME, payload: { theme } };\n}\n\nexport const SET_AI_LAB_VISIBILITY = 'ai_lab/set_ai_lab_visibility';\nexport function set_ai_lab_visibility(is_visible:boolean) {\n  return { type: SET_AI_LAB_VISIBILITY, payload: { is_visible } };\n}\n\n// Reducer\nexport function main_reducer(state = initial_main_state, action:any) {\n  switch (action.type) {\n    case CHOOSE_STEP:\n      return Object.assign({}, state, { current_step: action.payload.next_step });\n    case CHOOSE_DATA_SET:\n      return Object.assign({}, state, { chosen_data_set: action.payload.data_set });\n    case RESET_MAIN_STATE:\n      return initial_main_state;\n    case SET_FEATURE_NOTICED:\n      return Object.assign({}, state, { should_show_feature_add_notice: false });\n    case SET_THEME:\n      return Object.assign({}, state, { theme: action.payload.theme });\n    case SET_AI_LAB_VISIBILITY:\n      return Object.assign({}, state, { is_visible: action.payload.is_visible });\n    default:\n      return state;\n  }\n}","export interface MenuItem {\n  text:string;\n  cb:(e:any) => void;\n  disabled?:boolean;\n}\n\nexport type MenuItems = MenuItem[];\n\nexport interface ContextMenuState {\n  readonly x:number;\n  readonly y:number;\n  readonly menu_items:MenuItems;\n  is_show?:boolean;\n}\n\nconst initial_context_menu_state:ContextMenuState = {\n  is_show: false,\n  x: 0,\n  y: 0,\n  menu_items: [],\n};\n\n// Actions\nexport const SHOW_CONTEXT_MENU = 'ai_lab/show_context_menu';\nexport function show_context_menu(options:ContextMenuState) {\n  return { type: SHOW_CONTEXT_MENU, payload: options };\n}\n\nexport const HIDE_CONTEXT_MENU = 'ai_lab/hide_context_menu';\nexport function hide_context_menu() {\n  return { type: HIDE_CONTEXT_MENU };\n}\n\nexport function context_menu_reducer(\n    state:ContextMenuState = initial_context_menu_state,\n    action:any):ContextMenuState\n{\n  switch (action.type) {\n    case SHOW_CONTEXT_MENU:\n      return Object.assign({ is_show: true }, action.payload);\n    case HIDE_CONTEXT_MENU:\n      return initial_context_menu_state;\n    default:\n      return state;\n  }\n}\n","import { takeLatest, fork } from 'redux-saga/effects';\nimport { Action } from 'redux';\nimport { debounce } from 'lodash';\n\nimport { set_model_modified } from '../../models/utils';\n\nimport {\n  EDIT_FEATURE,\n  EDIT_CLASSIFICATION,\n  CHANGE_MODEL_NAME,\n  SET_TRAINING_STATUS,\n  SET_NET,\n  CHANGE_HIDDEN_LAYER,\n  SET_NUM_TRAINING_ITERATIONS,\n  SET_TRAINING_INFO,\n  CHANGE_DATA,\n  SET_CUSTOM_MODE,\n} from '../reducers';\n\nexport function* model_sagas() {\n  yield fork(watch_model_modification);\n}\n\ntype Map = {[type:string]:boolean};\n/**\n * 涉及到模型数据改动的 action\n */\nconst MODEL_OPERATION = [\n  EDIT_FEATURE,\n  EDIT_CLASSIFICATION,\n  CHANGE_DATA,\n  CHANGE_MODEL_NAME,\n  SET_TRAINING_STATUS,\n  SET_NET,\n  CHANGE_HIDDEN_LAYER,\n  SET_NUM_TRAINING_ITERATIONS,\n  SET_TRAINING_INFO,\n  SET_CUSTOM_MODE,\n];\n\nfunction* watch_model_modification() {\n  yield takeLatest((a:Action) => MODEL_OPERATION.includes(a.type), debounce(set_model_modified.bind(this, true), 50));\n}\n","import { combineReducers } from 'redux';\nimport { ModelState, TrainingState, DataState } from '../models/def';\nimport { data_reducer } from './reducers/data_reducer';\nimport { model_reducer } from './reducers/model_reducer';\nimport { training_reducer } from './reducers/training_reducer';\nimport { MainState, main_reducer } from './reducers/main_reducer';\nimport { ConfirmDialogState, confirm_dialog_reducer } from './reducers/confirm_reducer';\nimport { NoticeState, notice_reducer } from './reducers/notice_reducer';\nimport { context_menu_reducer, ContextMenuState } from './reducers/contextmenu_reducer';\n\nexport * from './reducers';\nexport * from './sagas';\n\nexport interface StoreState {\n  model_state:ModelState;\n  data_state:DataState;\n  training_state:TrainingState;\n  main_state:MainState;\n  confirm_dialog_state:ConfirmDialogState;\n  notice_state:NoticeState;\n  context_menu_state:ContextMenuState;\n}\nconst app_reducer = combineReducers<StoreState>({\n  model_state: model_reducer,\n  data_state: data_reducer,\n  training_state: training_reducer,\n  main_state: main_reducer,\n  confirm_dialog_state: confirm_dialog_reducer,\n  notice_state: notice_reducer,\n  context_menu_state: context_menu_reducer,\n});\n\nexport const RESET_STORE = 'ai_lab/reset_store';\nexport function reset_store() {\n  return { type: RESET_STORE };\n}\n\nexport const root_reducer = (state:any, action:any) => {\n  if (action.type === RESET_STORE) {\n    state = undefined;\n  }\n\n  return app_reducer(state, action);\n};\n\n","import { createStore, Store, compose, applyMiddleware } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport { all, call, spawn } from 'redux-saga/effects';\n\nimport { omit } from 'lodash';\nimport { root_reducer, StoreState, model_sagas } from '../redux';\nimport { AIModelForSave } from '../models/def';\nimport { machine_learning } from '../controllers';\n\nfunction create_store() {\n  const middlewares = [];\n  const saga_middleware = createSagaMiddleware();\n  middlewares.push(saga_middleware);\n\n  const store = createStore(\n    root_reducer,\n    // ((main_state ? {\n    //   main_states: _.defaults(initial_states, main_state),\n    // } : undefined) as StoreState),\n    (window as any).__REDUX_DEVTOOLS_EXTENSION__ ?\n      compose(applyMiddleware(...middlewares), (window as any).__REDUX_DEVTOOLS_EXTENSION__()) :\n      applyMiddleware(...middlewares),\n  );\n  saga_middleware.run(saga_root);\n  return store;\n}\n\nfunction* saga_root() {\n  const sagas = [\n    model_sagas,\n  ];\n  yield all(\n    sagas.map((saga) =>\n      spawn(function*() {\n        while (true) {\n          try {\n            yield call(saga);\n          } catch (e) {\n            console.error(e);\n          }\n        }\n      }),\n    ),\n  );\n}\n\nconst get_path_object = (obj:{[key:string]:any}, object_path:string):any => {\n  const path_list = object_path.split('.');\n  const path = path_list.shift();\n  const remain_path = path_list.join('.');\n  return path && obj[path] ? get_path_object(obj[path], remain_path) : obj;\n};\n\nclass StoreManager {\n  private store:Store<StoreState>;\n  constructor() {\n    this.store = create_store();\n  }\n  public get_store():Store<StoreState> {\n    return this.store;\n  }\n  public get_state() {\n    return this.store.getState();\n  }\n  public subscribe(listener:() => void) {\n    this.store.subscribe(listener);\n  }\n  public dispatch(action:any) {\n    return this.store.dispatch(action);\n  }\n\n  public watch(path:string, cb:(old_value:any, new_value:any) => void) {\n    let current_value = get_path_object(this.get_state(), path);\n    this.subscribe(() => {\n      const new_value = get_path_object(this.get_state(), path);\n      const old_value = current_value;\n      if (new_value !== old_value) {\n        current_value = new_value;\n        cb(old_value, new_value);\n      }\n    });\n  }\n\n  public get_save_info():AIModelForSave {\n    const model_state = this.get_state().model_state;\n    const current_net = model_state.net;\n    if (!current_net) {\n      const net = machine_learning.generate_net(model_state.features.length, model_state.classifications.length);\n      model_state.net = net;\n    }\n    // 每次导出之前去掉kitten添加数据的新的标志\n    const data_state = this.get_state().data_state;\n    for (let i = 0; i < data_state.symbol_index.length; i++) {\n      data_state.symbol_index[i] = [-1, -1];\n    }\n    // 每次到处去之前数据先做一次归一化算出最大最小值\n    const data_boundary = machine_learning.get_data_boundary(data_state.data, model_state.features.length);\n    model_state.max = data_boundary.max;\n    model_state.min = data_boundary.min;\n    return {\n      model_state: model_state,\n      training_state: omit(this.get_state().training_state, 'data_flag'),\n      data_state: data_state,\n    };\n  }\n}\n\nexport const store_manager = new StoreManager();\n","/* https://github.com/tensorflow/playground/blob/master/src/heatmap.ts\n\nCopyright 2016 Google Inc. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n==============================================================================\nCHANGELOG\n\n2019.4\n1. Update d3 from 3.5.16 to 5.9.2 (latest version), use TypeScript 3.3.3, fix syntax errors and reduce implicitly types.\n2. Remove unused parameters and elements here (test data layer, discretize mode, noSvg mode).\n3. Change data structures to handle multi classifications.\n4. Modify constructor, add 'updateRange', 'resetPoints'.\n\n2019.5\nAdd tooltip.\n*/\n\nimport { range } from 'd3-array';\nimport { axisBottom, axisRight } from 'd3-axis';\nimport { rgb } from 'd3-color';\nimport { select, event } from 'd3-selection';\nimport { scaleLinear, scaleQuantize } from 'd3-scale';\n\nimport { CLASS_COLORS, DrawData } from '../../models/def';\nimport './diagram.css';\n\nexport type Example2D = {\n  x:number,\n  y:number,\n  label:number,\n};\n\nexport interface HeatMapSettings {\n  showAxes?:boolean;\n  noSvg?:boolean;\n}\n\n/** Number of different shades (colors) when drawing a gradient heatmap */\nconst NUM_SHADES = 30;\n\n/**\n * Draws a heatmap using canvas. Used for showing the learned decision\n * boundary of the classification algorithm. Can also draw data points\n * using an svg overlayed on top of the canvas heatmap.\n */\nexport class HeatMap {\n  private settings:HeatMapSettings = {\n    showAxes: true,\n    noSvg: false,\n  };\n  private xScale:d3.ScaleLinear<number, number>;\n  private yScale:d3.ScaleLinear<number, number>;\n  private numSamples:number;\n  private color_arr:d3.ScaleQuantize<string>[];\n  private container:any;\n  private canvas:d3.Selection<HTMLCanvasElement, {}, HTMLElement, any>;\n  private svg:d3.Selection<SVGElement, {}, HTMLElement, any>;\n  private tooltip:d3.Selection<HTMLDivElement, {}, HTMLElement, any>;\n\n  private width:number;\n  private padding:number;\n\n  constructor(\n    width:number, numSamples:number, containerSelector:string,\n    userSettings?:HeatMapSettings) {\n    // overwrite the defaults with the user-specified settings.\n    userSettings && Object.assign(this.settings, userSettings);\n\n    this.numSamples = numSamples;\n    this.width = width;\n    this.padding = this.settings.showAxes ? 20 : 0; // FIXME magic number\n\n    // Get a range of colors.\n    this.color_arr = CLASS_COLORS.map((color) => {\n      const tmp_scale = scaleLinear<string>()\n        .domain([0, 1])\n        .range(['#ffffff', color])\n        .clamp(true);\n      // Due to numerical error, we need to specify\n      // d3.range(0, end + small_epsilon, step)\n      // in order to guarantee that we will have end/step entries with\n      // the last element being equal to end.\n      const color_range = range(0, 1 + 1E-9, 1 / NUM_SHADES).map((a) => tmp_scale(a));\n      return scaleQuantize<string>()\n        .domain([0, 1])\n        .range(color_range);\n    });\n\n    const container = select(containerSelector).append('div')\n      .style('width', this.width + 'px')\n      .style('height', this.width + 'px')\n      .style('position', 'relative');\n    this.container = container;\n\n    this.canvas = container.append('canvas')\n      .attr('width', numSamples)\n      .attr('height', numSamples)\n      .style('width', (this.width - 2 * this.padding) + 'px')\n      .style('height', (this.width - 2 * this.padding) + 'px')\n      .style('position', 'absolute')\n      .style('top', `${this.padding}px`)\n      .style('left', `${this.padding}px`);\n\n    if (this.settings.noSvg) { return; }\n    this.svg = container.append('svg')\n      .attr('width', this.width)\n      .attr('height', this.width)\n      .style('position', 'absolute')\n      .style('top', '0')\n      .style('left', '0')\n      .style('overflow', 'visible') // Enable long data to be shown\n      .append('g')\n      .attr('transform', `translate(${this.padding},${this.padding})`);\n\n    // Append heatmap after axes so that dots are always upper the coordinates\n    this.svg.append('g').attr('class', 'train');\n\n    this.tooltip = container.append('div')\n      .attr('class', 'axis tooltip');\n  }\n\n  updateBackground(data:DrawData[][], discretize:boolean = false):void {\n    const dx = data[0].length;\n    const dy = data.length;\n\n    if (dx !== this.numSamples || dy !== this.numSamples) {\n      throw new Error(\n        'The provided data matrix must be of size ' +\n        'numSamples X numSamples');\n    }\n\n    // Compute the pixel colors; scaled by CSS.\n    const context = (this.canvas.node() as HTMLCanvasElement).getContext('2d');\n    if (!context) { return; }\n    const image = context.createImageData(dx, dy);\n\n    for (let y = 0, p = -1; y < dy; ++y) {\n      for (let x = 0; x < dx; ++x) {\n        const value = data[x][y];\n        if (discretize) {\n          value.density = (value.density >= 0 ? 1 : -1);\n        }\n        const c = rgb(this.color_arr[value.class_index](value.density));\n        image.data[++p] = c.r;\n        image.data[++p] = c.g;\n        image.data[++p] = c.b;\n        image.data[++p] = 160;\n      }\n    }\n    context.putImageData(image, 0, 0);\n  }\n\n  resetPoints(xDomain:[number, number], yDomain:[number, number], points:Example2D[], labels:string[]) {\n    this.resetRange(xDomain, yDomain, labels);\n    this.svg.select('g.train').selectAll('circle').remove();\n    this.updatePoints(points);\n  }\n\n  private updatePoints(points:Example2D[]):void {\n    if (this.settings.noSvg) {\n      throw Error('Can\\'t add points since noSvg=true');\n    }\n    this.updateCircles(this.svg.select('g.train'), points);\n  }\n\n  private resetRange(xDomain:[number, number], yDomain:[number, number], labels:string[]) {\n    // d3.scaleLinear: projection from domain to range\n    this.xScale = scaleLinear()\n      .domain(xDomain)\n      .range([0, this.width - 2 * this.padding]);\n\n    this.yScale = scaleLinear()\n      .domain(yDomain)\n      .range([this.width - 2 * this.padding, 0]);\n\n    if (this.settings.showAxes) {\n      const xAxis = axisBottom(this.xScale);\n      const yAxis = axisRight(this.yScale);\n\n      // Clear existing axes and set new ones\n      this.svg.selectAll('.axis').remove();\n\n      this.svg.append('g')\n        .attr('class', 'x axis')\n        .attr('transform', `translate(0,${this.width - 2 * this.padding})`)\n        .call(xAxis)\n        .on('mouseover', () => {\n          this.tooltip.html(labels[0])\n            .style('opacity', 1)\n            .style('left', `${event.pageX + 1}px`)\n            .style('top', `${event.pageY + 14}px`);\n        })\n        .on('mouseout', () => {\n          this.tooltip.style('opacity', 0);\n        });\n\n      this.svg.append('g')\n        .attr('class', 'y axis')\n        .attr('transform', 'translate(' + (this.width - 2 * this.padding) + ',0)')\n        .call(yAxis)\n        .on('mouseover', () => {\n          this.tooltip.html(labels[1])\n            .style('opacity', 1)\n            .style('left', `${event.pageX + 1}px`)\n            .style('top', `${event.pageY + 14}px`);\n        })\n        .on('mouseout', () => {\n          this.tooltip.style('opacity', 0);\n        });\n    }\n  }\n\n  private updateCircles(container:d3.Selection<SVGElement, {}, HTMLElement, any>, points:Example2D[]) {\n    // Keep only points that are inside the bounds.\n    const xDomain = this.xScale.domain();\n    const yDomain = this.yScale.domain();\n    points = points.filter((p) => p.x >= xDomain[0] && p.x <= xDomain[1] &&\n        p.y >= yDomain[0] && p.y <= yDomain[1]);\n\n    // Attach data to initially empty selection.\n    const selection = container.selectAll('circle').data(points);\n\n    // Insert elements to match length of points array\n    // and update points to be in the correct position.\n    selection.enter().append('circle')\n      .attr('r', 3)\n      .style('stroke', '#fff')\n      .style('stroke-width', 0.7)\n      .attr('cx', (d:Example2D) => this.xScale(d.x))\n      .attr('cy', (d:Example2D) => this.yScale(d.y))\n      .style('fill', (d:Example2D) => this.color_arr[d.label](1));\n\n    // Remove points if the length has gone down.\n    selection.exit().remove();\n  }\n\n  public destroy() {\n    this.container.remove(this.svg);\n    this.container.remove(this.canvas);\n  }\n} // Close class HeatMap.","/* https://github.com/tensorflow/playground/blob/master/src/linechart.ts\n\nCopyright 2016 Google Inc. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================\nCHANGELOG\n\n2019.3\n1. Update d3 from 3.5.16 to 5.9.2 (latest version), use TypeScript 3.3.3, fix syntax errors and reduce implicitly types.\n2. Change class name.\n*/\n\nimport { scaleLinear } from 'd3-scale';\nimport { select } from 'd3-selection';\nimport { line } from 'd3-shape';\n\ntype DataPoint = {\n  x:number,\n  y:number[],\n};\n\n/**\n * A multi-series line chart that allows you to append new data points\n * as data becomes available.\n */\nexport class LineChart {\n  private numLines:number;\n  private data:DataPoint[] = [];\n  private svg:d3.Selection<SVGElement, {}, HTMLElement, any>;\n  private xScale:d3.ScaleLinear<number, number>;\n  private yScale:d3.ScaleLinear<number, number>;\n  private paths:d3.Selection<SVGPathElement, {}, HTMLElement, any>[];\n\n  private minY = Number.MAX_VALUE;\n  private maxY = Number.MIN_VALUE;\n\n  constructor(containerSelector:string, lineColors:string[]) {\n    this.numLines = lineColors.length;\n    const container = select(containerSelector);\n    const node = container.node() as HTMLElement;\n    const totalWidth = node.offsetWidth;\n    const totalHeight = node.offsetHeight;\n    const margin = { top: 2, right: 0, bottom: 2, left: 2 };\n    const width = totalWidth - margin.left - margin.right;\n    const height = totalHeight - margin.top - margin.bottom;\n\n    this.xScale = scaleLinear()\n      .domain([0, 0])\n      .range([0, width]);\n\n    this.yScale = scaleLinear()\n      .domain([0, 0])\n      .range([height, 0]);\n\n    this.svg = container.append('svg')\n      .attr('width', width + margin.left + margin.right)\n      .attr('height', height + margin.top + margin.bottom)\n      .append('g')\n      .attr('transform', `translate(${margin.left},${margin.top})`);\n\n    this.paths = new Array(this.numLines);\n    for (let i = 0; i < this.numLines; i++) {\n      this.paths[i] = this.svg.append('path')\n        .attr('class', 'line')\n        .style('fill', 'none')\n        .style('stroke', lineColors[i])\n        .style('stroke-width', '1.5px');\n    }\n  }\n\n  reset() {\n    this.data = [];\n    this.redraw();\n    this.minY = Number.MAX_VALUE;\n    this.maxY = Number.MIN_VALUE;\n  }\n\n  addDataPoint(dataPoint:number[]) {\n    if (dataPoint.length !== this.numLines) {\n      throw Error('Length of dataPoint must equal number of lines');\n    }\n    dataPoint.forEach((y) => {\n      this.minY = Math.min(this.minY, y);\n      this.maxY = Math.max(this.maxY, y);\n    });\n\n    this.data.push({ x: this.data.length + 1, y: dataPoint });\n    this.redraw();\n  }\n\n  private redraw() {\n    // Adjust the x and y domain.\n    this.xScale.domain([1, this.data.length]);\n    this.yScale.domain([this.minY, this.maxY]);\n    // Adjust all the <path> elements (lines).\n    const getPathMap = (lineIndex:number) => line<{x:number, y:number[]}>()\n      .x((d) => this.xScale(d.x))\n      .y((d) => this.yScale(d.y[lineIndex]));\n    for (let i = 0; i < this.numLines; i++) {\n      this.paths[i].datum(this.data).attr('d', getPathMap(i));\n    }\n  }\n}","import * as React from 'react';\nimport { injectIntl, InjectedIntlProps } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { StoreState } from '../../redux';\nimport { set_model_type } from '../../redux/reducers/model_reducer';\nimport { model_type_dict } from '../../models/def';\nimport './style.scss';\n\ninterface DialogProps {\n  save_and_close:Function;\n}\n\ninterface ConnectedProps extends InjectedIntlProps {\n  choose_type:typeof set_model_type;\n}\n\nclass ChooseType extends React.Component<DialogProps & ConnectedProps> {\n\n  // TODO: add icons/details\n  private get_types() {\n    return model_type_dict.map((model_type, index) => (\n      <div styleName=\"outside-wrapper\" key={model_type}\n          onClick={this.props.choose_type.bind(this, index)}>\n        <div styleName=\"inside-wrapper\">\n          <div styleName={`${model_type}-illustration`} />\n          <div styleName=\"title\">\n            {this.props.intl.formatMessage({ id: model_type })}\n          </div>\n          <div styleName=\"abstract\">\n            {this.props.intl.formatMessage({ id: `${model_type}_abstract` })}\n          </div>\n        </div>\n      </div>\n    ));\n  }\n\n  render() {\n    return <div styleName=\"dialog-wrapper\">\n      <div styleName=\"dialog-header\">\n        <div styleName=\"dialog-name\">AI 2.0</div>\n        <div styleName=\"close-btn\" onClick={ () => this.props.save_and_close(false) } />\n      </div>\n      <div styleName=\"dialog-content\">{this.get_types()}</div>\n    </div>;\n  }\n}\n\nfunction map_state_to_props(state:StoreState, props:DialogProps) {\n  return {\n  };\n}\n\nfunction map_dispatch_to_props(dispatch:Dispatch) {\n  return bindActionCreators(\n    {\n      choose_type: set_model_type,\n    },\n    dispatch);\n}\n\nexport const ChooseTypeDialog =\n  connect(map_state_to_props, map_dispatch_to_props)(injectIntl(ChooseType));","import * as React from 'react';\nimport { injectIntl, InjectedIntlProps } from 'react-intl';\nimport { connect } from 'react-redux';\n\n\nimport { ModelType, model_type_dict, TrainingStep, LastStepBeforeSaving } from '../models/def';\nimport { StoreState } from '../redux';\nimport './style.scss';\n\ninterface Props extends InjectedIntlProps {\n  current_step:TrainingStep;\n  model_type:ModelType;\n}\n\ninterface States {\n  name:string;\n}\n\ninterface OwnProps {\n  save_and_close:(save_data:boolean, last_step?:LastStepBeforeSaving) => void;\n}\n\nclass LabHeader extends React.Component<OwnProps & Props, States> {\n  constructor(props:OwnProps & Props) {\n    super(props);\n  }\n\n  private get_intl = (id:string) => this.props.intl.formatMessage({ id });\n\n  private get_step_text = (step:TrainingStep, with_arrow:boolean = false) => {\n    const text_map = {\n      [TrainingStep.EDITING_DATA]: this.props.intl.formatMessage({ id: 'ai_lab/model_type_prefix' }, { model_type: this.get_intl(model_type_dict[this.props.model_type]) }),\n      [TrainingStep.TRAINING]: this.get_intl('train'),\n      [TrainingStep.CHOOSING_DATA_SET]: this.get_intl('ai_lab/select_data_set'),\n      [TrainingStep.IMPORTING]: this.get_intl('ai_lab/edit_data_set'),\n    };\n\n    return (\n      <React.Fragment\n          key={step}\n      >\n        <div\n            styleName={this.props.current_step === step ? 'current-step' : 'other-step'}\n        >\n          {text_map[step]}\n        </div>\n        {\n          with_arrow &&\n          <div\n              styleName=\"icon_wrapper\"\n          >\n            <div\n                styleName=\"icon_arrow\"\n            >\n              <svg\n                  className=\"icon\"\n                  aria-hidden=\"true\"\n              >\n                <use xlinkHref=\"#iconicon-dropdown\" />\n              </svg>\n            </div>\n          </div>\n        }\n      </React.Fragment>\n    );\n  }\n\n  private get_steps() {\n    const {\n      EDITING_DATA,\n      TRAINING,\n      IMPORTING,\n      CHOOSING_DATA_SET,\n    } = TrainingStep;\n\n    const map:{[key in TrainingStep]:TrainingStep[]} = {\n      [EDITING_DATA]: [EDITING_DATA],\n      [TRAINING]: [EDITING_DATA, TRAINING],\n      [CHOOSING_DATA_SET]: [EDITING_DATA, CHOOSING_DATA_SET],\n      [IMPORTING]: [EDITING_DATA, CHOOSING_DATA_SET, IMPORTING],\n    };\n\n    return map[this.props.current_step].map((step:TrainingStep, index:number, arr:TrainingStep[]) => this.get_step_text(step, index !== arr.length - 1));\n  }\n\n  private handle_help_btn_click = () => {\n    window.open('https://codemao.yuque.com/books/share/165bda28-1103-48dd-a9cf-ca11b75ab2a8/cr6yy2');\n  }\n\n  private handle_close_btn_click = () => {\n    this.props.save_and_close(false, LastStepBeforeSaving.Close);\n  }\n\n  render() {\n    return (\n      <div styleName=\"header-wrapper\">\n        <div styleName=\"dialog-detail\">\n          {this.get_steps()}\n        </div>\n        <div styleName=\"btn_group\">\n          <div\n              styleName=\"btn_help\"\n              data-report-click=\"AI2-实验室帮助\"\n              onClick={this.handle_help_btn_click}\n          >\n            <svg\n                className=\"icon\"\n                aria-hidden=\"true\"\n            >\n              <use xlinkHref=\"#iconicon_bangzhu\" />\n            </svg>\n          </div>\n          <div\n              styleName=\"btn_close\"\n              onClick={this.handle_close_btn_click}\n          >\n            <svg\n                className=\"icon\"\n                aria-hidden=\"true\"\n            >\n              <use xlinkHref=\"#iconicon-delete\" />\n            </svg>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction map_state_to_props(state:StoreState, props:OwnProps) {\n  return {\n    current_step: state.main_state.current_step,\n    model_type: state.model_state.model_type,\n  };\n}\n\nexport const AILabHeader =\n  connect(map_state_to_props, {})(injectIntl((LabHeader)));\n","import * as React from 'react';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { injectIntl, InjectedIntlProps } from 'react-intl';\n\nimport { StoreState } from '../../redux';\nimport { change_model_name } from '../../redux/reducers/model_reducer';\nimport { get_validated_name } from '../../models/utils';\nimport { report_event } from '../../connected_deps';\n\nimport './style.scss';\n\ntype Props = InjectedIntlProps & ReturnType<typeof map_state_to_props> & ReturnType<typeof map_dispatch_to_props>\n\ninterface State {\n  // 组件的 state\n  name:string;\n}\n\nclass ModelName extends React.Component<Props, State> {\n  constructor(props:Props) {\n    super(props);\n\n    let default_name = props.model_name;\n    if (!default_name) {\n      default_name = props.intl.formatMessage({ id: 'untitled_model' });\n      props.change_model_name(default_name);\n    }\n    this.state = {\n      name: default_name,\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextprops:Props) {\n    if (nextprops.model_name !== this.state.name) {\n      this.setState({\n        name: nextprops.model_name,\n      });\n      this.input.value = nextprops.model_name;\n    }\n  }\n\n  private input:HTMLInputElement;\n\n  render() {\n    return (\n      <div styleName=\"model-name\">\n        <div styleName=\"prefix\">\n          {this.props.intl.formatMessage({ id: 'ai_lab/model_name_prefix' })}\n        </div>\n        <input\n            className=\"th1-bg-8 th1-border-hover-0 th1-border-impt-focus-0 th1-text-t5\"\n            maxLength={10}\n            value={this.state.name}\n            styleName=\"model-name-input\"\n            ref={(el) => {if (el) { this.input = el; }}}\n            onFocus={(e) => {\n              this.input && this.input.select();\n            }}\n            onChange={(e) => {\n              this.setState({ name: e.target.value });\n            }}\n            onKeyUp={(e:React.KeyboardEvent<HTMLInputElement>) => {\n              if (e.keyCode === 13) { (e.target as HTMLInputElement).blur(); }\n            }}\n            onBlur={(e:React.FocusEvent<HTMLInputElement>) => {\n              // 处理模型名字的过滤\n              const model_name = get_validated_name(e.target.value, this.props.model_name, []);\n\n              this.setState({\n                name: model_name,\n              });\n              this.props.change_model_name(model_name);\n              report_event('AI2-输入模型名称');\n            }}\n        />\n      </div>\n    );\n  }\n\n}\n\n\nfunction map_state_to_props(state:StoreState) {\n  return {\n    model_name: state.model_state.model_name,\n  };\n}\n\nfunction map_dispatch_to_props(dispatch:Dispatch) {\n  return bindActionCreators(\n    {\n      change_model_name,\n    },\n    dispatch,\n  );\n}\n\nexport const ModelNameComponent =\n  connect(map_state_to_props, map_dispatch_to_props)(injectIntl((ModelName)));","import * as React from 'react';\nimport { cloneDeep } from 'lodash';\nimport { connect } from 'react-redux';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { InjectedIntlProps, injectIntl } from 'react-intl';\n\nimport {\n  StoreState, set_training_status, set_feature_noticed,\n  change_data,\n  add_classification, edit_classification, del_classification,\n  add_feature, edit_feature, del_feature, reset_data_flag, swap_feature,\n  hide_hightlight,\n} from '../../../redux';\nimport { DEFAULT_DATA_LENGTH, RANGE_NUM_CLASSES, RANGE_NUM_FEATURES, MIN_DATA_LENGTH } from '../../../models/def';\nimport { get_validated_name, is_valid_number } from '../../../models/utils';\nimport { machine_learning } from '../../../controllers';\nimport { show_context_menu } from '../../../redux/reducers/contextmenu_reducer';\nimport { show_notice, show_confirm_dialog, report_event } from '../../../connected_deps';\n\nimport './style.scss';\n\ninterface TableProps extends InjectedIntlProps {\n  features:string[];\n  classifications:string[];\n  data:(number | string)[][][];\n  valid_rows:number[][];\n  symbol_index:number[][];\n  should_hightlight:boolean;\n\n  change_data:typeof change_data;\n\n  add_classification:typeof add_classification;\n  edit_classification:typeof edit_classification;\n  del_classification:typeof del_classification;\n\n  add_feature:typeof add_feature;\n  edit_feature:typeof edit_feature;\n  del_feature:typeof del_feature;\n\n  set_training_status:typeof set_training_status;\n\n  should_notice_feature_add:boolean;\n  set_feature_noticed:typeof set_feature_noticed;\n  reset_data_flag:typeof reset_data_flag;\n  show_context_menu:typeof show_context_menu;\n  swap_feature:typeof swap_feature;\n  hide_hightlight:typeof hide_hightlight;\n}\n\n// TODO avioid magic numbers\n\ninterface TableState {\n  current_tab:number;\n  current_row?:number;\n  current_column?:number;\n  tab_index_to_show_input?:number;\n  column_index_to_show_input?:number;\n  is_editing_data?:boolean;\n}\n\nclass CmTable extends React.PureComponent<TableProps, TableState> {\n  /**\n   * Note the value of data cell when focus it.\n   * Stop the training when the value changes.\n   */\n  private last_value:string | number;\n\n  /**\n   * Note the old name when changing classification or feature names.\n   * Used for checking duplication.\n   */\n  private last_name:string;\n  private name_list:string[];\n  private tab_prev_selected:boolean;\n  private tab_click_count:number;\n  private column_prev_selected:boolean;\n  private column_click_count:number;\n\n  constructor(props:TableProps) {\n    super(props);\n    this.state = {\n      current_tab: 0,\n    };\n  }\n\n  private table_el:HTMLDivElement|null;\n\n  getSnapshotBeforeUpdate(prevProps:TableProps, prevState:TableState) {\n    if (!this.table_el) {\n      return null;\n    }\n\n    return this.table_el.scrollHeight;\n  }\n\n  componentDidUpdate(prev_props:TableProps, prev_state:TableState, snapshot:number) {\n    if (!snapshot) {\n      return;\n    }\n\n    if (!this.table_el) {\n      return;\n    }\n\n    if (this.table_el.scrollHeight > snapshot) {\n      this.table_el.scrollTop = this.table_el.scrollHeight - this.table_el.clientHeight;\n    }\n  }\n\n  static getDerivedStateFromProps(next_props:TableProps, next_state:TableState):TableState|null {\n    if (!next_props.should_hightlight) {\n      return null;\n    }\n\n    const class_index = next_props.valid_rows.findIndex((valid_row) => valid_row.length < MIN_DATA_LENGTH);\n    if (class_index === -1) {\n      return null;\n    }\n\n    if (!next_state.is_editing_data) {\n      return {\n        current_tab: class_index,\n      };\n    }\n\n    return null;\n  }\n\n\n  private get_intl = (id:string) => this.props.intl.formatMessage({ id });\n\n  private stop_training_and_force_reset = () => {\n    machine_learning.stop();\n    this.props.set_training_status('wait_start');\n    this.props.reset_data_flag();\n  }\n\n  private handle_row_del = (index_data_row:number) => {\n    this.props.hide_hightlight();\n    const data = cloneDeep(this.props.data);\n    if (data[this.state.current_tab].length <= MIN_DATA_LENGTH) { return; }\n    this.stop_training_and_force_reset();\n\n    data[this.state.current_tab].splice(index_data_row, 1);\n    this.props.change_data(data);\n    this.setState({ current_row: undefined });\n  }\n\n  private handle_row_add = () => {\n    this.props.hide_hightlight();\n    this.stop_training_and_force_reset();\n\n    const data = cloneDeep(this.props.data);\n    const empty_row = new Array(this.props.features.length).fill('');\n    data[this.state.current_tab].push(empty_row);\n    this.props.change_data(data);\n  }\n\n  private handle_data_edit = (row_index:number, feature_index:number, new_data:number | string) => {\n    const data = cloneDeep(this.props.data);\n    data[this.state.current_tab][row_index][feature_index] = new_data;\n    this.props.change_data(data);\n  }\n\n  private is_classification_reached_maxium = () => this.props.classifications.length >= RANGE_NUM_CLASSES[1];\n\n  private handle_classification_add = () => {\n    if (this.is_classification_reached_maxium()) {\n      show_notice({\n        id: 'ai_lab/at_most_4_classificaitons',\n      });\n      return;\n    }\n\n    this.props.hide_hightlight();\n    this.stop_training_and_force_reset();\n    const new_tab = this.props.classifications.length;\n    const data = cloneDeep(this.props.data);\n\n    let i = DEFAULT_DATA_LENGTH;\n    const training_data = [];\n    while (i-- > 0) {\n      training_data.push(new Array(this.props.features.length).fill(''));\n    }\n    data.push(training_data);\n\n    this.props.change_data(data);\n    this.props.add_classification();\n\n    // Navigate to the newestclassification\n    this.setState({ current_tab: new_tab });\n  }\n\n  private handle_classsification_del = (class_index:number, e:Event) => {\n    e.stopPropagation();\n    if (this.props.classifications.length <= RANGE_NUM_CLASSES[0]) { return; }\n\n    const callback = () => {\n      this.props.hide_hightlight();\n      this.stop_training_and_force_reset();\n      const data = cloneDeep(this.props.data);\n      data.splice(class_index, 1);\n\n      const update_data = () => {\n        this.props.del_classification(class_index);\n        this.props.change_data(data);\n      };\n      let { current_tab } = this.state;\n      if (current_tab >= class_index) {\n        // 如果删除的 tab index 小于当前 tab index ，将当前 tab index - 1\n        current_tab = current_tab > class_index ? current_tab - 1 : 0;\n        this.setState(\n          { current_tab },\n          update_data,\n        );\n        return;\n      }\n      update_data();\n    };\n\n    show_confirm_dialog(\n      callback,\n      this.props.intl.formatMessage({ id: 'ai_lab/delete_classification' }, { classification: this.props.classifications[class_index] }),\n      this.props.intl.formatMessage({ id: 'ai_lab/delete_classification_content' }), { text: 'delete', type: 'danger' }, 'cancel');\n  }\n\n  // TODO error handling\n  private handle_classification_name_edit = (class_index:number, new_name:string) => {\n    this.props.edit_classification(class_index, new_name);\n  }\n\n  private handle_classification_name_validation = (class_index:number, new_name:string) => {\n    const validated_name = get_validated_name(new_name, this.last_name, this.name_list);\n    this.handle_classification_name_edit(class_index, validated_name);\n  }\n\n  private is_feature_reached_maxium = () => this.props.features.length >= RANGE_NUM_FEATURES[1];\n\n  // TODO add notice & maybe add '' to end of data?\n  private handle_feature_add = () => {\n    if (this.is_feature_reached_maxium()) {\n      show_notice({\n        id: 'ai_lab/at_most_4_features',\n      });\n      return;\n    }\n\n    this.props.hide_hightlight();\n    this.props.add_feature();\n\n    // 添加一列数据\n    const data = cloneDeep(this.props.data);\n    const data_c = data\n      .map((classification) =>\n        classification.map((data_row) =>\n          data_row.concat(new Array(1).fill(''))));\n    this.props.change_data(data_c);\n\n    this.stop_training_and_force_reset();\n    if (this.props.should_notice_feature_add) {\n      show_notice({\n        id: 'new_feature_notice',\n      });\n      this.props.set_feature_noticed();\n    }\n  }\n\n  private handle_feature_name_edit = (feature_index:number, new_name:string) => {\n    this.props.edit_feature(feature_index, new_name);\n  }\n\n  private handle_feature_name_validation = (feature_index:number, new_name:string) => {\n    const validated_name = get_validated_name(new_name, this.last_name, this.name_list);\n    this.handle_feature_name_edit(feature_index, validated_name);\n  }\n\n  private handle_feature_del = (feature_index:number) => {\n    if (this.props.features.length <= RANGE_NUM_FEATURES[0]) {\n      return;\n    }\n    const callback = () => {\n      this.props.hide_hightlight();\n      const data = cloneDeep(this.props.data).map((classification) => classification.map((data_row) => {\n        data_row.splice(feature_index, 1);\n        return data_row;\n      }));\n      this.props.del_feature(feature_index);\n      this.props.change_data(data);\n      this.stop_training_and_force_reset();\n    };\n\n    show_confirm_dialog(\n      callback,\n      this.props.intl.formatMessage({ id: 'ai_lab/delete_feature' }, { feature: this.props.features[feature_index] }),\n      this.props.intl.formatMessage({ id: 'ai_lab/delete_feature_content' }),\n      { text: 'delete', type: 'danger' }, 'cancel');\n  }\n\n  private handle_feature_swap = (idx1:number, idx2:number) => {\n    const data = cloneDeep(this.props.data).map((classification) => classification.map((data_row) => {\n      const idx2_value = data_row[idx2];\n      data_row[idx2] = data_row[idx1];\n      data_row[idx1] = idx2_value;\n      return data_row;\n    }));\n    this.props.swap_feature(idx1, idx2);\n    this.props.change_data(data);\n    this.stop_training_and_force_reset();\n  }\n\n  private handle_tab_mouse_up = (index:number, e:React.MouseEvent<HTMLDivElement>) => {\n    if(e.button === 2){\n      return;\n    }\n    this.tab_click_count += 1;\n    setTimeout(() => {\n      if (this.tab_click_count === 1) {\n        if (this.tab_prev_selected && this.state.current_tab === index) {\n          this.setState({ tab_index_to_show_input: index });\n        }\n      }\n      this.tab_click_count = 0;\n    }, 300);\n  }\n\n  private get_class_tabs = () => {\n    const tabs:any[] = [];\n    const can_delete_classification = this.props.classifications.length > RANGE_NUM_CLASSES[0];\n    this.props.classifications.forEach((class_name, index) => {\n      tabs.push(\n        <div\n            key={index}\n            styleName={index === this.state.current_tab ? 'tab-chosen' : 'tab'}\n            className={`${index === this.state.current_tab ? 'th1-bg-0 th1-text-10 th1-text-s1 ' : 'th1-bg-6 th1-bg-hover-4 th1-bg-active-3 th1-bg-selected-3 th1-text-0 th1-text-s1 '}`}\n            onClick={() => {\n              this.tab_prev_selected = this.state.current_tab === index ? true : false;\n              this.props.hide_hightlight();\n              this.setState({ current_tab: index });\n            }}\n            onMouseUp={this.handle_tab_mouse_up.bind(this, index)}\n            onContextMenu={ (e) => {\n              e.preventDefault();\n\n              this.setState({\n                current_tab: index,\n              });\n\n              const { pageX, pageY } = e;\n              this.props.show_context_menu({\n                x: pageX,\n                y: pageY,\n                menu_items: [\n                  {\n                    text: 'ai_lab/rename',\n                    cb: () => {\n                      this.setState({\n                        tab_index_to_show_input: index,\n                      });\n                    },\n                  },\n                ],\n              });\n            }}\n        >\n          <div styleName=\"classification-name\">\n            {class_name}\n            {\n              this.state.tab_index_to_show_input === index &&\n              <input\n                  type=\"text\"\n                  styleName=\"classification-name input-editing\"\n                  value={class_name}\n                  className={`${index === this.state.current_tab ? 'th1-bg-0' : 'th1-bg-6'} th1-selected-6 ${index === this.state.current_tab ? 'th1-text-10 th1-text-s1 ' : 'th1-text-0 th1-text-s1 '}`}\n                  autoFocus\n                  maxLength={10}\n                  onChange={(e) => { this.handle_classification_name_edit(index, e.target.value); }}\n                  onFocus={(e) => {\n                    e.target.select();\n                    this.last_name = class_name;\n                    this.name_list = cloneDeep(this.props.classifications);\n                  }}\n                  onBlur={(e) => {\n                    this.handle_classification_name_validation(index, e.target.value);\n                    this.setState({ tab_index_to_show_input: undefined });\n                  }} />\n            }\n          </div>\n          {\n            can_delete_classification &&\n            <div\n                styleName=\"btn-del-class\"\n                data-report-click=\"AI2-删除特征\"\n                onClick={this.handle_classsification_del.bind(this, index)}\n            >\n              <svg\n                  className=\"icon\"\n                  aria-hidden=\"true\"\n              >\n                <use xlinkHref=\"#iconicon-delete\" />\n              </svg>\n            </div>\n          }\n        </div>);\n    });\n\n    tabs.push(\n      <div\n          key=\"add\"\n          styleName=\"add_btn_container\"\n      >\n        <div\n            styleName=\"add_classification\"\n            onClick={this.handle_classification_add}\n            data-report-click=\"AI2-添加分类\"\n            className={\n              this.is_classification_reached_maxium() ?\n                'th1-text-t3' :\n                'th1-text-0 th1-text-s2'\n            }\n        >\n          <div styleName=\"icon\">\n            <svg\n                className=\"icon\"\n                aria-hidden=\"true\"\n            >\n              <use xlinkHref=\"#iconicon_add\" />\n            </svg>\n          </div>\n          <div styleName=\"text\">{this.get_intl('classification')}</div>\n        </div>\n        <div\n            styleName=\"split\"\n            className=\"th1-bg-6\"\n        />\n        <div\n            styleName=\"add_feature\"\n            onClick={this.handle_feature_add}\n            data-report-click=\"AI2-添加特征\"\n            className={\n              this.is_feature_reached_maxium() ?\n                'th1-text-t3' :\n                'th1-text-0 th1-text-s2'\n            }\n        >\n          <div styleName=\"icon\">\n            <svg\n                className=\"icon\"\n                aria-hidden=\"true\"\n            >\n              <use xlinkHref=\"#iconicon_add\" />\n            </svg>\n          </div>\n          <div styleName=\"text\">{this.get_intl('feature')}</div>\n        </div>\n      </div>,\n    );\n\n    return (\n      <div\n          styleName=\"tabs-container\"\n          className=\"th1-bg-9\"\n      >\n        {tabs}\n      </div>\n    );\n  }\n\n  private handle_column_mouse_up = (index:number, e:React.MouseEvent<HTMLDivElement>) => {\n    if(e.button === 2){\n      return;\n    }\n    this.column_click_count += 1;\n    setTimeout(() => {\n      if (this.column_click_count === 1) {\n        if (this.column_prev_selected && this.state.current_column === index) {\n          this.setState({ column_index_to_show_input: index });\n        }\n      }\n      this.column_click_count = 0;\n    }, 300);\n  }\n\n  private get_table_header = () => {\n    const can_delete_feature = this.props.features.length > RANGE_NUM_FEATURES[0];\n    return (\n      <thead\n          styleName=\"table-head\"\n          className=\"th1-bg-0\"\n      >\n        <tr styleName={this.state.current_row === 0 ? 'header-r' : 'header-r'}>\n          <th\n              styleName=\"index-column\"\n              className=\"th1-text-10 th1-text-s1\"\n          >\n            #\n          </th>\n          {this.props.features.map((feature, index) => {\n            let column_style = '';\n            if (this.state.current_column !== undefined) {\n              if (index === this.state.current_column) {\n                column_style = 'chosen-column-header';\n              }\n              if (index === (this.state.current_column + 1)) {\n                column_style = 'after-chosen-column';\n              }\n            }\n            return (\n              <th\n                  key={index}\n                  styleName={`table-header ${column_style}`}\n                  tabIndex={-1}\n                  onClick={(e) => {\n                    this.column_prev_selected = this.state.current_column === index ? true : false;\n                    if (e.target instanceof HTMLInputElement) { return; }\n                    this.setState({ current_row: undefined, current_column: index });\n                  }}\n                  onBlur={() => { this.setState({ current_column: undefined }); }}\n                  onMouseUp={this.handle_column_mouse_up.bind(this, index)}\n                  onContextMenu={(e) => {\n                    e.preventDefault();\n\n                    this.setState({ current_row: undefined, current_column: index });\n\n                    const { pageX, pageY } = e;\n                    this.props.show_context_menu({\n                      x: pageX,\n                      y: pageY,\n                      menu_items: [\n                        {\n                          text: 'ai_lab/move_to_left',\n                          cb: () => {\n                            this.handle_feature_swap(index, index - 1);\n                          },\n                          disabled: index === 0,\n                        },\n                        {\n                          text: 'ai_lab/move_to_right',\n                          cb: () => {\n                            this.handle_feature_swap(index, index + 1);\n                          },\n                          disabled: index === this.props.features.length - 1,\n                        },\n                        {\n                          text: 'ai_lab/rename',\n                          cb: () => {\n                            this.setState({\n                              column_index_to_show_input: index,\n                            });\n                          },\n                        },\n                      ],\n                    });\n                  }}\n              >\n                <div styleName=\"feature_name_container\">\n                  <div\n                      styleName=\"feature-name\"\n                      className=\"th1-text-10 th1-text-s1 th1-bg-0\"\n                  >\n                    {feature}\n                    {\n                      this.state.column_index_to_show_input === index &&\n                      <input\n                          type=\"text\"\n                          styleName=\"feature-name input-editing\"\n                          value={feature}\n                          autoFocus\n                          className={'th1-bg-0 th1-selected-6 th1-text-10 th1-text-s1'}\n                          maxLength={10}\n                          onChange={(e) => { this.handle_feature_name_edit(index, e.target.value); }}\n                          onFocus={(e) => {\n                            e.target.select();\n                            this.last_name = feature;\n                            this.name_list = cloneDeep(this.props.features);\n                          }}\n                          onBlur={(e) => {\n                            report_event('AI2-修改特征名称');\n                            this.handle_feature_name_validation(index, e.target.value);\n                            this.setState({ column_index_to_show_input: undefined });\n                          }}\n                      />\n                    }\n                  </div>\n                </div>\n                {\n                  can_delete_feature &&\n                  <div\n                      styleName=\"btn-del-feature\"\n                      className=\"th1-text-10 th1-text-s1\"\n                      data-report-click=\"AI2-删除特征\"\n                      onClick={this.handle_feature_del.bind(this, index)}\n                  >\n                    <svg\n                        className=\"icon\"\n                        aria-hidden=\"true\"\n                    >\n                      <use xlinkHref=\"#iconicon-delete\" />\n                    </svg>\n                  </div>\n                }\n              </th>\n            );\n          })}\n        </tr>\n      </thead>\n    );\n  }\n\n  private get_data_row = (data_row:(string | number)[], row_index:number) => {\n    const row_style = row_index === this.state.current_row ? 'chosen-row' :\n      this.state.current_row && row_index === this.state.current_row - 1 ? 'before-chosen-row' : '';\n    const new_index = this.props.symbol_index[this.state.current_tab];\n    const can_delete_data_row = this.props.data[this.state.current_tab].length > MIN_DATA_LENGTH;\n    // 用户在kitten添加的新数据（行数大于new_index[0]且小于new_index[1]的用特殊样式new-index-cell）\n    const index_cell_style = row_index >= new_index[0] && row_index <= new_index[1] ? 'new-index-cell' : 'index-cell';\n    return (\n      <tr\n          key={row_index}\n          styleName={row_style}\n      >\n        <td\n            tabIndex={-1}\n            onClick={() => { this.setState({ current_row: row_index, current_column: undefined }); }}\n            onBlur={() => { this.setState({ current_row: undefined }); }}\n            styleName={index_cell_style}\n            className=\"th1-bg-7\"\n        >\n          {row_index + 1}\n          {\n            can_delete_data_row &&\n            <div\n                styleName=\"btn-del-row\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  this.handle_row_del(row_index);\n                }}\n                data-report-click=\"AI2-删除数据行\"\n            >\n              <svg\n                  className=\"icon\"\n                  aria-hidden=\"true\"\n              >\n                <use xlinkHref=\"#iconicon-delete\" />\n              </svg>\n            </div>\n          }\n        </td>\n        {this.props.features.map((feature, index) => {\n          let column_style = '';\n          if (this.state.current_column !== undefined) {\n            if (index === this.state.current_column) {\n              column_style = 'chosen-column';\n            }\n            if (index === this.state.current_column + 1) {\n              column_style = 'after-chosen-column';\n            }\n            if (index === this.state.current_column &&\n              row_index === this.props.data[this.state.current_tab].length - 1) {\n              column_style += '-bottom';\n            }\n          }\n\n          const bg_class_name =\n            row_index % 2 !== 0 ?\n              index === RANGE_NUM_FEATURES[1] - 1 ? 'th1-bg-9' : 'th1-bg-9' : 'th1-bg-8';\n\n          return (\n            <td\n                key={index}\n                styleName={`${column_style} ${this.props.should_hightlight && data_row[index] === '' && row_index < MIN_DATA_LENGTH ? 'hightlight' : ''}`}\n                className={`${bg_class_name}`}\n            >\n              <input\n                  type=\"text\"\n                  value={typeof data_row[index] === 'string' || typeof data_row[index] === 'number' ? data_row[index] : ''}\n                  onFocusCapture={(e) => {\n                  // Check if user edit the column for the first time\n                    if (localStorage.getItem('ai-lab-data-column-first-edit')) {\n                      return;\n                    }\n\n                    localStorage.setItem('ai-lab-data-column-first-edit', 'true');\n                    show_notice({\n                      id: 'input_can_only_be_number',\n                    });\n                  }}\n                  onChange={(e:React.ChangeEvent<HTMLInputElement>) => {\n                  // Prevent the non-minus, non-number and non-dot chars being input\n                    const new_val = e.target.value.replace(/[^\\-\\d.]/g, '');\n                    this.handle_data_edit(row_index, index, new_val);\n                  }}\n                  onFocus={(e) => {\n                    this.last_value = e.target.value;\n                    this.setState({\n                      is_editing_data: true,\n                    });\n                  }}\n                  onBlur={(e) => {\n                    this.setState({\n                      is_editing_data: false,\n                    });\n\n                    let val;\n                    if (is_valid_number(e.target.value)) {\n                      val = String(parseFloat(e.target.value));\n                    } else {\n                      val = this.last_value;\n                    }\n\n                    let new_val:''|number = parseFloat(val as string);\n                    new_val = isNaN(new_val) ? '' : new_val;\n\n                    this.handle_data_edit(row_index, index, new_val);\n                    this.stop_training_and_force_reset();\n                  }} />\n            </td>\n          );\n        })}\n      </tr>\n    );\n  }\n\n  private get_table_content = () => {\n    if (this.state.current_tab > this.props.data.length - 1) {\n      return [];\n    }\n\n    const content = this.props.data[this.state.current_tab].map(this.get_data_row);\n    while (content.length < MIN_DATA_LENGTH) {\n      const empty_row = new Array(this.props.features.length).fill('');\n      content.push(this.get_data_row(empty_row, content.length));\n    }\n    return content;\n  }\n\n  private handle_keydown = (e:KeyboardEvent) => {\n    if (e.keyCode !== 8 && e.keyCode !== 46) { // keycode of backspace and del\n      return;\n    }\n    // Do not trigger delete event when editing text or data\n    if (document.activeElement instanceof HTMLInputElement) {\n      return;\n    }\n    if (typeof this.state.current_column === 'number') {\n      this.handle_feature_del(this.state.current_column);\n    } else if (typeof this.state.current_row === 'number') {\n      this.handle_row_del(this.state.current_row);\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handle_keydown);\n  }\n\n  componentWillUnmount() {\n    window.addEventListener('keydown', this.handle_keydown);\n  }\n\n  render() {\n    if (this.props.data.length < 1) { return null; }\n    return (\n      <div\n          styleName=\"table-container\"\n          onKeyUpCapture={(e) => {\n            if (e.keyCode !== 13) { return; }\n            const current_focus = document.activeElement as HTMLElement;\n            if (!current_focus) { return; }\n            current_focus.blur();\n          }}\n          onClickCapture={(e) => { if (e.target instanceof HTMLInputElement) { e.stopPropagation(); } }}>\n        {this.get_class_tabs()}\n        <div\n            styleName=\"table-content\"\n            style={this.state.current_tab === 0 ? undefined : { borderRadius: '4px' }}\n        >\n          <div styleName=\"thead-wrapper\">\n            <div\n                styleName=\"table_inner_wrapper\"\n                className=\"th1-bg-0\"\n            >\n              <table styleName=\"table\">\n                {this.get_table_header()}\n              </table>\n            </div>\n          </div>\n          <div\n              styleName=\"table-body\"\n              ref={(ref) => {\n                this.table_el = ref;\n              }}\n          >\n            <div\n                styleName=\"table_inner_wrapper\"\n                className=\"th1-bg-7\"\n            >\n              <table styleName=\"table\">\n                <tbody>{this.get_table_content()}</tbody>\n              </table>\n            </div>\n          </div>\n          <div styleName=\"add_row_btn_container\">\n            <div\n                styleName=\"btn-add-row\"\n                className=\"th1-text-0 th1-text-s2 th1-bg-6 th1-bg-hover-4 th1-bg-active-3 th1-bg-selected-3\"\n                data-report-click=\"AI2-添加数据行\"\n                onClick={this.handle_row_add}\n            >\n              <svg\n                  className=\"icon\"\n                  aria-hidden=\"true\"\n              >\n                <use xlinkHref=\"#iconicon_add\" />\n              </svg>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction map_state_to_props(state:StoreState) {\n  return {\n    features: state.model_state.features,\n    classifications: state.model_state.classifications,\n    data: state.data_state.data,\n    valid_rows: state.data_state.valid_rows,\n    symbol_index: state.data_state.symbol_index,\n    should_hightlight: state.data_state.should_hightlight,\n    should_notice_feature_add: state.main_state.should_show_feature_add_notice,\n  };\n}\n\nfunction map_dispatch_to_props(dispatch:Dispatch) {\n  return bindActionCreators(\n    {\n      change_data,\n      add_classification,\n      edit_classification,\n      del_classification,\n      add_feature,\n      edit_feature,\n      del_feature,\n      set_training_status,\n      set_feature_noticed,\n      reset_data_flag,\n      show_context_menu,\n      swap_feature,\n      hide_hightlight,\n    },\n    dispatch);\n}\n\nexport const CmTableComponent =\n  (connect(map_state_to_props, map_dispatch_to_props)(injectIntl((CmTable))));\n","import * as React from 'react';\nimport { injectIntl, InjectedIntlProps } from 'react-intl';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { connect } from 'react-redux';\n\nimport {\n  StoreState,\n  choose_step,\n  choose_data_set,\n  show_hightlight,\n  hide_hightlight,\n} from '../../redux';\nimport { TrainingStep, MIN_DATA_LENGTH, LastStepBeforeSaving } from '../../models/def';\nimport { ModelNameComponent } from '../model_name';\nimport { show_notice, report_event } from '../../connected_deps';\nimport { CmTableComponent } from './table';\n\nimport './style.scss';\n\ninterface OwnProps {\n  save_and_close:(save_data:boolean, last_step?:LastStepBeforeSaving) => void;\n}\n\nconst acceptable_file_types = [\n  '.csv',\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  'application/vnd.ms-excel',\n  '.xlsx',\n  '.xls',\n];\n\ntype Props = InjectedIntlProps & OwnProps & ReturnType<typeof map_dispatch_to_props> & ReturnType<typeof map_state_to_props>;\n\ninterface State {\n  should_show_hint:boolean;\n}\n\nclass EditData extends React.PureComponent<\n  Props,\n  State\n> {\n  /**\n   * Reset training parameters when click go to training button.\n   * If no training has been started at this time of use, refresh the heatmap immediately while changing training parameters.\n   * Otherwise refresh when start new train.\n   */\n  constructor(props:Props) {\n    super(props);\n\n    this.state = {\n      should_show_hint: false,\n    };\n  }\n\n  private file_el:HTMLInputElement|null;\n\n  private go_to_training = (is_data_valid:boolean) => {\n    if (is_data_valid) {\n      report_event('AI2-训练');\n      this.props.hide_hightlight();\n      this.props.choose_step(TrainingStep.TRAINING);\n      return;\n    }\n\n    this.props.show_hightlight();\n  }\n\n  private render_add_dataset = () => (\n    <div\n        styleName=\"import-option\"\n        className=\"th1-text-0 th1-text-s2\"\n        data-report-click=\"AI2-添加数据集\"\n        onClick={this.props.choose_step.bind(this, TrainingStep.CHOOSING_DATA_SET)}\n    >\n      {this.props.intl.formatMessage({ id: 'add_data_set' })}\n    </div>\n  )\n\n  private handle_file_change = (e:React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files && e.target.files[0];\n    if (!file) { return; }\n\n    const file_extension = file.name.substring(file.name.lastIndexOf('.'));\n    if (acceptable_file_types.some(\n      (type) => (\n        file.type === '' ?\n          type.includes(file_extension) :\n          Boolean(file.type.match(type))\n      ),\n    )) {\n      this.props.choose_data_set(file);\n      this.props.choose_step(TrainingStep.IMPORTING);\n      return;\n    }\n\n    show_notice({\n      id: 'upload_error',\n      type: 'error',\n    });\n  }\n\n  private render_import_data = () => (\n    <div\n        styleName=\"import-option\"\n        className=\"th1-text-0 th1-text-s2\"\n        onClick={() => {\n          this.file_el && this.file_el.click();\n        }}\n        data-report-click=\"AI2-导入数据\"\n    >\n      <input\n          type=\"file\"\n          styleName=\"upload-input\"\n          accept={acceptable_file_types.join(', ')}\n          onChange={this.handle_file_change}\n          ref={(ref) => {\n            this.file_el = ref;\n          }}\n      />\n      {this.props.intl.formatMessage({ id: 'import_data' })}\n    </div>\n  )\n\n  private render_footer = () => {\n    const is_data_valid = this.props.valid_rows.every((valid_row) => valid_row.length >= MIN_DATA_LENGTH);\n\n    return (\n      <div styleName=\"content-footer\">\n        <div styleName=\"tips\">\n          {this.props.intl.formatMessage({ id: 'edit_data_tips' })}\n        </div>\n        <div styleName=\"btn-group\">\n          <ModelNameComponent />\n          <div\n              styleName=\"btn-normal left\"\n              className=\"th1-text-0 th1-text-s2 th1-border-impt-1 th1-text-hover-10 th1-bg-hover-0 th1-border-hover-0 th1-bg-active-m2 th1-border-active-m2 th1-text-active-10\"\n              data-report-click=\"AI2-保存并退出\"\n              onClick={() => { this.props.save_and_close(true, LastStepBeforeSaving.SaveInTheDataEditPage); }}\n          >\n            {this.props.intl.formatMessage({ id: 'ai_lab/save_and_exit' })}\n          </div>\n          <div\n              styleName={`training_btn ${is_data_valid ? 'btn-positive' : 'btn-negative'}`}\n              className={is_data_valid ? 'th1-bg-0 th1-bg-hover-m1 th1-bg-active-m2 th1-text-10' : ''}\n              onClick={this.go_to_training.bind(this, is_data_valid)}\n              onMouseEnter={() => {\n                if (is_data_valid) {\n                  return;\n                }\n\n                this.setState({\n                  should_show_hint: true,\n                });\n              }}\n              onMouseLeave={() => {\n                if (is_data_valid) {\n                  return;\n                }\n\n                this.setState({\n                  should_show_hint: false,\n                });\n              }}\n          >\n            {this.props.intl.formatMessage({ id: 'train' })}\n            {\n              !is_data_valid &&\n              <div\n                  styleName=\"disable_hint\"\n              >\n                <svg\n                    className=\"icon\"\n                    aria-hidden=\"true\"\n                >\n                  <use xlinkHref=\"#iconicon_jinggao\" />\n                </svg>\n              </div>\n            }\n            {\n              this.state.should_show_hint &&\n              <div styleName=\"hint_label\">\n                {this.props.intl.formatMessage({ id: 'data_insufficient_notice' })}\n              </div>\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div styleName=\"editing-wrapper\">\n        <div styleName=\"import-data-wrapper\">\n          {this.render_add_dataset()}\n          {this.render_import_data()}\n        </div>\n        <CmTableComponent />\n        {this.render_footer()}\n      </div>\n    );\n  }\n}\n\nfunction map_state_to_props(state:StoreState, own_props:OwnProps) {\n  return {\n    model_name: state.model_state.model_name,\n    valid_rows: state.data_state.valid_rows,\n  };\n}\n\nfunction map_dispatch_to_props(dispatch:Dispatch) {\n  return bindActionCreators(\n    {\n      choose_step,\n      choose_data_set,\n      show_hightlight,\n      hide_hightlight,\n    },\n    dispatch);\n}\n\nexport const EditDataComponent =\n  connect(map_state_to_props, map_dispatch_to_props)(injectIntl((EditData)));\n","let cdn_path = './';\n\nexport function get_path() {\n  return cdn_path;\n}\n\nexport function set_path(p:string) {\n  cdn_path = p;\n}\n","import { intl } from '../../i18n';\nimport { DataSet } from '../../models/def';\nimport { get_path } from '../../cfg';\n\nexport const get_up_down = () => [\n  ['15.55', '2.55', intl().formatMessage({ id: 'blue_point' })],\n  ['10.05', '2.85', intl().formatMessage({ id: 'blue_point' })],\n  ['34.55', '3.2', intl().formatMessage({ id: 'blue_point' })],\n  ['17.3', '3.8', intl().formatMessage({ id: 'blue_point' })],\n  ['19.2', '5.2', intl().formatMessage({ id: 'blue_point' })],\n  ['40.05', '5.25', intl().formatMessage({ id: 'blue_point' })],\n  ['42.75', '5.65', intl().formatMessage({ id: 'blue_point' })],\n  ['5.15', '7.65', intl().formatMessage({ id: 'blue_point' })],\n  ['37.8', '7.7', intl().formatMessage({ id: 'blue_point' })],\n  ['11.15', '7.8', intl().formatMessage({ id: 'blue_point' })],\n  ['34.3', '7.95', intl().formatMessage({ id: 'blue_point' })],\n  ['30.4', '8.05', intl().formatMessage({ id: 'blue_point' })],\n  ['17.4', '8.6', intl().formatMessage({ id: 'blue_point' })],\n  ['5.3', '9.35', intl().formatMessage({ id: 'blue_point' })],\n  ['43.2', '10.2', intl().formatMessage({ id: 'blue_point' })],\n  ['20.85', '10.35', intl().formatMessage({ id: 'blue_point' })],\n  ['34.85', '10.85', intl().formatMessage({ id: 'blue_point' })],\n  ['17.75', '10.9', intl().formatMessage({ id: 'blue_point' })],\n  ['29.05', '11.45', intl().formatMessage({ id: 'blue_point' })],\n  ['40.85', '11.6', intl().formatMessage({ id: 'blue_point' })],\n  ['10.75', '14.1', intl().formatMessage({ id: 'red_point' })],\n  ['20.95', '14.15', intl().formatMessage({ id: 'red_point' })],\n  ['18.25', '15.1', intl().formatMessage({ id: 'red_point' })],\n  ['34.8', '15.25', intl().formatMessage({ id: 'red_point' })],\n  ['12.9', '15.6', intl().formatMessage({ id: 'red_point' })],\n  ['38.3', '15.75', intl().formatMessage({ id: 'red_point' })],\n  ['45.05', '16', intl().formatMessage({ id: 'red_point' })],\n  ['6.1', '16.5', intl().formatMessage({ id: 'red_point' })],\n  ['28.55', '16.75', intl().formatMessage({ id: 'red_point' })],\n  ['32', '17.3', intl().formatMessage({ id: 'red_point' })],\n  ['17.25', '17.95', intl().formatMessage({ id: 'red_point' })],\n  ['8.6', '18.3', intl().formatMessage({ id: 'red_point' })],\n  ['20.85', '18.95', intl().formatMessage({ id: 'red_point' })],\n  ['44.3', '19.15', intl().formatMessage({ id: 'red_point' })],\n  ['26.6', '19.45', intl().formatMessage({ id: 'red_point' })],\n  ['29.8', '20.8', intl().formatMessage({ id: 'red_point' })],\n  ['17.1', '21.1', intl().formatMessage({ id: 'red_point' })],\n  ['33.7', '21.9', intl().formatMessage({ id: 'red_point' })],\n  ['10.55', '21.95', intl().formatMessage({ id: 'red_point' })],\n  ['6.15', '23.05', intl().formatMessage({ id: 'red_point' })],\n];\n\nexport const get_rotation = () => [\n  ['25.1', '13.15', intl().formatMessage({ id: 'blue_point' })],\n  ['25.55', '14.7', intl().formatMessage({ id: 'blue_point' })],\n  ['25.2', '16.25', intl().formatMessage({ id: 'blue_point' })],\n  ['23.15', '16.3', intl().formatMessage({ id: 'blue_point' })],\n  ['20.4', '16.3', intl().formatMessage({ id: 'blue_point' })],\n  ['18.25', '16.2', intl().formatMessage({ id: 'blue_point' })],\n  ['17.05', '15.9', intl().formatMessage({ id: 'blue_point' })],\n  ['16', '15.4', intl().formatMessage({ id: 'blue_point' })],\n  ['14.35', '14.8', intl().formatMessage({ id: 'blue_point' })],\n  ['13.3', '13.6', intl().formatMessage({ id: 'blue_point' })],\n  ['12.6', '12.6', intl().formatMessage({ id: 'blue_point' })],\n  ['12.3', '10.05', intl().formatMessage({ id: 'blue_point' })],\n  ['12.1', '8.05', intl().formatMessage({ id: 'blue_point' })],\n  ['12', '6.15', intl().formatMessage({ id: 'blue_point' })],\n  ['13.5', '4.75', intl().formatMessage({ id: 'blue_point' })],\n  ['15.1', '3.7', intl().formatMessage({ id: 'blue_point' })],\n  ['16.2', '3.1', intl().formatMessage({ id: 'blue_point' })],\n  ['19.75', '1.65', intl().formatMessage({ id: 'blue_point' })],\n  ['22.1', '1.6', intl().formatMessage({ id: 'blue_point' })],\n  ['24.1', '1.45', intl().formatMessage({ id: 'blue_point' })],\n  ['25.6', '1.25', intl().formatMessage({ id: 'blue_point' })],\n  ['28.55', '1.25', intl().formatMessage({ id: 'blue_point' })],\n  ['29.95', '1.4', intl().formatMessage({ id: 'blue_point' })],\n  ['31.9', '1.4', intl().formatMessage({ id: 'blue_point' })],\n  ['34.2', '1.5', intl().formatMessage({ id: 'blue_point' })],\n  ['35.65', '2.9', intl().formatMessage({ id: 'blue_point' })],\n  ['37.15', '3.95', intl().formatMessage({ id: 'blue_point' })],\n  ['17.65', '2.05', intl().formatMessage({ id: 'blue_point' })],\n  ['11.05', '3', intl().formatMessage({ id: 'blue_point' })],\n  ['9.15', '5.45', intl().formatMessage({ id: 'blue_point' })],\n  ['9.15', '7.6', intl().formatMessage({ id: 'blue_point' })],\n  ['9.15', '10.8', intl().formatMessage({ id: 'blue_point' })],\n  ['10', '13.1', intl().formatMessage({ id: 'blue_point' })],\n  ['11.4', '14.9', intl().formatMessage({ id: 'blue_point' })],\n  ['12.65', '15.8', intl().formatMessage({ id: 'blue_point' })],\n  ['13.35', '1.8', intl().formatMessage({ id: 'blue_point' })],\n  ['16.35', '1.25', intl().formatMessage({ id: 'blue_point' })],\n  ['21.95', '0.55', intl().formatMessage({ id: 'blue_point' })],\n  ['32.3', '0.45', intl().formatMessage({ id: 'blue_point' })],\n  ['16.3', '17.55', intl().formatMessage({ id: 'blue_point' })],\n  ['20.4', '17.7', intl().formatMessage({ id: 'blue_point' })],\n  ['24.3', '18.35', intl().formatMessage({ id: 'blue_point' })],\n  ['22.65', '14.05', intl().formatMessage({ id: 'blue_point' })],\n  ['21.65', '11.8', intl().formatMessage({ id: 'red_point' })],\n  ['23.6', '11.25', intl().formatMessage({ id: 'red_point' })],\n  ['21.7', '10.25', intl().formatMessage({ id: 'red_point' })],\n  ['24.6', '9.45', intl().formatMessage({ id: 'red_point' })],\n  ['22', '8.6', intl().formatMessage({ id: 'red_point' })],\n  ['22.7', '7', intl().formatMessage({ id: 'red_point' })],\n  ['23.85', '5.55', intl().formatMessage({ id: 'red_point' })],\n  ['27.95', '5.95', intl().formatMessage({ id: 'red_point' })],\n  ['31', '6.95', intl().formatMessage({ id: 'red_point' })],\n  ['33.7', '8.55', intl().formatMessage({ id: 'red_point' })],\n  ['35.8', '10.75', intl().formatMessage({ id: 'red_point' })],\n  ['35.55', '13.75', intl().formatMessage({ id: 'red_point' })],\n  ['35.3', '16.7', intl().formatMessage({ id: 'red_point' })],\n  ['33.95', '19.9', intl().formatMessage({ id: 'red_point' })],\n  ['32.3', '21.75', intl().formatMessage({ id: 'red_point' })],\n  ['29.8', '22.55', intl().formatMessage({ id: 'red_point' })],\n  ['26.55', '23.2', intl().formatMessage({ id: 'red_point' })],\n  ['22.8', '23.8', intl().formatMessage({ id: 'red_point' })],\n  ['18.35', '23.5', intl().formatMessage({ id: 'red_point' })],\n  ['14.4', '22.05', intl().formatMessage({ id: 'red_point' })],\n  ['11.5', '21.7', intl().formatMessage({ id: 'red_point' })],\n  ['10.2', '21.25', intl().formatMessage({ id: 'red_point' })],\n  ['10.6', '18.8', intl().formatMessage({ id: 'red_point' })],\n  ['12.3', '18.75', intl().formatMessage({ id: 'red_point' })],\n  ['14.85', '19.75', intl().formatMessage({ id: 'red_point' })],\n  ['17.05', '20.5', intl().formatMessage({ id: 'red_point' })],\n  ['19.45', '20.65', intl().formatMessage({ id: 'red_point' })],\n  ['21.8', '20.8', intl().formatMessage({ id: 'red_point' })],\n  ['25.1', '20.75', intl().formatMessage({ id: 'red_point' })],\n  ['28.4', '19.8', intl().formatMessage({ id: 'red_point' })],\n  ['29.95', '18.85', intl().formatMessage({ id: 'red_point' })],\n  ['30.85', '17.15', intl().formatMessage({ id: 'red_point' })],\n  ['31.25', '15.25', intl().formatMessage({ id: 'red_point' })],\n  ['31.3', '14.3', intl().formatMessage({ id: 'red_point' })],\n  ['31.3', '12.75', intl().formatMessage({ id: 'red_point' })],\n  ['30.55', '11.25', intl().formatMessage({ id: 'red_point' })],\n  ['29.1', '10', intl().formatMessage({ id: 'red_point' })],\n  ['27.6', '8.55', intl().formatMessage({ id: 'red_point' })],\n  ['25.8', '7.8', intl().formatMessage({ id: 'red_point' })],\n  ['32.1', '9.6', intl().formatMessage({ id: 'red_point' })],\n  ['33.85', '11.8', intl().formatMessage({ id: 'red_point' })],\n  ['33.45', '14.45', intl().formatMessage({ id: 'red_point' })],\n  ['32.35', '19.2', intl().formatMessage({ id: 'red_point' })],\n  ['27.45', '21.6', intl().formatMessage({ id: 'red_point' })],\n  ['7.65', '22.35', intl().formatMessage({ id: 'red_point' })],\n  ['13.45', '22.85', intl().formatMessage({ id: 'red_point' })],\n  ['16.85', '23.15', intl().formatMessage({ id: 'red_point' })],\n  ['17.2', '21.85', intl().formatMessage({ id: 'red_point' })],\n  ['37.4', '7.25', intl().formatMessage({ id: 'blue_point' })],\n  ['39.2', '6.7', intl().formatMessage({ id: 'blue_point' })],\n  ['39.4', '9.5', intl().formatMessage({ id: 'blue_point' })],\n  ['38.55', '11.2', intl().formatMessage({ id: 'blue_point' })],\n  ['40.75', '11.9', intl().formatMessage({ id: 'blue_point' })],\n  ['41.2', '13.75', intl().formatMessage({ id: 'blue_point' })],\n  ['39.7', '14.8', intl().formatMessage({ id: 'blue_point' })],\n  ['38.55', '17.65', intl().formatMessage({ id: 'blue_point' })],\n  ['40.6', '18.2', intl().formatMessage({ id: 'blue_point' })],\n  ['40.8', '20', intl().formatMessage({ id: 'blue_point' })],\n  ['38.8', '20.85', intl().formatMessage({ id: 'blue_point' })],\n  ['38', '22.45', intl().formatMessage({ id: 'blue_point' })],\n  ['40.6', '22.6', intl().formatMessage({ id: 'blue_point' })],\n  ['6.7', '18.7', intl().formatMessage({ id: 'red_point' })],\n  ['8.15', '17.5', intl().formatMessage({ id: 'red_point' })],\n  ['6.1', '15.85', intl().formatMessage({ id: 'red_point' })],\n  ['5.15', '13.65', intl().formatMessage({ id: 'red_point' })],\n  ['6.85', '12.55', intl().formatMessage({ id: 'red_point' })],\n  ['6.75', '10.2', intl().formatMessage({ id: 'red_point' })],\n  ['4.65', '9.6', intl().formatMessage({ id: 'red_point' })],\n  ['6.4', '6.5', intl().formatMessage({ id: 'red_point' })],\n  ['6.35', '5.1', intl().formatMessage({ id: 'red_point' })],\n  ['5.5', '3.85', intl().formatMessage({ id: 'red_point' })],\n  ['7.75', '2.2', intl().formatMessage({ id: 'red_point' })],\n  ['8', '0.95', intl().formatMessage({ id: 'red_point' })],\n  ['5.75', '1.3', intl().formatMessage({ id: 'red_point' })],\n  ['32.8', '16.25', intl().formatMessage({ id: 'red_point' })],\n  ['32.65', '17.55', intl().formatMessage({ id: 'red_point' })],\n  ['34.5', '17.65', intl().formatMessage({ id: 'red_point' })],\n  ['34.35', '15.8', intl().formatMessage({ id: 'red_point' })],\n  ['38.7', '13.2', intl().formatMessage({ id: 'blue_point' })],\n  ['38.55', '15.95', intl().formatMessage({ id: 'blue_point' })],\n  ['40.85', '15.65', intl().formatMessage({ id: 'blue_point' })],\n];\n\nexport const get_left_right = () => [\n  ['6.15', '23.05', intl().formatMessage({ id: 'blue_point' })],\n  ['10.55', '21.95', intl().formatMessage({ id: 'blue_point' })],\n  ['12.9', '15.6', intl().formatMessage({ id: 'blue_point' })],\n  ['10.75', '14.1', intl().formatMessage({ id: 'blue_point' })],\n  ['6.1', '16.5', intl().formatMessage({ id: 'blue_point' })],\n  ['8.6', '18.3', intl().formatMessage({ id: 'blue_point' })],\n  ['17.25', '17.95', intl().formatMessage({ id: 'blue_point' })],\n  ['18.25', '15.1', intl().formatMessage({ id: 'blue_point' })],\n  ['17.75', '10.9', intl().formatMessage({ id: 'blue_point' })],\n  ['17.4', '8.6', intl().formatMessage({ id: 'blue_point' })],\n  ['11.15', '7.8', intl().formatMessage({ id: 'blue_point' })],\n  ['5.3', '9.35', intl().formatMessage({ id: 'blue_point' })],\n  ['5.15', '7.65', intl().formatMessage({ id: 'blue_point' })],\n  ['10.05', '2.85', intl().formatMessage({ id: 'blue_point' })],\n  ['15.55', '2.55', intl().formatMessage({ id: 'blue_point' })],\n  ['17.3', '3.8', intl().formatMessage({ id: 'blue_point' })],\n  ['19.2', '5.2', intl().formatMessage({ id: 'blue_point' })],\n  ['20.85', '10.35', intl().formatMessage({ id: 'blue_point' })],\n  ['20.95', '14.15', intl().formatMessage({ id: 'blue_point' })],\n  ['20.85', '18.95', intl().formatMessage({ id: 'blue_point' })],\n  ['17.1', '21.1', intl().formatMessage({ id: 'blue_point' })],\n  ['26.6', '19.45', intl().formatMessage({ id: 'red_point' })],\n  ['29.8', '20.8', intl().formatMessage({ id: 'red_point' })],\n  ['33.7', '21.9', intl().formatMessage({ id: 'red_point' })],\n  ['44.3', '19.15', intl().formatMessage({ id: 'red_point' })],\n  ['45.05', '16', intl().formatMessage({ id: 'red_point' })],\n  ['43.2', '10.2', intl().formatMessage({ id: 'red_point' })],\n  ['40.05', '5.25', intl().formatMessage({ id: 'red_point' })],\n  ['34.55', '3.2', intl().formatMessage({ id: 'red_point' })],\n  ['30.4', '8.05', intl().formatMessage({ id: 'red_point' })],\n  ['29.05', '11.45', intl().formatMessage({ id: 'red_point' })],\n  ['28.55', '16.75', intl().formatMessage({ id: 'red_point' })],\n  ['32', '17.3', intl().formatMessage({ id: 'red_point' })],\n  ['34.8', '15.25', intl().formatMessage({ id: 'red_point' })],\n  ['34.85', '10.85', intl().formatMessage({ id: 'red_point' })],\n  ['34.3', '7.95', intl().formatMessage({ id: 'red_point' })],\n  ['37.8', '7.7', intl().formatMessage({ id: 'red_point' })],\n  ['42.75', '5.65', intl().formatMessage({ id: 'red_point' })],\n  ['40.85', '11.6', intl().formatMessage({ id: 'red_point' })],\n  ['38.3', '15.75', intl().formatMessage({ id: 'red_point' })],\n];\n\nexport const get_round = () => [\n  ['20.45', '14.75', intl().formatMessage({ id: 'blue_point' })],\n  ['21.05', '16.1', intl().formatMessage({ id: 'blue_point' })],\n  ['23.45', '15.6', intl().formatMessage({ id: 'blue_point' })],\n  ['24.2', '14.3', intl().formatMessage({ id: 'blue_point' })],\n  ['24.35', '12.7', intl().formatMessage({ id: 'blue_point' })],\n  ['23.75', '12', intl().formatMessage({ id: 'blue_point' })],\n  ['22.25', '11.95', intl().formatMessage({ id: 'blue_point' })],\n  ['21.45', '12.1', intl().formatMessage({ id: 'blue_point' })],\n  ['21.8', '13.45', intl().formatMessage({ id: 'blue_point' })],\n  ['22.4', '14', intl().formatMessage({ id: 'blue_point' })],\n  ['22.25', '14.65', intl().formatMessage({ id: 'blue_point' })],\n  ['23.25', '17.2', intl().formatMessage({ id: 'blue_point' })],\n  ['24.65', '16.8', intl().formatMessage({ id: 'blue_point' })],\n  ['25.4', '15.25', intl().formatMessage({ id: 'blue_point' })],\n  ['25.7', '13.2', intl().formatMessage({ id: 'blue_point' })],\n  ['25.9', '11.85', intl().formatMessage({ id: 'blue_point' })],\n  ['24.2', '10.65', intl().formatMessage({ id: 'blue_point' })],\n  ['23.25', '10.35', intl().formatMessage({ id: 'blue_point' })],\n  ['21.4', '10.8', intl().formatMessage({ id: 'blue_point' })],\n  ['20.25', '11.6', intl().formatMessage({ id: 'blue_point' })],\n  ['19.2', '13.35', intl().formatMessage({ id: 'blue_point' })],\n  ['19.05', '16', intl().formatMessage({ id: 'blue_point' })],\n  ['20.4', '17.3', intl().formatMessage({ id: 'blue_point' })],\n  ['22.25', '17.9', intl().formatMessage({ id: 'blue_point' })],\n  ['23.85', '18', intl().formatMessage({ id: 'blue_point' })],\n  ['25.7', '17.05', intl().formatMessage({ id: 'blue_point' })],\n  ['26.55', '16', intl().formatMessage({ id: 'blue_point' })],\n  ['27.2', '14', intl().formatMessage({ id: 'blue_point' })],\n  ['27.2', '12.55', intl().formatMessage({ id: 'blue_point' })],\n  ['27', '11.25', intl().formatMessage({ id: 'blue_point' })],\n  ['26', '10.45', intl().formatMessage({ id: 'blue_point' })],\n  ['24.05', '9.9', intl().formatMessage({ id: 'blue_point' })],\n  ['23.35', '9.7', intl().formatMessage({ id: 'blue_point' })],\n  ['21.7', '9.6', intl().formatMessage({ id: 'blue_point' })],\n  ['20', '10.1', intl().formatMessage({ id: 'blue_point' })],\n  ['19.35', '10.75', intl().formatMessage({ id: 'blue_point' })],\n  ['18.55', '12.3', intl().formatMessage({ id: 'blue_point' })],\n  ['18.25', '13.9', intl().formatMessage({ id: 'blue_point' })],\n  ['18.25', '15.5', intl().formatMessage({ id: 'blue_point' })],\n  ['18.7', '16.85', intl().formatMessage({ id: 'blue_point' })],\n  ['19.55', '17.7', intl().formatMessage({ id: 'blue_point' })],\n  ['20.75', '18.1', intl().formatMessage({ id: 'blue_point' })],\n  ['22.15', '18.55', intl().formatMessage({ id: 'blue_point' })],\n  ['24.3', '18.75', intl().formatMessage({ id: 'blue_point' })],\n  ['26.45', '16.9', intl().formatMessage({ id: 'blue_point' })],\n  ['27.85', '15.75', intl().formatMessage({ id: 'blue_point' })],\n  ['28.35', '13.5', intl().formatMessage({ id: 'blue_point' })],\n  ['28.15', '10.95', intl().formatMessage({ id: 'blue_point' })],\n  ['23.95', '8.9', intl().formatMessage({ id: 'blue_point' })],\n  ['17.55', '12.85', intl().formatMessage({ id: 'blue_point' })],\n  ['12.25', '20.1', intl().formatMessage({ id: 'red_point' })],\n  ['18.3', '22.2', intl().formatMessage({ id: 'red_point' })],\n  ['25.1', '22.35', intl().formatMessage({ id: 'red_point' })],\n  ['31.35', '21.2', intl().formatMessage({ id: 'red_point' })],\n  ['32', '19.9', intl().formatMessage({ id: 'red_point' })],\n  ['33.4', '18.65', intl().formatMessage({ id: 'red_point' })],\n  ['36.95', '16.85', intl().formatMessage({ id: 'red_point' })],\n  ['36.25', '13.6', intl().formatMessage({ id: 'red_point' })],\n  ['33', '13.45', intl().formatMessage({ id: 'red_point' })],\n  ['32.3', '12.2', intl().formatMessage({ id: 'red_point' })],\n  ['32.35', '9.05', intl().formatMessage({ id: 'red_point' })],\n  ['32', '8.1', intl().formatMessage({ id: 'red_point' })],\n  ['30.2', '6.3', intl().formatMessage({ id: 'red_point' })],\n  ['28.85', '4.4', intl().formatMessage({ id: 'red_point' })],\n  ['26.65', '3.3', intl().formatMessage({ id: 'red_point' })],\n  ['23.1', '3.35', intl().formatMessage({ id: 'red_point' })],\n  ['19', '4.45', intl().formatMessage({ id: 'red_point' })],\n  ['17.1', '5.55', intl().formatMessage({ id: 'red_point' })],\n  ['15.35', '6.2', intl().formatMessage({ id: 'red_point' })],\n  ['13.7', '8.3', intl().formatMessage({ id: 'red_point' })],\n  ['12.9', '11.55', intl().formatMessage({ id: 'red_point' })],\n  ['12.95', '13.7', intl().formatMessage({ id: 'red_point' })],\n  ['12.05', '15.9', intl().formatMessage({ id: 'red_point' })],\n  ['11.05', '15.85', intl().formatMessage({ id: 'red_point' })],\n  ['10.75', '13.2', intl().formatMessage({ id: 'red_point' })],\n  ['11.15', '9.35', intl().formatMessage({ id: 'red_point' })],\n  ['12.85', '7.15', intl().formatMessage({ id: 'red_point' })],\n  ['14.5', '5', intl().formatMessage({ id: 'red_point' })],\n  ['16.3', '3.7', intl().formatMessage({ id: 'red_point' })],\n  ['19.35', '2.8', intl().formatMessage({ id: 'red_point' })],\n  ['25.1', '1.85', intl().formatMessage({ id: 'red_point' })],\n  ['27.4', '1.95', intl().formatMessage({ id: 'red_point' })],\n  ['28.95', '2.05', intl().formatMessage({ id: 'red_point' })],\n  ['30.6', '2.75', intl().formatMessage({ id: 'red_point' })],\n  ['31.7', '4', intl().formatMessage({ id: 'red_point' })],\n  ['32.75', '5.6', intl().formatMessage({ id: 'red_point' })],\n  ['33.55', '8.2', intl().formatMessage({ id: 'red_point' })],\n  ['34.3', '10.05', intl().formatMessage({ id: 'red_point' })],\n  ['34.75', '11.85', intl().formatMessage({ id: 'red_point' })],\n  ['35', '13.5', intl().formatMessage({ id: 'red_point' })],\n  ['35', '15.2', intl().formatMessage({ id: 'red_point' })],\n  ['34', '16.6', intl().formatMessage({ id: 'red_point' })],\n  ['33', '17.95', intl().formatMessage({ id: 'red_point' })],\n  ['31.55', '20.05', intl().formatMessage({ id: 'red_point' })],\n  ['30.45', '21.2', intl().formatMessage({ id: 'red_point' })],\n  ['28.75', '21.95', intl().formatMessage({ id: 'red_point' })],\n  ['26.4', '22.95', intl().formatMessage({ id: 'red_point' })],\n  ['23.75', '23.1', intl().formatMessage({ id: 'red_point' })],\n  ['20.85', '23.15', intl().formatMessage({ id: 'red_point' })],\n  ['17.35', '23.1', intl().formatMessage({ id: 'red_point' })],\n  ['15.7', '22.55', intl().formatMessage({ id: 'red_point' })],\n  ['14.45', '21.45', intl().formatMessage({ id: 'red_point' })],\n  ['13.3', '19.1', intl().formatMessage({ id: 'red_point' })],\n  ['12.65', '17.75', intl().formatMessage({ id: 'red_point' })],\n  ['10', '17.75', intl().formatMessage({ id: 'red_point' })],\n  ['11.9', '10.5', intl().formatMessage({ id: 'red_point' })],\n  ['12.8', '9.05', intl().formatMessage({ id: 'red_point' })],\n  ['21.95', '2.45', intl().formatMessage({ id: 'red_point' })],\n  ['23.2', '1.5', intl().formatMessage({ id: 'red_point' })],\n  ['27.2', '4.4', intl().formatMessage({ id: 'red_point' })],\n  ['27.3', '5.5', intl().formatMessage({ id: 'red_point' })],\n  ['29.25', '6.6', intl().formatMessage({ id: 'red_point' })],\n  ['33.6', '10.35', intl().formatMessage({ id: 'red_point' })],\n  ['33.6', '11.2', intl().formatMessage({ id: 'red_point' })],\n  ['36.55', '11.2', intl().formatMessage({ id: 'red_point' })],\n  ['35.55', '20.25', intl().formatMessage({ id: 'red_point' })],\n];\n\nexport const get_iris = () => [\n  ['5.1', '3.5', '1.4', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.9', '3', '1.4', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.7', '3.2', '1.3', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.6', '3.1', '1.5', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5', '3.6', '1.4', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.4', '3.9', '1.7', '0.4', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.6', '3.4', '1.4', '0.3', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5', '3.4', '1.5', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.4', '2.9', '1.4', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.9', '3.1', '1.5', '0.1', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.4', '3.7', '1.5', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.8', '3.4', '1.6', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.8', '3', '1.4', '0.1', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.3', '3', '1.1', '0.1', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.8', '4', '1.2', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.7', '4.4', '1.5', '0.4', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.4', '3.9', '1.3', '0.4', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.1', '3.5', '1.4', '0.3', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.7', '3.8', '1.7', '0.3', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.1', '3.8', '1.5', '0.3', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.4', '3.4', '1.7', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.1', '3.7', '1.5', '0.4', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.6', '3.6', '1', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.1', '3.3', '1.7', '0.5', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.8', '3.4', '1.9', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5', '3', '1.6', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5', '3.4', '1.6', '0.4', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.2', '3.5', '1.5', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.2', '3.4', '1.4', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.7', '3.2', '1.6', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.8', '3.1', '1.6', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.4', '3.4', '1.5', '0.4', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.2', '4.1', '1.5', '0.1', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.5', '4.2', '1.4', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.9', '3.1', '1.5', '0.1', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5', '3.2', '1.2', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.5', '3.5', '1.3', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.9', '3.1', '1.5', '0.1', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.4', '3', '1.3', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.1', '3.4', '1.5', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5', '3.5', '1.3', '0.3', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.5', '2.3', '1.3', '0.3', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.4', '3.2', '1.3', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5', '3.5', '1.6', '0.6', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.1', '3.8', '1.9', '0.4', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.8', '3', '1.4', '0.3', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.1', '3.8', '1.6', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['4.6', '3.2', '1.4', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5.3', '3.7', '1.5', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['5', '3.3', '1.4', '0.2', intl().formatMessage({ id: 'iris_setosa' })],\n  ['7', '3.2', '4.7', '1.4', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.4', '3.2', '4.5', '1.5', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.9', '3.1', '4.9', '1.5', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.5', '2.3', '4', '1.3', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.5', '2.8', '4.6', '1.5', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.7', '2.8', '4.5', '1.3', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.3', '3.3', '4.7', '1.6', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['4.9', '2.4', '3.3', '1', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.6', '2.9', '4.6', '1.3', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.2', '2.7', '3.9', '1.4', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5', '2', '3.5', '1', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.9', '3', '4.2', '1.5', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6', '2.2', '4', '1', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.1', '2.9', '4.7', '1.4', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.6', '2.9', '3.6', '1.3', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.7', '3.1', '4.4', '1.4', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.6', '3', '4.5', '1.5', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.8', '2.7', '4.1', '1', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.2', '2.2', '4.5', '1.5', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.6', '2.5', '3.9', '1.1', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.9', '3.2', '4.8', '1.8', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.1', '2.8', '4', '1.3', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.3', '2.5', '4.9', '1.5', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.1', '2.8', '4.7', '1.2', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.4', '2.9', '4.3', '1.3', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.6', '3', '4.4', '1.4', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.8', '2.8', '4.8', '1.4', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.7', '3', '5', '1.7', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6', '2.9', '4.5', '1.5', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.7', '2.6', '3.5', '1', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.5', '2.4', '3.8', '1.1', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.5', '2.4', '3.7', '1', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.8', '2.7', '3.9', '1.2', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6', '2.7', '5.1', '1.6', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.4', '3', '4.5', '1.5', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6', '3.4', '4.5', '1.6', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.7', '3.1', '4.7', '1.5', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.3', '2.3', '4.4', '1.3', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.6', '3', '4.1', '1.3', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.5', '2.5', '4', '1.3', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.5', '2.6', '4.4', '1.2', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.1', '3', '4.6', '1.4', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.8', '2.6', '4', '1.2', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5', '2.3', '3.3', '1', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.6', '2.7', '4.2', '1.3', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.7', '3', '4.2', '1.2', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.7', '2.9', '4.2', '1.3', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.2', '2.9', '4.3', '1.3', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.1', '2.5', '3', '1.1', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['5.7', '2.8', '4.1', '1.3', intl().formatMessage({ id: 'iris_versicolour' })],\n  ['6.3', '3.3', '6', '2.5', intl().formatMessage({ id: 'iris_virginica' })],\n  ['5.8', '2.7', '5.1', '1.9', intl().formatMessage({ id: 'iris_virginica' })],\n  ['7.1', '3', '5.9', '2.1', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.3', '2.9', '5.6', '1.8', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.5', '3', '5.8', '2.2', intl().formatMessage({ id: 'iris_virginica' })],\n  ['7.6', '3', '6.6', '2.1', intl().formatMessage({ id: 'iris_virginica' })],\n  ['4.9', '2.5', '4.5', '1.7', intl().formatMessage({ id: 'iris_virginica' })],\n  ['7.3', '2.9', '6.3', '1.8', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.7', '2.5', '5.8', '1.8', intl().formatMessage({ id: 'iris_virginica' })],\n  ['7.2', '3.6', '6.1', '2.5', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.5', '3.2', '5.1', '2', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.4', '2.7', '5.3', '1.9', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.8', '3', '5.5', '2.1', intl().formatMessage({ id: 'iris_virginica' })],\n  ['5.7', '2.5', '5', '2', intl().formatMessage({ id: 'iris_virginica' })],\n  ['5.8', '2.8', '5.1', '2.4', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.4', '3.2', '5.3', '2.3', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.5', '3', '5.5', '1.8', intl().formatMessage({ id: 'iris_virginica' })],\n  ['7.7', '3.8', '6.7', '2.2', intl().formatMessage({ id: 'iris_virginica' })],\n  ['7.7', '2.6', '6.9', '2.3', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6', '2.2', '5', '1.5', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.9', '3.2', '5.7', '2.3', intl().formatMessage({ id: 'iris_virginica' })],\n  ['5.6', '2.8', '4.9', '2', intl().formatMessage({ id: 'iris_virginica' })],\n  ['7.7', '2.8', '6.7', '2', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.3', '2.7', '4.9', '1.8', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.7', '3.3', '5.7', '2.1', intl().formatMessage({ id: 'iris_virginica' })],\n  ['7.2', '3.2', '6', '1.8', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.2', '2.8', '4.8', '1.8', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.1', '3', '4.9', '1.8', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.4', '2.8', '5.6', '2.1', intl().formatMessage({ id: 'iris_virginica' })],\n  ['7.2', '3', '5.8', '1.6', intl().formatMessage({ id: 'iris_virginica' })],\n  ['7.4', '2.8', '6.1', '1.9', intl().formatMessage({ id: 'iris_virginica' })],\n  ['7.9', '3.8', '6.4', '2', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.4', '2.8', '5.6', '2.2', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.3', '2.8', '5.1', '1.5', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.1', '2.6', '5.6', '1.4', intl().formatMessage({ id: 'iris_virginica' })],\n  ['7.7', '3', '6.1', '2.3', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.3', '3.4', '5.6', '2.4', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.4', '3.1', '5.5', '1.8', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6', '3', '4.8', '1.8', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.9', '3.1', '5.4', '2.1', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.7', '3.1', '5.6', '2.4', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.9', '3.1', '5.1', '2.3', intl().formatMessage({ id: 'iris_virginica' })],\n  ['5.8', '2.7', '5.1', '1.9', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.8', '3.2', '5.9', '2.3', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.7', '3.3', '5.7', '2.5', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.7', '3', '5.2', '2.3', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.3', '2.5', '5', '1.9', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.5', '3', '5.2', '2', intl().formatMessage({ id: 'iris_virginica' })],\n  ['6.2', '3.4', '5.4', '2.3', intl().formatMessage({ id: 'iris_virginica' })],\n  ['5.9', '3', '5.1', '1.8', intl().formatMessage({ id: 'iris_virginica' })],\n];\n\nexport const get_init_data:() => DataSet[] = () => [\n  {\n    name: intl().formatMessage({ id: 'up_down_matrix' }),\n    classifications: [\n      intl().formatMessage({ id: 'blue_point' }),\n      intl().formatMessage({ id: 'red_point' }),\n    ],\n    preview: `${get_path()}asset/default_data_img/data_1.png`,\n    source: get_up_down(),\n    has_label: true,\n  },\n  {\n    name: intl().formatMessage({ id: 'rotation_matrix' }),\n    classifications: [\n      intl().formatMessage({ id: 'blue_point' }),\n      intl().formatMessage({ id: 'red_point' }),\n    ],\n    preview: `${get_path()}asset/default_data_img/data_2.png`,\n    source: get_rotation(),\n    has_label: true,\n  },\n  {\n    name: intl().formatMessage({ id: 'left_right_matrix' }),\n    classifications: [\n      intl().formatMessage({ id: 'blue_point' }),\n      intl().formatMessage({ id: 'red_point' }),\n    ],\n    preview: `${get_path()}asset/default_data_img/data_3.png`,\n    source: get_left_right(),\n    has_label: true,\n  },\n  {\n    name: intl().formatMessage({ id: 'round_matrix' }),\n    classifications: [\n      intl().formatMessage({ id: 'blue_point' }),\n      intl().formatMessage({ id: 'red_point' }),\n    ],\n    preview: `${get_path()}asset/default_data_img/data_4.png`,\n    source: get_round(),\n    has_label: true,\n  },\n  {\n    name: intl().formatMessage({ id: 'iris_data_set' }),\n    classifications: [\n      intl().formatMessage({ id: 'iris_setosa' }),\n      intl().formatMessage({ id: 'iris_versicolour' }),\n      intl().formatMessage({ id: 'iris_virginica' }),\n    ],\n    preview: `${get_path()}asset/default_data_img/data_5.png`,\n    source: get_iris(),\n    has_label: false,\n  },\n];\n","import * as React from 'react';\nimport { injectIntl, InjectedIntlProps } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { StoreState, choose_step, choose_data_set } from '../../redux';\n\nimport { DataSet, TrainingStep } from '../../models/def';\nimport { get_init_data } from './default_data';\n\nimport './style.scss';\n\ninterface ConnectedProps extends InjectedIntlProps {\n  choose_step:typeof choose_step;\n  choose_data_set:typeof choose_data_set;\n}\n\ninterface DataSetState {\n  data_sets:DataSet[];\n}\n\nclass DataSets extends React.Component<ConnectedProps, DataSetState> {\n  constructor(props:ConnectedProps) {\n    super(props);\n    this.state = {\n      data_sets: [],\n    };\n  }\n\n  UNSAFE_componentWillMount() {\n    const data_sets = get_init_data();\n    this.setState({ data_sets });\n  }\n\n  private handle_click_data_set = (data_set:DataSet) => {\n    this.props.choose_data_set(data_set);\n    this.props.choose_step(TrainingStep.IMPORTING);\n  }\n\n  render() {\n    return (\n      <div\n          styleName=\"main-content-wrapper\"\n      >\n        <div\n            styleName=\"back-to-last-step\"\n            onClick={this.props.choose_step.bind(this, TrainingStep.EDITING_DATA)}\n            className=\"th1-text-0 th1-text-s2\"\n        >\n          <div styleName=\"icon\">\n            <svg\n                className=\"icon\"\n                aria-hidden=\"true\"\n            >\n              <use xlinkHref=\"#iconicon-dropdown\" />\n            </svg>\n          </div>\n          <div styleName=\"text\">\n            {this.props.intl.formatMessage({ id: 'back' })}\n          </div>\n        </div>\n        <div styleName=\"data-sets-container\">\n          {this.state.data_sets.map((data_set, index) => (\n            <div\n                styleName=\"data-set-wrapper\"\n                key={index}\n                data-report-click=\"AI2-选择数据集\"\n                onClick={this.handle_click_data_set.bind(this, data_set)}>\n              <div\n                  styleName=\"preview-container\"\n                  style={{ backgroundImage: `url(${data_set.preview})` }}\n              >\n                {data_set.has_label &&\n                <span styleName={`preview-label ${this.props.intl.locale.startsWith('zh') ? 'zh' : ''}`}>\n                  {this.props.intl.formatMessage({ id: 'data_set_label' })}\n                </span>}\n              </div>\n              <div styleName=\"data-set-title\">{data_set.name}</div>\n              <div styleName=\"data-set-classification\">\n                {`${this.props.intl.formatMessage({ id: 'classification' })}: `}\n                {data_set.classifications.join(', ')}\n              </div>\n            </div>))}\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction map_state_to_props(state:StoreState) {\n  return {\n  };\n}\n\nfunction map_dispatch_to_props(dispatch:Dispatch) {\n  return bindActionCreators(\n    {\n      choose_step,\n      choose_data_set,\n    },\n    dispatch);\n}\n\nexport const DataSetComponent =\n  connect(map_state_to_props, map_dispatch_to_props)(injectIntl((DataSets)));","import * as React from 'react';\nimport * as xlsx from 'xlsx';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { injectIntl, InjectedIntlProps } from 'react-intl';\nimport { groupBy, cloneDeep, uniqueId } from 'lodash';\n\nimport {\n  StoreState,\n  change_data,\n  change_classification,\n  choose_step,\n  change_feature,\n  set_training_status,\n  reset_data_flag,\n  Theme,\n} from '../../redux';\nimport { RANGE_NUM_FEATURES, DataSet, TrainingStep, RANGE_NUM_CLASSES, DEFAULT_DATA_LENGTH } from '../../models/def';\nimport { get_validated_name, rename_base_on_range } from '../../models/utils';\nimport { show_notice, show_confirm_dialog, get_dynamic_theme_class, report_event } from '../../connected_deps';\n\nimport './style.scss';\n\ninterface ConnectedProps extends InjectedIntlProps {\n  change_data:typeof change_data;\n  change_classification:typeof change_classification;\n\n  change_feature:typeof change_feature;\n\n  source_input:File | DataSet;\n  choose_step:typeof choose_step;\n  set_training_status:typeof set_training_status;\n  reset_data_flag:typeof reset_data_flag;\n  theme:Theme;\n}\n\ninterface DataState {\n  rows:(string | number)[][];\n  header_index_to_show_dropdown_menu?:number;\n  /**\n   * Indicate the column index of data being marked as classification column.\n   * Also refresh when drop event happen, i.e. the values are not always correct\n   * **Should be used only when clicking confirm to add.**\n   */\n  column_of_classification?:number;\n  features:DraggableFeature[];\n  should_show_hint:boolean;\n}\n\ninterface DraggableFeature {\n  name:string;\n  dropped_on:number;\n  id:string;\n}\n\nclass ImportData extends React.Component<ConnectedProps, DataState> {\n  constructor(props:ConnectedProps) {\n    super(props);\n    this.state = {\n      rows: [['']],\n      features: [],\n      should_show_hint: false,\n    };\n    if (props.source_input instanceof File) {\n      const import_data = props.source_input;\n      // .csv 文件需要用 readAsText 处理\n      const is_csv = import_data.type === 'text/csv';\n\n      this.last_step = TrainingStep.EDITING_DATA;\n      const reader = new FileReader();\n      reader.onload = (ev:any) => {\n        const data = ev.target.result;\n        const type = is_csv ? 'string' : 'binary';\n\n        try {\n          const workbook = xlsx.read(data, { type });\n          this.sheet_to_arr(workbook.Sheets[workbook.SheetNames[0]]);\n        } catch (err) {\n          show_notice({\n            id: 'ai_lab/invalid_file_data',\n            type: 'error',\n          });\n        }\n      };\n      is_csv ? reader.readAsText(import_data, 'utf-8') : reader.readAsBinaryString(import_data);\n    } else {\n      this.last_step = TrainingStep.CHOOSING_DATA_SET;\n      this.state = { ...this.state, rows: props.source_input.source };\n    }\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.handle_click_dropdown_ouside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.handle_click_dropdown_ouside);\n  }\n\n  private last_step:TrainingStep;\n\n  // 在 input 的 onFocus 赋值\n  // 记录编辑前的特征名字\n  private last_name:string;\n  // 记录编辑前的特征名数组\n  private name_list:string[];\n\n  private sheet_to_arr(sheet:xlsx.WorkSheet) {\n    const ref:string = sheet['!ref'] ? sheet['!ref'] : '';\n    const range = xlsx.utils.decode_range(ref);\n    const rows:string[][] = [];\n\n    const is_column_valid:boolean[] = [];\n\n    for (let row_num = range.s.r; row_num <= range.e.r; row_num++) {\n      const row = [];\n      for (let col_num = range.s.c; col_num <= range.e.c; col_num++) {\n        if (row_num === 0) {\n          is_column_valid[col_num] = false;\n        }\n        const current_cell = sheet[xlsx.utils.encode_cell({ r: row_num, c: col_num })];\n        if (current_cell) {\n          row.push(current_cell.v);\n          is_column_valid[col_num] = true;\n        } else {\n          row.push('');\n        }\n      }\n      rows.push(row);\n    }\n\n    // Ignore the empty rows when adding data to the table\n    const res_rows = rows.map((row) => row.filter((col, col_index) => is_column_valid[col_index]));\n    this.setState({ rows: res_rows });\n  }\n\n  private handle_add_data = () => {\n    report_event('AI2-确定使用');\n\n    const { column_of_classification } = this.state;\n    if (column_of_classification === undefined) {\n      return;\n    }\n\n    const grouped_rows = groupBy(this.state.rows, (row) => row[column_of_classification]);\n    const classifications = Object.keys(grouped_rows).filter((key) => key !== 'undefined' && key !== '');\n    let filtered = false;\n    const column_map_to_feature = this.state.features.map((feature) => feature.dropped_on);\n    const data = classifications.map((classification) => {\n      const class_data = grouped_rows[classification].map((row) => column_map_to_feature.map((i) => row[i]));\n      const res_data = class_data.filter((data_row) => data_row.every((data_cell) => !isNaN(parseFloat(data_cell.toString()))));\n      if (res_data.length < class_data.length) {\n        filtered = true;\n      }\n      return res_data;\n    });\n\n    // After data filtering, check if all the classifications contain data.\n    // remove the empty classifications\n    // TODO confirm the necessarity\n    for (let i = classifications.length - 1; i >= 0; i--) {\n      const feature_rows = data[i];\n      const feature_row_len = feature_rows.length;\n\n      if (feature_row_len < 1) {\n        filtered = true;\n        classifications.splice(i, 1);\n        data.splice(i, 1);\n      } else if (feature_row_len < DEFAULT_DATA_LENGTH) {\n        // 不够五组数据的补上相应的空数据\n        const rows_remain = DEFAULT_DATA_LENGTH - feature_row_len;\n\n        for (let j = 0; j < rows_remain; j++) {\n          feature_rows.push(Array(this.state.features.length).fill(''));\n        }\n      }\n    }\n\n    if (classifications.length === 0 || classifications.length > RANGE_NUM_CLASSES[1] ) {\n      const title_id = classifications.length ? 'ai_lab/add_data_fail_due_to_classification_maxium' : 'cannot_add_data';\n      const message_id = classifications.length ? 'max_feature_length_exceed' : 'import_file_contains_no_legal_data';\n\n      show_confirm_dialog(\n        () => { this; },\n        title_id,\n        this.props.intl.formatMessage({ id: message_id }),\n        { text: 'ai_lab/cannot_add_data_confirm' },\n      );\n      return;\n    }\n\n    // 过滤完后，需要检查 classification 是否满足两个分类，如果不是则添加数据\n    const extra_default_classification:string[] = [];\n    if (classifications.length < RANGE_NUM_CLASSES[0]) {\n      const classifications_remain = RANGE_NUM_CLASSES[0] - classifications.length;\n\n      for (let i = 0; i < classifications_remain; i++) {\n        const new_classification = rename_base_on_range(this.props.intl.formatMessage({ id: 'classification' }), classifications, RANGE_NUM_CLASSES[1]);\n        classifications.push(new_classification);\n        extra_default_classification.push(new_classification);\n\n        // 添加默认数据\n        const rows = [];\n        for (let j = 0; j < DEFAULT_DATA_LENGTH; j++) {\n          rows.push(Array(this.state.features.length).fill(''));\n        }\n        data.push(rows);\n      }\n    }\n\n    const import_data = () => {\n      const features = this.state.features.map((feature) => feature.name);\n      this.props.change_feature(features);\n      this.props.change_classification(classifications);\n      this.props.change_data(data);\n      if (filtered) {\n        show_notice({\n          id: 'invalid_data_deleted',\n        });\n      }\n      this.props.choose_step(TrainingStep.EDITING_DATA);\n      this.props.set_training_status('wait_start');\n      this.props.reset_data_flag();\n    };\n\n    show_confirm_dialog(\n      import_data,\n      'add_data',\n      this.props.intl.formatMessage({ id: 'adding_classes' }, { classifications: ` ${classifications.filter((c) => !extra_default_classification.includes(c)).join(', ')}` }),\n      { text: 'confirm' },\n      'cancel',\n    );\n  }\n\n  private handle_feature_add = (dropped_on:number) => {\n    if (this.state.features.length >= RANGE_NUM_FEATURES[1]) {\n      return;\n    }\n\n    const features = cloneDeep(this.state.features);\n    const feature_name_arr = features.map((feature) => feature.name);\n    const default_feature_name_prefix = this.props.intl.formatMessage({ id: 'feature' });\n\n    features.push({\n      name: rename_base_on_range(default_feature_name_prefix, feature_name_arr, RANGE_NUM_FEATURES[1]),\n      dropped_on,\n      id: uniqueId(),\n    });\n\n    this.setState({\n      features,\n    });\n  }\n\n  private get_feature_index_by_id = (id:string) => this.state.features.findIndex((feature) => feature.id === id)\n\n  private handle_feature_del = (id:string) => {\n    const features = cloneDeep(this.state.features);\n    const del_feature_idx = this.get_feature_index_by_id(id);\n    if (del_feature_idx === -1) {\n      return;\n    }\n\n    features.splice(del_feature_idx, 1);\n    this.setState({\n      features,\n    });\n  }\n\n  private handle_feature_name_edit = (id:string, new_name:string) => {\n    const features = cloneDeep(this.state.features);\n    const edit_feature_idx = this.get_feature_index_by_id(id);\n    if (edit_feature_idx === -1) {\n      return;\n    }\n\n    features[edit_feature_idx].name = new_name;\n    this.setState({\n      features,\n    });\n  }\n\n  private handle_feature_name_edit_on_blur = (id:string, last_name:string, new_name:string) => {\n    const features = cloneDeep(this.state.features);\n\n    const edit_feature_idx = this.get_feature_index_by_id(id);\n    if (edit_feature_idx === -1) {\n      return;\n    }\n\n    new_name = get_validated_name(new_name, last_name, this.name_list);\n\n    features[edit_feature_idx].name = new_name;\n    this.setState({\n      features,\n    });\n  }\n\n  private render_header = () => {\n    const should_add_data = this.state.features.length > 0 && this.state.column_of_classification !== undefined;\n\n    return (\n      <div styleName=\"header\">\n        <div\n            styleName=\"cancel_btn\"\n            className=\"th1-text-0 th1-text-s2\"\n            onClick={this.props.choose_step.bind(this, this.last_step)}\n        >\n          <div styleName=\"icon\">\n            <svg\n                className=\"icon\"\n                aria-hidden=\"true\"\n            >\n              <use xlinkHref=\"#iconicon-dropdown\" />\n            </svg>\n          </div>\n          <div styleName=\"text\">\n            {this.props.intl.formatMessage({ id: 'cancel_add' })}\n          </div>\n        </div>\n        <div\n            styleName={`confirm_btn ${should_add_data ? 'positive' : 'negative'}`}\n            className={should_add_data ? 'th1-bg-0 th1-bg-hover-m1 th1-bg-active-m2 th1-text-10' : ''}\n            onClick={() => {\n              should_add_data && this.handle_add_data();\n            }}\n            onMouseEnter={() => {\n              if (should_add_data) {\n                return;\n              }\n\n              this.setState({\n                should_show_hint: true,\n              });\n            }}\n            onMouseLeave={() => {\n              if (should_add_data) {\n                return;\n              }\n\n              this.setState({\n                should_show_hint: false,\n              });\n            }}\n        >\n          {this.props.intl.formatMessage({ id: 'confirm_add' })}\n          {\n            !should_add_data &&\n            <div\n                styleName=\"disable_hint\"\n            >\n              <svg\n                  className=\"icon\"\n                  aria-hidden=\"true\"\n              >\n                <use xlinkHref=\"#iconicon_jinggao\" />\n              </svg>\n            </div>\n          }\n          {\n            this.state.should_show_hint &&\n            <div styleName=\"hint_label\">\n              {this.props.intl.formatMessage({ id: 'ai_lab/at_least_1_feature_and_1_classification' })}\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n\n  private handle_click_dropdown_ouside = (e:MouseEvent) => {\n    if (!this.dropdown_div) {\n      return;\n    }\n\n    const el = e.target as HTMLElement;\n    if (this.dropdown_div.contains(el)) {\n      return;\n    }\n\n    this.setState({\n      header_index_to_show_dropdown_menu: undefined,\n    });\n  }\n\n  private dropdown_div:HTMLDivElement|null;\n\n  private inputs:(HTMLInputElement|null)[] = [];\n\n  private render_table_header = () => {\n    const { features, column_of_classification, rows } = this.state;\n\n    const dimension = rows[0].length;\n    const table_headers:JSX.Element[] = [];\n\n    for (let i = 0; i < dimension; i++) {\n      const is_selected_feature = features.some((f) => f.dropped_on === i);\n      const is_selected_classfication = column_of_classification === i;\n\n      table_headers.push(\n        <th\n            key={i}\n            className={\n              `th1-border-impt-7\n              ${get_dynamic_theme_class('th1-bg-6', this.props.theme)}`\n            }\n        >\n          <div styleName=\"item_container\">\n            <div styleName=\"input\">\n              {\n                !is_selected_feature && !is_selected_classfication &&\n                <div\n                    styleName=\"unselected\"\n                    className={get_dynamic_theme_class('th1-text-3', this.props.theme, 4)}\n                >\n                  {this.props.intl.formatMessage({ id: 'ai_lab/unselected' })}\n                </div>\n              }\n              {\n                is_selected_feature && (() => {\n                  const found = features.find((f) => f.dropped_on === i);\n                  if (!found) {\n                    return false;\n                  }\n\n                  return (\n                    <input\n                        className=\"th1-text-0 th1-text-s2 th1-border-impt-0\"\n                        type=\"text\"\n                        value={found.name}\n                        onFocus={\n                          (e) => {\n                            e.target.select();\n                            this.last_name = found.name;\n                            this.name_list = features.map((f) => f.name);\n                          }\n                        }\n                        maxLength={10}\n                        onChange={\n                          (e) => {\n                            this.handle_feature_name_edit(found.id, e.target.value);\n                          }\n                        }\n                        onBlur={\n                          (e) => {\n                            this.handle_feature_name_edit_on_blur(found.id, this.last_name, e.target.value);\n                          }\n                        }\n                        ref={(ref) => {\n                          this.inputs[i] = ref;\n                        }}\n                        onKeyDown={\n                          (e) => {\n                            const input = this.inputs[i];\n                            e.keyCode === 13 && input && input.blur();\n                          }\n                        }\n                    />\n                  );\n                })()\n              }\n              {\n                is_selected_classfication &&\n                <div\n                    styleName=\"selected\"\n                    className=\"th1-text-0 th1-text-s2\"\n                >\n                  {this.props.intl.formatMessage({ id: 'classification' })}\n                </div>\n              }\n            </div>\n            <div\n                styleName={`dropdown ${this.state.header_index_to_show_dropdown_menu === i ? 'expand' : ''}`}\n                className=\"th1-text-0 th1-text-s2 th1-bg-hover-4 th1-bg-5\"\n                onClick={() => {\n                  this.setState((prev_state) => {\n                    const header_index_to_show_dropdown_menu = prev_state.header_index_to_show_dropdown_menu === i ? undefined : i;\n                    return {\n                      header_index_to_show_dropdown_menu,\n                    };\n                  });\n                }}\n            >\n              <svg\n                  className=\"icon\"\n                  aria-hidden=\"true\"\n              >\n                <use xlinkHref=\"#iconicon_down1\" />\n              </svg>\n            </div>\n            {\n              this.state.header_index_to_show_dropdown_menu === i &&\n              <div\n                  styleName=\"dropdown_menu\"\n                  ref={(ref) => {\n                    this.dropdown_div = ref;\n                  }}\n              >\n                {\n                  [\n                    {\n                      type: 'item',\n                      text: 'feature',\n                      disabled: features.length >= RANGE_NUM_FEATURES[1] && !is_selected_feature,\n                      selected: is_selected_feature,\n                      data_report: 'AI2-选择特征',\n                      cb: () => {\n                        if (features.length >= RANGE_NUM_FEATURES[1]) {\n                          show_notice({\n                            id: 'ai_lab/feature_maxmiun',\n                          });\n                          return false;\n                        }\n\n                        if (is_selected_feature) {\n                          return true;\n                        }\n\n                        if (is_selected_classfication) {\n                          this.setState({\n                            column_of_classification: undefined,\n                          });\n                        }\n\n                        this.handle_feature_add(i);\n                        return true;\n                      },\n                    },\n                    {\n                      type: 'item',\n                      text: 'classification',\n                      disabled: this.state.column_of_classification !== undefined && !is_selected_classfication,\n                      selected: is_selected_classfication,\n                      data_report: 'AI2-选择分类',\n                      cb: () => {\n                        if (is_selected_classfication) {\n                          return true;\n                        }\n\n                        if (this.state.column_of_classification !== undefined) {\n                          show_notice({\n                            id: 'ai_lab/classification_maxmiun',\n                          });\n                          return false;\n                        }\n\n                        if (is_selected_feature) {\n                          const found = features.find((f) => f.dropped_on === i);\n                          if (!found) {\n                            return false;\n                          }\n\n                          this.handle_feature_del(found.id);\n                        }\n\n                        this.setState({\n                          column_of_classification: i,\n                        });\n\n                        return true;\n                      },\n                    },\n                    {\n                      type: 'divider',\n                      text: 'divider',\n                      hide: !is_selected_feature && !is_selected_classfication,\n                    },\n                    {\n                      type: 'item',\n                      text: 'ai_lab/clear_selection',\n                      hide: !is_selected_feature && !is_selected_classfication,\n                      data_report: 'AI2-清空选择',\n                      cb: () => {\n                        if (is_selected_classfication) {\n                          this.setState({\n                            column_of_classification: undefined,\n                          });\n                          return true;\n                        }\n\n                        const found = features.find((f) => f.dropped_on === i);\n                        if (!found) {\n                          return false;\n                        }\n\n                        this.handle_feature_del(found.id);\n                        return true;\n                      },\n                    },\n                  ].map(({ type, text, cb, disabled, hide, selected, data_report }) => (\n                    type === 'item' ?\n                      <div\n                          key={text}\n                          styleName={`menu_item ${disabled ? 'disabled' : ''}`}\n                          style={\n                            hide ?\n                              { display: 'none' } :\n                              {}\n                          }\n                          className={`${disabled ? '' : 'th1-bg-hover-8'}`}\n                          data-report-click={data_report ? data_report : ''}\n                          onClick={\n                            () => {\n                              const should_close_dropdown = cb && cb();\n                              should_close_dropdown && this.setState({\n                                header_index_to_show_dropdown_menu: undefined,\n                              });\n                            }\n                          }\n                      >\n                        <div styleName=\"status\">\n                          {\n                            selected &&\n                            <div\n                                styleName=\"selected\"\n                                className=\"th1-bg-0\"\n                            />\n                          }\n                        </div>\n                        <div styleName=\"text\">\n                          {this.props.intl.formatMessage({ id: text })}\n                        </div>\n                      </div> :\n                      <div\n                          key={text}\n                          styleName=\"divider\"\n                          style={\n                            hide ?\n                              { display: 'none' } :\n                              {}\n                          }\n                      />\n                  ))\n                }\n              </div>\n            }\n          </div>\n        </th>,\n      );\n    }\n\n    return (\n      <div\n          styleName=\"table_header\"\n          className=\"th1-bg-6\"\n      >\n        <table>\n          <thead><tr>{table_headers}</tr></thead>\n        </table>\n      </div>\n    );\n  }\n\n  private render_table_content = () => {\n    const data_rows:JSX.Element[] = [];\n    if (this.state.rows && this.state.rows[0]) {\n      this.state.rows.forEach((row, row_index) => {\n        const is_even_row = row_index % 2 === 0;\n        data_rows.push(\n          <tr key={row_index}>\n            {\n              row.map((data_cell, column_index) =>\n                <td\n                    key={column_index}\n                    className={`${is_even_row ? 'th1-bg-8' : 'th1-bg-9'} th1-border-impt-7`}\n                >\n                  {data_cell}\n                </td>)\n            }\n          </tr>,\n        );\n      });\n    }\n\n    return (\n      <div styleName=\"scrollable-body\">\n        <table>\n          <tbody>{data_rows}</tbody>\n        </table>\n      </div>\n    );\n  }\n\n  private render_table = () => {\n    if (!(this.state.rows && this.state.rows[0])) { return; }\n\n    return (\n      <div styleName=\"table_container\">\n        <div\n            styleName=\"title\"\n            className=\"th1-bg-0 th1-text-10\"\n        >\n          {this.props.source_input && this.props.source_input.name}\n        </div>\n        {this.render_table_header()}\n        {this.render_table_content()}\n      </div>\n    );\n  }\n\n  private render_content = () => (\n    <div\n        styleName=\"content\"\n        className=\"th1-bg-9 th1-border-impt-7\"\n    >\n      {this.render_table()}\n    </div>\n  );\n\n  render() {\n    return (\n      <div styleName=\"main-content-wrapper\">\n        {this.render_header()}\n        {this.render_content()}\n      </div>\n    );\n  }\n}\n\nfunction map_state_to_props(state:StoreState) {\n  return {\n    source_input: state.main_state.chosen_data_set,\n    theme: state.main_state.theme,\n  };\n}\n\nfunction map_dispatch_to_props(dispatch:Dispatch) {\n  return bindActionCreators(\n    {\n      change_data,\n      change_classification,\n      change_feature,\n      choose_step,\n      set_training_status,\n      reset_data_flag,\n    },\n    dispatch);\n}\n\nexport const ImportDataComponent =\n  connect(map_state_to_props, map_dispatch_to_props)(injectIntl((ImportData)));\n","import * as React from 'react';\nimport './style.scss';\n\ninterface SwitchProps {\n  current_status:boolean;\n  set_status:(is_custom_mode:boolean) => void;\n  label?:string;\n  hint?:string;\n}\n\nexport class Switch extends React.Component<SwitchProps, {}> {\n  toggle_mode = () => {\n    this.props.set_status(!this.props.current_status);\n  }\n\n  render() {\n    return (\n      <div styleName=\"switch_container\">\n        <div styleName=\"switch_label\">\n          <div>{this.props.label}</div>\n          {this.props.hint && <div styleName=\"switch_container_hint\">{this.props.hint}</div>}\n        </div>\n        <label styleName=\"switch\">\n          <input\n              type=\"checkbox\"\n              name=\"mode\"\n              checked={this.props.current_status}\n              onChange={this.toggle_mode}\n          />\n          <span styleName=\"slider\" />\n        </label>\n      </div>\n    );\n  }\n}\n\nexport const SwitchComponent:React.ComponentClass<SwitchProps> = Switch;\n","import * as React from 'react';\nimport './style.scss';\n\ninterface DropdownProps {\n  label?:string;\n  current_selection:string | number;\n  selections:(string | number)[];\n  choose_callback:(selection:string | number) => void;\n  disabled:boolean;\n}\n\nexport class Dropdown extends React.Component<DropdownProps, {}> {\n  private set_selection = (selection:string|number) => {\n    if (selection === this.props.current_selection) {\n      return;\n    }\n\n    this.props.choose_callback(selection);\n    // Hide the dropdown menu\n    const current_focus = document.activeElement as HTMLDivElement;\n    if (!current_focus) { return; }\n    current_focus.blur();\n  }\n\n  render() {\n    return (\n      <div styleName=\"dropdown-wrapper\">\n        {this.props.label && <div styleName={`label ${this.props.disabled ? 'disabled' : ''}`}>{this.props.label}</div>}\n        <div\n            className=\"th1-border-focus-0 th1-border-impt-7\"\n            styleName={`input-area ${this.props.disabled ? 'disabled' : ''}`}\n            tabIndex={-1}\n        >\n          {this.props.current_selection}\n          <div\n              styleName=\"menu\"\n          >\n            {this.props.selections.map((selection, index) =>\n              <div\n                  styleName={`selection ${selection === this.props.current_selection ? 'selected' : ''}`}\n                  key={index}\n                  onClick={this.set_selection.bind(this, selection)}\n                  className=\"th1-bg-hover-9\"\n              >\n                {selection}\n              </div>)}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport const DropdownComponent:React.ComponentClass<DropdownProps> = Dropdown;\n","\nimport * as React from 'react';\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { InjectedIntlProps, injectIntl } from 'react-intl';\nimport { StoreState, change_hidden_layer } from '../../../redux';\nimport { ILayer, FullyConnLayer } from '../../../types';\n\nimport './style.scss';\n\nconst input_color = '#3DD1AE';\nconst transition_color = '#FF9948';\nconst svg_width = 415;\nconst in_out_dis = 70;\nconst top_dis = 28;\nconst neuron_d = 38;\nconst neuron_top_dis = top_dis + neuron_d;\n\nconst MAX_NUM_LAYERS = 4;\nconst MAX_NUM_NEURONS = 5;\nconst DEFAULT_NUM_NEURONS = 2;\n\nconst SINGLE_DIS_LEFT = (svg_width - neuron_d) / 2;\nconst arc_ratio = 0.75;\nconst arc_ratio_between_layers = 0.35;\n\ninterface DiagramProps extends InjectedIntlProps {\n  network_data:number[];\n  on_network_change:typeof change_hidden_layer;\n  is_training:boolean;\n  net:string;\n  is_custom_mode:boolean;\n}\ninterface DiagramState {\n  weight:number[][][];\n}\n\nclass NeuralNetworkDiagram extends React.PureComponent<DiagramProps, DiagramState> {\n  private neurons_area_width = svg_width - 2 * in_out_dis;\n  private dis_between_layers:number = (this.neurons_area_width - neuron_d) / (this.props.network_data.length - 1);\n\n  constructor(props:DiagramProps) {\n    super(props);\n    this.state = {\n      weight: [\n        [\n          [0.5, 0.5, 0.5, 0.5],\n        ],\n        [\n          [0.5, 0.5, 0.5, 0.5],\n          [0.5, 0.5, 0.5, 0.5],\n          [0.5, 0.5, 0.5, 0.5],\n          [0.5, 0.5, 0.5, 0.5],\n        ],\n        [\n          [0.5],\n          [0.5],\n          [0.5],\n          [0.5],\n        ],\n      ],\n    };\n  }\n\n  /** ***************** Logic ********************/\n  private on_add_neuron = (layer_index:number) => {\n    const hidden_layers = this.props.network_data;\n    if (hidden_layers[layer_index] >= MAX_NUM_NEURONS) { return; }\n    hidden_layers[layer_index]++;\n    this.props.on_network_change(hidden_layers);\n  }\n\n  private on_del_neuron = (layer_index:number) => {\n    const hidden_layers = this.props.network_data;\n    if (hidden_layers[layer_index] <= 1) { return; }\n    hidden_layers[layer_index] = hidden_layers[layer_index] - 1;\n    this.props.on_network_change(hidden_layers);\n  }\n\n  private on_add_layer = () => {\n    const hidden_layers = this.props.network_data;\n    if (hidden_layers.length >= MAX_NUM_LAYERS) { return; }\n    hidden_layers.push(DEFAULT_NUM_NEURONS);\n    this.dis_between_layers = (this.neurons_area_width - neuron_d) / (hidden_layers.length - 1);\n\n    this.props.on_network_change(hidden_layers);\n  }\n\n  private on_del_layer = () => {\n    const hidden_layers = this.props.network_data;\n    if (hidden_layers.length <= 1) { return; }\n    hidden_layers.pop();\n    this.dis_between_layers = (this.neurons_area_width - neuron_d) / (hidden_layers.length - 1);\n\n    this.props.on_network_change(hidden_layers);\n  }\n\n  /** ****************** Training Paras Controller ******************/\n  private get_layer_controller = () => {\n    // Cannot change network structure while training\n    const training_style:React.CSSProperties | undefined =\n      this.props.is_training && { opacity: 0.5, pointerEvents: 'none' } ||\n      undefined;\n    const controller_style = this.props.network_data.length === 1 ? { justifyContent: 'center' } : undefined;\n\n    const generate_btn_style = (is_clickable:boolean) => ((!this.props.is_custom_mode || is_clickable) ? 'disabled' : '');\n\n    return <div styleName=\"diagram-controller-container\">\n      <div styleName=\"diagram-title\">\n        {this.props.intl.formatMessage({ id: 'network_title' })}\n      </div>\n      <div styleName=\"controller-wrapper\" style={training_style}>\n        <div styleName=\"layer-controller\">\n          <div styleName=\"control-btn-group\">\n            <div styleName={`btn-add ${generate_btn_style(this.props.network_data.length >= MAX_NUM_LAYERS)}`} onClick={this.on_add_layer} />\n            <div styleName={`btn-del ${generate_btn_style(this.props.network_data.length <= 1)}`} onClick={this.on_del_layer} />\n          </div>\n          <div styleName=\"layer-info\">\n            {this.props.intl.formatMessage(\n              { id: 'num_of_hidden_layers' },\n              { number: this.props.network_data.length },\n            )}\n          </div>\n        </div>\n        <div styleName=\"neurons-controller\" style={controller_style}>\n          {this.props.network_data.map((val, index) => <div key={index} styleName=\"control-btn-group\">\n            <div styleName={`btn-add ${generate_btn_style(val >= MAX_NUM_NEURONS)}`}\n                onClick={this.on_add_neuron.bind(this, index)} />\n            <div styleName={`btn-del ${generate_btn_style(val <= 1)}`}\n                onClick={this.on_del_neuron.bind(this, index)} />\n          </div>)}\n        </div>\n      </div>\n    </div>;\n  }\n\n  /** ****************** SVG ******************/\n\n  /**\n   * Handle hidden layers setting change after training\n   * i.e. the net cannot be change immediately (the previous trained net should be kept)\n   * set 0.6 as default opacity of undefined edges\n   */\n  private get_opacity = (layer_i:number, prev_node_i:number, next_node_i:number) => (this.state.weight[layer_i] && this.state.weight[layer_i][prev_node_i] && 0.2 + 0.8 * this.state.weight[layer_i][prev_node_i][next_node_i]) ||\n      0.6\n  /// IN & OUT PATHS\n  private get_in_path = (index:number, distance:number = in_out_dis) => {\n    const opacity = this.get_opacity(0, 0, index);\n    const dx = arc_ratio * distance;\n    const end_x = distance;\n    const end_y = index * neuron_top_dis + neuron_d / 2;\n    return <path key={'in' + index} stroke={input_color} fill=\"transparent\" strokeDasharray=\"4,2\"\n        opacity={opacity}\n        styleName={this.props.is_training ? 'animate-path' : ''}\n        d={`M0 84 C ${dx} 84, ${end_x - dx} ${end_y}, ${end_x} ${end_y}`} />;\n  }\n\n  private get_out_path = (index:number, distance:number = in_out_dis) => {\n    const opacity = this.get_opacity(this.state.weight.length - 1, index, 0);\n    const dx = arc_ratio * distance;\n    const start_x = svg_width - distance;\n    const start_y = index * neuron_top_dis + neuron_d / 2;\n    const end_x = svg_width;\n    const end_y = 52;\n    return <path key={'out' + index} stroke={transition_color} fill=\"transparent\" strokeDasharray=\"4,2\"\n        opacity={opacity}\n        styleName={this.props.is_training ? 'animate-path' : ''}\n        d={`M${start_x} ${start_y} C ${start_x + dx} ${start_y}, ${end_x - dx} ${end_y}, ${end_x} ${end_y}`} />;\n  }\n\n  private get_in_out_paths = () => {\n    const paths = [];\n\n    if (this.props.network_data.length === 1) {\n      for (let i = 0; i < this.props.network_data[0]; i++) {\n        paths.push(this.get_in_path(i, SINGLE_DIS_LEFT));\n        paths.push(this.get_out_path(i, SINGLE_DIS_LEFT));\n      }\n      return paths;\n    }\n\n    for (let i = 0; i < this.props.network_data[0]; i++) {\n      paths.push(this.get_in_path(i));\n    }\n    for (let i = 0; i < this.props.network_data[this.props.network_data.length - 1]; i++) {\n      paths.push(this.get_out_path(i));\n    }\n    return paths;\n  }\n\n  /// //// NEURONS AND PATHS BETWEEN LAYERS\n\n  private get_neurons_and_paths = () => {\n    const dx = arc_ratio_between_layers * this.dis_between_layers;\n    const elements:JSX.Element[] = [];\n    this.props.network_data.forEach((num_neuron, layer_index) => {\n\n      if (this.props.network_data.length === 1) {\n        for (let i = 0; i < num_neuron; i++) {\n          const y = i * neuron_top_dis;\n          elements.push(<use key={`n${layer_index}-${i}`} x={SINGLE_DIS_LEFT} y={y} xlinkHref=\"#neuron\" />);\n        }\n        return;\n      }\n\n      const x = in_out_dis + layer_index * this.dis_between_layers;\n      const last_end_x = in_out_dis + (layer_index - 1) * this.dis_between_layers + neuron_d;\n      for (let i = 0; i < num_neuron; i++) {\n        const y = i * neuron_top_dis;\n        elements.push(<use key={`n${layer_index}-${i}`} x={x} y={y} xlinkHref=\"#neuron\" />);\n        if (layer_index === 0) { continue; }\n        const path_y = y + neuron_d / 2;\n        for (let last_i = 0; last_i < this.props.network_data[layer_index - 1]; last_i++) {\n          const last_path_y = last_i * neuron_top_dis + neuron_d / 2;\n          const opacity = this.get_opacity(layer_index, last_i, i);\n\n          elements.push(\n            <path key={`p${layer_index}-${last_i}-${i}`} stroke={transition_color} fill=\"transparent\" strokeDasharray=\"4,2\"\n                opacity={opacity}\n                styleName={this.props.is_training ? 'animate-path' : ''}\n                d={`M${last_end_x} ${last_path_y} C ${last_end_x + dx} ${last_path_y}, ${x - dx} ${path_y}, ${x} ${path_y}`} />);\n        }\n      }\n    });\n    return elements;\n  }\n\n  private get_diagram = () => (\n    <svg width=\"415\" height=\"300\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" key=\"neuron\">\n      <defs>\n        <circle id=\"path-1\" cx=\"13.4210526\" cy=\"13.4210526\" r=\"13.4210526\"></circle>\n        <linearGradient x1=\"50%\" y1=\"0%\" x2=\"54.3927209%\" y2=\"39.8901054%\" id=\"linearGradient-3\">\n          <stop stopColor=\"#FFC97E\" stopOpacity=\"0\" offset=\"0%\"></stop>\n          <stop stopColor=\"#FF9948\" offset=\"100%\"></stop>\n        </linearGradient>\n        <filter x=\"-12.5%\" y=\"-11.8%\" width=\"125.0%\" height=\"123.5%\" filterUnits=\"objectBoundingBox\" id=\"filter-4\">\n          <feGaussianBlur stdDeviation=\"1.57894737\" in=\"SourceGraphic\"></feGaussianBlur>\n        </filter>\n        <linearGradient x1=\"92.985509%\" y1=\"94.4351722%\" x2=\"28.4162663%\" y2=\"5.56482775%\" id=\"linearGradient-5\">\n          <stop stopColor=\"#0090FF\" stopOpacity=\"0\" offset=\"0%\"></stop>\n          <stop stopColor=\"#007EFF\" offset=\"56.2768241%\"></stop>\n          <stop stopColor=\"#0057FF\" offset=\"100%\"></stop>\n        </linearGradient>\n        <filter x=\"-38.7%\" y=\"-41.1%\" width=\"177.4%\" height=\"182.1%\" filterUnits=\"objectBoundingBox\" id=\"filter-6\">\n          <feGaussianBlur stdDeviation=\"3.15789474\" in=\"SourceGraphic\"></feGaussianBlur>\n        </filter>\n        <g stroke=\"none\" id=\"neuron\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n          <g transform=\"translate(4.000000, 4.000000)\">\n            <g transform=\"translate(1.578947, 1.578947)\">\n              <mask id=\"mask-2\" fill=\"white\">\n                <use xlinkHref=\"#path-1\" />\n              </mask>\n              <g id=\"Mask\">\n                <use fill=\"#3DD1AE\" xlinkHref=\"#path-1\" />\n                <use fill=\"#FFFFFF\" xlinkHref=\"#path-1\" />\n              </g>\n              <path d=\"M16.1842105,48.1578947 C25.9945317,48.1578947 33.9473684,40.2050581 33.9473684,30.3947368 C33.9473684,23.8545227 32.1052632,16.3545227 28.4210526,7.89473684 C22.7309144,11.8518951 18.651967,14.483474 16.1842105,15.7894737 C4.7900327,21.8195631 -3.94736842,8.4845603 -3.94736842,13.4210526 C-3.94736842,23.2313738 6.37388931,48.1578947 16.1842105,48.1578947 Z\" fill=\"url(#linearGradient-3)\" filter=\"url(#filter-4)\" mask=\"url(#mask-2)\"></path>\n              <path d=\"M7.5,19.7368421 C10.8348322,19.7368421 11.3288396,15.6965422 13.4210526,13.4210526 C15.2952773,11.3826472 20.5263158,4.5663222 20.5263158,1.57894737 C20.5263158,-4.74325964 13.822207,-3.15789474 7.5,-3.15789474 C1.177793,-3.15789474 -3.94736842,1.96726668 -3.94736842,8.28947368 C-3.94736842,14.6116807 1.177793,19.7368421 7.5,19.7368421 Z\" fill=\"url(#linearGradient-5)\" filter=\"url(#filter-6)\" mask=\"url(#mask-2)\"></path>\n            </g>\n            <path d=\"M15,30 C23.2842712,30 30,23.2842712 30,15 C30,6.71572875 23.2842712,0 15,0 C6.71572875,0 0,6.71572875 0,15 C0,23.2842712 6.71572875,30 15,30 Z\" stroke=\"#FF9948\" strokeWidth=\"0.789473684\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeDasharray=\"0.7894736842105263,1.578947368421053\"></path>\n          </g>\n        </g>\n\n      </defs>\n      {this.get_in_out_paths()}\n      {this.get_neurons_and_paths()}\n    </svg>)\n\n  /**\n   * Compute weight of every path based on the net resulted from convnetjs trainer.\n   * **Do not make any change without fully understanding of this function**\n   * @param net the stringified net from convnetjs\n   */\n  private update_weight(net:string) {\n    const fc_layers:FullyConnLayer[] = JSON.parse(net).layers.filter((layer:ILayer) => layer.layer_type === 'fc');\n    const filters_range = [Infinity, -Infinity];\n    const filters = fc_layers.map((fc_layer, index) => {\n      let _filter:number[][] = [];\n      if (index === 0) {// input -> first hidden layer, reduce weight\n        // original weight structure: num_of_classifications -> num_node_of_first_hidden_layer\n        // should be converted to\n        // 1 (only one input illustration) -> num_node_of_first_hidden_layer\n        _filter = [fc_layer.filters.map((filter) => {\n          let t = 0;\n          let n = 0;\n          for (const key in filter.w) {\n            t += filter.w[key];\n            n++;\n          }\n          const num = t / n;\n          filters_range[0] = Math.min(filters_range[0], num);\n          filters_range[1] = Math.max(filters_range[1], num);\n          return num;\n        })];\n      } else if (index === fc_layers.length - 1) { // last hidden layer -> output, reduce weight\n        // original weight structure: num_node_of_last_hidden_layer -> num_of_classifications\n        // should be converted to\n        // num_node_of_last_hidden_layer -> 1 (only one output illustration)\n        for (let i = 0; i < fc_layer.num_inputs; i++) {\n          let t = 0;\n          fc_layer.filters.forEach((filter) => {\n            t += filter.w[i];\n          });\n          const num = t / fc_layer.filters.length;\n          filters_range[0] = Math.min(filters_range[0], num);\n          filters_range[1] = Math.max(filters_range[1], num);\n          _filter[i] = [num];\n        }\n      } else {\n        for (let last_node_i = 0; last_node_i < fc_layer.num_inputs; last_node_i++) {\n          _filter[last_node_i] = [];\n          fc_layer.filters.forEach((filter, next_node_i) => {\n            const num = filter.w[last_node_i];\n            filters_range[0] = Math.min(filters_range[0], num);\n            filters_range[1] = Math.max(filters_range[1], num);\n            _filter[last_node_i][next_node_i] = num;\n          });\n        }\n      }\n      return _filter;\n    });\n\n    // justify range to [0, 1]\n    const justify_range = (num:number) => (num - filters_range[0]) / (filters_range[1] - filters_range[0]);\n    const weight = filters.map((layer) => layer.map((last_node) => last_node.map((next_node) => justify_range(next_node))));\n    this.setState({ weight });\n  }\n\n  UNSAFE_componentWillReceiveProps(next_props:DiagramProps) {\n    if (next_props.is_training && next_props.net && next_props.net !== this.props.net) {\n      this.update_weight(next_props.net);\n    }\n\n    if (next_props.network_data.length !== this.props.network_data.length) {\n      this.dis_between_layers = (this.neurons_area_width - neuron_d) / (next_props.network_data.length - 1);\n    }\n  }\n\n  render() {\n    return <div styleName=\"diagram-container\">\n      {this.get_layer_controller()}\n      {this.get_diagram()}\n    </div>;\n  }\n}\n\nfunction map_state_to_props(state:StoreState) {\n  return {\n    network_data: state.model_state.hidden_layers,\n    is_training: state.training_state.training_status === 'training',\n    net: state.model_state.net,\n    is_custom_mode: state.training_state.is_custom_mode,\n  };\n}\n\nfunction map_dispatch_to_props(dispatch:Dispatch) {\n  return bindActionCreators(\n    {\n      on_network_change: change_hidden_layer,\n    },\n    dispatch);\n}\n\nexport const NNDiagramComponent =\n  connect(\n    map_state_to_props,\n    map_dispatch_to_props,\n  )(injectIntl((NeuralNetworkDiagram)));\n","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { InjectedIntlProps, injectIntl } from 'react-intl';\nimport { StoreState } from '../../../redux';\nimport './style.scss';\n\ninterface ResultProps extends InjectedIntlProps {\n  current_training_times:number;\n  current_acc:number;\n  current_loss:number;\n}\n\nclass ResultDemonstrator extends React.Component<ResultProps, {}> {\n  render() {\n    return <div styleName=\"result-demonstrator\">\n      <div styleName=\"info-title\">\n        {this.props.intl.formatMessage({ id: 'epoch' })}\n      </div>\n      <div styleName=\"info-content\">\n        <div styleName=\"num-training\">{this.props.current_training_times}</div>\n        <div styleName=\"training-times\">\n          {this.props.intl.formatMessage({ id: 'times' })}\n        </div>\n      </div>\n      <div styleName=\"info-title\">\n        {this.props.intl.formatMessage({ id: 'accuracy' })}\n      </div>\n      <div styleName=\"info-content\">\n        <div styleName=\"accuracy\">{(this.props.current_acc * 100).toFixed(2)}</div>\n        <div styleName=\"acc-percent\">%</div>\n      </div>\n      <div styleName=\"info-title\">\n        {this.props.intl.formatMessage({ id: 'loss' })}\n      </div>\n      <div styleName=\"info-content\">\n        <div styleName=\"loss\">{(this.props.current_loss * 100).toFixed(2)}</div>\n        <div styleName=\"loss-percent\">%</div>\n      </div>\n    </div>;\n  }\n}\n\nfunction map_state_to_props(state:StoreState) {\n  return {\n    current_training_times: state.training_state.current_training_times,\n    current_acc: state.training_state.current_acc,\n    current_loss: state.training_state.current_loss,\n  };\n}\n\nexport const ResultDemonstratorComponent =\n  connect(\n    map_state_to_props,\n  )(injectIntl((ResultDemonstrator)));\n","import * as React from 'react';\nimport { injectIntl, InjectedIntlProps } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { cloneDeep } from 'lodash';\nimport { StoreState } from '../../../redux';\nimport { machine_learning } from '../../../controllers';\nimport { is_valid_number } from '../../../models/utils';\nimport { show_notice } from '../../../connected_deps';\n\nimport './style.scss';\ninterface Props extends InjectedIntlProps {\n  features:string[];\n  classifications:string[];\n}\ninterface State {\n  probabilities:number[];\n  minimized:boolean;\n  input:string[];\n}\n\nclass AIModelTest extends React.Component<Props, State> {\n  private last_value:string | number;\n\n  constructor(props:Props) {\n    super(props);\n    this.state = {\n      probabilities: [],\n      minimized: false,\n      input: Array(this.props.features.length).fill('0'),\n    };\n  }\n\n  private handle_input_change = (index:number, new_val:string) => {\n    const input = cloneDeep(this.state.input);\n    input[index] = new_val;\n    this.setState({\n      input,\n    });\n  }\n\n  private get_input_area() {\n    const inputs = this.props.features.map((feature, index) => <div styleName=\"feature-wrapper\" key={index}>\n      <div styleName=\"feature-label\">{feature}</div>\n      <div styleName=\"feature-input\">\n        <input\n            type=\"text\"\n            className=\"th1-border-impt-6\"\n            value={this.state.input[index]}\n            onChange={(e) => {\n              // Prevent the non-minus, non-number and non-dot chars being input\n              const new_val = e.target.value.replace(/[^\\-\\d.]/g, '');\n              this.handle_input_change(index, new_val);\n            }}\n            onFocus={(e) => { this.last_value = e.target.value; }}\n            onBlur={(e) => {\n              let val;\n              if (is_valid_number(e.target.value)) {\n                val = String(parseFloat(e.target.value));\n              } else {\n                val = this.last_value;\n              }\n              val = String(val);\n\n              this.handle_input_change(index, val);\n            }} />\n      </div>\n    </div>);\n    return <div styleName=\"feature-area\">{inputs}</div>;\n  }\n\n  private get_result() {\n    if (this.state.probabilities.length === 0) { return; }\n    const result = this.props.classifications.map((classification, index) => ({ classification, prob: this.state.probabilities[index] }));\n    result.sort((x, y) => y.prob - x.prob);\n    const result_list = result.map((res, index) => {\n      const res_prob = res.prob * 100.0;\n\n      return <div styleName=\"line\" key={index}>\n        <div styleName=\"res-area-content\">\n          <div styleName=\"classification\">{res.classification}</div>\n        </div>\n        <div styleName=\"res-area-content\">{`${isNaN(res_prob) ? 0 : res_prob.toFixed(2) }%`}</div>\n      </div>;\n    });\n    result_list.unshift(\n      <div styleName=\"line\" key=\"title\">\n        <div styleName=\"res-area-header\">\n          {this.props.intl.formatMessage({ id: 'classification' })}\n        </div>\n        <div styleName=\"res-area-header\">\n          {this.props.intl.formatMessage({ id: 'probability' })}\n        </div>\n      </div>,\n    );\n    return <div styleName=\"res-wrapper\">\n      <div styleName=\"res-header\">\n        {this.props.intl.formatMessage({ id: 'result' })}\n        <div styleName=\"res-header-notice\">\n          <span\n              styleName=\"res\"\n              className=\"th1-text-0 th1-text-s2\"\n          >\n            {result[0].classification}\n          </span></div>\n      </div>\n      <div styleName=\"res-area\">{result_list}</div>\n    </div>;\n  }\n\n  render() {\n    return (\n      this.state.minimized ?\n        <div\n            className=\"th1-bg-9\"\n            styleName=\"expand-wrapper\"\n            onClick={() => { this.setState({ minimized: false }); }}\n        >\n          <div styleName=\"expand\" />\n        </div> :\n        <div styleName=\"test-wrapper\">\n          <div\n              styleName=\"test-header\"\n              className=\"th1-border-impt-0 th1-bg-8\"\n          >\n            {this.props.intl.formatMessage({ id: 'test' })}\n          </div>\n          {this.get_input_area()}\n          <div styleName=\"btn_wrapper\">\n            <div\n                styleName=\"btn-test\"\n                key=\"test\"\n                className=\"th1-bg-0\"\n                data-report-click=\"AI2-测试\"\n                onClick={() => {\n                  const input = this.state.input.map(parseFloat);\n\n                  if (\n                    input.some((feature) => isNaN(feature))\n                  ) {\n                    show_notice({\n                      id: 'feature_is_needed_to_predict',\n                    });\n                    return;\n                  }\n\n                  const probabilities = machine_learning.predict(input);\n                  this.setState({ probabilities });\n                }}>\n              {this.props.intl.formatMessage({ id: 'test' })}\n            </div>\n          </div>\n          {this.get_result()}\n          <div styleName=\"minimize\" onClick={() => { this.setState({ minimized: true }); }} />\n        </div>\n    );\n  }\n}\n\nfunction map_state_to_props(state:StoreState) {\n  return {\n    features: state.model_state.features,\n    classifications: state.model_state.classifications,\n  };\n}\n\nfunction map_dispatch_to_props(dispatch:Dispatch) {\n  return bindActionCreators(\n    {\n    },\n    dispatch);\n}\n\nexport const AIModelTestComponent = connect(map_state_to_props, map_dispatch_to_props)(injectIntl((AIModelTest)));","import * as React from 'react';\nimport { injectIntl, InjectedIntlProps } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { bindActionCreators, Dispatch } from 'redux';\n\nimport {\n  StoreState, choose_step, set_net,\n  set_training_status, refresh_training_result,\n  set_start_time, set_custom_mode,\n  set_num_training_iterations, set_learning_rate,\n} from '../../redux';\nimport { SwitchComponent, DropdownComponent } from '../../components';\nimport { machine_learning, HeatMap, Example2D, LineChart } from '../../controllers';\nimport {\n  TrainingStep, CLASS_COLORS, TrainingStatus, DrawData,\n  SIZE_PREVIEW, ACC_LINE_COLOR, LOSS_LINE_COLOR,\n  RANGE_TRAINING_ITERATIONS, RANGE_LEARNING_RATE, LastStepBeforeSaving,\n} from '../../models/def';\nimport { ModelNameComponent } from '../model_name';\nimport { report_event } from '../../connected_deps';\nimport { NNDiagramComponent } from './nn_diagram';\nimport { ResultDemonstratorComponent } from './result_demonstrator';\nimport { AIModelTestComponent } from './model_test';\n\nimport './style.scss';\n\nconst WIDTH_PREVIEW = 230;\n\ninterface Props extends InjectedIntlProps {\n  current_step:TrainingStep;\n  choose_step:typeof choose_step;\n\n  training_status:TrainingStatus;\n  set_training_status:typeof set_training_status;\n\n  training_started_at:undefined | Date;\n  set_start_time:typeof set_start_time;\n\n  is_custom_mode:boolean;\n  set_custom_mode:typeof set_custom_mode;\n  num_training_iterations:number;\n  set_num_training_iterations:typeof set_num_training_iterations;\n  learning_rate:number;\n  set_learning_rate:typeof set_learning_rate;\n\n  hidden_layers:number[];\n\n  refresh_training_result:typeof refresh_training_result;\n\n  classifications:string[];\n  data:(string | number)[][][];\n  valid_rows:number[][];\n\n  features:string[];\n  set_net:typeof set_net;\n  data_flag:string;\n}\n\ninterface OwnProps {\n  save_and_close:(save_data:boolean, last_step?:LastStepBeforeSaving) => void;\n}\n\ninterface OwnState {\n  just_reset:boolean;\n}\n\nclass Train extends React.PureComponent<Props & OwnProps, OwnState> {\n  private heat_map:HeatMap;\n  private line_chart:LineChart;\n\n  constructor(props:Props & OwnProps) {\n    super(props);\n\n    this.state = {\n      just_reset: false,\n    };\n  }\n\n  private set_custom_mode = (is_custom:boolean) => {\n    is_custom ?\n      report_event('AI2-开启手动调参') :\n      report_event('AI2-关闭手动调参');\n\n    this.props.set_custom_mode(is_custom);\n  }\n\n  private get_controllers() {\n    const sdate = this.props.training_started_at;\n    const start_time =\n      (sdate && sdate.toLocaleString(undefined, { hour12: false })) || '';\n\n    let training_title = this.props.intl.formatMessage({ id: 'start_to_train' });\n    let training_subtitle = start_time;\n    let btn_class = 'btn-start';\n\n    if (!this.props.is_custom_mode) { // auto training mode\n      if (this.props.training_status === 'training') {\n        training_title = this.props.intl.formatMessage({ id: 'traininging' });\n        training_subtitle = this.props.intl.formatMessage({ id: 'training_subtitle' });\n        btn_class = 'btn-loading-stop';\n      }\n    } else { // custom mode, cannot stop manually\n      switch (this.props.training_status) {\n        case 'training':\n          training_title = this.props.intl.formatMessage({ id: 'traininging' });\n          btn_class = 'btn-loading';\n          break;\n        case 'stopped':\n          training_title = this.props.intl.formatMessage({ id: 'continue_to_train' });\n          break;\n      }\n    }\n\n    // Cannot change custom parameters while training\n    const training_style:React.CSSProperties | undefined =\n      this.props.training_status === 'training' && { opacity: 0.5, pointerEvents: 'none' } ||\n      undefined;\n\n    return (\n      <div styleName=\"training-controller-wrapper\">\n        <div styleName=\"start-btn-wrapper\">\n          {this.props.is_custom_mode && this.props.training_status === 'stopped' &&\n            <div\n                styleName=\"btn-restart\"\n                onClick={this.reset_data}\n            >\n              <div styleName={`btn-restart-hint ${this.props.intl.locale === 'en' ? 'en' : ''}`}>{ this.props.intl.formatMessage({ id: 'restart_trainging_hint' }) }</div>\n            </div>}\n          <div\n              styleName={btn_class}\n              onClick={this.change_training_status}\n          />\n          <div styleName=\"start-content\">\n            <div styleName=\"training-state\">{training_title}</div>\n            {training_subtitle && <div styleName=\"start-time\">{training_subtitle}</div>}\n          </div>\n        </div>\n        <div\n            styleName=\"custom-mode-wrapper\"\n            style={training_style}\n        >\n          <SwitchComponent\n              current_status={this.props.is_custom_mode}\n              label={this.props.intl.formatMessage({ id: 'custom_mode' })}\n              set_status={this.set_custom_mode}\n              hint={this.props.intl.formatMessage({ id: 'custom_mode_hint' })}\n          />\n          {this.get_training_parameters()}\n        </div>\n        <div\n            styleName=\"edit_data_btn\"\n            className=\"th1-text-0 th1-text-s2 th1-border-impt-1 th1-text-hover-10 th1-bg-hover-0 th1-border-hover-0 th1-bg-active-m2 th1-border-active-m2 th1-text-active-10\"\n            data-report-click=\"AI2-编辑数据\"\n            onClick={this.props.choose_step.bind(this, TrainingStep.EDITING_DATA)}\n        >\n          {this.props.intl.formatMessage({ id: 'edit_data' })}\n        </div>\n      </div>\n    );\n  }\n\n  private get_training_parameters() {\n    return (\n      <div styleName=\"custom-parameters-wrapper\">\n        <DropdownComponent\n            label={this.props.intl.formatMessage({ id: 'epoch' })}\n            selections={RANGE_TRAINING_ITERATIONS}\n            current_selection={this.props.is_custom_mode ? this.props.num_training_iterations : this.props.intl.formatMessage({ id: 'arbitrary' })}\n            choose_callback={this.props.set_num_training_iterations}\n            disabled={!this.props.is_custom_mode} />\n        <DropdownComponent\n            label={this.props.intl.formatMessage({ id: 'learning_rate' })}\n            selections={RANGE_LEARNING_RATE}\n            current_selection={this.props.learning_rate}\n            choose_callback={(learning_rate:number) => {\n              this.reset_data();\n              this.props.set_learning_rate(learning_rate);\n            }}\n            disabled={!this.props.is_custom_mode} />\n      </div>\n    );\n  }\n\n  private get_training_previews = () => (\n    <div\n        styleName=\"training-preview-wrapper\"\n        className=\"th1-bg-9\"\n    >\n      {this.get_input_view()}\n      <NNDiagramComponent />\n      {this.get_result_view()}\n    </div>\n  );\n\n  private get_input_view = () => (\n    <div styleName=\"input-view\">\n      <div styleName=\"input-title\">\n        {this.props.intl.formatMessage({ id: 'input_title' })}\n      </div>\n      <div styleName=\"input-pic\" />\n    </div>\n  );\n\n  private get_result_view = () => (\n    <div styleName=\"result-view\">\n      <div styleName=\"result-title\">\n        {this.props.intl.formatMessage({ id: 'result_title' })}\n      </div>\n      <div styleName=\"result-content\">\n        <div styleName=\"result-left\">\n          <div\n              styleName=\"result-preview\"\n              id=\"heatmap\"\n          >\n            {\n              this.props.features.length > 2 &&\n              <div styleName=\"feature-notice\">\n                {\n                  this.props.intl.formatMessage({ id: 'features_count_is_more_than_2_and_unable_to_show_result_pic' })\n                    .split('|')\n                    .map((text) => <div key={text}>{text}</div>)\n                }\n              </div>\n            }\n          </div>\n          <div styleName=\"preview-info\">\n            {this.props.classifications.map((classification, index) => {\n              const color_style = { background: CLASS_COLORS[index] };\n              const wrap_style = this.props.classifications.length > 2 ? { width: '96px' } : undefined;\n              return (\n                <div\n                    styleName=\"info-wrapper\"\n                    style={wrap_style}\n                    key={index}\n                >\n                  <div\n                      styleName=\"color\"\n                      style={color_style}\n                  />\n                  <div styleName=\"name\">{classification}</div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n        <div styleName=\"result-right\">\n          <ResultDemonstratorComponent />\n          <div\n              styleName=\"numbers-preview\"\n              id=\"linechart\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n\n  /** **************************** LOGIC ******************************/\n  /**\n   * Init all training callback funtions and two diagrams.\n   * Sould be called **only once**\n   */\n  private init_training = () => {\n    const report_finish = () => {\n      const status = this.state.just_reset ? 'wait_start' : 'stopped';\n      this.props.set_training_status(status);\n    };\n    const report_per_round = (current_training_times:number, current_acc:number, current_loss:number, draw_data:DrawData[][], net:string) => {\n      this.heat_map.updateBackground(draw_data);\n      this.props.set_net(net);\n\n      this.props.refresh_training_result(\n        current_training_times,\n        current_acc,\n        current_loss,\n      );\n\n      if (!isNaN(current_acc) && !isNaN(current_loss)) {\n        this.line_chart.addDataPoint([current_acc, current_loss]);\n      }\n    };\n    machine_learning.set_round_callback(report_per_round);\n    machine_learning.set_callback_function(report_finish);\n\n    this.heat_map = new HeatMap(WIDTH_PREVIEW, SIZE_PREVIEW, '#heatmap');\n    this.line_chart = new LineChart('#linechart', [ACC_LINE_COLOR, LOSS_LINE_COLOR]);\n  }\n\n  private get_valid_data = (ori_data:(string|number)[][][], valid_rows:number[][]) => {\n    const is_data_in_valid_rows = (class_idx:number, row_idx:number) => valid_rows[class_idx] && valid_rows[class_idx].indexOf(row_idx) >= 0;\n\n    return ori_data\n      .map(\n        (class_data, class_idx) => class_data.filter((row_data, row_idx) => is_data_in_valid_rows(class_idx, row_idx)),\n      );\n  }\n\n  /**\n   * Reset the data domain, axes and data points of heatmap\n   */\n  private reset_heatmap(features:string[], valid_data:(string|number)[][][], domains:[number, number][]) {\n    if (features.length !== 2) { return; } // supports 2 features only\n    const train_data:Example2D[] = [];\n    valid_data.forEach((classification_data, class_index) => {\n      classification_data.forEach((data_row) => {\n        train_data.push({ x: Number(data_row[0]), y: Number(data_row[1]), label: class_index });\n      });\n    });\n\n    this.heat_map.resetPoints(domains[0], domains[1], train_data, features);\n  }\n\n  /**\n   * Things happen when click control btn\n   */\n  private change_training_status = () => {\n    if (!this.props.is_custom_mode) { // auto training mode\n      if (this.props.training_status === 'training') {\n        report_event('AI2-停止训练');\n        machine_learning.stop(false);\n      } else { // wait_start or stopped\n        // 除了从未训练过时（即当前heatmap为随机神经网络的预览图），都要重置\n        report_event('AI2-开始训练');\n        this.start_training(!!this.props.training_started_at);\n      }\n    } else { // custom mode, cannot stop manually\n      if (this.props.training_status === 'wait_start' || this.state.just_reset) {\n        this.start_training(true);\n      } else if (this.props.training_status !== 'training') {\n        this.start_training(false);\n      }\n    }\n  }\n\n  /**\n   * Start a train.\n   * When required (should_reset === true), reset the status of machine learning class, including history accuracy and loss, net, etc.\n   * If no training has been started at this time of use, should_reset should be true to init related parameters.\n   */\n  private start_training = (should_reset:boolean) => {\n    this.setState({\n      just_reset: false,\n    });\n    const current_date = new Date();\n    this.props.set_training_status('training');\n    this.props.set_start_time(current_date);\n\n    if (should_reset) {\n      const valid_data = this.get_valid_data(this.props.data, this.props.valid_rows);\n      const new_domains = machine_learning.set_training_data(valid_data, this.props.features.length);\n      this.reset_heatmap(this.props.features, valid_data, new_domains);\n      this.line_chart.reset();\n    }\n\n    machine_learning.set_trainer_params(\n      this.props.is_custom_mode,\n      this.props.num_training_iterations,\n      this.props.learning_rate,\n    );\n    machine_learning.start(should_reset);\n  }\n\n  private reset_data = () => {\n    this.line_chart.reset();\n    machine_learning.reset_data();\n    this.setState(\n      {\n        just_reset: true,\n      },\n      () => {\n        this.props.set_training_status('wait_start');\n      },\n    );\n  }\n\n  private get_training_footer = () => {\n    const is_stopped = this.props.training_status === 'stopped';\n\n    return (\n      <div styleName=\"content-footer\">\n        <div styleName=\"tips\">\n          {this.props.intl.formatMessage({ id: 'training_tips' })}\n        </div>\n        <div styleName=\"btn-group\">\n          <ModelNameComponent />\n          {\n            <div\n                styleName={is_stopped ? 'btn-positive' : 'btn-negative'}\n                className={is_stopped ? 'th1-bg-0' : ''}\n                onClick={\n                  is_stopped ?\n                    () => {\n                      report_event('AI2-完成训练');\n                      this.props.save_and_close(true, LastStepBeforeSaving.FinishTraining);\n                    } :\n                    undefined\n                }\n            >\n              {this.props.intl.formatMessage({ id: 'complete' })}\n            </div>\n          }\n        </div>\n      </div>\n    );\n  };\n\n  /** **************************** REACT LIFTCYCLE ***************************/\n\n  UNSAFE_componentWillReceiveProps(next_props:Props) {\n    if (next_props.current_step === TrainingStep.TRAINING &&\n        next_props.hidden_layers !== this.props.hidden_layers) {\n      machine_learning.set_hidden_layers(this.props.hidden_layers);\n      // Real-time refresh heatmap when changing hidden layers if no train has been performed\n      if (!this.props.training_started_at) {\n        machine_learning.preview();\n      }\n      machine_learning.stop();\n      this.props.set_training_status('wait_start');\n    }\n\n    // // If not trained yet, reset the preview diagram when entering training step\n    // if (this.props.current_step !== TrainingStep.TRAINING && next_props.current_step === TrainingStep.TRAINING) {\n    //   const should_preview = !this.props.training_started_at;\n    //   const valid_data = this.get_valid_data(next_props.data, next_props.valid_rows);\n    //   const new_domains = machine_learning.set_training_data(valid_data, next_props.features.length);\n    //   this.reset_heatmap(next_props.features, valid_data, new_domains);\n    //   if (should_preview) {\n    //     machine_learning.preview();\n    //   }\n    // }\n\n    // 改变数据会清零并且重新画图\n    if (\n      this.props.data_flag !== next_props.data_flag\n    ) {\n      // 清除旧的图并生成新的实例\n      this.heat_map.destroy();\n      this.heat_map = new HeatMap(WIDTH_PREVIEW, SIZE_PREVIEW, '#heatmap');\n\n      // 设置新的数据\n      const valid_data = this.get_valid_data(next_props.data, next_props.valid_rows);\n      const new_domains = machine_learning.set_training_data(valid_data, next_props.features.length);\n      this.reset_heatmap(next_props.features, valid_data, new_domains);\n\n      // 重置模型数据并更新视图\n      machine_learning.stop();\n      this.reset_data();\n      machine_learning.preview();\n    }\n  }\n\n  componentDidMount() {\n    this.init_training();\n  }\n\n  render() {\n    const is_show_test_area = this.props.training_status === 'stopped' && !this.state.just_reset;\n\n    return (\n      <div styleName=\"main-content-wrapper\">\n        {this.get_controllers()}\n        {this.get_training_previews()}\n        {this.get_training_footer()}\n        {is_show_test_area && <AIModelTestComponent />}\n        {/* FIXME should not show when the model is reset (by editing data or hidden layers organization) */}\n      </div>\n    );\n  }\n}\n\nfunction map_state_to_props(state:StoreState, props:OwnProps) {\n  return {\n    current_step: state.main_state.current_step,\n    classifications: state.model_state.classifications,\n\n    training_status: state.training_state.training_status,\n    training_started_at: state.training_state.training_started_at,\n\n    is_custom_mode: state.training_state.is_custom_mode,\n    num_training_iterations: state.training_state.num_training_iterations,\n    learning_rate: state.training_state.learning_rate,\n    hidden_layers: state.model_state.hidden_layers,\n\n    data: state.data_state.data,\n    valid_rows: state.data_state.valid_rows,\n    features: state.model_state.features,\n    data_flag: state.training_state.data_flag,\n  };\n}\n\nfunction map_dispatch_to_props(dispatch:Dispatch) {\n  return bindActionCreators(\n    {\n      choose_step,\n      set_training_status,\n      refresh_training_result,\n      set_start_time,\n      set_net,\n      set_custom_mode,\n      set_num_training_iterations,\n      set_learning_rate,\n    },\n    dispatch);\n}\n\nexport const TrainComponent =\n  connect(map_state_to_props, map_dispatch_to_props)(injectIntl((Train)));\n","import * as React from 'react';\nimport { connect } from 'react-redux';\n\nimport { StoreState } from '../redux';\nimport { TrainingStep, TrainingStatus, LastStepBeforeSaving } from '../models/def';\nimport { EditDataComponent } from './edit_data';\nimport { DataSetComponent } from './data_set_library';\nimport { ImportDataComponent } from './import_data';\nimport { TrainComponent } from './train';\n\nimport './common.scss';\n\ninterface ContentProps {\n  current_step:TrainingStep;\n  training_status:TrainingStatus;\n}\n\ninterface OwnProps {\n  save_and_close:(save_data:boolean, last_step?:LastStepBeforeSaving) => void;\n}\n\nclass LabContent extends React.PureComponent<ContentProps & OwnProps, {}> {\n\n  render() {\n    return (\n      <div\n          styleName=\"content-wrapper\"\n          id=\"ai_lab_content\"\n      >\n        <TrainComponent save_and_close={this.props.save_and_close}/>\n        {this.props.current_step === TrainingStep.EDITING_DATA && <EditDataComponent save_and_close={this.props.save_and_close}/>}\n        {this.props.current_step === TrainingStep.CHOOSING_DATA_SET && <DataSetComponent />}\n        {this.props.current_step === TrainingStep.IMPORTING && <ImportDataComponent />}\n      </div>\n    );\n  }\n}\n\nfunction map_state_to_props(state:StoreState, own_pros:OwnProps) {\n  return {\n    current_step: state.main_state.current_step,\n    training_status: state.training_state.training_status,\n  };\n}\n\nexport const AILabContent =\n  connect(map_state_to_props, {})((LabContent));","import * as React from 'react';\nimport { injectIntl, InjectedIntlProps } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { StoreState, close_confirm_dialog } from '../../redux';\n\nimport './style.scss';\n\ninterface ConnectedProps extends InjectedIntlProps {\n  confirm_callback:Function;\n  title:string;\n  content:string;\n  pos_btn:string;\n  neg_btn:string;\n  close_confirm_dialog:typeof close_confirm_dialog;\n}\n\nclass Confirm extends React.Component<ConnectedProps> {\n  render() {\n    return (\n      <div styleName=\"dialog-container\">\n        <div\n            styleName=\"mask\"\n            onClick={this.props.close_confirm_dialog} />\n        <div styleName=\"dialog-wrapper\">\n          <div styleName=\"dialog-title\">\n            {this.props.title}\n          </div>\n          <div styleName=\"dialog-content\">\n            {this.props.content}\n          </div>\n          <div styleName=\"btn-group\">\n            {this.props.neg_btn &&\n            <div\n                styleName=\"btn negative left\"\n                onClick={this.props.close_confirm_dialog}>\n              {this.props.neg_btn }\n            </div>}\n            <div\n                styleName=\"btn positive\"\n                onClick={() => { this.props.confirm_callback(); this.props.close_confirm_dialog(); }}>\n              {this.props.pos_btn }\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction map_state_to_props(state:StoreState) {\n  return {\n    title: state.confirm_dialog_state.title,\n    content: state.confirm_dialog_state.content,\n    confirm_callback: state.confirm_dialog_state.callback,\n    pos_btn: state.confirm_dialog_state.pos_btn,\n    neg_btn: state.confirm_dialog_state.neg_btn,\n  };\n}\n\nfunction map_dispatch_to_props(dispatch:Dispatch) {\n  return bindActionCreators(\n    {\n      close_confirm_dialog,\n    },\n    dispatch);\n}\n\nexport const ConfirmDialog =\n  connect(map_state_to_props, map_dispatch_to_props)(injectIntl((Confirm)));\n","import * as React from 'react';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { InjectedIntlProps, injectIntl } from 'react-intl';\nimport { StoreState } from '../redux';\nimport { hide_context_menu } from '../redux/reducers/contextmenu_reducer';\n\nimport './style.scss';\n\ntype Props = InjectedIntlProps & ReturnType<typeof map_state_to_props> & ReturnType<typeof map_dispatch_to_props>\n\nclass ContextMenu extends React.Component<Props, {}> {\n\n  constructor(props:Props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    if (!this.context_menu_div) {\n      return;\n    }\n\n    document.addEventListener('mousedown', this.handle_mouse_down_outside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.handle_mouse_down_outside);\n  }\n\n  private handle_mouse_down_outside = (e:MouseEvent) => {\n    const el = e.target as HTMLElement;\n    if (!el) {\n      return;\n    }\n\n    if (this.context_menu_div && !this.context_menu_div.contains(el)) {\n      this.props.hide_context_menu();\n    }\n  }\n\n  private context_menu_div:HTMLDivElement|null;\n\n  render() {\n    return (\n      <div\n          style={{\n            left: this.props.x,\n            top: this.props.y,\n          }}\n          styleName=\"context_menu_container\"\n          ref={\n            (ref) => {\n              this.context_menu_div = ref;\n            }\n          }\n      >\n        {\n          this.props.menu_items.map(({ text, cb, disabled }) => (\n            <div\n                className=\"th1-bg-hover-8\"\n                key={text}\n                styleName={`item ${disabled ? 'disabled' : ''}`}\n                onClick={(e) => {\n                  cb(e);\n                  this.props.hide_context_menu();\n                }}\n            >\n              {this.props.intl.formatMessage({ id: text })}\n            </div>\n          ))\n        }\n      </div>\n    );\n  }\n}\n\nfunction map_state_to_props(state:StoreState) {\n  return {\n    x: state.context_menu_state.x,\n    y: state.context_menu_state.y,\n    menu_items: state.context_menu_state.menu_items,\n    is_show: state.context_menu_state.is_show,\n  };\n}\nfunction map_dispatch_to_props(dispatch:Dispatch) {\n  return bindActionCreators(\n    {\n      hide_context_menu,\n    },\n    dispatch);\n}\n\nexport const ContextMenuComponent =\n  connect(\n    map_state_to_props,\n    map_dispatch_to_props,\n  )(injectIntl((ContextMenu)));\n\n","import * as React from 'react';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { InjectedIntlProps, injectIntl } from 'react-intl';\nimport { StoreState } from '../redux';\nimport { hide_notice } from '../redux/reducers/notice_reducer';\n\nimport './style.scss';\n\ninterface NoticeProps extends InjectedIntlProps {\n  notice_content:string;\n  timeout:number;\n  hide_notice:typeof hide_notice;\n}\n\ninterface NoticeState {\n  is_disappearing:boolean;\n}\n\nclass Notice extends React.Component<NoticeProps, NoticeState> {\n  constructor(props:NoticeProps) {\n    super(props);\n    this.state = {\n      is_disappearing: false,\n    };\n  }\n\n  componentDidMount() {\n    const { timeout } = this.props;\n    this.timer = setTimeout(\n      () => {\n        this.setState({ is_disappearing: true });\n      },\n      timeout);\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.timer);\n  }\n\n  private timer:number;\n\n  render() {\n    return (\n      <div\n          styleName={this.state.is_disappearing ? 'notice-top-hide' : 'notice-top'}\n          onTransitionEnd={this.props.hide_notice}\n      >\n        {this.props.notice_content}\n      </div>\n    );\n  }\n}\n\nfunction map_states_to_props(state:StoreState) {\n  return {\n    notice_content: state.notice_state.content,\n    timeout: state.notice_state.timeout,\n  };\n}\nfunction map_dispatch_to_props(dispatch:Dispatch) {\n  return bindActionCreators(\n    {\n      hide_notice,\n    },\n    dispatch);\n}\n\nexport const NoticeComponent =\n  connect(\n    map_states_to_props,\n    map_dispatch_to_props,\n  )(injectIntl((Notice)));\n\n","import * as React from 'react';\nimport { injectIntl, InjectedIntlProps } from 'react-intl';\nimport { Dispatch, bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { ChooseTypeDialog } from './dialogs/choose_type_dialog';\nimport { AILabHeader } from './header';\nimport { AILabContent } from './content';\nimport { ModelType, AIModelForSave, LastStepBeforeSaving } from './models/def';\nimport {\n  StoreState,\n  reset_store,\n  set_ai_lab_visibility,\n} from './redux';\nimport { ConfirmDialog } from './dialogs/notification_dialog';\nimport { ContextMenuComponent } from './context_menu';\nimport { NoticeComponent } from './notice';\nimport { store_manager, machine_learning } from './controllers';\nimport { set_current_intl } from './i18n';\nimport { show_confirm_dialog } from './connected_deps';\nimport { is_model_modified } from './models/utils';\nimport './main.scss';\n\ninterface AILabProps {\n  model_id?:string;\n  save_and_close:(model:AIModelForSave|undefined, last_step?:LastStepBeforeSaving) => void;\n}\ninterface ConnectedProps extends InjectedIntlProps {\n  model_type:ModelType;\n  should_show_confirm_dialog:boolean;\n  should_show_notice:boolean;\n  has_trained:boolean;\n  reset_store:typeof reset_store;\n  is_visible:boolean;\n  set_ai_lab_visibility:typeof set_ai_lab_visibility;\n  is_context_menu_show:boolean;\n}\n\n/**\n * Main component of ai lab\n */\nclass AILab extends React.PureComponent<AILabProps & ConnectedProps, {}> {\n\n  constructor(props:AILabProps & ConnectedProps) {\n    super(props);\n    set_current_intl(this.props.intl);\n  }\n\n  UNSAFE_componentWillMount() {\n    // When editing a model, require the corresponding model data here, and map to state\n    this.init_model_info();\n  }\n\n  private async init_model_info() {\n    if (!this.props.model_id) {\n      return;\n    }\n    // TODO: If model_id is passed, fetch api to get model info\n    // const current_model = await request_model_detail(this.props.model_id);\n    return;\n  }\n\n  private save_reset_and_close = (save_data:boolean, last_step?:LastStepBeforeSaving) => {\n    const callback = (has_data:boolean = false) => {\n      machine_learning.stop();\n      const model = has_data ? store_manager.get_save_info() : undefined;\n      this.props.save_and_close(model, last_step);\n      this.props.reset_store();\n\n      // 保存或者关闭的时候卸载 Ai Lab 组件，保证非 redux 的组件内部 state 重置\n      this.props.set_ai_lab_visibility(false);\n    };\n    if (!save_data) {\n      // 如果没修改过则直接退出，否则弹窗\n      is_model_modified() ?\n        show_confirm_dialog(\n          callback,\n          'ai_lab/give_up_data',\n          this.props.intl.formatMessage({ id: 'ai_lab/give_up_data_content' }),\n          { text: 'ai_lab/confirm_give_up', type: 'danger' },\n          'cancel',\n        ) :\n        callback();\n      return;\n    } else {\n      // 保存\n      callback(save_data);\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        {this.props.is_visible ?\n          <div styleName=\"ai-wrapper\">\n            {!this.props.model_type &&\n              <ChooseTypeDialog save_and_close={this.props.save_and_close} />}\n            {this.props.model_type &&\n              <div styleName=\"main-wrapper\">\n                <AILabHeader save_and_close={this.save_reset_and_close} />\n                <AILabContent save_and_close={this.save_reset_and_close} />\n                {this.props.should_show_confirm_dialog && <ConfirmDialog />}\n              </div>}\n            {this.props.should_show_notice && <NoticeComponent />}\n            {this.props.is_context_menu_show && <ContextMenuComponent />}\n          </div> :\n          ''\n        }\n      </div>\n    );\n  }\n}\n\nfunction map_state_to_props(state:StoreState, props:AILabProps) {\n  return {\n    model_type: state.model_state.model_type,\n    should_show_confirm_dialog: state.confirm_dialog_state.is_show,\n    should_show_notice: state.notice_state.is_show,\n    has_trained: !!state.training_state.training_started_at,\n    is_visible: state.main_state.is_visible,\n    is_context_menu_show: state.context_menu_state.is_show,\n  };\n}\n\nfunction map_dispatch_to_props(dispatch:Dispatch) {\n  return bindActionCreators(\n    {\n      reset_store,\n      set_ai_lab_visibility,\n    },\n    dispatch);\n}\n\nexport const AILabWrapper =\n  connect(map_state_to_props, map_dispatch_to_props)(injectIntl(AILab));\n","import { connect } from 'react-redux';\nimport { IntlProvider } from 'react-intl';\n\nimport { StoreState } from './redux';\nimport { get_locale_data } from './i18n';\n\nfunction map_state_to_props(state:StoreState) {\n  const { locale, messages } = get_locale_data();\n  return {\n    locale,\n    messages,\n    // 使用 key 触发更新，https://github.com/formatjs/react-intl/issues/371#issuecomment-275703796\n    key: locale,\n  };\n}\n\nexport const ConnectedIntlProvider:any = connect(map_state_to_props)(IntlProvider);","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport { intl, set_language } from './i18n';\nimport { zh_CN } from './i18n/zh_CN';\nimport { store_manager } from './controllers';\nimport { AIModelForSave, KittenAILabProps, RANGE_NUM_CLASSES } from './models/def';\nimport { AILabWrapper } from './main';\nimport {\n  set_model_info,\n  set_training_info,\n  change_data,\n  add_feature,\n  add_classification,\n  change_model_name,\n  set_ai_lab_visibility,\n  reset_data_flag,\n  set_theme,\n  Theme,\n} from './redux';\nimport { set_path } from './cfg';\nimport { set_props_show_notice, set_props_show_confirm_dialog, set_props_report_event } from './deps';\nimport { ConnectedIntlProvider } from './ConnectedIntlProvider';\nimport { set_model_modified } from './models/utils';\n\n/**\n * Main class used in kitten\n */\nexport class KittenAILab {\n  private _element:HTMLElement;\n\n  public set_model_info(model_info?:AIModelForSave) {\n    // 先挂载 Ai Lab 组件\n    store_manager.get_store().dispatch(set_ai_lab_visibility(true));\n\n    let model_modified_flag = false;\n    if (model_info) {\n      store_manager.get_store().dispatch(set_model_info(model_info.model_state));\n      store_manager.get_store().dispatch(set_training_info(model_info.training_state));\n\n      const symbol_index = model_info.data_state.symbol_index;\n      store_manager.get_store().dispatch(change_data(model_info.data_state.data, symbol_index));\n\n      // 如果有通过积木添加的数据，则更改 data_flag 刷新训练数据以及预览图\n      const has_extra_data = (idx_arr:number[]) => idx_arr.some((idx) => idx !== -1);\n      if (symbol_index.some((idx_arr) => has_extra_data(idx_arr))) {\n        store_manager.get_store().dispatch(reset_data_flag());\n        model_modified_flag = true;\n      }\n    } else {\n      store_manager.get_store().dispatch(add_feature());\n      store_manager.get_store().dispatch(add_classification(RANGE_NUM_CLASSES[0]));\n      const default_name = intl().formatMessage({ id: 'untitled_model' });\n      store_manager.get_store().dispatch(change_model_name(default_name));\n      model_modified_flag = true;\n    }\n\n    setTimeout(\n      set_model_modified.bind(this, model_modified_flag),\n      300,\n    );\n  }\n\n  public set_language = set_language;\n\n  public set_theme(theme:Theme) {\n    store_manager.get_store().dispatch(set_theme(theme));\n  }\n\n  constructor(props:KittenAILabProps) {\n    const {\n      element,\n      cdn_path,\n      show_notice,\n      show_confirm_dialog,\n      report_event,\n      language_data,\n    } = props;\n\n    this._element = element;\n    const save_and_close = props.save_and_close;\n    const store = store_manager.get_store();\n\n    cdn_path && set_path(cdn_path);\n    show_notice && set_props_show_notice(show_notice);\n    show_confirm_dialog && set_props_show_confirm_dialog(show_confirm_dialog);\n    report_event && set_props_report_event(report_event);\n\n    set_language(language_data);\n\n    ReactDOM.render(\n      <Provider store={store} >\n        <ConnectedIntlProvider>\n          <AILabWrapper save_and_close={save_and_close} />\n        </ConnectedIntlProvider>\n      </Provider>,\n      this._element,\n    );\n  }\n}\n\nexport {\n  LastStepBeforeSaving,\n} from './models/def';\n\nexport type StrictMsgType = typeof zh_CN;\n"],"sourceRoot":""}
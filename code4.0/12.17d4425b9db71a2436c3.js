(this.webpackJsonp=this.webpackJsonp||[]).push([[12],{"/V6T":function(e,t,i){e.exports={sidebar:"sidebar--17vhH","material-sidebar-wrap":"material-sidebar-wrap--1INvg","item-filter":"item-filter--2FegJ","item-category-title-wrap":"item-category-title-wrap--3g8i0","item-category-title":"item-category-title--2BXwJ","item-classification-title":"item-classification-title--29_EB","item-classification-wrap":"item-classification-wrap--1MZLz","library-icon":"library-icon--2k_D0","mall-icon":"mall-icon--2ZxPd","group-icon":"group-icon--2WCv2","theme-icon":"theme-icon--18fjr","group-wrap":"group-wrap--3wcdK","group-option-icon":"group-option-icon--1C5lf","group-choices":"group-choices--34PH9","group-choice":"group-choice--1bg_3","drop-icon":"drop-icon--1LF8w","add-folder-icon":"add-folder-icon--3_Hw2",separation:"separation--1ZPhn","hide-element":"hide-element--we6n1","separation-top":"separation-top--1ahBF"}},"1WHl":function(e,t,i){e.exports={"inside-dialog":"inside-dialog--POA-k",showDialog:"showDialog--1UXO7","dialog-title-wrap":"dialog-title-wrap--3y-Cx","warning-icon":"warning-icon--2Ptn6","dialog-title-words":"dialog-title-words--2MeUj","btn-group":"btn-group--yhNCF","dialog-content":"dialog-content--1dTqi"}},"474t":function(e,t,i){e.exports={"material-header-wrap":"material-header-wrap--16NBO","material-header-left":"material-header-left--2gq1_","material-header-logo":"material-header-logo--1wOM9","material-header-tab-wrap":"material-header-tab-wrap--1o1Uv","tab-chosen":"tab-chosen--1RmOz",tab:"tab--35iby",tabs:"tabs--1iNrT","tab-text":"tab-text--1H2zC","material-gold":"material-gold--1N---","gold-text":"gold-text--HTHby","gold-number":"gold-number--31-_H","gold-notice-wrap":"gold-notice-wrap--3830d","material-search":"material-search--3iArq",painter:"painter--1HJyj","material-search-keyword":"material-search-keyword--2n3TD","gold-notice-title":"gold-notice-title--2Tb0d","gold-notice-body":"gold-notice-body--1zxF1",dialog_btn_close:"dialog_btn_close--2lmez"}},"8/JR":function(e,t,i){"use strict";var a=i("8T9/"),r=i("Ibf7");e.exports=function(e,t){var i=t||{},o={};return void 0===e&&(e={}),e.on=function(t,i){return o[t]?o[t].push(i):o[t]=[i],e},e.once=function(t,i){return i._once=!0,e.on(t,i),e},e.off=function(t,i){var a=arguments.length;if(1===a)delete o[t];else if(0===a)o={};else{var r=o[t];if(!r)return e;r.splice(r.indexOf(i),1)}return e},e.emit=function(){var t=a(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var s=(o[t]||[]).slice(0);return function(){var o=a(arguments),n=this||e;if("error"===t&&!1!==i.throws&&!s.length)throw 1===o.length?o[0]:o;return s.forEach((function(a){i.async?r(a,o,n):a.apply(n,o),a._once&&e.off(t,a)})),e}},e}},"8T9/":function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},Gjsa:function(e,t,i){(function(t){var i;i="function"==typeof t?function(e){t(e)}:function(e){setTimeout(e,0)},e.exports=i}).call(this,i("URgk").setImmediate)},Ibf7:function(e,t,i){"use strict";var a=i("Gjsa");e.exports=function(e,t,i){e&&a((function(){e.apply(i||null,t||[])}))}},K3k4:function(e,t,i){e.exports={"select-frame-dialog":"select-frame-dialog--1HtKf",showDialog:"showDialog--1v1w0","preview-wrap":"preview-wrap--2I3Dr",preview:"preview--2cHSC",preview_text:"preview_text--yrW-k","content-wrap":"content-wrap--2qBOM","header-folder-icon":"header-folder-icon--3w4yr","header-words":"header-words--2Zzxe","close-btn":"close-btn--1qb0y",frame_select_wrap:"frame_select_wrap--k_rvl",frame_item:"frame_item--1MNtY",frame_item_img:"frame_item_img--3QAqx",frame_item_index:"frame_item_index--1XosD",frame_select_icon:"frame_select_icon--2y9Rp","inner-icon":"inner-icon--7t8Ef",selected:"selected--tfVmf",frame_select_footer:"frame_select_footer--1dsBZ",footer_btn:"footer_btn--2enwZ","all-select-btn":"all-select-btn--2-WpT"}},KzmM:function(e,t,i){e.exports={"material-content-wrap":"material-content-wrap--2j9qP","footer-content-wrap":"footer-content-wrap--3qCwR","import-content-wrap":"import-content-wrap--2c3zx",wrapper:"wrapper--2V7H0",flex1:"flex1--1f9tQ",h_flex:"h_flex--3Qw3V",v_center:"v_center--2tc5W",v_flex:"v_flex--krI-t",vh_center:"vh_center--r2I7Z",h_start:"h_start--2oU9o",h_end:"h_end--3uJi5",h_center:"h_center--dcg9O",clickable:"clickable--15hPV",confirm:"confirm--2tQWj",dialog:"dialog--2bHHs",content:"content--3gOeM",showDialog:"showDialog--30JhR","wrapper--appear--active":"wrapper--appear--active--2rFAN","wrapper--appear":"wrapper--appear--3dxBd",mask:"mask--xmHRA",material:"material--W5ipo",showMask:"showMask--2R_Iy",dialog_btn_close:"dialog_btn_close--3I6hb","material-dialog":"material-dialog--iHPGI","hide-footer":"hide-footer--1FfRu","show-footer":"show-footer--1NUul",showFooter:"showFooter--1OEkN","hide-element":"hide-element--3cQUS",showFooterContent:"showFooterContent--3_O70"}},OxQ3:function(e,t,i){e.exports={"choose-group-dialog":"choose-group-dialog--2qShX","preview-wrap":"preview-wrap--38MU2",preview:"preview--iU0Zv","preview-bg":"preview-bg--R_khj","material-name":"material-name--2STAR","n-collections":"n-collections--2HHZC","copyright-declaration-wrap":"copyright-declaration-wrap--21wOP","user-info-wrap":"user-info-wrap--1cPbB","user-avatar":"user-avatar--DCBAH","user-name":"user-name--2eRW2","copyright-content-wrap":"copyright-content-wrap--1NWe7","copyright-declaration":"copyright-declaration--1-n05","copyright-title":"copyright-title--1aHhB","copyright-body":"copyright-body--2_JMn","body-wrap":"body-wrap--1vuhO","header-folder-icon":"header-folder-icon--oywWH","header-words":"header-words--29kJ7","close-btn":"close-btn--36lbw","group-list-wrap":"group-list-wrap--1grMf","group-list-long":"group-list-long--3oIaI","group-list-short":"group-list-short--3Gpwh","warning-wrap":"warning-wrap--NHzDq","warning-icon":"warning-icon--3LSR0","warning-words":"warning-words--1m7Pu","warning-content":"warning-content--2wZyB","group-name-wrap":"group-name-wrap--3qKZA","group-name-words":"group-name-words--2MwPV","selected-icon":"selected-icon--3_r3c","inner-icon":"inner-icon--10J99","input-group-name":"input-group-name--1PLV4","choose-tags-wrap":"choose-tags-wrap--GQu6g","choose-tags-words":"choose-tags-words--3gsU2","tags-list":"tags-list--sXi6l","material-tag":"material-tag--WApdo","error-notice":"error-notice--2yNTC","collect-btn":"collect-btn--2EM-p","upload-btn":"upload-btn--rZuEE","upload-btn-text":"upload-btn-text--2D4ce","upload-item-img-wrap-audio":"upload-item-img-wrap-audio--Da7iW","audio-duration":"audio-duration--3xqpm","upload-dialog-audio":"upload-dialog-audio--1Wk_I","audio-img-wrap":"audio-img-wrap--s9Ava","icon-audio":"icon-audio--2O8rW","btn-audio-trigger-ready":"btn-audio-trigger-ready--1YCPn",hide:"hide--bGKQg","btn-audio-trigger-playing":"btn-audio-trigger-playing--1RrHw",play:"play--icjrA",pause:"pause--3QPCs","audio-progress-bar":"audio-progress-bar--A-elZ","uploading-mask":"uploading-mask--2DADs"}},PzH3:function(e,t,i){"use strict";(function(t){var a=i("bBst"),r=i("Ys8N"),o=t.document,s=function(e,t,i,a){return e.addEventListener(t,i,a)},n=function(e,t,i,a){return e.removeEventListener(t,i,a)},l=[];function c(e,t,i){var a=function(e,t,i){var a,r;for(a=0;a<l.length;a++)if((r=l[a]).element===e&&r.type===t&&r.fn===i)return a}(e,t,i);if(a){var r=l[a].wrapper;return l.splice(a,1),r}}t.addEventListener||(s=function(e,i,a){return e.attachEvent("on"+i,function(e,i,a){var r=c(e,i,a)||function(e,i,a){return function(i){var r=i||t.event;r.target=r.target||r.srcElement,r.preventDefault=r.preventDefault||function(){r.returnValue=!1},r.stopPropagation=r.stopPropagation||function(){r.cancelBubble=!0},r.which=r.which||r.keyCode,a.call(e,r)}}(e,0,a);return l.push({wrapper:r,element:e,type:i,fn:a}),r}(e,i,a))},n=function(e,t,i){var a=c(e,t,i);if(a)return e.detachEvent("on"+t,a)}),e.exports={add:s,remove:n,fabricate:function(e,t,i){var s=-1===r.indexOf(t)?new a(t,{detail:i}):function(){var e;o.createEvent?(e=o.createEvent("Event")).initEvent(t,!0,!0):o.createEventObject&&(e=o.createEventObject());return e}();e.dispatchEvent?e.dispatchEvent(s):e.fireEvent("on"+t,s)}}}).call(this,i("yLpj"))},"R+7a":function(e,t,i){e.exports={"material-painter-footer-wrap":"material-painter-footer-wrap--mKmoE","btn-wrap":"btn-wrap--1b06S","radio-wrap":"radio-wrap--1_rlm","radio-outside":"radio-outside--118Dg",selected:"selected--G50l4","radio-inside":"radio-inside--3sIyC","confirm-btn":"confirm-btn--1BZnC","clear-btn":"clear-btn--2r6WM"}},XYwi:function(e,t,i){e.exports={"inside-dialog":"inside-dialog--36AD-",showDialog:"showDialog--18i0X","dialog-title-wrap":"dialog-title-wrap--1ovyg","warning-icon":"warning-icon--3cRR_","dialog-title-words":"dialog-title-words--GNXmo","btn-group":"btn-group--1oQdo","group-list":"group-list--250Mw","move-to-group":"move-to-group--13fy3","group-dropdown-wrap":"group-dropdown-wrap--3zi83","drop-down-icon":"drop-down-icon--3QG-M",rotate:"rotate--3Y7Mk","group-list-wrap":"group-list-wrap--30XnC",group_li:"group_li--3P56s",group_li_bar:"group_li_bar--3jXPv",selected:"selected--3wCAm","error-notice":"error-notice--3T2BO","group-name-wrap":"group-name-wrap--3s-vc","input-group-name":"input-group-name--1oMzZ"}},YS7c:function(e,t,i){"use strict";(function(t){var a=i("8/JR"),r=i("PzH3"),o=i("n6yW"),s=document,n=s.documentElement;function l(e,i,a,o){t.navigator.pointerEnabled?r[i](e,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[a],o):t.navigator.msPointerEnabled?r[i](e,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[a],o):(r[i](e,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[a],o),r[i](e,a,o))}function c(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function m(e){var t=e.getBoundingClientRect();return{left:t.left+u("scrollLeft","pageXOffset"),top:t.top+u("scrollTop","pageYOffset")}}function u(e,i){return void 0!==t[i]?t[i]:n.clientHeight?n[e]:s.body[e]}function p(e,t,i){var a,r=e||{},o=r.className;return r.className+=" gu-hide",a=s.elementFromPoint(t,i),r.className=o,a}function h(){return!1}function _(){return!0}function d(e){return e.width||e.right-e.left}function g(e){return e.height||e.bottom-e.top}function f(e){return e.parentNode===s?null:e.parentNode}function v(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||function e(t){if(!t)return!1;if("false"===t.contentEditable)return!1;if("true"===t.contentEditable)return!0;return e(f(t))}(e)}function b(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function y(e,t){var i=function(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}(t),a={pageX:"clientX",pageY:"clientY"};return e in a&&!(e in i)&&a[e]in i&&(e=a[e]),i[e]}e.exports=function(e,t){var i,u,w,k,x,E,N,M,O,S,A,I=arguments.length;1===I&&!1===Array.isArray(e)&&(t=e,e=[]);var C,R=null,j=t||{};void 0===j.moves&&(j.moves=_),void 0===j.accepts&&(j.accepts=_),void 0===j.invalid&&(j.invalid=G),void 0===j.containers&&(j.containers=e||[]),void 0===j.isContainer&&(j.isContainer=h),void 0===j.copy&&(j.copy=!1),void 0===j.copySortSource&&(j.copySortSource=!1),void 0===j.revertOnSpill&&(j.revertOnSpill=!1),void 0===j.removeOnSpill&&(j.removeOnSpill=!1),void 0===j.direction&&(j.direction="vertical"),void 0===j.ignoreInputTextSelection&&(j.ignoreInputTextSelection=!0),void 0===j.mirrorContainer&&(j.mirrorContainer=s.body);var L=a({containers:j.containers,start:J,end:Y,cancel:$,remove:V,destroy:q,canMove:H,dragging:!1});return!0===j.removeOnSpill&&L.on("over",re).on("out",oe),T(),L;function D(e){return-1!==L.containers.indexOf(e)||j.isContainer(e)}function T(e){var t=e?"remove":"add";l(n,t,"mousedown",F),l(n,t,"mouseup",K)}function U(e){l(n,e?"remove":"add","mousemove",W)}function B(e){var t=e?"remove":"add";r[t](n,"selectstart",z),r[t](n,"click",z)}function q(){T(!0),K({})}function z(e){C&&e.preventDefault()}function F(e){if(E=e.clientX,N=e.clientY,!(1!==c(e)||e.metaKey||e.ctrlKey)){var t=e.target,i=P(t);i&&(C=i,U(),"mousedown"===e.type&&(v(t)?t.focus():e.preventDefault()))}}function W(e){if(C)if(0!==c(e)){if(void 0===e.clientX||e.clientX!==E||void 0===e.clientY||e.clientY!==N){if(j.ignoreInputTextSelection){var t=y("clientX",e),i=y("clientY",e);if(v(s.elementFromPoint(t,i)))return}var a=C;U(!0),B(),Y(),Z(a);var r=m(w);k=y("pageX",e)-r.left,x=y("pageY",e)-r.top,o.add(S||w,"gu-transit"),se(),ae(e)}}else K({})}function P(e){if(!(L.dragging&&i||D(e))){for(var t=e;f(e)&&!1===D(f(e));){if(j.invalid(e,t))return;if(!(e=f(e)))return}var a=f(e);if(a)if(!j.invalid(e,t))if(j.moves(e,a,t,b(e)))return{item:e,source:a}}}function H(e){return!!P(e)}function J(e){var t=P(e);t&&Z(t)}function Z(e){me(e.item,e.source)&&(S=e.item.cloneNode(!0),L.emit("cloned",S,e.item,"copy")),u=e.source,w=e.item,M=O=b(e.item),L.dragging=!0,L.emit("drag",w,u)}function G(){return!1}function Y(){if(L.dragging){var e=S||w;Q(e,f(e))}}function X(){C=!1,U(!0),B(!0)}function K(e){if(X(),L.dragging){var t=S||w,a=y("clientX",e),r=y("clientY",e),o=ie(p(i,a,r),a,r);o&&(S&&j.copySortSource||!S||o!==u)?Q(t,o):j.removeOnSpill?V():$()}}function Q(e,t){var i=f(e);S&&j.copySortSource&&t===u&&i.removeChild(w),te(t)?L.emit("cancel",e,u,u):L.emit("drop",e,t,u,O),ee()}function V(){if(L.dragging){var e=S||w,t=f(e);t&&t.removeChild(e),L.emit(S?"cancel":"remove",e,t,u),ee()}}function $(e){if(L.dragging){var t=arguments.length>0?e:j.revertOnSpill,i=S||w,a=f(i),r=te(a);!1===r&&t&&(S?a&&a.removeChild(S):u.insertBefore(i,M)),r||t?L.emit("cancel",i,u,u):L.emit("drop",i,a,u,O),ee()}}function ee(){var e=S||w;X(),ne(),e&&o.rm(e,"gu-transit"),A&&clearTimeout(A),L.dragging=!1,R&&L.emit("out",e,R,u),L.emit("dragend",e),u=w=S=M=O=A=R=null}function te(e,t){var a;return a=void 0!==t?t:i?O:b(S||w),e===u&&a===M}function ie(e,t,i){for(var a=e;a&&!r();)a=f(a);return a;function r(){if(!1===D(a))return!1;var r=le(a,e),o=ce(a,r,t,i);return!!te(a,o)||j.accepts(w,a,u,o)}}function ae(e){if(i){e.preventDefault();var t=y("clientX",e),a=y("clientY",e),r=t-k,o=a-x;i.style.left=r+"px",i.style.top=o+"px";var s=S||w,n=p(i,t,a),l=ie(n,t,a),c=null!==l&&l!==R;(c||null===l)&&(R&&d("out"),R=l,c&&d("over"));var m=f(s);if(l!==u||!S||j.copySortSource){var h,_=le(l,n);if(null!==_)h=ce(l,_,t,a);else{if(!0!==j.revertOnSpill||S)return void(S&&m&&m.removeChild(s));h=M,l=u}(null===h&&c||h!==s&&h!==b(s))&&(O=h,l.insertBefore(s,h),L.emit("shadow",s,l,u))}else m&&m.removeChild(s)}function d(e){L.emit(e,s,R,u)}}function re(e){o.rm(e,"gu-hide")}function oe(e){L.dragging&&o.add(e,"gu-hide")}function se(){if(!i){var e=w.getBoundingClientRect();(i=w.cloneNode(!0)).style.width=d(e)+"px",i.style.height=g(e)+"px",o.rm(i,"gu-transit"),o.add(i,"gu-mirror"),j.mirrorContainer.appendChild(i),l(n,"add","mousemove",ae),o.add(j.mirrorContainer,"gu-unselectable"),L.emit("cloned",i,w,"mirror")}}function ne(){i&&(o.rm(j.mirrorContainer,"gu-unselectable"),l(n,"remove","mousemove",ae),f(i).removeChild(i),i=null)}function le(e,t){for(var i=t;i!==e&&f(i)!==e;)i=f(i);return i===n?null:i}function ce(e,t,i,a){var r="horizontal"===j.direction;return t!==e?function(){var e=t.getBoundingClientRect();if(r)return o(i>e.left+d(e)/2);return o(a>e.top+g(e)/2)}():function(){var t,o,s,n=e.children.length;for(t=0;t<n;t++){if(o=e.children[t],s=o.getBoundingClientRect(),r&&s.left+s.width/2>i)return o;if(!r&&s.top+s.height/2>a)return o}return null}();function o(e){return e?b(t):t}}function me(e,t){return"boolean"==typeof j.copy?j.copy:j.copy(e,t)}}}).call(this,i("yLpj"))},Ys8N:function(e,t,i){"use strict";(function(t){var i=[],a="",r=/^on/;for(a in t)r.test(a)&&i.push(a.slice(2));e.exports=i}).call(this,i("yLpj"))},ZxpT:function(e,t,i){e.exports={"inside-dialog":"inside-dialog--1kqjt",showDialog:"showDialog--2VbaK","dialog-title-wrap":"dialog-title-wrap--3OAsi","warning-icon":"warning-icon--1Pdrb","dialog-title-words":"dialog-title-words--3q91Y","btn-group":"btn-group--eSHmd","error-notice":"error-notice--1mMyC","input-wrap":"input-wrap--2AjAb"}},bBst:function(e,t,i){(function(t){var i=t.CustomEvent;e.exports=function(){try{var e=new i("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?i:"function"==typeof document.createEvent?function(e,t){var i=document.createEvent("CustomEvent");return t?i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):i.initCustomEvent(e,!1,!1,void 0),i}:function(e,t){var i=document.createEventObject();return i.type=e,t?(i.bubbles=Boolean(t.bubbles),i.cancelable=Boolean(t.cancelable),i.detail=t.detail):(i.bubbles=!1,i.cancelable=!1,i.detail=void 0),i}}).call(this,i("yLpj"))},dMdD:function(e,t,i){e.exports={"chosen-items-wrap":"chosen-items-wrap--2lkMm","material-footer-wrap":"material-footer-wrap--5trp8","items-wrap-disappearing":"items-wrap-disappearing--19HcE","items-wrap":"items-wrap--MZMtX","items-wrap-showing":"items-wrap-showing--2Fq-k","icn-delete":"icn-delete--3nJou","show-item":"show-item--pz7_b","material-item-preview":"material-item-preview--33m-Z","icn-loading":"icn-loading--C_CJj","icn-audio":"icn-audio--3kvv8","material-item-img":"material-item-img--aelAF","material-item-scene":"material-item-scene--31wiG","material-item-info":"material-item-info--1w2ra","btn-wrap":"btn-wrap--3g80d","btn-groups":"btn-groups--1KCye","confirm-btn":"confirm-btn--3cP54","confirm-btn-text":"confirm-btn-text--3UaUh","clear-btn":"clear-btn--2EjD7"}},iMtw:function(e,t,i){"use strict";i.r(t),i.d(t,"MaterialDialog",(function(){return nt})),i.d(t,"MaterialDialogComponent",(function(){return lt}));var a=i("RIqP"),r=i.n(a),o=i("o0o1"),s=i.n(o),n=i("yXPU"),l=i.n(n),c=i("lwsE"),m=i.n(c),u=i("W8MJ"),p=i.n(u),h=i("a1gu"),_=i.n(h),d=i("Nsbk"),g=i.n(d),f=i("PJYZ"),v=i.n(f),b=i("7W2i"),y=i.n(b),w=i("3WF5"),k=i.n(w),x=i("bNQv"),E=i.n(x),N=i("J2iB"),M=i.n(N),O=i("hxiM"),S=i.n(O),A=i("kNvX"),I=i.n(A),C=i("q1tI"),R=i("2OET"),j=i("/MKj"),L=i("ANjH"),D=i("ptQL"),T=i("CG87"),U=i("nLpL"),B=i("e/E2"),q=i("5nG9"),z=i("bdvc"),F=i("yyi+"),W=i("G72A"),P=i("GODc"),H=i.n(P),J=i("bt/X"),Z=i.n(J),G=i("HlzF"),Y=i("Qf8c"),X=i("zcRy"),K=i.n(X),Q=i("Vbab"),V=i("ALsR"),$=i("mQNm"),ee=i("iyLA"),te=i("WcCQ"),ie=i("/4H6");function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(Q.e)();try{var i=JSON.parse(e);return i[t]?i[t]:i.en||e}catch(t){return e}}function re(e){var t=parseInt(e.id),i=function(e){switch(e){case"NORMAL_IMAGE":case"MULTI_IMAGE":return 1;case"BACKGROUND":return 2;case"AUDIO":return 3;default:return 0}}(e.file_type),a="MULTI_IMAGE"===e.file_type?JSON.stringify(ae(e.resource_names,"zh")):JSON.stringify([ae(e.name,"zh")]),r="MULTI_IMAGE"===e.file_type?JSON.stringify(ae(e.resource_names,"en")):JSON.stringify([ae(e.name,"en")]),o="MULTI_IMAGE"===e.file_type?JSON.stringify(ae(e.resource_names,"tw")):JSON.stringify([ae(e.name,"tw")]),s=e.resource_urls;return{id:t,category_id:0,name:ae(e.name,"zh"),file_type:i,preview:s,set_names:a,en_name:ae(e.name,"en"),en_set_names:r,tw_name:ae(e.name,"tw"),tw_set_names:o,buy_times:e.n_collections?e.n_collections:0}}var oe=K()(1);function se(){return(se=l()(s.a.mark((function e(t,i,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(oe.pendingCount>0)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,oe(l()(s.a.mark((function e(){var r,o,n,l,c,m,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,o=!1,n=void 0,e.prev=3,l=t[Symbol.iterator]();case 5:if(r=(c=l.next()).done){e.next=29;break}if(m=c.value,u=re(m),"AUDIO"!==m.file_type){e.next=12;break}return e.next=11,Object($.e)(u).catch((function(e){console.error(e)}));case 11:return e.abrupt("continue",26);case 12:if(i){e.next=20;break}if("NORMAL_IMAGE"!==m.file_type&&"MULTI_IMAGE"!==m.file_type){e.next=18;break}return e.next=16,Object($.c)(u).catch((function(e){console.error(e)}));case 16:e.next=19;break;case 18:"BACKGROUND"===m.file_type&&Object($.g)(u).catch((function(e){console.error(e)}));case 19:return e.abrupt("continue",26);case 20:if(!a){e.next=24;break}Object($.g)(u).catch((function(e){console.error(e)})),e.next=26;break;case 24:return e.next=26,Object($.m)(u);case 26:r=!0,e.next=5;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(3),o=!0,n=e.t0;case 35:e.prev=35,e.prev=36,r||null==l.return||l.return();case 38:if(e.prev=38,!o){e.next=41;break}throw n;case 41:return e.finish(38);case 42:return e.finish(35);case 43:V.a.dispatch(Object(ie.action_set_default_category)({default_category:Y.d.MUSIC,is_open_from_sidebar:!1,confirm_cb:function(){}}));case 44:case"end":return e.stop()}}),e,null,[[3,31,35,43],[36,,38,42]])}))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t,i){if(!e)return"%empty_name";var a=e.trim().match(/[0-9a-z\s\u4e00-\u9fa5()（）_-]/gi),r=a?a.join(""):"";if(!r)return"%illegal_name";if(r===i)return r;var o=t.findIndex((function(e){return e.name.toUpperCase()===r.toUpperCase()}));return"我的分组"===r||"我的分組"===r||"My Group"===r||o>=0?ne(function(e){if(/-\d+$/.test(e)){var t=e.split("-"),i=t.length;t.splice(i-1,1,(parseInt(t[i-1])+1).toString()),e=t.join("-")}else e=e.concat("-1");return e}(r),t,i):r}function le(e,t,i){return ce.apply(this,arguments)}function ce(){return(ce=l()(s.a.mark((function e(t,i,a){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("%empty_name"!==(r=ne(t,i))&&"%illegal_name"!==r){e.next=4;break}return a(r),e.abrupt("return",!1);case 4:if(!(i.length>=Y.g)){e.next=8;break}return Object(te.a)("material_dialog/dialog/num_of_grouo_exceeded","error"),a(),e.abrupt("return",!1);case 8:return a(),e.next=11,Object(Y.l)(r,r.length<t.length);case 11:if(!e.sent.id){e.next=14;break}return e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t,i,a){return ue.apply(this,arguments)}function ue(){return(ue=l()(s.a.mark((function e(t,i,a,r){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("%empty_name"!==(o=ne(t,a,i.name))&&"%illegal_name"!==o){e.next=4;break}return r(o),e.abrupt("return","");case 4:if(r(),o!==i.name){e.next=8;break}return Object(te.a)("material_dialog/toast/rename_success".concat(o.length<t.length?"_with_replace":""),"success"),e.abrupt("return",o);case 8:return e.next=10,Object(Y.t)(i.id,o,o.length<t.length);case 10:if(!e.sent){e.next=13;break}return e.abrupt("return",o);case 13:return e.abrupt("return","");case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e){return-1-e}function he(e,t,i){var a=e-t-35;return i>0&&a+80>i?i-80:a}var _e=i("Gzrk"),de=i("O8UM"),ge=(i("zlTn"),{"./style.scss":{"content-wrap":"content-wrap--Nn5UR","material-items-wrap":"material-items-wrap--2eMaW","lib-item-wrapper":"lib-item-wrapper--3s6qv","icn-option":"icn-option--_AxDa","icn-upload":"icn-upload--1xWdv","icn-frame":"icn-frame--1MwDt","material-item-info":"material-item-info--1aD6R","material-item-info-audio":"material-item-info-audio--344zG","material-item":"material-item--1XW11","loading-item":"loading-item--2Xk8H","material-item-chosen":"material-item-chosen--2ffas","icn-select":"icn-select--2s1gI",icnShow:"icnShow--17WI-","inner-icon":"inner-icon--3I3K5","icn-wrap":"icn-wrap--3EsSJ","material-item-audio":"material-item-audio--YqViP","icn-option-clickable":"icn-option-clickable--2CYSC","icn-dots":"icn-dots--x1oOI","option-menu":"option-menu--29pse","move-to":"move-to--13NHV",delete:"delete--17OrF","material-item-img":"material-item-img--ljcUU","material-item-img-mall":"material-item-img-mall--2I1EW","material-item-scene":"material-item-scene--1BJQA","material-item-img-wrap":"material-item-img-wrap--3-c1Z","bg-wrap":"bg-wrap--2lC28","material-item-audio-chosen":"material-item-audio-chosen--2DjV8","material-item-img-wrap-audio":"material-item-img-wrap-audio--1-sWL","audio-duration":"audio-duration--1j3ai","material-item-img-wrap-audio-mall":"material-item-img-wrap-audio-mall--26_ci","material-dialog-audio":"material-dialog-audio--3QrwF","audio-img-wrap":"audio-img-wrap--3iEkA","icon-audio":"icon-audio--1rw7M","btn-audio-trigger-ready":"btn-audio-trigger-ready--1tTvQ","audio-img-wrap-mall":"audio-img-wrap-mall--3ovSn","icon-audio-mall":"icon-audio-mall--3r7ZQ","btn-audio-trigger-ready-mall":"btn-audio-trigger-ready-mall--2cv5C",show:"show--1CHyy","btn-audio-trigger-playing":"btn-audio-trigger-playing--2cRpX","btn-audio-trigger-playing-mall":"btn-audio-trigger-playing-mall--1ICP9",play:"play--3J8WY",pause:"pause--1TZz9","audio-progress-bar":"audio-progress-bar--29MzM","audio-progress-bar-mall":"audio-progress-bar-mall--2tT1E","top-single-wrap":"top-single-wrap--f68uJ","top-double-wrap":"top-double-wrap--TNX-b","top-bar":"top-bar--1Go5c","second-bar":"second-bar--2p0sA","top-filter":"top-filter--lWjFx",checkbox:"checkbox--2_5ec","nav-wrap":"nav-wrap--xxFqE","nav-tag":"nav-tag--6tmCj","nav-slash":"nav-slash--kFYYj","upload-item":"upload-item--EoO9m","icon-upload":"icon-upload--JR_Qj","material-dialog-upload":"material-dialog-upload--2yU-v","upload-info":"upload-info--2Lzvw","no-search-result-wrap":"no-search-result-wrap---JVy7","no-category-item-wrap":"no-category-item-wrap--2J7Ob","pic-no-corresponding-material":"pic-no-corresponding-material--27fBp","mall-item":"mall-item--2jP6w","icn-frame-wrap-mall":"icn-frame-wrap-mall--2NUeX","icn-frame-mall":"icn-frame-mall--2vNtT","mall-item-preview":"mall-item-preview--3Mw9j","mall-item-info-wrap":"mall-item-info-wrap--1sTeL","mall-item-info":"mall-item-info--2A0nv","mall-item-name":"mall-item-name--1u084","mall-item-used":"mall-item-used--_bmTq","collect-btn":"collect-btn--2kkgR","inline-icon":"inline-icon--3SiAE","theme-item":"theme-item--3ZlL8","theme-wrap":"theme-wrap--Zv9od","theme-wrap-middle":"theme-wrap-middle--1YjH2","theme-wrap-bottom":"theme-wrap-bottom--bLSn7","theme-preview":"theme-preview--iApbo","theme-words":"theme-words--18JOx","theme-name":"theme-name--1QFhf","theme-used":"theme-used--7NB5V","classify-title":"classify-title--sgoFA",point:"point--CngU4",title:"title--29Pu5","loading-wrap":"loading-wrap--2ki4q","loading-content":"loading-content--dlWqW","audio-name":"audio-name--FkHrQ","material-price-tag":"material-price-tag--3lOhF",checkbox_wrap:"checkbox_wrap--3I-le",checkbox_btn:"checkbox_btn--2gdm7"}});var fe,ve=function(e){function t(e){var i;return m()(this,t),(i=_()(this,g()(t).call(this,e))).animation_clock=void 0,i.progress_radius_lib=46,i.progress_radius_mall=47,i.progress_width_lib=8,i.progress_width_mall=6,i.upload_form=void 0,i.state={show_menu_item:void 0,category_filter:void 0,progress_description:"",progress_in_sec:0,top_of_options:0,left_of_options:0},i}var i,a;return y()(t,e),p()(t,[{key:"shouldComponentUpdate",value:function(e){return e.scrollTop===this.props.scrollTop}},{key:"no_material",value:function(){var e=Object(D.d)()?"material_dialog/content/no_material_offline":"material_dialog/content/no_material";return C.createElement("div",{key:"no_mat",className:"no-category-item-wrap--2J7Ob"},C.createElement("div",{className:"pic-no-corresponding-material--27fBp"}),C.createElement("p",{className:this.props.theme.light_theme_colors?"th1-text-t3":"th1-text-3"},void 0===this.props.chosen_category?this.props.intl.formatMessage({id:"material_dialog/content/no_search_result"}):this.props.current_tab===Y.a.LIBRARY?this.props.intl.formatMessage({id:e}):this.props.intl.formatMessage({id:"material_dialog/content/no_mall_material"})))}},{key:"get_audio_svg",value:function(e){var t=this.props.current_tab,i=C.createElement("span",null),a=this.props.current_audio===e.id,r=a?"btn-audio-trigger-playing":"btn-audio-trigger-ready",o={borderColor:a?Object(de.e)(Object(de.h)()[this.props.theme.light_theme_colors?"s2":"0"],.3):Object(de.e)(Object(de.h)()[this.props.theme.light_theme_colors?"s2":"0"])};if(r=t===Y.a.LIBRARY?r:"".concat(r,"-mall"),a){var s=t===Y.a.LIBRARY?this.progress_radius_lib:this.progress_radius_mall,n=t===Y.a.LIBRARY?this.progress_width_lib:this.progress_width_mall,l=s+n/2,c="translate(".concat(l,",").concat(l,")"),m=Object(de.e)(Object(de.h)()[this.props.theme.light_theme_colors?"s2":"0"]);i=C.createElement("svg",{viewBox:"0 0 100 100"},C.createElement("path",{fill:"none",stroke:m,strokeWidth:n,transform:c,d:"M 0 ".concat(-s," A ").concat(s," ").concat(s," 0 1 1 0 ").concat(-s)}),C.createElement("path",{fill:"none",stroke:m,strokeWidth:n,transform:c,d:this.state.progress_description}))}return C.createElement(C.Fragment,null,C.createElement("div",{id:"progress-bar-".concat(e.id),key:"progress_".concat(e.id),className:I()(t===Y.a.LIBRARY?"audio-progress-bar":"audio-progress-bar-mall",ge,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},i),C.createElement("div",{style:o,onClick:this.on_click_audio_item.bind(this,e),className:I()(r,ge,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement("div",{className:"play--3J8WY"},C.createElement(_e.c,{id:"#iconproperties_play",class_name:"th1-text-1 th1-text-s2",size:20})),C.createElement("div",{className:"pause--1TZz9"},C.createElement(_e.c,{id:"#iconproperties_pause",class_name:"th1-text-1 th1-text-s2",size:20}))))}},{key:"on_click_audio_item",value:function(e,t){if(t.stopPropagation(),F.AudioPlayerModule.stop(),this.props.current_audio===e.id)return this.props.set_current_audio(void 0),void this.setState({progress_description:"",progress_in_sec:0});var i="string"==typeof e.resource_urls?e.resource_urls:e.resource_urls[0];this.props.set_current_audio(e.id),this.play_audio(e.id,i).catch((function(e){return console.error(e)}))}},{key:"play_audio",value:(a=l()(s.a.mark((function e(t,i){var a,r,o=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(z.B)()){e.next=3;break}return this.props.show_toast("error","disconnect_tips"),e.abrupt("return");case 3:return e.next=5,Object($.o)(i,t);case 5:if(a=e.sent,!(r=F.AudioPlayerModule.load(t,a))){e.next=13;break}if(r.on("end",(function(){o.props.set_current_audio(void 0),r.unload()})),r.on("play",(function(){requestAnimationFrame(o.draw_progress_bar.bind(o,r))})),this.props.current_audio===t){e.next=12;break}return e.abrupt("return");case 12:r.play();case 13:this.setState({progress_description:"",progress_in_sec:0});case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"draw_progress_bar",value:function(e){var t=this.props.current_tab;if(e&&e.playing()){var i=e.seek();i instanceof G.Howl&&(i=0);var a=360*(i/e.duration());if(!(a>=360)){var r=a*(Math.PI/180),o=t===Y.a.LIBRARY?this.progress_radius_lib:this.progress_radius_mall,s=(Math.sin(r)*o).toFixed(2),n=-(Math.cos(r)*o).toFixed(2),l=["M",0,-o,"A",o,o,0,Number(a>180),1,s,n];this.setState({progress_description:l.join(" "),progress_in_sec:Math.round(i)}),requestAnimationFrame(this.draw_progress_bar.bind(this,e))}}}},{key:"get_duration",value:function(e){if("LESSON"!==e.source){var t=0;try{var i=Math.round(JSON.parse(e.resource_names).duration);t=0===i?1:i}catch(e){console.error("Error parse audio info: ",e)}return this.props.current_audio===e.id&&(t=this.state.progress_in_sec),C.createElement("div",{className:"th1-text-t5 audio-duration--1j3ai"},Object(z.p)(t))}}},{key:"get_audio_item",value:function(e){var t=this.props.current_tab;return C.createElement("div",{key:"audio_".concat(e.id),className:I()(t===Y.a.LIBRARY?"material-item-img-wrap-audio":"material-item-img-wrap-audio-mall",ge,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement("audio",{className:"material-dialog-audio--3QrwF",src:e.resource_urls[0],preload:"none"}),C.createElement("div",{className:I()(t===Y.a.LIBRARY?"audio-img-wrap":"audio-img-wrap-mall",ge,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},e.id===this.props.current_audio?"":C.createElement("div",{className:I()(t===Y.a.LIBRARY?"icon-audio":"icon-audio-mall",ge,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement(_e.c,{id:"#iconicn_shengyin_act",class_name:"th1-text-0 th1-text-s2",size:54})),this.get_audio_svg(e)),C.createElement("div",{className:"th1-text-t7 audio-name--FkHrQ"},ae(e.name)))}},{key:"show_animation",value:function(e){if(!("string"==typeof e.resource_urls||e.resource_urls.length<=1)){var t=document.getElementById(e.id);if(t){var i=1;this.animation_clock=setInterval((function(){t.setAttribute("src","".concat(e.resource_urls[i%e.resource_urls.length],"?imageMogr2/thumbnail/!200x200r/blur/1x0/quality/100|imageslim")),i++}),200)}}}},{key:"hide_animation",value:function(e){if(!("string"==typeof e.resource_urls||e.resource_urls.length<=1)){var t=document.getElementById(e.id);t&&(clearInterval(this.animation_clock),t.setAttribute("src","".concat(e.resource_urls[0],"?imageMogr2/thumbnail/!200x200r/blur/1x0/quality/100|imageslim")))}}},{key:"show_menu",value:function(e,t){var i=t.target.getBoundingClientRect(),a=document.getElementById("material-dialog"),r=0,o=0;if(a){var s=a.getBoundingClientRect();r=s.top,o=s.left}var n,l,c,m=(n={top:i.top,left:i.left},l={top:r,left:o},c=this.props.scrollTop,{top:n.top+28-58-l.top+c,left:n.left+-82-164-l.left}),u=m.left,p=m.top;this.setState({show_menu_item:e,top_of_options:p,left_of_options:u},(function(){var e=document.getElementById("item-options");e&&e.focus()}))}},{key:"hide_menu",value:function(){this.setState({show_menu_item:void 0})}},{key:"get_img_url",value:function(e){return 1===e.resource_urls.length&&e.resource_urls[0].indexOf("?")>=0?e.resource_urls[0].toString().split("?")[0]:e.resource_urls[0]}},{key:"get_img_item",value:function(e){var t,i=Object(D.d)()?"":"?imageMogr2/thumbnail/!200x200r/blur/1x0/quality/100|imageslim",a=[];switch(e.file_type){case"NORMAL_IMAGE":case"MULTI_IMAGE":t=this.props.current_tab===Y.a.MALL?"material-item-img-mall":"material-item-img";break;case"BACKGROUND":t="material-item-scene";break;default:t="material-item-scene"}var r=this.get_img_url(e);a.push(C.createElement("img",{key:e.id,id:e.id,src:r+i,className:I()(t,ge,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})}));var o="";return this.props.current_tab===Y.a.LIBRARY?o="material-item-img-wrap":"BACKGROUND"===e.file_type&&(o="bg-wrap"),C.createElement("div",{"data-id":e.id,"data-image":!0,key:"material_img_".concat(e.id),className:I()(o,ge,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},a)}},{key:"get_loading_preview",value:function(){return C.createElement("div",{className:"material-item-img-wrap--3-c1Z"},C.createElement(_e.f,{size:30,theme_color:"10"}))}},{key:"group_items_by_subtitle",value:function(e){var t=[];if(void 0!==this.props.chosen_category&&e[0]&&e[0].subtitle&&"{}"!==e[0].subtitle){var i=Z()(e,(function(e){return e.subtitle}));E()(i,(function(e){t.push(e)}))}else t=[e];return t}},{key:"get_group_header",value:function(){if(!Object(D.d)())return C.createElement("div",{className:"top-single-wrap--f68uJ"},C.createElement("span",{className:"th1-text-t5"},this.props.intl.formatMessage({id:"material_dialog/content/category"})),this.get_group_header_filters())}},{key:"get_group_header_filters",value:function(){var e=this,t={};return this.props.mode===Y.i.kitten&&(t.all={index:0,name:this.props.intl.formatMessage({id:"material_dialog/all"})}),t.actor={index:1,name:this.props.intl.formatMessage({id:"material_dialog/actor"})},t.background={index:2,name:this.props.intl.formatMessage({id:"material_dialog/background"})},this.props.mode===Y.i.kitten&&(t.audio={index:3,name:this.props.intl.formatMessage({id:"material_dialog/audio"})}),k()(t,(function(t){var i=e.props.chosen_filter===t.index?"th1-bg-1 th1-text-10 th1-text-s2 th1-bg-hover-2":e.props.theme.light_theme_colors?"th1-bg-7 th1-text-t5 th1-text-hover-s2 th1-bg-hover-4":"th1-bg-7 th1-text-1 th1-bg-hover-6";return C.createElement("span",{key:t.index,onClick:e.props.choose_filter.bind(e,t.index),className:(i?i+" ":"")+I()("top-filter",ge,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},t.name)}))}},{key:"get_upload_content",value:function(){var e=this;return C.createElement("div",{key:"up_content",className:(this.props.theme.light_theme_colors||"th1-border-impt-4 th1-bg-9 th1-bg-hover-8"?(this.props.theme.light_theme_colors?"th1-border-impt-2 th1-bg-hover-9":"th1-border-impt-4 th1-bg-9 th1-bg-hover-8")+" ":"")+"upload-item--EoO9m"},C.createElement("div",{className:(this.props.theme.light_theme_colors||"th1-bg-7"?(this.props.theme.light_theme_colors?"th1-bg-4":"th1-bg-7")+" ":"")+"icon-upload--JR_Qj"},C.createElement(_e.c,{id:"#iconicon_add",class_name:"th1-text-0 th1-text-s2",size:24})),this.props.is_login||Object(D.d)()?C.createElement("form",{ref:function(t){t&&(e.upload_form=t)}},C.createElement("input",{type:"file",onChange:this.upload_material_item.bind(this),className:"material-dialog-upload--2yU-v"})):C.createElement("div",{className:"material-dialog-upload--2yU-v",onClick:this.props.require_login.bind(this)}),C.createElement("div",{className:"th1-text-t7 material-item-info--1aD6R"},this.props.intl.formatMessage({id:"material_dialog/content/upload"})))}},{key:"upload_material_item",value:function(e){var t=e.target.files[0];if(t){if(t.size>Y.h)return this.props.show_toast("error","material_dialog/content/upload_size_limit"),void this.upload_form.reset();if(t.size<=0)return this.props.show_toast("error","material_dialog/content/upload_file_empty"),void this.upload_form.reset();if(t.type.match("image.gif"))return this.props.show_toast("notice","upload_error/drag_gif_tip"),void this.upload_form.reset();if(!function(e){var t=e.type;return["image.jpg","image.jpeg","image.png","image.gif","image.bmp","audio.mp3","audio.wav","audio/mpeg"].some((function(e){return t.match(e)}))}(t))return this.props.show_toast("error","material_dialog/content/upload_error"),void this.upload_form.reset();if(this.upload_form.reset(),Object(D.d)())return void this.props.offline_upload(t);this.props.show_subdialog("upload",t),Object(B.t)("本地上传","上传")}}},{key:"get_options",value:function(){var e=this;return Object(D.d)()?C.createElement("div",{className:"option-menu--29pse",style:{top:"".concat(this.state.top_of_options,"px"),left:"".concat(this.state.left_of_options,"px")},id:"item-options",tabIndex:-1,onMouseLeave:this.hide_menu.bind(this),onBlur:this.hide_menu.bind(this)},C.createElement("div",{className:"delete--17OrF",onClick:function(){e.props.delete_offline_item(e.state.show_menu_item),e.props.current_audio===e.state.show_menu_item.id&&(F.AudioPlayerModule.stop(e.state.show_menu_item.id),e.props.set_current_audio(void 0)),e.hide_menu()}},this.props.intl.formatMessage({id:"material_dialog/delete"}))):C.createElement("div",{className:"option-menu--29pse",style:{top:"".concat(this.state.top_of_options,"px"),left:"".concat(this.state.left_of_options,"px")},id:"item-options",tabIndex:-1,onMouseLeave:this.hide_menu.bind(this),onBlur:this.hide_menu.bind(this)},C.createElement("div",{className:"th1-bg-hover-8 move-to--13NHV",onClick:function(){Object(B.t)("移动到分组"),e.props.show_subdialog("move_to_group",e.state.show_menu_item),e.hide_menu()}},this.props.intl.formatMessage({id:"material_dialog/move"})),C.createElement("div",{className:"th1-bg-hover-8 delete--17OrF",onClick:function(){Object(B.t)("删除素材"),e.delete_group_item(e.state.show_menu_item).catch((function(e){return console.log(e)})),e.hide_menu()}},this.props.intl.formatMessage({id:"material_dialog/delete"})))}},{key:"get_icon",value:function(e){var t=this.props.chosen_items.findIndex((function(t){return t.id===e.id}))>-1,i="UPLOADED"===e.source,a=e.resource_urls&&"string"!=typeof e.resource_urls&&e.resource_urls.length>1,r=[];return t?(r.push(C.createElement("div",{key:e.id,className:"icn-select--2s1gI"},C.createElement("div",{className:"th1-bg-0 inner-icon--3I3K5"},C.createElement(_e.c,{id:"#iconbaise1",class_name:"th1-text-10 th1-text-s2",size:20})))),r):(i?r.push(C.createElement("div",{key:e.id,className:"icn-upload--1xWdv"},C.createElement(_e.c,{id:"#iconuploaded",class_name:this.props.theme.light_theme_colors?"th1-text-a1":"th1-text-5",size:16}))):a&&r.push(C.createElement("div",{key:e.id,className:"icn-frame--1MwDt"},C.createElement(_e.c,{id:"#iconmultiframe",class_name:this.props.theme.light_theme_colors?"th1-text-a1":"th1-text-5",size:16}))),"DEFAULT"===e.source||"LESSON"===e.source||"SCHOOL"===e.source||/^loading/.test(e.id)||r.push(C.createElement("div",{key:e.id,className:"icn-option--_AxDa"},C.createElement("div",{className:"icn-dots--x1oOI"},C.createElement(_e.c,{id:"#iconmore_dark",color:"white",size:16})),C.createElement("div",{className:"icn-option-clickable--2CYSC",onClick:this.show_menu.bind(this,e)}))),r)}},{key:"get_item_component",value:function(e){var t,i,a=this.props.chosen_items.findIndex((function(t){return t.id===e.id&&t.name===e.name}))>-1,r=a?this.props.theme.light_theme_colors?"th1-bg-5 th1-border-impt-m2":" th1-border-impt-0 th1-bg-7":this.props.theme.light_theme_colors?"th1-bg-8 th1-bg-hover-5":"th1-bg-8 th1-bg-hover-7";return/^loading/.test(e.id)?(t=a?"material-item-chosen":"loading-item",i=this.get_loading_preview()):"AUDIO"===e.file_type?(t=a?"material-item-audio-chosen":"material-item-audio",i=this.get_audio_item(e)):(t=a?"material-item-chosen":"material-item",i=this.get_img_item(e)),C.createElement("div",{key:e.id,className:"lib-item-wrapper--3s6qv",onMouseOver:this.show_animation.bind(this,e),onMouseOut:this.hide_animation.bind(this,e)},C.createElement("div",{onClick:this.props.choose_item.bind(this,e),className:(r?r+" ":"")+I()(t,ge,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},i,"AUDIO"===e.file_type?"LESSON"===e.source?"":C.createElement("div",{className:I()("material-item-info-audio",ge,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},this.get_duration(e)):C.createElement("div",{className:"th1-text-t7 "+I()("material-item-info",ge,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},ae(e.name))),this.get_icon(e))}},{key:"get_library_item",value:function(){var e=this.props.material_items,t=this.group_items_by_subtitle(e);return this.get_grouped_library_content(t)}},{key:"get_grouped_library_content",value:function(e){var t=this;return e.map((function(e,i){return C.createElement("div",{key:i,className:"material-items-wrap--2eMaW",id:"material-items-wrap"},t.get_library_subtitle(e),t.get_grouped_items(e))}))}},{key:"get_library_subtitle",value:function(e){if(void 0!==this.props.chosen_category&&e[0]&&e[0].subtitle&&"{}"!==e[0].subtitle)return C.createElement("div",{className:"classify-title--sgoFA"},C.createElement("span",{className:"point--CngU4"}),C.createElement("span",{className:"title--29Pu5"},ae(e[0].subtitle)))}},{key:"get_grouped_items",value:function(e){var t=this,i=[];return(void 0===this.props.chosen_category||this.props.chosen_category&&this.props.chosen_category<0)&&this.props.mode!==Y.i.painter&&this.props.chosen_category&&i.push(this.get_upload_content()),"empty_group"===e[0].id?(i.push(this.no_material()),C.createElement("div",{className:"material-items-wrap--2eMaW"},i)):(e.forEach((function(e){var a=t.get_item_component(e);i.push(a)})),i)}},{key:"get_mall_item",value:function(){return this.props.chosen_category!==this.props.index_of_theme||this.props.chosen_theme?this.get_mall_category_item():this.get_theme_page()}},{key:"handle_collect_button_click",value:function(e){Object(B.t)("采集","采集"),this.props.mode===Y.i.painter&&this.props.num_of_frames>=Y.s?this.props.show_toast(void 0,"material_dialog/toast/painter_frame_limit"):this.props.show_subdialog("collect",e)}},{key:"get_mall_category_item",value:function(){var e=this,t=this.props.material_items,i=[];if(t&&t.length){if("empty_group"===t[0].id)return i.push(this.no_material()),C.createElement("div",{className:"material-items-wrap--2eMaW"},i);t.forEach((function(t){var a=e.props.chosen_items.findIndex((function(e){return e.mall_id===t.id}))>-1,r=a?e.props.theme.light_theme_colors?"th1-bg-5 th1-border-impt-m2":"th1-bg-7 th1-border-impt-1":e.props.theme.light_theme_colors?"th1-bg-8 th1-bg-hover-5":"th1-bg-8 th1-bg-hover-7";i.push(C.createElement("div",{key:t.id,onMouseOver:e.show_animation.bind(e,t),onMouseOut:e.hide_animation.bind(e,t),className:(r?r+" ":"")+I()("mall-item",ge,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},e.get_item_preview(t),e.get_item_info(t,a),e.get_material_price_tag(t)))}))}return C.createElement("div",{className:"material-items-wrap--2eMaW"},i)}},{key:"get_item_preview",value:function(e){return C.createElement(C.Fragment,null,C.createElement("div",{className:"mall-item-preview--3Mw9j"},"AUDIO"===e.file_type?this.get_audio_item(e):this.get_img_item(e)),"MULTI_IMAGE"===e.file_type&&C.createElement("div",{className:"icn-frame-wrap-mall--2NUeX"},C.createElement("div",{className:"icn-frame-mall--2vNtT"},C.createElement(_e.c,{id:"#iconmultiframe",class_name:this.props.theme.light_theme_colors?"th1-text-a1":"th1-text-5",size:16}))))}},{key:"get_item_info",value:function(e,t){var i=t?"th1-bg-0":e.is_collected?"th1-bg-impt-hover-c-h":"th1-bg-c",a=t?void 0:e.is_collected?{backgroundColor:Object(de.e)(Object(de.h)().c,.7)}:void 0;return C.createElement("div",{className:"mall-item-info-wrap--1sTeL"},C.createElement("div",{className:"mall-item-info--2A0nv"},"AUDIO"===e.file_type?this.get_duration(e):C.createElement("div",{className:"th1-text-t7 mall-item-name--1u084"},ae(e.name)),C.createElement("div",{className:"th1-text-t5 mall-item-used--_bmTq"},this.props.intl.formatMessage({id:"material_dialog/used"},{num:e.n_collections?e.n_collections:0}))),C.createElement("div",{className:(i?i+" ":"")+"collect-btn--2kkgR",style:a,onClick:this.handle_collect_button_click.bind(this,e)},this.get_collect_btn_icn(t,e.is_collected)))}},{key:"get_collect_btn_icn",value:function(e,t){return e?C.createElement(_e.c,{id:"#iconbaise1",class_name:"th1-text-10 th1-text-s2",size:25}):t?C.createElement("div",{style:{backgroundColor:"white"},className:"inline-icon--3SiAE"},C.createElement(_e.c,{id:"#iconbaise1",class_name:"th1-text-hover-c-h",color:Object(de.e)(Object(de.h)().c,.7),size:25})):C.createElement(_e.c,{id:"#iconicn_sucaishangchang",class_name:this.props.theme.light_theme_colors?"":"th1-text-10",color:this.props.theme.light_theme_colors?"white":void 0,size:18})}},{key:"get_material_price_tag",value:function(e){var t=null!=e.price?parseFloat(e.price):0;if(!(H()(t)||t<=0))return C.createElement("div",{className:"th1-text-10 th1-text-s2 material-price-tag--3lOhF"},"$",e.price)}},{key:"get_theme_page",value:function(){var e=this,t=this.props.themes,i=[];return t&&t.length&&E()(t,(function(t,a){i.push(C.createElement("div",{key:a,className:"theme-item--3ZlL8"},C.createElement("div",{className:"theme-wrap-bottom--bLSn7"}),C.createElement("div",{className:"theme-wrap-middle--1YjH2"}),C.createElement("div",{className:"theme-wrap--Zv9od",onClick:e.props.choose_theme.bind(e,parseInt(t.id))},C.createElement("img",{className:"theme-preview--iApbo",src:t.cover_url}),C.createElement("div",{className:"theme-words--18JOx"},C.createElement("div",{className:"theme-name--1QFhf"},t.name),C.createElement("div",{className:"theme-used--7NB5V"},e.props.intl.formatMessage({id:"material_dialog/used"},{num:t.n_collections?t.n_collections:0}))))))})),C.createElement("div",{className:"material-items-wrap--2eMaW"},i)}},{key:"set_sort",value:function(e){e!==this.props.sort&&this.props.sort_mall_items(e,this.props.uncollected_only)}},{key:"set_uncollected_only",value:function(){this.props.sort_mall_items(this.props.sort,!this.props.uncollected_only)}},{key:"get_mall_header",value:function(){var e="LATEST_ONLINE"===this.props.sort,t="MOST_COLLECTED"===this.props.sort,i=C.createElement(C.Fragment,null,C.createElement("span",{className:"th1-text-t7"},this.props.intl.formatMessage({id:"material_dialog/content/sort"})),C.createElement("span",{className:(e||(this.props.theme.light_theme_colors||"th1-bg-7 th1-text-1 th1-bg-hover-6")?(e?"th1-bg-1 th1-text-10 th1-text-s2 th1-bg-hover-2":this.props.theme.light_theme_colors?"th1-bg-7 th1-text-t5 th1-text-hover-s2 th1-bg-hover-4":"th1-bg-7 th1-text-1 th1-bg-hover-6")+" ":"")+"top-filter--lWjFx",onClick:this.set_sort.bind(this,"LATEST_ONLINE")},this.props.intl.formatMessage({id:"material_dialog/content/latest_online"})),C.createElement("span",{className:(t||(this.props.theme.light_theme_colors||"th1-bg-7 th1-text-1 th1-bg-hover-6")?(t?"th1-bg-1 th1-text-10 th1-text-s2 th1-bg-hover-2":this.props.theme.light_theme_colors?"th1-bg-7 th1-text-t5 th1-text-hover-s2 th1-bg-hover-4":"th1-bg-7 th1-text-1 th1-bg-hover-6")+" ":"")+"top-filter--lWjFx",onClick:this.set_sort.bind(this,"MOST_COLLECTED")},this.props.intl.formatMessage({id:"material_dialog/content/most_collected"})),C.createElement("span",{className:"checkbox_wrap--3I-le",onClick:this.set_uncollected_only.bind(this)},C.createElement("div",{className:(this.props.theme.light_theme_colors||"th1-border-impt-1 th1-bg-10"?(this.props.theme.light_theme_colors?"th1-border-impt-s2":"th1-border-impt-1 th1-bg-10")+" ":"")+"checkbox_btn--2gdm7"},this.props.uncollected_only&&C.createElement(_e.c,{id:"#iconicon_xuanzhong-copy",class_name:"th1-text-0 th1-text-s2",size:16})),this.props.intl.formatMessage({id:"material_dialog/content/collected_only"})));return this.props.chosen_category!==this.props.index_of_theme?C.createElement("div",{className:"top-single-wrap--f68uJ"},i):this.props.chosen_theme?C.createElement(C.Fragment,null,C.createElement("div",{className:"top-double-wrap--TNX-b"},C.createElement("div",{className:"top-bar--1Go5c"},C.createElement("span",{className:"th1-text-t7"},this.props.intl.formatMessage({id:"material_dialog/content/category"})),this.get_group_header_filters()),C.createElement("div",{className:"second-bar--2p0sA"},i)),C.createElement("div",{className:"nav-wrap--xxFqE"},C.createElement("span",{className:"th1-text-t5 nav-tag--6tmCj",onClick:this.props.choose_theme.bind(this,void 0)},this.props.intl.formatMessage({id:"material_dialog/theme"})),C.createElement("span",{className:"nav-slash--kFYYj"},"-"),C.createElement("span",{className:"th1-text-1 th1-text-s2"},this.get_theme_name(this.props.chosen_theme)))):void 0}},{key:"get_theme_name",value:function(e){var t=this.props.themes.find((function(t){return parseInt(t.id)===e}));return t?t.name:""}},{key:"delete_group_item",value:(i=l()(s.a.mark((function e(t){var i,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(i=this.props.my_groups,a=this.props.chosen_category?i[pe(this.props.chosen_category)]:void 0,this.props.delete_group_item(t.id,a),this.props.current_audio===t.id&&(F.AudioPlayerModule.stop(t.id),this.props.set_current_audio(void 0)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"get_loading_page",value:function(){return C.createElement("div",{className:"loading-wrap--2ki4q"},C.createElement(_e.f,{size:30,theme_color:"10"}),C.createElement("div",{className:"th1-text-t5 loading-content--dlWqW"},this.props.intl.formatMessage({id:"material_dialog/content/loading"})))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.should_hide_menu&&this.hide_menu()}},{key:"render",value:function(){return this.props.current_tab===Y.a.LIBRARY?C.createElement("div",{className:"content-wrap--Nn5UR"},void 0===this.props.chosen_category||this.props.chosen_category&&this.props.chosen_category<0?this.get_group_header():"",this.props.material_items.length?this.get_library_item():this.get_loading_page(),this.state.show_menu_item?this.get_options():""):C.createElement("div",{className:"th1-bg-9 content-wrap--Nn5UR"},void 0===this.props.chosen_category?this.get_group_header():this.get_mall_header(),this.props.material_items.length||this.props.chosen_category===this.props.index_of_theme&&void 0===this.props.chosen_theme?this.get_mall_item():this.get_loading_page())}}]),t}(C.Component),be=Object(R.b)(ve),ye=i("qD1M"),we=i("RShD"),ke=i("Wqjn"),xe=(i("OxQ3"),{"./style.scss":{"choose-group-dialog":"choose-group-dialog--2qShX","preview-wrap":"preview-wrap--38MU2",preview:"preview--iU0Zv","preview-bg":"preview-bg--R_khj","material-name":"material-name--2STAR","n-collections":"n-collections--2HHZC","user-info-wrap":"user-info-wrap--1cPbB","user-avatar":"user-avatar--DCBAH","user-name":"user-name--2eRW2","copyright-declaration-wrap":"copyright-declaration-wrap--21wOP","copyright-content-wrap":"copyright-content-wrap--1NWe7","copyright-declaration":"copyright-declaration--1-n05","copyright-title":"copyright-title--1aHhB","copyright-body":"copyright-body--2_JMn","body-wrap":"body-wrap--1vuhO","header-folder-icon":"header-folder-icon--oywWH","header-words":"header-words--29kJ7","close-btn":"close-btn--36lbw","group-list-wrap":"group-list-wrap--1grMf","group-list-short":"group-list-short--3Gpwh","group-list-long":"group-list-long--3oIaI","warning-wrap":"warning-wrap--NHzDq","warning-icon":"warning-icon--3LSR0","warning-content":"warning-content--2wZyB","warning-words":"warning-words--1m7Pu","group-name-wrap":"group-name-wrap--3qKZA","group-name-words":"group-name-words--2MwPV","selected-icon":"selected-icon--3_r3c","inner-icon":"inner-icon--10J99","input-group-name":"input-group-name--1PLV4","choose-tags-wrap":"choose-tags-wrap--GQu6g","choose-tags-words":"choose-tags-words--3gsU2","tags-list":"tags-list--sXi6l","material-tag":"material-tag--WApdo","error-notice":"error-notice--2yNTC","collect-btn":"collect-btn--2EM-p","upload-btn":"upload-btn--rZuEE","upload-btn-text":"upload-btn-text--2D4ce","upload-item-img-wrap-audio":"upload-item-img-wrap-audio--Da7iW","audio-duration":"audio-duration--3xqpm","upload-dialog-audio":"upload-dialog-audio--1Wk_I","audio-img-wrap":"audio-img-wrap--s9Ava","icon-audio":"icon-audio--2O8rW","btn-audio-trigger-ready":"btn-audio-trigger-ready--1YCPn",hide:"hide--bGKQg","btn-audio-trigger-playing":"btn-audio-trigger-playing--1RrHw",play:"play--icjrA",pause:"pause--3QPCs","audio-progress-bar":"audio-progress-bar--A-elZ","uploading-mask":"uploading-mask--2DADs"}});(function(e){e[e.ROLE=0]="ROLE",e[e.BACKGROUND=1]="BACKGROUND"})(fe||(fe={}));var Ee={ROLE:"角色",BACKGROUND:"背景",AUDIO:"音乐"},Ne=!0,Me=function(e){function t(e){var i;return m()(this,t),(i=_()(this,g()(t).call(this,e))).progress_radius=47,i.progress_width=6,i.placeholder=void 0,i.animation_clock=void 0,i.chosen_file_type=void 0,i.input_area=void 0,i.duration=0,i.state={selected_tag:fe.ROLE,is_playing_audio:!1,progress_description:"",progress_in_sec:0,is_default_input:!0,chosen_group:e.groups[0]},i}var i,a,r,o,n;return y()(t,e),p()(t,[{key:"UNSAFE_componentWillMount",value:function(){this.placeholder=this.props.intl.formatMessage({id:"material_dialog/dialog/create_group"}),this.update_local_groups().catch((function(e){return console.log(e)})),this.props.is_open_from_mall&&this.props.chosen_item.is_collected&&this.set_material_existed().catch((function(e){return console.log(e)})),(this.props.is_open_from_mall&&"AUDIO"===this.props.chosen_item.file_type||!this.props.is_open_from_mall&&this.props.chosen_item.type.match("audio.*"))&&this.set_duration().catch((function(e){return console.log(e)})),this.setState({available_tags:[this.props.intl.formatMessage({id:"material_dialog/actor"}),this.props.intl.formatMessage({id:"material_dialog/background"})]})}},{key:"componentDidMount",value:function(){this.props.is_open_from_mall?this.show_animation():this.chosen_file_type=this.props.chosen_item.type.match("audio.*")?"AUDIO":this.state.selected_tag===fe.ROLE?"ROLE":"BACKGROUND"}},{key:"on_request_close",value:function(){clearInterval(this.animation_clock),this.state.is_playing_audio&&F.AudioPlayerModule.stop(),Object(B.x)(this.props.is_open_from_mall?"Kitten素材商城采集弹窗":"Kitten上传弹窗"),this.props.close_subdialog()}},{key:"show_animation",value:function(){var e=this.props.chosen_item;if(!("string"==typeof e.resource_urls||e.resource_urls.length<=1)){var t=document.getElementById("dialog-preview");if(t){var i=0;this.animation_clock=setInterval((function(){t.setAttribute("src","".concat(e.resource_urls[i%e.resource_urls.length],"?imageMogr2/thumbnail/!200x200r/blur/1x0/quality/100|imageslim")),i++}),200)}}}},{key:"get_preview",value:function(){return C.createElement("div",{className:"th1-bg-9 preview-wrap--38MU2"},this.get_preview_icon(),this.get_item_name(),this.get_n_collections(),this.get_author(),this.get_copyright())}},{key:"get_preview_icon",value:function(){if(!this.props.is_open_from_mall){var e=this.props.chosen_item;return C.createElement("div",{className:"preview--iU0Zv"},e.type.match("image.*")&&C.createElement("img",{src:window.URL.createObjectURL(e)}),e.type.match("audio.*")&&this.get_audio_item())}var t=this.props.chosen_item;return C.createElement("div",{className:"preview--iU0Zv"},"AUDIO"===t.file_type&&this.get_audio_item(),"AUDIO"!==t.file_type&&C.createElement("div",{"data-id":t.id,className:I()("BACKGROUND"===t.file_type?"preview-bg":"preview",xe,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement("img",{id:"dialog-preview",src:"".concat(t.resource_urls[0],"?imageMogr2/thumbnail/!200x200r/blur/1x0/quality/100|imageslim")})))}},{key:"get_item_name",value:function(){var e=this.props.chosen_item;return this.props.is_open_from_mall?C.createElement("div",{className:"th1-text-t7 material-name--2STAR"},ae(e.name)):C.createElement("div",{className:"th1-text-t7 material-name--2STAR"},e.name.slice(0,e.name.lastIndexOf(".")))}},{key:"get_n_collections",value:function(){var e=this.props.chosen_item;if(e&&e.author)return C.createElement("div",{className:"th1-text-t7 n-collections--2HHZC"},this.props.intl.formatMessage({id:"material_dialog/used"},{num:e.n_collections?e.n_collections:0}))}},{key:"get_author",value:function(){var e=this.props.chosen_item;if(e&&e.author)return C.createElement("div",{className:"user-info-wrap--1cPbB"},C.createElement("div",{className:"user-avatar--DCBAH"},C.createElement("img",{src:e.author.avatar_url})),C.createElement("div",{className:"th1-text-t5 user-name--2eRW2"},e.author.nickname))}},{key:"get_copyright",value:function(){var e=this.props.chosen_item;if(e&&e.copyright)return C.createElement("div",{className:"copyright-declaration-wrap--21wOP"},C.createElement("div",{className:"th1-text-t5 copyright-declaration--1-n05"},this.props.intl.formatMessage({id:"material_dialog/dialog/copyright_declaration"})),C.createElement("div",{className:"copyright-content-wrap--1NWe7"},C.createElement("div",{className:"th1-text-t5 copyright-title--1aHhB"},this.props.intl.formatMessage({id:"material_dialog/dialog/copyright_title"})),C.createElement("div",{className:"th1-text-t7 copyright-body--2_JMn"},e.copyright.statement)))}},{key:"choose_group",value:function(e){var t=this.props.is_open_from_mall?"采集":"上传";Object(B.t)("选择分组",t),this.setState({chosen_group:e})}},{key:"get_group_list",value:function(){var e=this,t=this.props.groups,i=this.state.chosen_group;if(t){var a=t.map((function(t,a){var r=t===i,o=r?"th1-bg-8 th1-border-0":"th1-bg-9 th1-bg-hover-8 th1-border-9 th1-border-hover-8";return C.createElement("li",{key:t.id},C.createElement("div",{className:(o?o+" ":"")+"group-name-wrap--3qKZA",onClick:e.choose_group.bind(e,t)},C.createElement("div",{className:"th1-text-t7 group-name-words--2MwPV"},t.is_default?e.props.intl.formatMessage({id:"material_dialog/sidebar/my_group"}):t.name),r&&C.createElement("div",{className:"selected-icon--3_r3c"},C.createElement("div",{className:"th1-bg-0 inner-icon--10J99"},C.createElement(_e.c,{id:"#iconbaise1",class_name:"th1-text-10 th1-text-s2",size:20})))))}));return this.state.existed_group&&a.unshift(C.createElement("li",null,C.createElement("div",{className:"warning-wrap--NHzDq"},C.createElement("div",{className:"warning-icon--3LSR0"},C.createElement(_e.c,{id:"#iconalert_warningx",size:24})),C.createElement("div",{className:"th1-text-t5 warning-content--2wZyB"},this.props.intl.formatMessage({id:"material_dialog/dialog/existed"})),C.createElement("div",{className:"th1-text-t5 warning-words--1m7Pu"},this.state.existed_group),C.createElement("div",{className:"warning-content--2wZyB"},this.props.intl.formatMessage({id:"material_dialog/dialog/in_group"}))))),C.createElement("div",{className:"group-list-wrap--1grMf"},C.createElement("ul",{className:I()(!this.props.is_open_from_mall&&this.props.chosen_item.type.match("image.*")?"group-list-short":"group-list-long",xe,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},a),C.createElement("input",{className:"th1-border-8 th1-border-focus-0 th1-bg-8 th1-text-t3 input-group-name--1PLV4",type:"text",maxLength:Y.e,ref:function(t){t&&(e.input_area=t)},defaultValue:this.placeholder,onFocus:this.handle_focus.bind(this),onBlur:this.handle_blur.bind(this),onKeyDown:this.handle_keydown.bind(this)}))}return"Error: cannot get my groups"}},{key:"handle_focus",value:function(e){e.target.value===this.placeholder&&(e.target.value="")}},{key:"handle_blur",value:function(e){""===e.target.value&&(e.target.value=this.placeholder),e.target.value===this.placeholder?this.setState({is_default_input:!0,error_notice:void 0}):this.setState({is_default_input:!1,error_notice:void 0})}},{key:"handle_keydown",value:(n=l()(s.a.mark((function e(t){var i,a,r,o=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.target.value,13!==t.keyCode){e.next=9;break}return Object(B.t)("创建分组",this.props.is_open_from_mall?"采集":"上传"),a=function(e){e?o.setState({error_notice:o.props.intl.formatMessage({id:"material_dialog/dialog/".concat(e)})}):(o.input_area.value="",o.input_area.blur())},e.next=6,this.props.group_controller.create(i,a);case 6:return r=e.sent,Object(z.B)()&&r&&this.update_local_groups().catch((function(e){return console.log(e)})),e.abrupt("return");case 9:this.state.error_notice&&this.setState({error_notice:void 0});case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"select_tag",value:function(e){this.state.selected_tag!==e&&(this.setState({selected_tag:e}),this.chosen_file_type=e===fe.ROLE?"ROLE":"BACKGROUND")}},{key:"get_available_tags",value:function(){var e=this,t=this.state.available_tags,i=this.state.selected_tag;if(t){var a=t.map((function(t,a){var r=i===a,o=e.props.theme.light_theme_colors?"th1-bg-7 th1-text-t5":"th1-bg-7 th1-text-1",s=r?"th1-bg-1 th1-text-10 th1-text-s2":o;return C.createElement("li",{className:(s?s+" ":"")+"material-tag--WApdo",key:t,onClick:e.select_tag.bind(e,a)},t)}));return C.createElement("div",{className:"choose-tags-wrap--GQu6g"},C.createElement("div",{className:"th1-text-t5 choose-tags-words--3gsU2"},this.props.intl.formatMessage({id:"material_dialog/dialog/choose_tag"})),C.createElement("ul",{className:"tags-list--sXi6l"},a))}return"Error: cannot get tags"}},{key:"get_btn",value:function(){return this.props.is_open_from_mall&&this.props.chosen_item?C.createElement("div",{className:"collect-btn--2EM-p"},C.createElement(_e.a,{type:"primary",width:120,height:36,on_click:this.collect_item.bind(this)},this.props.intl.formatMessage({id:"material_dialog/dialog/collect"}),C.createElement(_e.c,{margin:"2px",id:"#iconicn_coin",class_name:"th1-text-10",size:20}),this.props.chosen_item.is_collected?0:this.props.chosen_item.price)):C.createElement("div",{className:"upload-btn--rZuEE"},C.createElement(_e.a,{type:"primary",height:36,on_click:this.upload_item.bind(this)},C.createElement("span",{className:"upload-btn-text--2D4ce"},this.props.intl.formatMessage({id:"material_dialog/dialog/upload"}))))}},{key:"upload_item",value:(o=l()(s.a.mark((function e(){var t,i,a,r=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ne){e.next=2;break}return e.abrupt("return");case 2:return Object(B.w)(Ee[this.chosen_file_type]),t=this.props.chosen_item,e.next=6,Object(z.o)([t]);case 6:if(!e.sent.has_failed_load){e.next=10;break}return this.props.show_toast("upload_error/source_error","error"),e.abrupt("return");case 10:if("BACKGROUND"!==this.chosen_file_type&&"ROLE"!==this.chosen_file_type){e.next=20;break}return a=Object(we.b)(0,1,void 0),Ne=!1,e.next=15,new Promise((function(e){Object(we.a)(t,"BACKGROUND"===r.chosen_file_type?"background":"actor",(function(t){e(t)})).catch((function(e){console.error(e)}))}));case 15:i=e.sent,Object(we.c)(a),Ne=!0,i.is_resize&&Object(we.e)(),i.file&&(t=i.file);case 20:this.props.group_controller.upload(t,this.state.chosen_group,this.chosen_file_type),this.on_request_close();case 22:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"collect_item",value:function(){this.props.group_controller.collect(this.props.chosen_item,this.state.chosen_group),this.on_request_close()}},{key:"get_audio_svg",value:function(e){var t=[],i=C.createElement("span",null),a=this.progress_radius,r=this.progress_width,o=a+r/2,s="translate(".concat(o,",").concat(o,")"),n=Object(de.h)()[0];i=C.createElement("svg",{viewBox:"0 0 100 100"},C.createElement("path",{fill:"none",stroke:n,strokeWidth:r,transform:s,d:"M 0 ".concat(-a," A ").concat(a," ").concat(a," 0 1 1 0 ").concat(-a)}),C.createElement("path",{fill:"none",stroke:n,strokeWidth:r,transform:s,d:this.state.progress_description}));var l={borderColor:this.state.is_playing_audio?Object(de.e)(Object(de.h)()[0],.3):Object(de.e)(Object(de.h)()[0])};return t.push(C.createElement("div",{className:"audio-progress-bar--A-elZ"},i),C.createElement("div",{style:l,onClick:this.on_click_audio_item.bind(this,e),className:I()(this.state.is_playing_audio?"btn-audio-trigger-playing":"btn-audio-trigger-ready",xe,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement("div",{className:"play--icjrA"},C.createElement(_e.c,{id:"#iconproperties_play",class_name:"th1-text-1",size:20})),C.createElement("div",{className:"pause--3QPCs"},C.createElement(_e.c,{id:"#iconproperties_pause",class_name:"th1-text-1",size:20})))),t}},{key:"on_click_audio_item",value:function(e,t){if(t.stopPropagation(),F.AudioPlayerModule.stop(),this.props.set_current_audio(void 0),!this.state.is_playing_audio)return this.setState({is_playing_audio:!0}),void this.play_audio(e);this.setState({is_playing_audio:!1})}},{key:"play_audio",value:function(e){var t=this;if(Object(z.B)()){var i=F.AudioPlayerModule.load(e,e);i&&(i.on("end",(function(){t.setState({is_playing_audio:!1}),i.unload()})),i.on("play",(function(){requestAnimationFrame(t.draw_progress_bar.bind(t,i))})),i.play())}else this.props.show_toast("error","disconnect_tips")}},{key:"draw_progress_bar",value:function(e){if(e&&e.playing()){var t=e.seek();t instanceof G.Howl&&(t=0);var i=t/e.duration(),a=360*i;if(i>=1)this.setState({progress_description:""});else{var r=a*(Math.PI/180),o=this.progress_radius,s=(Math.sin(r)*o).toFixed(2),n=-(Math.cos(r)*o).toFixed(2),l=["M",0,-o,"A",o,o,0,Number(a>180),1,s,n];this.setState({progress_description:l.join(" "),progress_in_sec:t}),requestAnimationFrame(this.draw_progress_bar.bind(this,e))}}else this.setState({progress_description:"",progress_in_sec:0})}},{key:"get_audio_item",value:function(){var e=this.props.chosen_item,t=e.resource_urls?e.resource_urls[0]:window.URL.createObjectURL(e),i=this.duration;return this.state.is_playing_audio&&(i=this.state.progress_in_sec),C.createElement("div",{className:"upload-item-img-wrap-audio--Da7iW"},C.createElement("audio",{className:"upload-dialog-audio--1Wk_I",src:t,preload:"none"}),C.createElement("div",{className:"audio-img-wrap--s9Ava"},this.get_icon_audio(this.state.is_playing_audio),this.get_audio_svg(t)),C.createElement("div",{className:"th1-text-t5 audio-duration--3xqpm"},Object(z.p)(i)))}},{key:"get_icon_audio",value:function(e){return e?C.createElement("div",{className:"hide--bGKQg"}):C.createElement("div",{className:"icon-audio--2O8rW"},C.createElement(_e.c,{id:"#iconicn_shengyin_act",class_name:"th1-text-0",size:54}))}},{key:"set_material_existed",value:(r=l()(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ke.d)(this.props.chosen_item.id);case 2:t=e.sent,this.setState({existed_group:t});case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"update_local_groups",value:(a=l()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.update_groups();case 2:this.setState({chosen_group:this.props.groups[0]});case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"set_duration",value:(i=l()(s.a.mark((function e(){var t,i,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.chosen_item,i=0,e.prev=2,i=Math.round(JSON.parse(t.resource_names).duration),e.next=12;break;case 6:return e.prev=6,e.t0=e.catch(2),a=t.resource_urls?t.resource_urls[0]:window.URL.createObjectURL(t),e.next=11,Object(z.r)(a);case 11:i=e.sent;case 12:this.duration=i||1;case 13:case"end":return e.stop()}}),e,this,[[2,6]])}))),function(){return i.apply(this,arguments)})},{key:"render",value:function(){return C.createElement(_e.g,{type:"__none__",on_request_close:this.on_request_close.bind(this),close_btn:!1},C.createElement("div",{className:"choose-group-dialog--2qShX"},this.get_preview(),C.createElement("div",{className:"body-wrap--1vuhO"},C.createElement("div",{className:"header-folder-icon--oywWH"},C.createElement(_e.c,{id:"#iconicn_sucai_act",class_name:"th1-text-t5",size:20})),C.createElement("div",{className:"th1-text-t5 header-words--29kJ7"},this.props.intl.formatMessage({id:"material_dialog/dialog/choose_group"})),C.createElement("div",{className:"close-btn--36lbw",onClick:this.on_request_close.bind(this)},C.createElement(_e.c,{class_name:"th1-text-t5",id:"#iconicon_close",size:20})),this.get_group_list(),!this.props.is_open_from_mall&&this.props.chosen_item.type.match("image.*")&&this.get_available_tags(),C.createElement("div",{className:"error-notice--2yNTC"},this.state.error_notice?this.state.error_notice:""),this.get_btn())))}}]),t}(C.Component),Oe=Object(R.b)(Me);i("ZxpT");var Se=function(e){function t(e){var i;return m()(this,t),(i=_()(this,g()(t).call(this,e))).state={error_notice:void 0,new_name:""},i}var i;return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e,t=this.props.chosen_group,i=t?t.name:"";this.setState({new_name:(e=i,e.length>20&&(e=e.substring(0,e.lastIndexOf("-"))),e)})}},{key:"on_request_close",value:function(){this.props.close_subdialog()}},{key:"show_result",value:(i=l()(s.a.mark((function e(){var t,i=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(B.t)(this.props.is_new?"创建分组":"重命名分组"),t=function(e){e?i.setState({error_notice:i.props.intl.formatMessage({id:"material_dialog/dialog/".concat(e)})}):i.on_request_close()},!this.props.is_new&&this.props.chosen_group?this.props.group_controller.rename(this.props.chosen_group,this.state.new_name,t):this.props.group_controller.create(this.state.new_name,t,!0);case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"handle_input",value:function(e){this.state.error_notice&&this.setState({error_notice:void 0}),this.setState({new_name:e.target.value})}},{key:"handle_blur",value:function(e){this.setState({error_notice:void 0,new_name:e.target.value})}},{key:"render",value:function(){return C.createElement(_e.g,{type:"__none__",on_request_close:this.on_request_close.bind(this),close_btn:!1},C.createElement("div",{className:"inside-dialog--1kqjt"},C.createElement("div",{className:"dialog-title-wrap--3OAsi"},C.createElement("div",{className:"th1-text-t dialog-title-words--3q91Y"},this.props.is_new?this.props.intl.formatMessage({id:"material_dialog/dialog/create_group_title"}):this.props.intl.formatMessage({id:"material_dialog/dialog/rename_group_title"}))),C.createElement("div",{className:"input-wrap--2AjAb"},C.createElement(_e.d,{autofocus:!0,max_length:Y.e,margin:"6px",width:"300px",height:"36px",input_style:{paddingRight:"10px"},placeholder:"material_dialog/dialog/name_your_group",value:this.state.new_name,on_change:this.handle_input.bind(this),on_blur:this.handle_blur.bind(this),classname:"th1-bg-8 th1-border-impt-focus-0 th1-border-impt-hover-0 ".concat(this.state.error_notice?"th1-border-impt-focus-0 th1-border-impt-hover-0":"")})),C.createElement("div",{className:"error-notice--1mMyC"},this.state.error_notice?this.state.error_notice:""),C.createElement("div",{className:"btn-group--eSHmd"},C.createElement(_e.a,{type:"primary-outline",margin:"0px 16px",width:120,height:36,on_click:this.on_request_close.bind(this)},this.props.intl.formatMessage({id:"material_dialog/cancel"})),C.createElement(_e.a,{type:"primary",width:120,height:36,on_click:this.show_result.bind(this)},this.props.intl.formatMessage({id:"material_dialog/confirm"})))))}}]),t}(C.Component),Ae=Object(R.b)(Se),Ie=(i("XYwi"),{"./style.scss":{"inside-dialog":"inside-dialog--36AD-",showDialog:"showDialog--18i0X","dialog-title-wrap":"dialog-title-wrap--1ovyg","warning-icon":"warning-icon--3cRR_","dialog-title-words":"dialog-title-words--GNXmo","btn-group":"btn-group--1oQdo","move-to-group":"move-to-group--13fy3","group-dropdown-wrap":"group-dropdown-wrap--3zi83","drop-down-icon":"drop-down-icon--3QG-M",rotate:"rotate--3Y7Mk","group-list-wrap":"group-list-wrap--30XnC","group-list":"group-list--250Mw",group_li:"group_li--3P56s",group_li_bar:"group_li_bar--3jXPv",selected:"selected--3wCAm","error-notice":"error-notice--3T2BO","group-name-wrap":"group-name-wrap--3s-vc","input-group-name":"input-group-name--1oMzZ"}});var Ce=function(e){function t(e){var i;return m()(this,t),(i=_()(this,g()(t).call(this,e))).state={success:void 0,chosen_group:e.groups[0],show_drop_down:!1,group_name:""},i}var i,a;return y()(t,e),p()(t,[{key:"UNSAFE_componentWillMount",value:function(){this.update_local_groups().catch((function(e){return console.log(e)}))}},{key:"on_request_close",value:function(){this.props.close_subdialog()}},{key:"get_group_drop_down",value:function(){var e=this,t=this.props.groups;if(t&&this.state.chosen_group){var i=t.map((function(t){return C.createElement("li",{key:t.id,className:I()(e.state.chosen_group.id===t.id?"group_li selected":"group_li",Ie,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement("div",{className:"th1-bg-0 group_li_bar--3jXPv"}),C.createElement("div",{className:"th1-text-t7 th1-bg-hover-8 group-name-wrap--3s-vc",onClick:e.choose_target_group.bind(e,t)},t.name))}));return C.createElement("div",{className:"group-dropdown-wrap--3zi83"},C.createElement("div",{className:"group-list-wrap--30XnC"},C.createElement("ul",{className:"group-list--250Mw"},i),C.createElement("div",{className:"error-notice--3T2BO"},this.state.error_notice?this.state.error_notice:"")),C.createElement("div",{className:"input-group-name--1oMzZ"},C.createElement(_e.d,{max_length:Y.e,margin:"6px",width:"270px",height:"36px",input_style:{paddingRight:"10px"},placeholder:"material_dialog/dialog/create_group",value:this.state.group_name,on_change:this.handle_change.bind(this),on_enter_down:this.handle_keydown.bind(this),classname:"th1-bg-8 th1-text-t3 th1-bg-hover-6 th1-bg-focus-9 th1-border-impt-focus-0 th1-text-focus-t7"})))}}},{key:"handle_change",value:function(e){this.setState({group_name:e.target.value})}},{key:"handle_keydown",value:(a=l()(s.a.mark((function e(t){var i,a,r,o=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.blur(),i=this.state.group_name,Object(B.t)("创建分组","移动"),a=function(e){e&&o.setState({error_notice:o.props.intl.formatMessage({id:"material_dialog/dialog/".concat(e)})})},e.next=6,this.props.group_controller.create(i,a);case 6:r=e.sent,Object(z.B)()&&r&&this.update_local_groups().catch((function(e){return console.log(e)})),this.setState({group_name:""}),this.state.error_notice&&this.setState({error_notice:void 0});case 10:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"update_local_groups",value:(i=l()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.update_groups();case 2:this.setState({chosen_group:this.props.groups[0]});case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"show_result",value:function(){if(this.state.chosen_group.id===this.props.category_id)return this.on_request_close(),void Object(te.a)("material_dialog/toast/move_success","success",{group:this.state.chosen_group.name});this.props.group_controller.move(this.props.chosen_item,this.state.chosen_group).catch((function(e){return console.log(e)})),this.on_request_close()}},{key:"choose_target_group",value:function(e){Object(B.t)("选择分组","移动"),this.setState({chosen_group:e,show_drop_down:!1})}},{key:"show_drop_down_menu",value:function(){this.setState({show_drop_down:!this.state.show_drop_down})}},{key:"render",value:function(){var e=this.get_group_drop_down(),t={borderTop:"5.6px solid ".concat(Object(de.e)(Object(de.h)().t3))};return C.createElement(_e.g,{type:"__none__",on_request_close:this.on_request_close.bind(this),close_btn:!1},C.createElement("div",{className:"inside-dialog--36AD-"},C.createElement("div",{className:"dialog-title-wrap--1ovyg"},C.createElement("div",{className:"th1-text-t dialog-title-words--GNXmo"},this.props.intl.formatMessage({id:"material_dialog/dialog/move_to_group"}))),C.createElement("div",{className:"th1-bg-8 th1-text-t5 th1-border-1 move-to-group--13fy3",onClick:this.show_drop_down_menu.bind(this)},this.state.chosen_group?this.state.chosen_group.name:this.props.groups[0]?this.props.groups[0].name:"",C.createElement("div",{style:t,className:I()(this.state.show_drop_down?"drop-down-icon rotate":"drop-down-icon",Ie,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})})),this.state.show_drop_down?e:"",C.createElement("div",{className:"btn-group--1oQdo"},C.createElement(_e.a,{type:"primary-outline",margin:"0px 16px",width:120,height:36,on_click:this.on_request_close.bind(this)},this.props.intl.formatMessage({id:"material_dialog/cancel"})),C.createElement(_e.a,{type:"primary",width:120,height:36,on_click:this.show_result.bind(this)},this.props.intl.formatMessage({id:"material_dialog/confirm"})))))}}]),t}(C.Component),Re=Object(R.b)(Ce);i("1WHl");var je=function(e){function t(e){var i;return m()(this,t),(i=_()(this,g()(t).call(this,e))).state={success:void 0},i}return y()(t,e),p()(t,[{key:"on_request_close",value:function(){this.props.close_subdialog()}},{key:"show_result",value:function(){Object(B.t)("删除分组"),this.props.group_controller.delete(this.props.chosen_group),this.on_request_close()}},{key:"render",value:function(){return C.createElement(_e.g,{type:"__none__",on_request_close:this.on_request_close.bind(this),close_btn:!1},C.createElement("div",{className:"inside-dialog--POA-k"},C.createElement("div",{className:"dialog-title-wrap--3y-Cx"},C.createElement("div",{className:"th1-text-t dialog-title-words--2MeUj"},this.props.intl.formatMessage({id:"material_dialog/dialog/delete_title"}))),C.createElement("div",{className:"th1-text-t7 dialog-content--1dTqi"},this.props.intl.formatMessage({id:"material_dialog/dialog/delete_body"})),C.createElement("div",{className:"btn-group--yhNCF"},C.createElement(_e.a,{type:"primary-outline",width:120,height:36,margin:"0px 16px",on_click:this.show_result.bind(this)},this.props.intl.formatMessage({id:"material_dialog/delete"})),C.createElement(_e.a,{type:"primary",width:120,height:36,on_click:this.on_request_close.bind(this)},this.props.intl.formatMessage({id:"material_dialog/keep"})))))}}]),t}(C.Component),Le=Object(R.b)(je),De=(i("K3k4"),{"./style.scss":{"select-frame-dialog":"select-frame-dialog--1HtKf",showDialog:"showDialog--1v1w0","preview-wrap":"preview-wrap--2I3Dr",preview:"preview--2cHSC",preview_text:"preview_text--yrW-k","content-wrap":"content-wrap--2qBOM","header-folder-icon":"header-folder-icon--3w4yr","header-words":"header-words--2Zzxe","close-btn":"close-btn--1qb0y",frame_select_wrap:"frame_select_wrap--k_rvl",frame_item:"frame_item--1MNtY",frame_item_img:"frame_item_img--3QAqx",frame_item_index:"frame_item_index--1XosD",frame_select_icon:"frame_select_icon--2y9Rp","inner-icon":"inner-icon--7t8Ef",selected:"selected--tfVmf",frame_select_footer:"frame_select_footer--1dsBZ",footer_btn:"footer_btn--2enwZ","all-select-btn":"all-select-btn--2-WpT"}});var Te=function(e){function t(e){var i;return m()(this,t),(i=_()(this,g()(t).call(this,e))).animation_clock=void 0,i.state={select_index:[0],select_all:!1},i.confirm_add_frame=i.confirm_add_frame.bind(v()(i)),i}return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){this.show_animation()}},{key:"componentWillUnmount",value:function(){clearInterval(this.animation_clock)}},{key:"get_i18n_msg",value:function(e){return this.props.intl.formatMessage({id:e})}},{key:"on_request_close",value:function(){clearInterval(this.animation_clock),this.props.close_subdialog()}},{key:"confirm_add_frame",value:function(){var e=this.props.chosen_item,t=this.state.select_index.map((function(t){return e.resource_urls[t]}));this.props.choose_frame_from_dialog(e,t),this.on_request_close()}},{key:"show_animation",value:function(){var e=this.props.chosen_item;if(!("string"==typeof e.resource_urls||e.resource_urls.length<=1)){var t=document.getElementById("dialog-preview");if(t){var i=0;this.animation_clock=setInterval((function(){t.setAttribute("src","".concat(e.resource_urls[i%e.resource_urls.length],"?imageMogr2/thumbnail/!200x200r/blur/1x0/quality/100|imageslim")),i++}),200)}}}},{key:"get_preview",value:function(){var e=this.props.chosen_item,t="";try{t=JSON.parse(e.name)[Object(Q.e)()]}catch(i){t=e.name}return C.createElement("div",{className:"th1-bg-9 preview-wrap--2I3Dr"},C.createElement("div",{className:"preview--2cHSC"},C.createElement("img",{id:"dialog-preview",src:"".concat(e.resource_urls[0],"?imageMogr2/thumbnail/!200x200r/blur/1x0/quality/100|imageslim")})),C.createElement("div",{className:"th1-text-t7 preview_text--yrW-k"},t))}},{key:"select_item",value:function(e){var t=r()(this.state.select_index),i=t.indexOf(e),a=this.state.select_index.length;if(-1===i){if(this.props.num_of_frames+a+1>Y.s)return void this.props.show_toast(void 0,"material_dialog/toast/painter_frame_limit");t.push(e)}else t.splice(i,1);this.setState({select_index:t,select_all:t.length===this.props.chosen_item.resource_urls.length})}},{key:"get_item_info",value:function(){var e=this,t=this.props.chosen_item.resource_urls.map((function(t,i){var a=-1!==e.state.select_index.indexOf(i),r=a?"th1-bg-0":e.props.theme.light_theme_colors?"th1-bg-2 th1-text-s2":"th1-bg-8 th1-text-0",o=a?e.props.theme.light_theme_colors?"th1-border-impt-m2 th1-bg-4":"th1-border-impt-0 th1-bg-8":"th1-bg-9";return C.createElement("div",{key:t,onClick:e.select_item.bind(e,i),className:(o?o+" ":"")+I()(a?"frame_item selected":"frame_item",De,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement("div",{className:"frame_item_img--3QAqx",style:{backgroundImage:"url(".concat(t,"?imageMogr2/thumbnail/!200x200r/blur/1x0/quality/100|imageslim)")}}),C.createElement("div",{className:(r?r+" ":"")+"frame_item_index--1XosD"},i+1),C.createElement("div",{className:"frame_select_icon--2y9Rp"},C.createElement("div",{className:"th1-bg-0 inner-icon--7t8Ef"},C.createElement(_e.c,{id:"#iconbaise1",class_name:"th1-text-10 th1-text-s2",size:16}))))}));return C.createElement("div",{className:"frame_select_wrap--k_rvl"},t)}},{key:"select_all",value:function(){var e=this.props.chosen_item.resource_urls.length;if(this.props.num_of_frames+e>Y.s){for(var t=r()(this.state.select_index),i=this.props.num_of_frames+t.length,a=0;i<Y.s&&a<e;)-1===t.indexOf(a)&&(t.push(a),i++),a++;return this.setState({select_all:!1,select_index:t}),void this.props.show_toast(void 0,"material_dialog/toast/painter_frame_limit")}var o=[];if(!this.state.select_all)for(var s=0;s<e;s++)o.push(s);this.setState({select_all:!this.state.select_all,select_index:o})}},{key:"get_btn",value:function(){return C.createElement("div",{className:"frame_select_footer--1dsBZ"},C.createElement("div",{className:"footer_btn--2enwZ"},C.createElement("div",{onClick:this.select_all.bind(this),className:(this.props.theme.light_theme_colors||"th1-border-impt-1 th1-bg-10"?(this.props.theme.light_theme_colors?"th1-border-impt-1":"th1-border-impt-1 th1-bg-10")+" ":"")+"all-select-btn--2-WpT"},this.state.select_all&&C.createElement(_e.c,{id:"#iconicon_xuanzhong-copy",class_name:"th1-text-0",size:20})),C.createElement("span",{onClick:this.select_all.bind(this),className:"th1-text-t7"},this.get_i18n_msg("material_dialog/dialog/add_frame_dialog/all_select")),C.createElement(_e.a,{type:"primary",disable:0===this.state.select_index.length||void 0,width:120,height:36,on_click:this.confirm_add_frame},this.get_i18n_msg("material_dialog/dialog/add_frame_dialog/confirm"),"(",this.state.select_index.length,")")))}},{key:"render",value:function(){return C.createElement(_e.g,{type:"__none__",on_request_close:this.on_request_close.bind(this),close_btn:!1},C.createElement("div",{className:"select-frame-dialog--1HtKf"},this.get_preview(),C.createElement("div",{className:"content-wrap--2qBOM"},C.createElement("div",{className:"header-folder-icon--3w4yr"},C.createElement(_e.c,{id:"#iconmultiframe",class_name:"th1-text-t5",size:20})),C.createElement("div",{className:"th1-text-t5 header-words--2Zzxe"},this.props.intl.formatMessage({id:"material_dialog/dialog/add_frame"})),C.createElement("div",{className:"close-btn--1qb0y",onClick:this.on_request_close.bind(this)},C.createElement(_e.c,{class_name:"th1-text-t5",id:"#iconicon_close",size:20})),this.get_item_info(),this.get_btn())))}}]),t}(C.Component),Ue=Object(R.b)(Te),Be=function(e){function t(e){var i;return m()(this,t),(i=_()(this,g()(t).call(this,e))).state={display:!1,groups_in_latest_order:[]},i.update_group_list=i.update_group_list.bind(v()(i)),i}var i;return y()(t,e),p()(t,[{key:"update_group_list",value:(i=l()(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.get_updated_groups();case 2:t=e.sent,this.setState({groups_in_latest_order:t});case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"get_dialog_content",value:function(){var e;switch(e=this.state.groups_in_latest_order?this.state.groups_in_latest_order:[],this.props.shown_dialog){case"rename_group":return C.createElement(Ae,{close_subdialog:this.props.close_subdialog,is_new:!1,chosen_group:this.props.dialog_para,group_controller:this.props.group_controller,groups:this.props.groups});case"upload":case"collect":return C.createElement(Oe,{close_subdialog:this.props.close_subdialog,show_toast:this.props.show_toast,is_open_from_mall:"collect"===this.props.shown_dialog,chosen_item:this.props.dialog_para,group_controller:this.props.group_controller,groups:e,update_groups:this.update_group_list,set_current_audio:this.props.set_current_audio,theme:this.props.theme});case"move_to_group":return C.createElement(Re,{close_subdialog:this.props.close_subdialog,chosen_item:this.props.dialog_para,group_controller:this.props.group_controller,groups:e,update_groups:this.update_group_list,category_id:this.props.category_id});case"new_group":return C.createElement(Ae,{close_subdialog:this.props.close_subdialog,is_new:!0,group_controller:this.props.group_controller,groups:this.props.groups});case"delete_group":return C.createElement(Le,{close_subdialog:this.props.close_subdialog,chosen_group:this.props.dialog_para,group_controller:this.props.group_controller});case"select_frame":return C.createElement(Ue,{theme:this.props.theme,choose_frame_from_dialog:this.props.choose_frame_from_dialog,num_of_frames:this.props.num_of_frames,close_subdialog:this.props.close_subdialog,show_toast:this.props.show_toast,chosen_item:this.props.dialog_para});default:return""}}},{key:"render",value:function(){return C.createElement("div",null,this.state.display?C.createElement(ye.a,null):"",this.get_dialog_content())}}]),t}(C.Component),qe=(i("dMdD"),{"./style.scss":{"material-footer-wrap":"material-footer-wrap--5trp8","chosen-items-wrap":"chosen-items-wrap--2lkMm","items-wrap":"items-wrap--MZMtX","icn-delete":"icn-delete--3nJou","items-wrap-showing":"items-wrap-showing--2Fq-k","show-item":"show-item--pz7_b","items-wrap-disappearing":"items-wrap-disappearing--19HcE","material-item-preview":"material-item-preview--33m-Z","icn-loading":"icn-loading--C_CJj","icn-audio":"icn-audio--3kvv8","material-item-img":"material-item-img--aelAF","material-item-scene":"material-item-scene--31wiG","material-item-info":"material-item-info--1w2ra","btn-wrap":"btn-wrap--3g80d","btn-groups":"btn-groups--1KCye","confirm-btn":"confirm-btn--3cP54","confirm-btn-text":"confirm-btn-text--3UaUh","clear-btn":"clear-btn--2EjD7"}});var ze=function(e){function t(){var e,i;m()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(i=_()(this,(e=g()(t)).call.apply(e,[this].concat(r)))).items_wrap=void 0,i.item_to_delete=void 0,i.last_chosen_items_length=void 0,i}return y()(t,e),p()(t,[{key:"componentDidUpdate",value:function(){if(this.props.chosen_items.length>this.last_chosen_items_length){var e=this.items_wrap.scrollWidth-this.items_wrap.clientWidth;this.items_wrap.scrollLeft=e}this.last_chosen_items_length=this.props.chosen_items.length}},{key:"get_item_preview",value:function(e){if(/^loading/.test(e.id))return C.createElement("div",{className:"material-item-preview--33m-Z"},C.createElement("div",{className:"icn-loading--C_CJj"},C.createElement(_e.f,{size:30,theme_color:"10"})));if("AUDIO"===e.file_type)return C.createElement("div",{className:"material-item-preview--33m-Z"},C.createElement("div",{className:"icn-audio--3kvv8"},C.createElement(_e.c,{id:"#iconicn_shengyin_act",class_name:"th1-text-0 th1-text-s2",size:54})));var t=Object(z.y)(e.resource_urls[0])?e.resource_urls[0]:"".concat(e.resource_urls[0],"?imageMogr2/thumbnail/!200x200r/blur/1x0/quality/100|imageslim");return C.createElement("div",{className:"material-item-preview--33m-Z"},C.createElement("img",{src:t,className:I()("BACKGROUND"===e.file_type?"material-item-scene":"material-item-img",qe,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})}))}},{key:"get_item_component",value:function(e,t){return C.createElement("div",{key:t,className:(this.props.theme.light_theme_colors||"th1-bg-8 th1-bg-hover-7"?(this.props.theme.light_theme_colors?"th1-bg-8 th1-bg-hover-5":"th1-bg-8 th1-bg-hover-7")+" ":"")+I()(void 0===this.item_to_delete&&t+1===this.props.chosen_items.length&&this.props.chosen_items.length>this.last_chosen_items_length?"items-wrap-showing":this.item_to_delete===e.id?"items-wrap-disappearing":"items-wrap",qe,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},this.get_item_preview(e),C.createElement("div",{className:"th1-text-t7 material-item-info--1w2ra"},ae(e.name)),C.createElement("div",{className:"icn-delete--3nJou",onClick:this.delete_item.bind(this,e)},C.createElement(_e.c,{id:"#iconicon-jiaose-shanchu",size:16})))}},{key:"get_items",value:function(){var e=this,t=this.props.chosen_items,i=[];return t&&t.length&&t.forEach((function(t,a){var r=e.get_item_component(t,a);i.push(r)})),i}},{key:"delete_frame_item",value:function(e,t){this.props.remove_frame_by_url(e,t)}},{key:"get_frame_preview",value:function(e,t){var i=Object(z.y)(e)?e:"".concat(e,"?imageMogr2/thumbnail/!200x200r/blur/1x0/quality/100|imageslim");return C.createElement("div",{className:"material-item-preview--33m-Z"},C.createElement("img",{src:i,className:I()("BACKGROUND"===t?"material-item-scene":"material-item-img",qe,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})}))}},{key:"get_frame_item_component",value:function(e,t,i,a){return C.createElement("div",{className:(this.props.theme.light_theme_colors||"th1-bg-8 th1-bg-hover-7"?(this.props.theme.light_theme_colors?"th1-bg-8 th1-bg-hover-5":"th1-bg-8 th1-bg-hover-7")+" ":"")+"items-wrap--MZMtX",key:a},this.get_frame_preview(t,e.file_type),C.createElement("div",{className:"th1-text-t7 material-item-info--1w2ra"},"MULTI_IMAGE"===e.file_type?function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(Q.e)();try{var a=JSON.parse(e);return a[i][t]?a[i][t]:a.en[t]||e}catch(t){return e}}(e.resource_names,i):ae(e.name)),C.createElement("div",{className:"icn-delete--3nJou",onClick:this.delete_frame_item.bind(this,e,t)},C.createElement(_e.c,{id:"#iconicon-jiaose-shanchu",size:16})))}},{key:"get_painter_frame_items",value:function(){var e=this,t=this.props.chosen_items,i=this.props.get_frame_info(),a=[];return t&&t.length&&t.forEach((function(t,r){var o=i[t.id];o&&o.forEach((function(i,o){var s=t.resource_urls.indexOf(i),n=e.get_frame_item_component(t,i,s,"".concat(r).concat(o));a.push(n)}))})),a}},{key:"get_confirm_btn",value:function(){var e=this.props.chosen_items,t=0===e.length?"":"(".concat(e.length,")");return C.createElement("div",{className:"confirm-btn--3cP54"},C.createElement(_e.a,{type:"primary",height:36,on_click:this.props.chosen_confirm.bind(this)},C.createElement("div",{className:"confirm-btn-text--3UaUh"},"".concat(this.props.intl.formatMessage({id:"material_dialog/footer/add"})).concat(t))))}},{key:"delete_item",value:function(e){var t=this;this.item_to_delete=e.id,this.forceUpdate(),setTimeout(this.props.delete_item.bind(this,e),100),setTimeout((function(){t.item_to_delete=void 0}),101)}},{key:"get_clear_btn",value:function(){return C.createElement("div",{className:"clear-btn--2EjD7"},C.createElement(_e.a,{type:"primary-outline",width:120,height:36,on_click:this.props.clear_choices.bind(this)},this.props.intl.formatMessage({id:"material_dialog/clear"})))}},{key:"render",value:function(){var e=this,t=Object(de.e)(Object(de.h)()[7]),i={boxShadow:"1px 0px 0px 0px ".concat(t)};return C.createElement("div",{className:"material-footer-wrap--5trp8"},C.createElement("div",{className:"th1-border-7 chosen-items-wrap--2lkMm",id:"chosen-items-wrap",style:i,ref:function(t){t&&(e.items_wrap=t)}},this.props.mode===Y.i.painter?this.get_painter_frame_items():this.get_items()),this.props.mode===Y.i.kitten&&C.createElement("div",{className:"th1-border-7 btn-wrap--3g80d"},C.createElement("div",{className:"btn-groups--1KCye"},this.get_clear_btn(),this.get_confirm_btn())))}}]),t}(C.Component),Fe=Object(R.b)(ze),We=i("sEfC"),Pe=i.n(We),He=i("5FhS"),Je=(i("474t"),{"./style.scss":{"material-header-wrap":"material-header-wrap--16NBO","material-header-left":"material-header-left--2gq1_","material-header-logo":"material-header-logo--1wOM9","material-header-tab-wrap":"material-header-tab-wrap--1o1Uv",tabs:"tabs--1iNrT",tab:"tab--35iby","tab-text":"tab-text--1H2zC","tab-chosen":"tab-chosen--1RmOz","material-gold":"material-gold--1N---","gold-text":"gold-text--HTHby","gold-number":"gold-number--31-_H","gold-notice-wrap":"gold-notice-wrap--3830d","material-search":"material-search--3iArq",painter:"painter--1HJyj","material-search-keyword":"material-search-keyword--2n3TD","gold-notice-title":"gold-notice-title--2Tb0d","gold-notice-body":"gold-notice-body--1zxF1",dialog_btn_close:"dialog_btn_close--2lmez"}});var Ze=function(e){function t(e){var i;return m()(this,t),(i=_()(this,g()(t).call(this,e))).debounced_search_function=Pe()((function(e){i.search_material(e)}),700),i.render_search_input=function(){var e=i.get_intl("material_dialog/header/search_placeholder");return C.createElement(He.a,{clearBtn:!0,iconsPrefix:C.createElement(_e.c,{id:"#iconicon-search",size:14,class_name:"th1-text-t3"}),placeholder:e,onChange:i.set_search_input,value:i.state.search_keyword,maxLength:20,placeholderSize:e.length})},i.state={gold:0,is_default_input:!0,search_keyword:""},i.set_search_input=i.set_search_input.bind(v()(i)),i.reset_search_input=i.reset_search_input.bind(v()(i)),i}return y()(t,e),p()(t,[{key:"get_intl",value:function(e){return this.props.intl.formatMessage({id:e})}},{key:"swtich_tab",value:function(e){this.reset_search_input(),this.props.change_tab(e)}},{key:"get_tab",value:function(e){var t=this.props.theme.light_theme_colors?"th1-text-t3":"th1-text-2",i=this.props.current_tab===e,a=e===Y.a.LIBRARY?{name:"material_dialog/my_material",icon:"#iconicn_sucai_act"}:{name:"material_dialog/header/mall",icon:"#iconicn_sucaishangchang"};return C.createElement("div",{onClick:this.swtich_tab.bind(this,e),className:(!i?"":(i?"th1-border-0 th1-border-s2":"")+" ")+I()(i?"tab-chosen":"tab",Je,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement(_e.c,{class_name:i?"th1-text-0 th1-text-s2":t,id:a.icon,size:22}),C.createElement("span",{className:(i||t?(i?"th1-text-0 th1-text-s2":t)+" ":"")+"tab-text--1H2zC"},this.get_intl(a.name)))}},{key:"search_material",value:function(e){this.props.search_item(e)}},{key:"set_search_input",value:function(e){var t=e.target.value;this.setState({search_keyword:t}),this.debounced_search_function(t)}},{key:"reset_search_input",value:function(){this.setState({search_keyword:""})}},{key:"get_tabs_and_search_area",value:function(){return C.createElement("div",{className:"material-header-tab-wrap--1o1Uv"},C.createElement("div",{className:"tabs--1iNrT"},Object(D.d)()||this.get_tab(Y.a.LIBRARY),this.props.enable_material_mall&&this.get_tab(Y.a.MALL)),C.createElement("div",{className:I()(this.props.mode===Y.i.kitten?"material-search":"material-search painter",Je,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},this.render_search_input()))}},{key:"render",value:function(){return C.createElement("div",{className:"material-header-wrap--16NBO"},C.createElement("div",{className:"material-header-left--2gq1_"},C.createElement("div",{className:"th1-text-t7 material-header-logo--1wOM9"},this.get_intl("material_dialog/header/material_repo")),this.props.enable_material_mall&&C.createElement("div",{className:"material-gold--1N---"},C.createElement("span",{className:"gold-number--31-_H"},this.state.gold),C.createElement(_e.c,{id:"#iconicn_coin",size:22}),C.createElement("span",{className:"gold-text--HTHby"},this.props.intl.formatMessage({id:"material_dialog/header/gold"})),C.createElement("div",{className:"gold-notice-wrap--3830d"},C.createElement("div",{className:"th1-text-t3 gold-notice-title--2Tb0d"},this.props.intl.formatMessage({id:"material_dialog/header/gold_title"})),C.createElement("div",{className:"gold-notice-body--1zxF1"},C.createElement("p",{className:"th1-text-t5"},this.props.intl.formatMessage({id:"material_dialog/header/gold_body_1"})),C.createElement("p",{className:"th1-text-t5"},this.props.intl.formatMessage({id:"material_dialog/header/gold_body_2"})))))),this.get_tabs_and_search_area(),this.props.mode===Y.i.kitten&&C.createElement("div",{className:"dialog_btn_close--2lmez",onClick:this.props.close_dialog.bind(this)},C.createElement(_e.c,{id:"#iconicon_close",size:20})))}}],[{key:"getDerivedStateFromProps",value:function(e){return e.gold_num?{gold:e.gold_num}:null}}]),t}(C.Component),Ge=Object(R.b)(Ze),Ye=(i("R+7a"),{"./style.scss":{"material-painter-footer-wrap":"material-painter-footer-wrap--mKmoE","btn-wrap":"btn-wrap--1b06S","radio-wrap":"radio-wrap--1_rlm","radio-outside":"radio-outside--118Dg",selected:"selected--G50l4","radio-inside":"radio-inside--3sIyC","confirm-btn":"confirm-btn--1BZnC","clear-btn":"clear-btn--2r6WM"}});var Xe=function(e){function t(e){var i;return m()(this,t),(i=_()(this,g()(t).call(this,e))).state={frame:"single"},i.handle_confirm=i.handle_confirm.bind(v()(i)),i.handle_frame_mode_change=i.handle_frame_mode_change.bind(v()(i)),i}return y()(t,e),p()(t,[{key:"get_i18n_msg",value:function(e){return this.props.intl.formatMessage({id:e})}},{key:"get_confirm_btn",value:function(){var e=this.props.num_of_frames,t=0===e?"":"(".concat(e,")");return C.createElement("div",{className:"confirm-btn--1BZnC"},C.createElement(_e.a,{data_report:"素材库确认",disable:0===e,type:"primary",width:120,height:36,on_click:0===e?void 0:this.handle_confirm},"".concat(this.get_i18n_msg("material_dialog/footer/add")).concat(t)))}},{key:"handle_frame_mode_change",value:function(e){this.setState({frame:e})}},{key:"handle_confirm",value:function(){Object(B.m)("single"===this.state.frame?"选择添加到单帧":"选择添加到多帧"),this.props.chosen_confirm(this.state.frame)}},{key:"get_close_btn",value:function(){return C.createElement("div",{className:"clear-btn--2r6WM"},C.createElement(_e.a,{data_report:"素材库导入取消",type:"primary-outline",width:120,height:36,on_click:this.props.close_dialog.bind(this)},this.get_i18n_msg("material_dialog/cancel")))}},{key:"render_frame_selection",value:function(){return C.createElement("div",{className:"radio-wrap--1_rlm"},C.createElement("div",{onClick:this.handle_frame_mode_change.bind(this,"single"),className:(this.props.theme.light_theme_colors||"th1-bg-10 th1-border-0"?(this.props.theme.light_theme_colors?"th1-border-s1":"th1-bg-10 th1-border-0")+" ":"")+I()("radio-outside ".concat("single"===this.state.frame?"selected":""),Ye,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement("div",{className:(this.props.theme.light_theme_colors||"th1-bg-0"?(this.props.theme.light_theme_colors?"th1-bg-s2":"th1-bg-0")+" ":"")+"radio-inside--3sIyC"})),C.createElement("span",{onClick:this.handle_frame_mode_change.bind(this,"single"),className:"th1-text-t7"},this.get_i18n_msg("material_dialog/footer/add_one_frame")),C.createElement("div",{onClick:this.handle_frame_mode_change.bind(this,"multi"),className:(this.props.theme.light_theme_colors||"th1-bg-10 th1-border-0"?(this.props.theme.light_theme_colors?"th1-border-s1":"th1-bg-10 th1-border-0")+" ":"")+I()("radio-outside ".concat("multi"===this.state.frame?"selected":""),Ye,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement("div",{className:(this.props.theme.light_theme_colors||"th1-bg-0"?(this.props.theme.light_theme_colors?"th1-bg-s2":"th1-bg-0")+" ":"")+"radio-inside--3sIyC"})),C.createElement("span",{onClick:this.handle_frame_mode_change.bind(this,"multi"),className:"th1-text-t7"},this.get_i18n_msg("material_dialog/footer/add_multi_frame")))}},{key:"render",value:function(){return C.createElement("div",{className:"material-painter-footer-wrap--mKmoE"},C.createElement("div",{className:"btn-wrap--1b06S"},this.render_frame_selection(),this.get_confirm_btn(),this.get_close_btn()))}}]),t}(C.Component),Ke=Object(R.b)(Xe),Qe=i("YS7c"),Ve=i.n(Qe),$e=i("F9YG"),et=(i("/V6T"),{"./style.scss":{"material-sidebar-wrap":"material-sidebar-wrap--1INvg",sidebar:"sidebar--17vhH","item-classification-wrap":"item-classification-wrap--1MZLz","item-classification-title":"item-classification-title--29_EB","item-category-title-wrap":"item-category-title-wrap--3g8i0","item-category-title":"item-category-title--2BXwJ","library-icon":"library-icon--2k_D0","mall-icon":"mall-icon--2ZxPd","group-icon":"group-icon--2WCv2","theme-icon":"theme-icon--18fjr","item-filter":"item-filter--2FegJ","group-wrap":"group-wrap--3wcdK","group-option-icon":"group-option-icon--1C5lf","group-choices":"group-choices--34PH9","group-choice":"group-choice--1bg_3","drop-icon":"drop-icon--1LF8w","add-folder-icon":"add-folder-icon--3_Hw2",separation:"separation--1ZPhn","hide-element":"hide-element--we6n1","separation-top":"separation-top--1ahBF"}});var tt={"角色形象":"#iconicn_character_of","背景":"#iconicn_fengjingr_act","道具":"#iconitem_nor","界面":"#iconUIkits_nor","音效":"#iconsound_act","配乐":"#iconicn_shengyin_act",Sprite:"#iconicn_character_of",Background:"#iconicn_fengjingr_act",Sound:"#iconicn_shengyin_act",Course:"#iconlesson_act","角色":"#iconicn_character_of","聲音":"#iconicn_shengyin_act","課程":"#iconlesson_act","声音":"#iconicn_shengyin_act","课程":"#iconlesson_act","学校课程":"#iconlesson_act","學校課程":"#iconlesson_act","School-Course":"#iconlesson_act",Spirite:"#iconicn_character_of","Arrière-plan":"#iconicn_fengjingr_act",Son:"#iconicn_shengyin_act"},it="#icontheme_nor",at="#iconicn_sucai_act",rt=function(e){function t(e){var i;return m()(this,t),(i=_()(this,g()(t).call(this,e))).library_categories=void 0,i.filters=void 0,i.group_list_wrap=void 0,i.drake=void 0,i.should_reload_drake=!1,i.state={group_to_show_options:void 0,top_of_options:0},i}return y()(t,e),p()(t,[{key:"UNSAFE_componentWillMount",value:function(){this.library_categories=[{name:this.props.intl.formatMessage({id:"material_dialog/actor"}),type:Y.d.ACTOR},{name:this.props.intl.formatMessage({id:"material_dialog/background"}),type:Y.d.BACKGROUND}],this.props.mode!==Y.i.painter&&this.library_categories.push({name:this.props.intl.formatMessage({id:"material_dialog/audio"}),type:Y.d.MUSIC}),this.filters=[[this.props.intl.formatMessage({id:"material_dialog/all"}),this.props.intl.formatMessage({id:"material_dialog/sidebar/filter/character"}),this.props.intl.formatMessage({id:"material_dialog/sidebar/filter/interface"}),this.props.intl.formatMessage({id:"material_dialog/sidebar/filter/item"}),this.props.intl.formatMessage({id:"material_dialog/sidebar/filter/effect"})],[this.props.intl.formatMessage({id:"material_dialog/all"}),this.props.intl.formatMessage({id:"material_dialog/sidebar/filter/game"}),this.props.intl.formatMessage({id:"material_dialog/sidebar/filter/life"}),this.props.intl.formatMessage({id:"material_dialog/sidebar/filter/nature"})]],this.props.mode!==Y.i.painter&&(this.filters.push([this.props.intl.formatMessage({id:"material_dialog/all"}),this.props.intl.formatMessage({id:"material_dialog/sidebar/filter/sound_effect"}),this.props.intl.formatMessage({id:"material_dialog/sidebar/filter/music"})]),this.props.is_have_lesson&&this.library_categories.push({name:this.props.intl.formatMessage({id:"material_dialog/lesson"}),type:Y.d.LESSON}),Object($e.a)()===$e.f&&this.library_categories.push({name:this.props.intl.formatMessage({id:"material_dialog/school_lesson"}),type:Y.d.SCHOOL_LESSON}))}},{key:"componentDidMount",value:function(){var e=this;this.group_list_wrap&&(this.drake=Ve()([this.group_list_wrap],{revertOnSpill:!0,direction:"vertical"}),this.drake.on("drop",(function(t,i,a,r){Object(B.t)("分组排序");var o=t.id,s=0,n=e.props.my_groups?e.props.my_groups:[],l=r?n.findIndex((function(e){return e.id===r.id})):n.length,c=n.findIndex((function(e){return e.id===o}));c>l?s=l:c<l&&(s=l-1);var m="",u=e.props.chosen_category?e.props.chosen_category:0;u<0&&(m=n[pe(u)].id),e.drake.cancel(),e.setState({dragged:{id:o,target:s,current_chosen_group_id:m}}),e.props.sort_group(o,s,m)})))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.mode!==Y.i.painter&&this.library_categories.length<=Y.d.LESSON&&(e.is_have_lesson&&this.library_categories.push({name:this.props.intl.formatMessage({id:"material_dialog/lesson"}),type:Y.d.LESSON}),Object($e.a)()===$e.f&&this.library_categories.push({name:this.props.intl.formatMessage({id:"material_dialog/school_lesson"}),type:Y.d.SCHOOL_LESSON})),this.props.my_groups!==e.my_groups&&this.setState({dragged:void 0}),this.props.current_tab===Y.a.MALL&&e.current_tab===Y.a.LIBRARY&&(this.should_reload_drake=!0)}},{key:"componentDidUpdate",value:function(){this.should_reload_drake&&(this.reload_dragula(),this.should_reload_drake=!1)}},{key:"get_text_style",value:function(e){return e?"th1-text-0 th1-text-s2":"th1-text-t5"}},{key:"get_background_hover_style",value:function(){return"th1-bg-hover-7"}},{key:"set_mall_category",value:function(){var e=this,t=this.props.mall_category;if(t){var i=t.map((function(t,i){var a=t.name,r=e.props.chosen_category===i;return C.createElement("div",{key:a},C.createElement("div",{onClick:r?void 0:e.props.choose_category.bind(e,i),className:(e.get_background_hover_style()?e.get_background_hover_style()+" ":"")+I()("item-category-title-wrap",et,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement("div",{className:"mall-icon--2ZxPd"},C.createElement(_e.c,{class_name:e.props.chosen_category===i?"th1-text-0 th1-text-s2":"th1-text-t5",id:tt[t.name],size:20})),C.createElement("div",{className:(e.get_text_style(r)?e.get_text_style(r)+" ":"")+"item-category-title--2BXwJ"},t.name),C.createElement("div",{className:"drop-icon--1LF8w"},C.createElement(_e.c,{class_name:r?"th1-text-0 th1-text-s2":"th1-text-t5",rotate:r?90:0,id:"#icondrop_x",size:12}))),r&&e.get_mall_filters(t))})),a=t.length,r=this.props.chosen_category===a;return i.push(C.createElement("div",{key:a},C.createElement("div",{onClick:this.props.choose_category.bind(this,a),className:(this.get_background_hover_style()?this.get_background_hover_style()+" ":"")+I()("item-category-title-wrap",et,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement("div",{className:"theme-icon--18fjr"},C.createElement(_e.c,{class_name:r?"th1-text-0 th1-text-s2":"th1-text-t5",id:it,size:20})),C.createElement("div",{className:(this.get_text_style(r)?this.get_text_style(r)+" ":"")+"item-category-title--2BXwJ"},this.props.intl.formatMessage({id:"material_dialog/theme"})),C.createElement("div",{className:"drop-icon--1LF8w"},C.createElement(_e.c,{class_name:r?"th1-text-0 th1-text-s2":"th1-text-t5",rotate:r?90:0,id:"#icondrop_x",size:12}))))),C.createElement("div",null,i)}}},{key:"set_library_category",value:function(){var e=this,t=this.library_categories;if(t){var i=t.map((function(t,i){var a=e.props.chosen_category===t.type;return C.createElement("div",{key:t.name},C.createElement("div",{onClick:function(){Object(B.t)("默认分类-".concat(Y.m[t.type])),e.props.chosen_category!==t.type&&e.props.choose_category(t.type)},className:(e.get_background_hover_style()?e.get_background_hover_style()+" ":"")+I()("item-category-title-wrap",et,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement("div",{className:"library-icon--2k_D0"},C.createElement(_e.c,{class_name:e.props.chosen_category===t.type?"th1-text-0 th1-text-s2":"th1-text-t5",id:tt[t.name],size:20})),C.createElement("div",{className:(e.get_text_style(a)?e.get_text_style(a)+" ":"")+"item-category-title--2BXwJ"},t.name),C.createElement("div",{className:"drop-icon--1LF8w"},C.createElement(_e.c,{class_name:a?"th1-text-0 th1-text-s2":"th1-text-t5",rotate:a?90:0,id:"#icondrop_x",size:12}))),a&&e.set_library_filters(t.type))}));return C.createElement("div",null,i)}}},{key:"set_library_filters",value:function(e){var t=this.filters[e];if(t)return this.get_filter_list(t,e)}},{key:"get_mall_filters",value:function(e){var t=[];return t.push(this.props.intl.formatMessage({id:"material_dialog/all"})),e&&e.subsets?(e.subsets.forEach((function(e){t.push(e.name)})),this.get_filter_list(t)):(e&&e.properties&&e.properties.forEach((function(e){t.push(e.name)})),this.get_filter_list(t))}},{key:"get_filter_list",value:function(e,t){var i=this,a=e.map((function(e,a){var r=a===i.props.chosen_filter;return C.createElement("li",{key:e,className:("".concat(i.get_text_style(r)," ").concat(i.get_background_hover_style())?"".concat(i.get_text_style(r)," ").concat(i.get_background_hover_style())+" ":"")+"item-filter--2FegJ",onClick:function(){void 0!==t&&Object(B.t)("默认分类-".concat(Y.m[t],"-").concat(Y.n[t][a])),r||i.props.choose_filter(a)}},e)}));return C.createElement("ul",null,a)}},{key:"show_group_choices",value:function(e,t){var i=document.getElementById("options-".concat(e.id)),a=document.getElementById("material-sidebar-wrapper"),r=document.getElementById("material-dialog"),o=document.getElementById("group-options");if(i&&a&&r&&o){var s=i.getBoundingClientRect().top,n=r.getBoundingClientRect().top,l=a.clientHeight;this.setState({group_to_show_options:e,top_of_options:he(s,n,l)},(function(){o.focus()}))}}},{key:"hide_group_choices",value:function(){this.setState({group_to_show_options:void 0,top_of_options:0})}},{key:"choose_group",value:function(e){this.hide_group_choices(),this.props.choose_category(pe(e))}},{key:"get_my_groups",value:function(){var e=this;if(Object(D.d)())return this.get_offline_group();var t=this.props.my_groups?this.props.my_groups:[];if(this.state.dragged){var i=this.state.dragged.id,a=t.findIndex((function(e){return e.id===i})),r=t[a];t.splice(a,1),t.splice(this.state.dragged.target,0,r)}if(t){var o=t.map((function(t,i){var a=e.state.dragged&&e.state.dragged.current_chosen_group_id===t.id||!e.state.dragged&&e.props.chosen_category===pe(i);return C.createElement("div",{key:t.id,className:"group-wrap--3wcdK",onContextMenu:function(i){t.is_default||(i.preventDefault(),e.show_group_choices(t,i))},id:t.is_default?"default-group":t.id},C.createElement("div",{onClick:a?void 0:e.choose_group.bind(e,i),className:(e.get_background_hover_style()?e.get_background_hover_style()+" ":"")+I()("item-category-title-wrap",et,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement("div",{className:"group-icon--2WCv2"},C.createElement(_e.c,{class_name:a?"th1-text-0 th1-text-s2":"th1-text-t5",id:at,size:20})),C.createElement("div",{className:(e.get_text_style(a)?e.get_text_style(a)+" ":"")+"item-category-title--2BXwJ"},"我的分组"===t.name?e.props.intl.formatMessage({id:"material_dialog/sidebar/my_group"}):t.name)),!t.is_default&&C.createElement("div",{className:"group-option-icon--1C5lf",id:"options-".concat(t.id),onClick:e.show_group_choices.bind(e,t)},C.createElement(_e.c,{class_name:"th1-text-t5",id:"#iconmore_dark",size:16})))})),s=o.shift();return C.createElement("div",null,s,C.createElement("div",{id:"material-group-list",ref:function(t){t&&(e.group_list_wrap=t)}},o))}}},{key:"get_offline_group",value:function(){var e=this,t=this.props.chosen_category===Y.b;return C.createElement("div",{className:"group-wrap--3wcdK"},C.createElement("div",{onClick:function(){!t&&e.props.choose_category(Y.b)},className:(this.get_background_hover_style()?this.get_background_hover_style()+" ":"")+I()("item-category-title-wrap",et,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement("div",{className:"group-icon--2WCv2"}),C.createElement("div",{className:(this.get_text_style(t)?this.get_text_style(t)+" ":"")+"item-category-title--2BXwJ"},this.props.intl.formatMessage({id:"material_dialog/sidebar/my_uploads"}))))}},{key:"get_library_sidebar",value:function(){var e=Object(de.e)(Object(de.h)()[7]),t={boxShadow:"1px 0px 0px 0px ".concat(e)};return C.createElement("div",{style:t,className:"sidebar--17vhH"},C.createElement("div",{className:"item-classification-wrap--1MZLz"},C.createElement("div",{className:"th1-text-t5 item-classification-title--29_EB"},this.props.intl.formatMessage({id:"material_dialog/sidebar/default_material"}))),this.set_library_category(),C.createElement("div",{className:"separation--1ZPhn"}),C.createElement("div",{className:"item-classification-wrap--1MZLz"},C.createElement("div",{className:"th1-text-t5 item-classification-title--29_EB"},this.props.intl.formatMessage({id:"material_dialog/my_material"})),this.get_add_group_btn()),this.get_my_groups())}},{key:"get_add_group_btn",value:function(){var e=this;if(!Object(D.d)())return C.createElement("div",{className:"add-folder-icon--3_Hw2",onClick:function(){e.props.my_groups&&e.props.my_groups.length>=Y.g?Object(te.a)("material_dialog/dialog/num_of_grouo_exceeded","error"):e.props.show_subdialog("new_group")}},C.createElement(_e.c,{class_name:"th1-text-t5",id:"#iconicon_add",size:16}))}},{key:"get_mall_sidebar",value:function(){var e=Object(de.e)(Object(de.h)()[7]),t={boxShadow:"1px 0px 0px 0px ".concat(e)};return C.createElement("div",{style:t,className:"sidebar--17vhH"},C.createElement("div",{className:"separation-top--1ahBF"}),this.set_mall_category())}},{key:"reload_dragula",value:function(){this.drake&&(this.drake.containers.pop(),this.drake.containers.push(this.group_list_wrap))}},{key:"render",value:function(){return C.createElement("div",{id:"material-sidebar-wrapper",className:"material-sidebar-wrap--1INvg"},this.props.current_tab===Y.a.LIBRARY?this.get_library_sidebar():this.get_mall_sidebar(),C.createElement("div",{id:"group-options",tabIndex:-1,style:{top:"".concat(this.state.top_of_options,"px")},onMouseLeave:this.hide_group_choices.bind(this),onBlur:this.hide_group_choices.bind(this),className:I()(void 0!==this.state.group_to_show_options?"group-choices":"hide-element",et,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement("div",{className:"th1-text-t7 th1-bg-hover-7 group-choice--1bg_3",onClick:this.props.show_subdialog.bind(this,"rename_group",this.state.group_to_show_options)},this.props.intl.formatMessage({id:"material_dialog/rename"})),C.createElement("div",{className:"th1-text-t7 th1-bg-hover-7 group-choice--1bg_3",onClick:this.props.show_subdialog.bind(this,"delete_group",this.state.group_to_show_options)},this.props.intl.formatMessage({id:"material_dialog/delete"}))))}}]),t}(C.Component),ot=Object(R.b)(rt),st=(i("KzmM"),{"./style.scss":{flex1:"flex1--1f9tQ",h_flex:"h_flex--3Qw3V",v_center:"v_center--2tc5W",v_flex:"v_flex--krI-t",vh_center:"vh_center--r2I7Z",h_start:"h_start--2oU9o",h_end:"h_end--3uJi5",h_center:"h_center--dcg9O",clickable:"clickable--15hPV",wrapper:"wrapper--2V7H0",confirm:"confirm--2tQWj",dialog:"dialog--2bHHs",content:"content--3gOeM",showDialog:"showDialog--30JhR","wrapper--appear--active":"wrapper--appear--active--2rFAN","wrapper--appear":"wrapper--appear--3dxBd",mask:"mask--xmHRA",material:"material--W5ipo",showMask:"showMask--2R_Iy",dialog_btn_close:"dialog_btn_close--3I6hb","material-dialog":"material-dialog--iHPGI","material-content-wrap":"material-content-wrap--2j9qP","footer-content-wrap":"footer-content-wrap--3qCwR","import-content-wrap":"import-content-wrap--2c3zx","show-footer":"show-footer--1NUul",showFooter:"showFooter--1OEkN","hide-footer":"hide-footer--1FfRu","hide-element":"hide-element--3cQUS",showFooterContent:"showFooterContent--3_O70"}});var nt=function(e){function t(e){var i,a,r,o,n,c,u;return m()(this,t),(i=_()(this,g()(t).call(this,e))).is_login=void 0,i.DEFAULT_FILTER=0,i.PAINTER_FILTER=1,i.DEFAULT_CATEGORY=0,i.current_keyword="",i.material_item_wrap=void 0,i.all_item_loaded=void 0,i.page=void 0,i.default_and_course_search_result=[],i.item_total_number=0,i.mall_category=[],i.index_of_theme=void 0,i.setting_page=!1,i.num_force_add=0,i.frame_info={},i.num_choose_item_after_search_action=0,i.search_type=void 0,i.num_search_result=0,i.themes_total_number=0,i.uploading_items=[],i.group_controller={create:(u=l()(s.a.mark((function e(t,a,r){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(t,i.state.groups,a);case 2:if(!(o=e.sent)){e.next=16;break}if(!r){e.next=9;break}return e.next=7,i.set_group_list(Y.c);case 7:e.next=16;break;case 9:if(i.state.current_tab!==Y.a.LIBRARY){e.next=14;break}return e.next=12,i.set_group_list(i.state.chosen_category?i.state.chosen_category-1:void 0);case 12:e.next=16;break;case 14:return e.next=16,i.set_group_list();case 16:return e.abrupt("return",o);case 17:case"end":return e.stop()}}),e)}))),function(e,t,i){return u.apply(this,arguments)}),rename:(c=l()(s.a.mark((function e(t,a,r){var o,n,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(a,t,i.state.groups,r);case 2:(o=e.sent).length>0&&(n=i.state.groups,l=n.findIndex((function(e){return e.id===t.id})),t.name=o,n.splice(l,1,t),i.setState({groups:n}));case 4:case"end":return e.stop()}}),e)}))),function(e,t,i){return c.apply(this,arguments)}),move:(n=l()(s.a.mark((function e(t,a){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.m(t.id,a);case 2:return(r=e.sent)&&i.reset_content().catch((function(e){return console.log(e)})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),delete:(o=l()(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.b(t.id);case 2:e.sent&&i.set_group_list().catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)}),upload:(r=l()(s.a.mark((function e(t,a,r){var o,n,l,c,m,u,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.name.slice(0,t.name.lastIndexOf(".")),(n=i.get_group_index(a.id))===i.state.chosen_category){e.next=5;break}return e.next=5,i.choose_category(n);case 5:return l="loading-".concat((new Date).getSeconds()),c={file_type:"NORMAL_IMAGE",id:l,subtitle:"{}",name:o,resource_names:"",resource_urls:[""],source:"UPLOADED"},(m=i.state.material_items)[0]&&"empty_group"===m[0].id&&m.shift(),m.unshift(c),i.setState({material_items:m}),i.choose_item(c),i.num_force_add++,i.uploading_items.push({group_id:a.id,item_name:o,item_id:l}),e.next=16,ke.w(a.id,t,r);case 16:u=e.sent,i.uploading_items=i.uploading_items.filter((function(e){return e.group_id!==a.id&&e.item_name!==o})),p=document.getElementById(c.id),"empty"!==u.id?(p&&p.setAttribute("src",""),u.source="UPLOADED",u.force_add=!0,i.replace_loading_item(u,"upload")):(i.reset_group_items_after_deletion(c.id),i.delete_item_from_footer(c));case 20:case"end":return e.stop()}}),e)}))),function(e,t,i){return r.apply(this,arguments)}),collect:(a=l()(s.a.mark((function e(t,a){var r,o,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===i.state.chosen_category?"搜索结果页":i.state.chosen_category===i.index_of_theme?"单个主题详情页":"分类页",Object(B.u)(t.id,"Kitten素材商城".concat(r)),o={file_type:"NORMAL_IMAGE",id:"loading-".concat((new Date).getSeconds()),name:t.name,subtitle:"{}",resource_names:"",resource_urls:[""],source:"COLLECTED"},i.props.mode===Y.i.kitten&&(i.choose_item(o),i.num_force_add++),e.next=6,ke.a(t.id,a.id);case 6:(n=e.sent).mall_id=t.id,"empty"!==n.id&&i.state.chosen_items.findIndex((function(e){return e.id===n.id}))<0?(i.props.mode===Y.i.kitten&&(n.force_add=!0,i.replace_loading_item(n,"collect")),i.props.mode===Y.i.painter&&i.choose_item(n),i.reset_content_after_collect(t.id).catch((function(e){return console.log(e)})),t.price&&i.set_gold().catch((function(e){return console.log(e)}))):i.delete_item_from_footer(o);case 9:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})},i.on_load=l()(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.props.audios,k()(t,(function(e){i.props.action_set_play_state({audio_id:e.id,is_playing:!1})})),i.props.is_open_from_sidebar?Object(B.t)("侧边栏-".concat(Y.m[i.props.default_category],"-打开素材库")):Object(B.t)("底边栏-添加-打开素材库"),Object(B.r)("enter"),e.next=6,Promise.all([i.reset_content(),i.reset_user_info(),i.init_mall_category()]);case 6:case"end":return e.stop()}}),e)}))),i.state={material_items:[],themes:[],chosen_items:[],groups:[],gold:0,show_footer:void 0,shown_dialog:void 0,dialog_para:void 0,chosen_theme:void 0,current_tab:Y.a.LIBRARY,chosen_category:e.default_category,chosen_filter:i.DEFAULT_FILTER,sort:"LATEST_ONLINE",uncollected_only:!1,content_scroll_top:0,should_hide_menu:!1,is_have_lesson:!1,current_audio:void 0,num_of_frames:0},i.is_login=e.is_login,i.all_item_loaded=!1,i.page=0,i.on_request_close=i.on_request_close.bind(v()(i)),i.change_dialog_tab=i.change_dialog_tab.bind(v()(i)),i.start_search=i.start_search.bind(v()(i)),i.show_subdialog=i.show_subdialog.bind(v()(i)),i.choose_category=i.choose_category.bind(v()(i)),i.choose_filter=i.choose_filter.bind(v()(i)),i.sort_group=i.sort_group.bind(v()(i)),i.set_page=i.set_page.bind(v()(i)),i.show_toast=i.show_toast.bind(v()(i)),i.choose_item=i.choose_item.bind(v()(i)),i.choose_theme=i.choose_theme.bind(v()(i)),i.require_login=i.require_login.bind(v()(i)),i.delete_group_item=i.delete_group_item.bind(v()(i)),i.sort_mall_item=i.sort_mall_item.bind(v()(i)),i.set_current_audio=i.set_current_audio.bind(v()(i)),i.handle_chosen_confirm=i.handle_chosen_confirm.bind(v()(i)),i.delete_item_from_footer=i.delete_item_from_footer.bind(v()(i)),i.close_subdialog=i.close_subdialog.bind(v()(i)),i.get_updated_groups=i.get_updated_groups.bind(v()(i)),i.clear_choices=i.clear_choices.bind(v()(i)),i.choose_frame_from_dialog=i.choose_frame_from_dialog.bind(v()(i)),i.get_frame_info=i.get_frame_info.bind(v()(i)),i.remove_frame_by_url=i.remove_frame_by_url.bind(v()(i)),i.start_search_client=i.start_search_client.bind(v()(i)),i.offline_upload=i.offline_upload.bind(v()(i)),i.delete_offline_item=i.delete_offline_item.bind(v()(i)),i}var i,a,o,n,c,u,h,d,f,b,w,x,N,O,A,R,j,L,q,W,P,H,J,Z,G,X,K;return y()(t,e),p()(t,[{key:"on_request_close",value:function(e){this.props.close_dialog({dialog_type:"new_material"}),this.props.action_set_material_mode({mode:Y.i.kitten}),F.AudioPlayerModule.stop(),Object(B.s)(this.num_force_add,!0===e?this.get_num_confirm_add():0),Object(B.r)("leave",!0===e?this.state.chosen_items.length:0),void 0===this.state.chosen_category&&this.search_type&&Object(B.F)(this.search_type,this.num_search_result,this.num_choose_item_after_search_action)}},{key:"get_num_confirm_add",value:function(){return this.state.chosen_items.filter((function(e){return!!e.force_add})).length}},{key:"get_group_index",value:function(e){return pe(this.state.groups.findIndex((function(t){return t.id===e})))}},{key:"show_toast",value:function(e,t){this.props.show_toast({content:t,type:e,timeout:2e3})}},{key:"show_all_loaded_tips",value:function(){this.state.chosen_category!==this.index_of_theme||this.state.current_tab!==Y.a.MALL?this.show_toast("notice","material_loaded"):this.show_toast("notice","themes_loaded")}},{key:"init_mall_category",value:(K=l()(s.a.mark((function e(){var t,i=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(D.d)()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ke.q();case 4:t=e.sent,this.props.mode===Y.i.painter&&(t=t.filter((function(e){return"21"!==e.id&&"22"!==e.id}))),this.mall_category=t,this.index_of_theme=t.length,t.forEach((function(e,t){e.subsets||i.init_mall_properties(e,t).catch((function(e){return console.log(e)}))}));case 9:case"end":return e.stop()}}),e,this)}))),function(){return K.apply(this,arguments)})},{key:"init_mall_properties",value:(X=l()(s.a.mark((function e(t,i){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.r(t.id);case 2:a=e.sent,t.properties=a,this.mall_category.splice(i,1,t);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return X.apply(this,arguments)})},{key:"set_group_list",value:(G=l()(s.a.mark((function e(t){var i,a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(z.B)()){e.next=5;break}return e.next=3,ke.p();case 3:i=e.sent,this.setState({groups:i,chosen_category:t||(void 0!==this.state.chosen_category&&0-this.state.chosen_category>=i.length?0-i.length:this.state.chosen_category)},(function(){a.state.chosen_category&&a.state.chosen_category<0&&a.reset_content().catch((function(e){return console.log(e)}))}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return G.apply(this,arguments)})},{key:"set_gold",value:(Z=l()(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.o();case 2:t=e.sent,this.setState({gold:t});case 4:case"end":return e.stop()}}),e,this)}))),function(){return Z.apply(this,arguments)})},{key:"get_library_item",value:(J=l()(s.a.mark((function e(){var t,i,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.chosen_category,i=[],e.t0=!0,e.next=e.t0===(void 0===t)?5:e.t0===(t===Y.d.ACTOR||t===Y.d.BACKGROUND||t===Y.d.MUSIC)?10:e.t0===(t===Y.d.LESSON)?14:e.t0===(t===Y.d.SCHOOL_LESSON)?18:e.t0===(t&&t<0)?23:27;break;case 5:return e.next=7,this.get_library_search_result();case 7:return i=e.sent,0===this.state.chosen_filter&&(this.num_search_result=this.item_total_number),e.abrupt("break",28);case 10:return e.next=12,this.get_default_items();case 12:return i=e.sent,e.abrupt("break",28);case 14:return e.next=16,this.get_lesson_items();case 16:return i=e.sent,e.abrupt("break",28);case 18:return e.next=20,this.get_school_lesson_items();case 20:return i=e.sent,this.current_keyword&&(a=this.current_keyword.replaceAll(" ",""),i=i.filter((function(e){return e.subtitle.includes(a)}))),e.abrupt("break",28);case 23:return e.next=25,this.get_group_items();case 25:return i=e.sent,e.abrupt("break",28);case 27:return e.abrupt("break",28);case 28:return e.abrupt("return",i);case 29:case"end":return e.stop()}}),e,this)}))),function(){return J.apply(this,arguments)})},{key:"get_library_search_result",value:(H=l()(s.a.mark((function e(){var t,i,a,r,o,n,l,c,m,u,p=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.chosen_filter?this.state.chosen_filter:0,i=0,a=[],!this.is_login){e.next=8;break}return r={keyword:this.current_keyword,file_type:t?Y.k[t-1]:void 0,page:this.page},e.next=7,ke.u(r).then((function(e){return 0===p.page&&(i=e.total),e.items}));case 7:a=e.sent;case 8:if(0!==this.default_and_course_search_result.length||this.all_item_loaded){e.next=29;break}return o=[],n=0,l=[],c={keyword:this.current_keyword,file_type:t?Y.k[t-1]:void 0},e.next=15,ke.f(c).then((function(e){return 0===p.page&&(n=e.total,p.item_total_number=i+n),e.items}));case 15:if(!((o=e.sent).length<n)){e.next=24;break}return m={keyword:this.current_keyword,file_type:t?Y.k[t-1]:void 0,offset:200},e.t0=S.a,e.t1=o,e.next=22,ke.f(m).then((function(e){return e.items}));case 22:e.t2=e.sent,o=(0,e.t0)(e.t1,e.t2,"id");case 24:if(!this.is_login||!this.state.is_have_lesson){e.next=28;break}return e.next=27,ke.e(c).then((function(e){return 0===p.page&&(p.item_total_number+=e.total),e.items}));case 27:l=e.sent;case 28:this.default_and_course_search_result=S()(o,l,"id");case 29:return u=a,a.length<Y.q&&(u=S()(u,this.default_and_course_search_result.splice(0,Y.q-a.length),"id")),e.abrupt("return",u);case 32:case"end":return e.stop()}}),e,this)}))),function(){return H.apply(this,arguments)})},{key:"get_default_items",value:(P=l()(s.a.mark((function e(){var t,i,a,r,o=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.chosen_category?this.state.chosen_category:0,i=this.state.chosen_filter?this.state.chosen_filter:0,a={file_type:Y.k[t],filter:i,page:this.page},r=[],e.next=6,ke.f(a).then((function(e){0===a.page&&(o.item_total_number=e.total),r=e.items})).catch((function(e){console.log(e)}));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}))),function(){return P.apply(this,arguments)})},{key:"get_lesson_items",value:(W=l()(s.a.mark((function e(){var t,i,a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],i={page:this.page},e.next=4,ke.e(i).then((function(e){return a.item_total_number=e.total,e.items}));case 4:return e.sent.forEach((function(e){var i=e.materials.map((function(t){return t.subtitle=e.point_name,t}));t=t.concat(i)})),(this.page+1)*Y.p>=this.item_total_number&&(this.all_item_loaded=!0),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)}))),function(){return W.apply(this,arguments)})},{key:"get_school_lesson_items",value:(q=l()(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.i().then((function(e){return e.items}));case 2:return t=e.sent,this.all_item_loaded=!0,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return q.apply(this,arguments)})},{key:"get_group_items",value:(L=l()(s.a.mark((function e(){var t,i,a,r,o,n,l=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!Object(D.d)()){e.next=7;break}return e.next=4,ke.s().then((function(e){return l.item_total_number=e.length,e}));case 4:return t=e.sent,this.all_item_loaded=!0,e.abrupt("return",t);case 7:if(i=this.state.chosen_category?this.state.chosen_category:0,a=this.state.chosen_filter?this.state.chosen_filter:0,r={file_type:0===a?void 0:Y.k[a-1],page:this.page},!this.is_login){e.next=17;break}return o=this.state.groups[pe(i)].id,e.next=14,ke.g(o,r).then((function(e){return 0===r.page&&(l.item_total_number=e.total),e.items}));case 14:t=e.sent,(n=this.uploading_items.filter((function(e){return e.group_id===o}))).length>0&&n.forEach((function(e){if(!(l.state.material_items.findIndex((function(t){return t.name===e.item_name&&t.id===e.item_id}))>=0)){var i={file_type:"NORMAL_IMAGE",id:e.item_id,subtitle:"{}",name:e.item_name,resource_names:"",resource_urls:[""],source:"UPLOADED"};t.unshift(i)}}));case 17:return e.abrupt("return",t);case 18:case"end":return e.stop()}}),e,this)}))),function(){return L.apply(this,arguments)})},{key:"refresh_mall_contents",value:(j=l()(s.a.mark((function e(){var t,i,a,r,o,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.current_tab===Y.a.MALL){e.next=2;break}return e.abrupt("return");case 2:t=this.state.material_items.length,i=0,r=[];case 5:if(!(t>0)){e.next=16;break}return a=Math.min(Y.f,t),o=this.get_mall_para_of_category_page(i),e.next=10,ke.h(o,a);case 10:n=e.sent,r=S()(r,n.items,"id"),t-=a,i++,e.next=5;break;case 16:this.setState({material_items:r});case 17:case"end":return e.stop()}}),e,this)}))),function(){return j.apply(this,arguments)})},{key:"get_mall_item",value:(R=l()(s.a.mark((function e(){var t,i,a,r,o,n,l,c,m,u=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],i=this.state.chosen_category,a=this.state.chosen_filter,r=this.page,e.t0=!0,e.next=e.t0===(void 0===i)?7:e.t0===(i!==this.index_of_theme)?14:e.t0===(i===this.index_of_theme&&void 0!==this.state.chosen_theme)?20:26;break;case 7:return o="搜索结果页",n={page:r,sort:"MOST_COLLECTED",keyword:this.current_keyword,file_type:a?Y.k[a-1]:void 0},e.next=11,ke.h(n).then((function(e){return 0===n.page&&(u.item_total_number=e.total),e.items}));case 11:return t=e.sent,0===a&&(this.num_search_result=this.item_total_number),e.abrupt("break",27);case 14:return o="分类页",l=this.get_mall_para_of_category_page(),e.next=18,ke.h(l).then((function(e){return 0===l.page&&(u.item_total_number=e.total),e.items}));case 18:return t=e.sent,e.abrupt("break",27);case 20:return o="单个主题详情页",c={page:r,sort:this.state.sort,file_type:a?Y.k[a-1]:void 0,uncollected:this.state.uncollected_only,theme_id:this.state.chosen_theme},e.next=24,ke.h(c).then((function(e){return 0===c.page&&(u.item_total_number=e.total),e.items}));case 24:return t=e.sent,e.abrupt("break",27);case 26:return e.abrupt("break",27);case 27:return t.length>=1&&(m=t.map((function(e){return e.id})),Object(B.v)("Kitten素材商城".concat(o),m)),e.abrupt("return",t);case 29:case"end":return e.stop()}}),e,this)}))),function(){return R.apply(this,arguments)})},{key:"get_mall_para_of_category_page",value:function(e){var t=this.state.chosen_category,i=this.state.chosen_filter,a="/000".concat(void 0!==t?t+1:t),r="";if("number"==typeof t&&"number"==typeof i){var o=this.mall_category[t].properties;this.mall_category[t].subsets||0===i?a+=i?"/000".concat(i):"":o&&(r=o[i-1].id)}return{category_path:a,uncollected:this.state.uncollected_only,page:M()(e)?this.page:e,sort:this.state.sort,option_ids:r}}},{key:"set_lesson_info",value:(A=l()(s.a.mark((function e(){var t,i=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.is_login){e.next=10;break}return e.next=3,ke.k();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,ke.l();case 8:t=e.sent,this.setState({is_have_lesson:!0},(function(){t&&i.choose_category(Y.d.LESSON).catch((function(e){return console.log(e)}))}));case 10:case"end":return e.stop()}}),e,this)}))),function(){return A.apply(this,arguments)})},{key:"delete_group_item",value:(O=l()(s.a.mark((function e(t,i){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.c(t,i);case 2:e.sent&&this.reset_group_items_after_deletion(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return O.apply(this,arguments)})},{key:"reset_group_items_after_deletion",value:function(e){var t=this.state.material_items,i=t.findIndex((function(t){return t.id===e}));if(t.splice(i,1),t.length<1){t.push({file_type:"XML",id:"empty_group",name:"",subtitle:"{}",resource_names:"",resource_urls:[""],source:"UNKNOWN"})}this.setState({material_items:t})}},{key:"start_search",value:function(e){e!==this.current_keyword&&(this.current_keyword=e.trim(),this.setState({chosen_category:this.state.chosen_category===Y.d.SCHOOL_LESSON?Y.d.SCHOOL_LESSON:void 0,chosen_filter:this.props.mode===Y.i.painter?1:0,material_items:[]},this.reset_content.bind(this)))}},{key:"sort_group",value:(N=l()(s.a.mark((function e(t,i,a){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.v(t,i);case 2:e.sent&&(a&&(r=this.get_group_index(a)),this.set_group_list(r).catch((function(e){return console.log(e)})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,i){return N.apply(this,arguments)})},{key:"replace_loading_item",value:function(e,t){var i=this.state,a=i.material_items,r=i.chosen_items;if("upload"===t)for(var o=a.length-1;o>=0;o--)if(/^loading/.test(a[o].id)&&a[o].name===e.name){a.splice(o,1,e);break}for(var s=0;s<r.length;s++)if(/^loading/.test(r[s].id)&&r[s].name===e.name){r.splice(s,1,e);break}this.setState({material_items:a,chosen_items:r})}},{key:"reset_content_after_collect",value:(x=l()(s.a.mark((function e(t){var i,a,r,o,n,l,c,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.state.material_items.findIndex((function(e){return e.id===t})),a=this.state.material_items,(r=a[i]).is_collected=!0,r.n_collections?r.n_collections++:r.n_collections=1,!this.state.uncollected_only){e.next=16;break}return a.splice(i,1),o=this.state.chosen_category,n=this.state.chosen_filter,l=void 0!==o?o+1:o,c=n?"/000".concat(l,"/000").concat(n):"/000".concat(l),m={category_path:c,uncollected:!0,page:this.page,sort:this.state.sort},e.next=14,ke.h(m).then((function(e){a.push(e.items.pop())}));case 14:e.next=17;break;case 16:a.splice(i,1,r);case 17:this.setState({material_items:a});case 18:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"sort_mall_item",value:function(e,t){this.setState({sort:e,uncollected_only:t},this.reset_content.bind(this))}},{key:"change_dialog_tab",value:(w=l()(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.current_keyword="",t!==this.state.current_tab&&this.setState({current_tab:t},this.choose_category.bind(this,this.DEFAULT_CATEGORY));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"choose_category",value:(b=l()(s.a.mark((function e(t){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.state.groups[pe(t)],this.current_keyword="",this.setState({material_items:[],themes:[],chosen_category:t,chosen_filter:i&&this.props.mode===Y.i.painter?this.PAINTER_FILTER:this.DEFAULT_FILTER,sort:"LATEST_ONLINE",uncollected_only:!1,chosen_theme:void 0,should_hide_menu:!0},this.reset_content.bind(this));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"choose_filter",value:function(e){this.search_type=void 0,this.setState({material_items:[],chosen_filter:e,sort:"LATEST_ONLINE",uncollected_only:!1},this.reset_content.bind(this))}},{key:"choose_item",value:function(e){var t=this.state.chosen_items,i=t.findIndex((function(t){return t.id===e.id&&t.name===e.name}));if(-1!==i)return t.splice(i,1),this.props.mode===Y.i.painter&&this.remove_frame_by_item_id(e.id),void this.setState({chosen_items:t,show_footer:t.length>0});if(this.props.mode===Y.i.painter&&this.state.num_of_frames>=Y.s)this.show_toast(void 0,"material_dialog/toast/painter_frame_limit");else{if(this.props.mode===Y.i.painter){if("MULTI_IMAGE"===e.file_type)return void this.show_subdialog("select_frame",e);this.add_frame(e.id,e.resource_urls)}if(void 0===this.state.chosen_category&&this.num_choose_item_after_search_action++,this.state.current_tab===Y.a.LIBRARY&&e&&"DEFAULT"===e.source){var a=void 0===this.state.chosen_category?"search_result_page":"category_page";Object(B.n)(a,e.id)}var o=r()(t).concat([e]);this.setState({show_footer:o.length>0,chosen_items:o})}}},{key:"choose_frame_from_dialog",value:function(e,t){var i=this.state.chosen_items;if(i.findIndex((function(t){return t.id===e.id&&t.name===e.name}))<0){if(void 0===this.state.chosen_category&&this.num_choose_item_after_search_action++,this.state.current_tab===Y.a.LIBRARY&&e&&"DEFAULT"===e.source){var a=void 0===this.state.chosen_category?"search_result_page":"category_page";Object(B.n)(a,e.id)}i.push(e),this.add_frame(e.id,t),this.setState({show_footer:this.state.chosen_items.length>0,chosen_items:i})}}},{key:"delete_item_from_footer",value:function(e){var t=this.state.chosen_items,i=t.findIndex((function(t){return t.id===e.id&&t.name===e.name}));i>=0&&(t.splice(i,1),this.setState({chosen_items:t,show_footer:t.length>0}))}},{key:"choose_theme",value:(f=l()(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=3;break}return this.choose_category(this.index_of_theme).catch((function(e){return console.log(e)})),e.abrupt("return");case 3:this.setState({material_items:[],chosen_filter:this.props.mode===Y.i.painter?this.PAINTER_FILTER:this.DEFAULT_FILTER,sort:"LATEST_ONLINE",uncollected_only:!1,chosen_theme:t},this.reset_content.bind(this));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"show_subdialog",value:function(e,t){"select_frame"!==e?this.is_login?("collect"!==e&&"upload"!==e||Object(B.M)(),this.setState({shown_dialog:e,dialog_para:t})):this.require_login():this.setState({shown_dialog:e,dialog_para:t})}},{key:"close_subdialog",value:function(){this.setState({shown_dialog:void 0})}},{key:"require_login",value:function(){this.props.show_dialog({dialog_type:"sign_in"})}},{key:"get_updated_groups",value:(d=l()(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.p("UPDATED");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})},{key:"handle_chosen_confirm",value:function(e){var t=this,i=this.state.chosen_items;if(i.findIndex((function(e){return/^loading/.test(e.id)}))>=0)this.show_toast("notice","material_dialog/toast/still_loading");else{if(this.props.mode===Y.i.kitten)(function(e,t,i){return se.apply(this,arguments)})(i,this.props.is_open_from_sidebar,this.props.theatre_state.current_entity===this.props.theatre_state.current_scene).catch((function(e){return console.error(e)}));else{var a=[];E()(i,(function(e){var i,o=e.id;t.frame_info[o]&&(a=(i=a).concat.apply(i,r()(t.frame_info[o])))})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single";V.a.get_store().dispatch(Object(ee.e)({material_data:{urls:e,frame_type:t,timestamp:(new Date).getTime()}}))}(a,e)}this.on_request_close(!0)}}},{key:"get_items_then_set_state",value:(h=l()(s.a.mark((function e(){var t,i,a,r,o,n,l,c,m,u,p,h,_,d,g,f,v,b=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.chosen_category,i=this.state.chosen_filter,a=this.state.current_tab,r=this.state.chosen_theme,o=this.state.current_tab!==Y.a.LIBRARY&&t===this.index_of_theme&&void 0===r,n=[],l=[],e.t0=this.state.current_tab,e.next=e.t0===Y.a.LIBRARY?10:e.t0===Y.a.MALL?14:23;break;case 10:return e.next=12,this.get_library_item();case 12:return n=e.sent,e.abrupt("break",23);case 14:if(!o){e.next=19;break}return e.next=17,ke.n(this.page).then((function(e){return 0===b.page&&(b.item_total_number=e.total),e.items}));case 17:return l=e.sent,e.abrupt("break",23);case 19:return e.next=21,this.get_mall_item();case 21:return n=e.sent,e.abrupt("break",23);case 23:if(c=this.state,m=c.chosen_category,u=c.chosen_filter,p=c.current_tab,h=c.chosen_theme,m!==t||u!==i||p!==a||h!==r){e.next=33;break}if(o){e.next=30;break}return _=this.append_items(n),void 0===this.state.chosen_category&&0===this.page&&(d=["ALL","ROLE","BACKGROUND","AUDIO"],g=this.state.chosen_filter?this.state.chosen_filter:0,f={keyword:this.current_keyword,filter:d[g],result:_[0]&&"XML"===_[0].file_type?[]:_},Object(U.a)("MATERIAL_DIALOG_SEARCH_RESULT",JSON.stringify(f),"INFO")),this.setState({material_items:_},(function(){b.setting_page=!1})),e.abrupt("return",n);case 30:(v=this.state.themes.concat(l)).length>=this.item_total_number&&(this.all_item_loaded=!0),this.setState({themes:v},(function(){b.setting_page=!1}));case 33:return e.abrupt("return",n);case 34:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"append_items",value:function(e){if(e=S()(this.state.material_items,e,"id"),!(this.state.current_tab===Y.a.LIBRARY&&this.state.chosen_category===Y.d.LESSON)&&e.length>=this.item_total_number&&(this.all_item_loaded=!0),e.length<1){e.push({file_type:"XML",id:"empty_group",subtitle:"{}",name:"",resource_names:"",resource_urls:[""],source:"UNKNOWN"})}return e}},{key:"set_page",value:(u=l()(s.a.mark((function e(t,i){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.material_item_wrap){e.next=2;break}return e.abrupt("return");case 2:if(this.setState({content_scroll_top:this.material_item_wrap.scrollTop}),a=this.material_item_wrap.scrollTop+this.material_item_wrap.clientHeight,this.material_item_wrap.scrollHeight-a<10&&!this.setting_page||i){e.next=7;break}return e.abrupt("return");case 7:if(this.setting_page=!0,!(this.all_item_loaded&&0!==this.item_total_number&&this.page>0)){e.next=11;break}return this.show_all_loaded_tips(),e.abrupt("return");case 11:if(!this.all_item_loaded){e.next=13;break}return e.abrupt("return");case 13:return!0===i?this.page=0:this.page+=1,e.prev=14,e.next=17,this.get_items_then_set_state();case 17:(r=e.sent)&&r.length&&this.set_page(),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(14),console.log(e.t0);case 24:case"end":return e.stop()}}),e,this,[[14,21]])}))),function(e,t){return u.apply(this,arguments)})},{key:"set_current_audio",value:function(e){this.setState({current_audio:e})}},{key:"clear_choices",value:function(){this.setState({chosen_items:[],show_footer:!1})}},{key:"reset_content",value:(c=l()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!==this.search_type&&(Object(B.F)(this.search_type,this.num_search_result,this.num_choose_item_after_search_action),this.num_choose_item_after_search_action=0,this.search_type=void 0),this.setState({material_items:[],should_hide_menu:!1}),this.material_item_wrap&&(this.material_item_wrap.scrollTop=0),this.all_item_loaded=!1,this.default_and_course_search_result=[],F.AudioPlayerModule.stop(),this.set_current_audio(void 0),this.setting_page=!0,e.next=10,this.set_page(void 0,!0);case 10:void 0===this.state.chosen_category&&(this.search_type=this.state.current_tab===Y.a.LIBRARY?"default":"mall");case 11:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"reset_user_info",value:(n=l()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(D.d)()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([this.set_gold(),this.set_lesson_info(),this.set_group_list()]);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"add_frame",value:function(e,t){this.frame_info[e]=r()(t),this.set_frame_num()}},{key:"remove_frame_by_item_id",value:function(e){this.frame_info[e]&&delete this.frame_info[e],this.set_frame_num()}},{key:"remove_frame_by_url",value:function(e,t){var i=this.frame_info[e.id];if(i){var a=i.indexOf(t);-1!==a&&(i.splice(a,1),this.set_frame_num(),0===i.length&&this.delete_item_from_footer(e))}}},{key:"set_frame_num",value:function(){var e=0;E()(this.frame_info,(function(t){e+=t.length})),this.setState({num_of_frames:e})}},{key:"get_frame_info",value:function(){return this.frame_info}},{key:"start_search_client",value:(o=l()(s.a.mark((function e(t){var i,a,o,n,l,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(this.state.current_tab!==Y.a.MALL){e.next=5;break}return this.start_search(t),e.abrupt("return");case 5:if(i=[],a=this.state.chosen_filter?this.state.chosen_filter:0,!this.is_login||Object(D.d)()){e.next=12;break}return o={keyword:this.current_keyword,file_type:a?Y.k[a-1]:void 0,page:this.page},e.next=11,ke.u(o).then((function(e){return e.items}));case 11:i=e.sent;case 12:return e.next=14,ke.j();case 14:n=e.sent,l=n.filter((function(e){return e.name.includes(t)})),c={file_type:"XML",id:"empty_group",name:"",subtitle:"{}",resource_names:"",resource_urls:[""],source:"UNKNOWN"},this.setState({chosen_category:l.length?this.state.chosen_category:void 0,material_items:l.length?r()(i).concat(r()(l)):[c].concat(r()(i))});case 18:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"offline_upload",value:function(e){var t=this,i=this.state.material_items;"XML"===i[0].file_type&&i.shift(),ke.x(i,e,(function(e){t.setState({material_items:e})})).catch((function(e){return console.log(e)}))}},{key:"delete_offline_item",value:(a=l()(s.a.mark((function e(t){var i,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.state.material_items,a=i.findIndex((function(e){return e.id===t.id})),i.splice(a,1),e.next=5,ke.t(JSON.stringify(i));case 5:i.length<1&&(r={file_type:"XML",id:"empty_group",name:"",subtitle:"{}",resource_names:"",resource_urls:[""],source:"UNKNOWN"},i.push(r)),this.setState({material_items:i});case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"choose_sub_filter_offline",value:(i=l()(s.a.mark((function e(t){var i,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.j();case 2:i=e.sent,a={file_type:"XML",id:"empty_group",name:"",subtitle:"{}",resource_names:"",resource_urls:[""],source:"UNKNOWN"},r=i.filter((function(e){return e.file_type.includes("IMAGE")&&e.subtitle.includes(t)})),this.setState({material_items:r.length?r:[a]}),this.all_item_loaded=!0;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.set_page)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.set_page)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.is_login!==e.is_login&&(this.is_login=e.is_login,Promise.all([this.reset_user_info(),this.refresh_mall_contents()]).catch((function(e){return console.log(e)})))}},{key:"render",value:function(){var e,t=this,i=this.state.material_items,a=this.state.chosen_category?this.state.chosen_category:0,r=null===(e=this.state.groups[pe(a)])||void 0===e?void 0:e.id;return C.createElement(T.a,{type:"new_material",on_request_close:this.on_request_close,close_btn:!1,style_name:"material",on_open:this.on_load},C.createElement("div",{style:this.props.mode===Y.i.painter?{width:"calc(100vw - 100px)",height:"calc(100vh - 40px)",maxWidth:"1448px",minWidth:"996px",maxHeight:"908px",minHeight:"580px"}:void 0,id:"material-dialog",className:"material-dialog--iHPGI"},C.createElement(Ge,{current_tab:this.state.current_tab,gold_num:this.state.gold,change_tab:this.change_dialog_tab,close_dialog:this.on_request_close,search_item:Object(D.c)()?this.start_search_client:this.start_search,mode:this.props.mode,theme:this.props.color_theme,enable_material_mall:this.props.enable_material_mall}),C.createElement(ot,{show_subdialog:this.show_subdialog,current_tab:this.state.current_tab,choose_category:this.choose_category,chosen_category:this.state.chosen_category,choose_filter:this.choose_filter,chosen_filter:this.state.chosen_filter,my_groups:this.state.groups,mall_category:this.mall_category,is_have_lesson:this.state.is_have_lesson,sort_group:this.sort_group,mode:this.props.mode}),C.createElement("div",{onScroll:this.set_page,ref:function(e){e&&(t.material_item_wrap=e)},className:"th1-bg-9 "+I()(this.state.show_footer?"footer-content-wrap":this.props.mode===Y.i.painter?"import-content-wrap":"material-content-wrap",st,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement(be,{material_items:i,show_toast:this.show_toast,choose_item:this.choose_item,chosen_items:this.state.chosen_items,show_subdialog:this.show_subdialog,current_tab:this.state.current_tab,chosen_category:this.state.chosen_category,choose_filter:this.choose_filter,chosen_filter:this.state.chosen_filter,themes:this.state.themes,choose_theme:this.choose_theme,chosen_theme:this.state.chosen_theme,is_login:this.is_login,require_login:this.require_login,my_groups:this.state.groups,delete_group_item:this.delete_group_item,scrollTop:this.state.content_scroll_top,index_of_theme:this.index_of_theme,sort_mall_items:this.sort_mall_item,sort:this.state.sort,uncollected_only:this.state.uncollected_only,should_hide_menu:this.state.should_hide_menu,current_audio:this.state.current_audio,set_current_audio:this.set_current_audio,mode:this.props.mode,theme:this.props.color_theme,num_of_frames:this.state.num_of_frames,offline_upload:this.offline_upload,delete_offline_item:this.delete_offline_item})),C.createElement("div",{style:this.props.mode===Y.i.painter&&this.state.show_footer?{bottom:"60px",height:"124px"}:void 0,className:I()(void 0===this.state.show_footer?"hide-element":this.state.show_footer?"show-footer":"hide-footer",st,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},C.createElement(Fe,{chosen_items:this.state.chosen_items,clear_choices:this.clear_choices,chosen_confirm:this.handle_chosen_confirm,delete_item:this.delete_item_from_footer,mode:this.props.mode,get_frame_info:this.get_frame_info,remove_frame_by_url:this.remove_frame_by_url,n_of_frame:this.state.num_of_frames,theme:this.props.color_theme})),this.props.mode===Y.i.painter&&C.createElement(Ke,{theme:this.props.color_theme,chosen_confirm:this.handle_chosen_confirm,delete_item:this.delete_item_from_footer,get_frame_info:this.get_frame_info,num_of_frames:this.state.num_of_frames,close_dialog:this.on_request_close}),C.createElement(Be,{theme:this.props.color_theme,close_subdialog:this.close_subdialog,shown_dialog:this.state.shown_dialog,dialog_para:this.state.dialog_para,group_controller:this.group_controller,get_updated_groups:this.get_updated_groups,show_toast:this.show_toast,groups:this.state.groups,set_current_audio:this.set_current_audio,choose_frame_from_dialog:this.choose_frame_from_dialog,num_of_frames:this.state.num_of_frames,category_id:r})))}}]),t}(C.Component);var lt=Object(R.b)(Object(j.connect)((function(e){return{default_category:e.material_dialog_state.default_category,is_open_from_sidebar:e.material_dialog_state.is_open_from_sidebar,is_login:!!e.userinfo_state.user_id,theatre_state:e.theatre_state,audios:e.audio_state,mode:e.material_dialog_state.mode,color_theme:e.common_state.theme,enable_material_mall:e.common_state.ui_cfg.material_mall}}),(function(e){return Object(L.bindActionCreators)({close_dialog:W.c,show_dialog:W.g,show_toast:q.d,action_set_play_state:F.action_set_play_state,action_set_material_mode:ie.action_set_material_mode},e)}))(nt))},n6yW:function(e,t,i){"use strict";var a={};function r(e){var t=a[e];return t?t.lastIndex=0:a[e]=t=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),t}e.exports={add:function(e,t){var i=e.className;i.length?r(t).test(i)||(e.className+=" "+t):e.className=t},rm:function(e,t){e.className=e.className.replace(r(t)," ").trim()}}},zlTn:function(e,t,i){e.exports={"content-wrap":"content-wrap--Nn5UR","material-items-wrap":"material-items-wrap--2eMaW","option-menu":"option-menu--29pse","upload-item":"upload-item--EoO9m","material-item-audio-chosen":"material-item-audio-chosen--2DjV8","material-item-audio":"material-item-audio--YqViP","material-item-chosen":"material-item-chosen--2ffas","loading-item":"loading-item--2Xk8H","material-item":"material-item--1XW11","lib-item-wrapper":"lib-item-wrapper--3s6qv","icn-option":"icn-option--_AxDa","icn-upload":"icn-upload--1xWdv","icn-frame":"icn-frame--1MwDt","material-item-info":"material-item-info--1aD6R","material-item-info-audio":"material-item-info-audio--344zG","icn-select":"icn-select--2s1gI",icnShow:"icnShow--17WI-","inner-icon":"inner-icon--3I3K5","icn-wrap":"icn-wrap--3EsSJ","icn-option-clickable":"icn-option-clickable--2CYSC","icn-dots":"icn-dots--x1oOI","move-to":"move-to--13NHV",delete:"delete--17OrF","material-item-img":"material-item-img--ljcUU","material-item-img-mall":"material-item-img-mall--2I1EW","material-item-scene":"material-item-scene--1BJQA","material-item-img-wrap":"material-item-img-wrap--3-c1Z","bg-wrap":"bg-wrap--2lC28","material-item-img-wrap-audio":"material-item-img-wrap-audio--1-sWL","audio-duration":"audio-duration--1j3ai","material-item-img-wrap-audio-mall":"material-item-img-wrap-audio-mall--26_ci","material-dialog-audio":"material-dialog-audio--3QrwF","audio-img-wrap":"audio-img-wrap--3iEkA","icon-audio":"icon-audio--1rw7M","btn-audio-trigger-ready":"btn-audio-trigger-ready--1tTvQ","audio-img-wrap-mall":"audio-img-wrap-mall--3ovSn","icon-audio-mall":"icon-audio-mall--3r7ZQ","btn-audio-trigger-ready-mall":"btn-audio-trigger-ready-mall--2cv5C",show:"show--1CHyy","btn-audio-trigger-playing-mall":"btn-audio-trigger-playing-mall--1ICP9","btn-audio-trigger-playing":"btn-audio-trigger-playing--2cRpX",play:"play--3J8WY",pause:"pause--1TZz9","audio-progress-bar":"audio-progress-bar--29MzM","audio-progress-bar-mall":"audio-progress-bar-mall--2tT1E","top-double-wrap":"top-double-wrap--TNX-b","top-single-wrap":"top-single-wrap--f68uJ","top-bar":"top-bar--1Go5c","second-bar":"second-bar--2p0sA","top-filter":"top-filter--lWjFx",checkbox:"checkbox--2_5ec","nav-wrap":"nav-wrap--xxFqE","nav-tag":"nav-tag--6tmCj","nav-slash":"nav-slash--kFYYj","icon-upload":"icon-upload--JR_Qj","material-dialog-upload":"material-dialog-upload--2yU-v","upload-info":"upload-info--2Lzvw","no-search-result-wrap":"no-search-result-wrap---JVy7","no-category-item-wrap":"no-category-item-wrap--2J7Ob","pic-no-corresponding-material":"pic-no-corresponding-material--27fBp","mall-item":"mall-item--2jP6w","icn-frame-wrap-mall":"icn-frame-wrap-mall--2NUeX","icn-frame-mall":"icn-frame-mall--2vNtT","mall-item-preview":"mall-item-preview--3Mw9j","mall-item-info-wrap":"mall-item-info-wrap--1sTeL","mall-item-info":"mall-item-info--2A0nv","mall-item-name":"mall-item-name--1u084","mall-item-used":"mall-item-used--_bmTq","collect-btn":"collect-btn--2kkgR","inline-icon":"inline-icon--3SiAE","theme-item":"theme-item--3ZlL8","theme-wrap":"theme-wrap--Zv9od","theme-wrap-middle":"theme-wrap-middle--1YjH2","theme-wrap-bottom":"theme-wrap-bottom--bLSn7","theme-preview":"theme-preview--iApbo","theme-words":"theme-words--18JOx","theme-name":"theme-name--1QFhf","theme-used":"theme-used--7NB5V","classify-title":"classify-title--sgoFA",point:"point--CngU4",title:"title--29Pu5","loading-wrap":"loading-wrap--2ki4q","loading-content":"loading-content--dlWqW","audio-name":"audio-name--FkHrQ","material-price-tag":"material-price-tag--3lOhF",checkbox_wrap:"checkbox_wrap--3I-le",checkbox_btn:"checkbox_btn--2gdm7"}}}]);
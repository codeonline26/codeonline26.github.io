(this.webpackJsonp=this.webpackJsonp||[]).push([[45],{IUSf:function(e,t,n){},zeyo:function(e,t,n){"use strict";n.r(t),n.d(t,"LvmiConnnectDialog",(function(){return C}));var a=n("o0o1"),c=n.n(a),r=n("yXPU"),o=n.n(r),i=n("J4zp"),s=n.n(i),l=n("q1tI"),d=n.n(l),u=n("YSDp"),p=n("02PQ"),g=n("D/nr"),b=n("AYX/"),m=(n("IUSf"),function(e,t){return!e||e<0?0:(t&&e>t&&(e=t),e)}),f=function(e){var t=e.percentage,n=e.width,a=e.height,c=e.noText,r=e.barColor,o=e.barBorderStyle,i=e.strokeColor,s=m(a),l=Object(g.a)(Object(g.b)(),b.a.TC7,"16"),u=Object(g.a)(Object(g.b)(),b.a.TC0,"16"),p={marginTop:c?void 0:"21px",width:"".concat(m(n),"px"),height:"".concat(null!=s?s:8,"px"),border:o,borderRadius:"".concat(s/2,"px"),backgroundColor:null!=r?r:"#".concat(l),borderColor:null!=r?r:"#".concat(l)},f={fontSize:"".concat(.6*s,"px"),height:"".concat(null!=s?s:8,"px"),width:"".concat(m(t,100),"%"),borderRadius:"".concat(s/2,"px"),backgroundColor:null!=i?i:"#".concat(u),borderColor:null!=i?i:"#".concat(u)};return d.a.createElement("div",{className:"CUI-progress-bar-bar",style:p},d.a.createElement("div",{className:"CUI-progress-bar-stroke",style:f},c?null:d.a.createElement("span",{className:"CUI-progress-bar-follow-text",style:{transform:"translate(".concat(100-t,"%, -16px)")}},t,"%")))};f.defaultProps={percentage:0,width:300,height:8,noText:!1};var v=n("HIk1"),_=n("/MKj"),h=n("7Me5"),w=n("q9ez"),x=n("X8LL"),j=n("dqaR"),O=n("Fye/"),y=n("Vbab");function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))}var C=function(){var e=Object(_.useSelector)(w.d).widget_type,t=Object(l.useState)(0),n=s()(t,2),a=n[0],r=n[1],i=Object(_.useDispatch)();return Object(l.useEffect)((function(){e&&function(){var t=o()(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(1e3);case 2:return r(30),t.prev=3,t.next=6,h.a.connect(e);case 6:n=1;case 7:if(!(n<=7)){t.next=14;break}return r(30+10*n),t.next=11,k(1e3/7);case 11:n++,t.next=7;break;case 14:i(Object(w.e)(!0)),u.a.success({content:Object(y.i)().formatMessage({id:"device_widget/lvmi_connect_dialog_succ"})}),O.B.refresh_workspace_from_doc(),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(3),i(Object(w.e)(!1)),u.a.error({content:Object(y.i)().formatMessage({id:"device_widget/lvmi_connect_dialog_fail"})});case 23:i(Object(x.d)({dialog_type:"lvmi_connect"}));case 24:case"end":return t.stop()}}),t,null,[[3,19]])})));return function(){return t.apply(this,arguments)}}()()}),[i,e]),d.a.createElement(p.a,{show:!0,closeAnimation:!1,maskClose:!1,top:"center",centerShowUp:!0,footer:null,header:null},d.a.createElement("div",{style:{paddingTop:36,marginBottom:28}},d.a.createElement(f,{percentage:a}),d.a.createElement("p",{style:{marginTop:12}},Object(y.i)().formatMessage({id:"device_widget/lvmi_connect_dialog_authorization"})),d.a.createElement("div",{style:{marginTop:32,textAlign:"center"}},d.a.createElement(v.a,{type:"primary",onClick:function(){i(Object(x.d)({dialog_type:"lvmi_connect"})),setTimeout((function(){j.a.get_state().device_widget_state.connected||u.a.error({content:Object(y.i)().formatMessage({id:"device_widget/lvmi_connect_dialog_fail"})})}),1e3)}},Object(y.i)().formatMessage({id:"device_widget/lvmi_connect_dialog_cancel"})))))}}}]);
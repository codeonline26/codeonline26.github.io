(this.webpackJsonp=this.webpackJsonp||[]).push([[22],{"1svW":function(e,t,o){e.exports={open_project:"open_project--29RUQ",show:"show--2gIdu",tab_bar:"tab_bar--mq7_B",tab:"tab--3MBu6",selected_tab:"selected_tab--3cEoG",selection_wrap:"selection_wrap--38maR",content_wrap:"content_wrap--3uM74",no_tab:"no_tab--2vvbj",content:"content--Jm3WL",sample_projects:"sample_projects--3Y5Xc",empty_bg_placeholder:"empty_bg_placeholder--1Mwkj",project:"project--3_TOH",user:"user--3rXOR",project_content_wrap:"project_content_wrap--3opBE",project_content:"project_content--1KiP4",import_icon:"import_icon--16DYB",arrow:"arrow--365MC",computer:"computer--3M3uF",title:"title--1xX8B",update_time:"update_time--HMqTk","local-project-file":"local-project-file--x6HZx",search_input_wrap:"search_input_wrap--254GW",search_icon:"search_icon--sdHTe",clear_icon:"clear_icon--3DpN7",search_input:"search_input--6Tj11"}},LAxJ:function(e,t,o){e.exports={project:"project--3ldXt",user:"user--bZiqw",project_content_wrap:"project_content_wrap--XdRnp",project_content:"project_content--r_aJA",loading_icon:"loading_icon--ot_p6",portrait:"portrait--1fOfu",landscape:"landscape--2alek",title:"title--1p6eE",example:"example--3yPIM",v3:"v3--1TUjM",coll:"coll--5oe0W","coll-author":"coll-author--2sKJg","coll-label":"coll-label--bTwjE","coll-label-author":"coll-label-author--D594H",label:"label--3aLvT","tag-activity":"tag-activity--1LBvE",en:"en--3mk2A",text:"text--1j4RG",icon:"icon--1ymKj",update_time:"update_time--2z-2_",work_btn_container:"work_btn_container--2CUyG",hover_btn:"hover_btn--1DlBR",published_status:"published_status--1qAGI",preview_img:"preview_img--1tpFz",show:"show--1LNMF",project_name_tooltip:"project_name_tooltip--344HQ"}},ZFYh:function(e,t,o){"use strict";o.r(t),o.d(t,"AppManageProjectComponent",(function(){return Me}));var n,r,c=o("lwsE"),a=o.n(c),i=o("W8MJ"),s=o.n(i),p=o("a1gu"),_=o.n(p),l=o("Nsbk"),u=o.n(l),d=o("7W2i"),h=o.n(d),m=o("q1tI"),f=o("2OET"),b=o("/MKj"),g=o("ANjH"),j=o("CG87"),v=o("G72A"),w=o("o0o1"),y=o.n(w),k=o("RIqP"),x=o.n(k),E=o("yXPU"),M=o.n(E),O=o("PJYZ"),N=o.n(O),A=o("lSNA"),T=o.n(A),L=o("sEfC"),R=o.n(L),B=o("kNvX"),C=o.n(B),P=o("5FhS"),K=o("WFO7"),S=o("CR6n"),D=o("ALsR"),G=o("5nG9"),q=o("ptQL");o("Vbab");!function(e){e[e.Published=1]="Published",e[e.UnPublished=2]="UnPublished",e[e.All=3]="All"}(n||(n={})),function(e){e[e.Normal=0]="Normal",e[e.Activity=1]="Activity"}(r||(r={}));function H(e){return I.apply(this,arguments)}function I(){return(I=M()(y.a.mark((function e(t){var o,n,r,c=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>1&&void 0!==c[1]?c[1]:"GET",n=c.length>2&&void 0!==c[2]?c[2]:{url:t,method:o,withCredentials:!0},e.next=4,Object(S.a)(n);case 4:if(!(r=e.sent)){e.next=7;break}return e.abrupt("return",r);case 7:throw Error();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){return U.apply(this,arguments)}function U(){return(U=M()(y.a.mark((function e(t,o){var n,r,c,a,i=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:1,r=11*(o-1),c="".concat(Object(K.a)().creation_api,"/kitten/").concat("r2","/work/ide/list?published_status=").concat(t,"&offset=").concat(r,"&limit=").concat(11,"&version_no=").concat(n),e.next=5,H(c);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t,o){return X.apply(this,arguments)}function X(){return(X=M()(y.a.mark((function e(t,o,n){var r,c,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=11*(n-1),c="".concat(Object(K.a)().creation_api,"/kitten/").concat("r2","/work/ide/list?published_status=").concat(t,"&offset=").concat(r,"&limit=").concat(11,"&name=").concat(o,"&version_no=1"),e.next=4,H(encodeURI(c));case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t){return F.apply(this,arguments)}function F(){return(F=M()(y.a.mark((function e(t,o){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.keyword){e.next=2;break}return e.abrupt("return",W(o.project_type,o.keyword,t));case 2:return e.abrupt("return",J(o.project_type,t,o.version));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t,o,n){return Z.apply(this,arguments)}function Z(){return(Z=M()(y.a.mark((function e(t,o,n,r){var c,a,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(o,{keyword:n,project_type:t,version:r});case 3:return c=e.sent,a=c.items,i=c.total,e.abrupt("return",{project_list:a,project_page:o+1,project_total_number:i});case 8:return e.prev=8,e.t0=e.catch(0),D.a.get_store().dispatch(Object(G.d)({content:"bad_network_notice",type:"error"})),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var Q,V=function(){var e=M()(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(S.a)({url:"".concat(Object(K.a)().creation_api,"/kitten/common/work/").concat(t,"/temporarily"),method:"delete",withCredentials:!0});case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),D.a.get_store().dispatch(Object(G.d)({content:"dialog/app_manage_project_dialog/delete_confirm/fail",type:"error"})),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=M()(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(S.a)({url:"".concat(Object(K.a)().api.host_community,"/web/works/r2/unpublish/").concat(t),method:"put",withCredentials:!0});case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),D.a.get_store().dispatch(Object(G.d)({content:"dialog/app_manage_project_dialog/unpublish_confirm/fail",type:"error"})),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),ee=o("Gzrk"),te=o("w0HH"),oe=o("kTTF"),ne=o("AoQK"),re=o("7KP3"),ce=o("OUdY"),ae=o("5IJ9"),ie=o("iTM4"),se=(o("LAxJ"),{"./style.scss":{project:"project--3ldXt",user:"user--bZiqw",project_content_wrap:"project_content_wrap--XdRnp",project_content:"project_content--r_aJA",loading_icon:"loading_icon--ot_p6",portrait:"portrait--1fOfu",landscape:"landscape--2alek",title:"title--1p6eE",example:"example--3yPIM",v3:"v3--1TUjM",coll:"coll--5oe0W","coll-author":"coll-author--2sKJg","coll-label":"coll-label--bTwjE","coll-label-author":"coll-label-author--D594H",label:"label--3aLvT","tag-activity":"tag-activity--1LBvE",en:"en--3mk2A",text:"text--1j4RG",icon:"icon--1ymKj",update_time:"update_time--2z-2_",work_btn_container:"work_btn_container--2CUyG",hover_btn:"hover_btn--1DlBR",published_status:"published_status--1qAGI",preview_img:"preview_img--1tpFz",show:"show--1LNMF",project_name_tooltip:"project_name_tooltip--344HQ"}});(function(e){e[e.Portrait=1]="Portrait",e[e.Landscape_4_3=2]="Landscape_4_3",e[e.Landscape_16_9=3]="Landscape_16_9"})(Q||(Q={}));var pe=function(e){function t(e){var o;return a()(this,t),(o=_()(this,u()(t).call(this,e))).is_catching_mouse=!1,o.current_mouse_position={x:0,y:0},o.catching_timer=void 0,o.current_work_name="",o.ipc_renderer=Object(q.a)(),o.stop_hover_timing=function(){o.is_catching_mouse=!1,clearTimeout(o.catching_timer),o.setState({hint_position:{left:0,top:0}})},o.start_hover_timing=function(e){o.is_catching_mouse=!0,o.current_work_name=e,o.catching_timer=setTimeout((function(){o.is_catching_mouse&&(o.is_catching_mouse=!1,o.setState({hint_position:{left:o.current_mouse_position.x+1,top:o.current_mouse_position.y+16}}))}),950)},o.handle_mouse_enter_project=function(e){o.current_mouse_position.x=e.nativeEvent.clientX,o.current_mouse_position.y=e.nativeEvent.clientY},o.note_mouse_position=function(e){o.is_catching_mouse&&(o.current_mouse_position.x=e.nativeEvent.clientX,o.current_mouse_position.y=e.nativeEvent.clientY)},o.format_update_time=function(e,t){var n,r,c=new Date(1e3*t);n="Today"===e||"Yesterday"===e||"TDBY"===e?e:"".concat(c.getFullYear(),"/").concat(c.getMonth()+1,"/").concat(c.getDate());var a=(new Date).getTime()-1e3*t;if("Today"===e&&a<=216e5){var i,s=Math.floor(a/36e5),p=Math.floor(a%36e5/6e4),_=s?"".concat(s).concat(o.props.intl.formatMessage({id:"project/hour"})):"";i=p?"".concat(p).concat(o.props.intl.formatMessage({id:"project/minute"})):"",s||p||(i="1".concat(o.props.intl.formatMessage({id:"project/minute"}))),r="".concat(_).concat(i).concat(o.props.intl.formatMessage({id:"project/ago"})),n=""}else r="".concat(c.getHours(),":").concat(o.get_minutes(c.getMinutes()));return"".concat(o.get_day(n)," ").concat(r)},o.get_minutes=function(e){return 0===e?"00":e<10?"0".concat(e):e},o.get_user_project=function(e){if(e){var t=e.id,n=e.preview_url,r=e.name,c=e.orientation,a=e.date_desc,i=e.updated_time,s=e.cover_url,p=e.published_status,_=o.format_update_time(a,i),l=o.props.is_coll&&o.props.role===te.b.Author;return m.createElement("div",{className:"th1-border-impt-hover-0 project--3ldXt user--bZiqw",onClick:o.open_user_project.bind(N()(o),t,!1),onMouseEnter:o.handle_mouse_enter_project.bind(N()(o)),onMouseOver:o.start_hover_timing.bind(N()(o),r),onMouseMove:o.note_mouse_position,onMouseOut:o.stop_hover_timing},m.createElement("div",{className:"th1-border-impt-7 project_content_wrap--XdRnp"},m.createElement("div",{className:"th1-bg-8 project_content--r_aJA"},m.createElement("img",{src:s||n,alt:"project_img",className:C()(c===Q.Portrait?"portrait":"landscape",se,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})}),o.props.is_coll&&m.createElement("span",{className:C()("coll-label ".concat(l?"coll-label-author":""),se,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},l&&m.createElement(ee.c,{id:"#iconicn_team",margin:"0 1px 0 0",size:12}),o.props.intl.formatMessage({id:"coll/collaboration"})),m.createElement("span",{className:"th1-text-t7 "+C()("title ".concat(o.props.project_type,"\n                 ").concat(o.props.is_v3?"v3":""," \n                 ").concat(o.props.is_coll?"coll":"","\n                 ").concat(l?"coll-author":"","\n                 "),se,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},r),o.props.is_v3&&m.createElement("span",{className:"label--3aLvT"},"V3.0"),m.createElement("span",{className:"th1-text-t7 update_time--2z-2_"},_))),m.createElement("div",{className:"work_btn_container--2CUyG"},0===p&&(!o.props.is_coll||l)&&m.createElement(m.Fragment,null,m.createElement(ee.a,{tooltip:"dialog/app_manage_project_dialog/publish",on_click:o.app_publish.bind(N()(o),t)},m.createElement("div",{className:"hover_btn--1DlBR"},m.createElement(ee.c,{id:"#iconicn_project_publish",color:"white",size:32}))),m.createElement(ee.a,{tooltip:"dialog/app_manage_project_dialog/delete",on_click:o.delete.bind(N()(o),r,t)},m.createElement("div",{className:"hover_btn--1DlBR"},m.createElement(ee.c,{id:"#iconicn_project_delete",color:"white",size:32})))),1===p&&m.createElement(m.Fragment,null,m.createElement(ee.a,{tooltip:"dialog/app_manage_project_dialog/open",on_click:o.open_community_work.bind(N()(o),t)},m.createElement("div",{className:"hover_btn--1DlBR"},m.createElement(ee.c,{id:"#iconicn_project_link",color:"white",size:32}))),(!o.props.is_coll||l)&&m.createElement(ee.a,{tooltip:"dialog/app_manage_project_dialog/edit_publish",on_click:o.app_publish.bind(N()(o),t)},m.createElement("div",{className:"hover_btn--1DlBR"},m.createElement(ee.c,{id:"#iconicn_project_modify",color:"white",size:32}))),(!o.props.is_coll||l)&&m.createElement(ee.a,{tooltip:"dialog/app_manage_project_dialog/unpublish",on_click:o.unpublish.bind(N()(o),r,t)},m.createElement("div",{className:"hover_btn--1DlBR"},m.createElement(ee.c,{id:"#iconicn_project_unpublish",color:"white",size:32}))))),1===p&&m.createElement("div",{className:"published_status--1qAGI"},"已发布"))}},o.state={show_preview:!1,start_loading_preview_img:!1,show_loading_icon:!1,hint_position:{left:0,top:0}},o}var o;return h()(t,e),s()(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.catching_timer)}},{key:"get_day",value:function(e){return"Today"===e||"Yesterday"===e||"TDBY"===e?this.props.intl.formatMessage({id:"project/".concat(e)}):e}},{key:"open_user_project",value:function(e,t){var o=this;this.props.close_dialog({dialog_type:"app_manage_project"}),this.props.action_set_project_info_state({base_sample_project_id:""}),Object(ae.is_unsave_bcm)()?(this.props.close_dialog({dialog_type:"example"}),Object(ae.set_task_func)((function(){o.open_project_callback(e,t)})),Object(ae.add_unsave_hint)()):this.open_project_callback(e,t)}},{key:"open_project_callback",value:function(e,t){var o=this,n=Object(q.b)();if(n&&n.clear_path(),this.props.is_v3)return this.props.close_dialog({dialog_type:"example"}),this.props.set_open_v3_dialog({open_callback:function(){sessionStorage.direct_open=!0,o.props.action_fetch_bcm_urls_by_id({id:e})},new_copy_callback:function(){sessionStorage.copy=!0,o.props.action_fetch_bcm_urls_by_id({id:e})}}),void this.props.show_dialog({dialog_type:"open_v3"});this.props.close_dialog({dialog_type:"example"}),t&&ie.a.once("load_bcm_success",(function(){return Object(re.a)(!0)})),this.props.action_fetch_bcm_urls_by_id({id:e})}},{key:"open_community_work",value:function(e,t){t.stopPropagation(),window.open("".concat(Object(K.a)().community,"/work/").concat(e))}},{key:"app_publish",value:(o=M()(y.a.mark((function e(t,o){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.stopPropagation(),this.props.close_dialog({dialog_type:"app_manage_project"}),this.open_user_project(t,!0);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"unpublish",value:function(e,t,o){var n,r,c=this;o.stopPropagation(),this.props.set_dialog_props({confirm_dialog_setting:{title:"confirm_dialog/hint",tip:this.props.intl.formatMessage({id:"dialog/app_manage_project_dialog/unpublish_confirm"},{work_name:e}),disable_intl:!0,btn_right:{text:"common/confirm",callback:(r=M()(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t);case 2:setTimeout((function(){c.props.refresh_projects_list(),c.props.close_dialog({dialog_type:"confirm"})}),500);case 3:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},btn_left:{text:"common/cancel",callback:(n=M()(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.props.close_dialog({dialog_type:"confirm"});case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})}}}),this.props.show_dialog({dialog_type:"confirm"})}},{key:"delete",value:function(e,t,o){var n,r,c=this;o.stopPropagation(),this.props.set_dialog_props({confirm_dialog_setting:{title:"confirm_dialog/hint",tip:this.props.intl.formatMessage({id:"dialog/app_manage_project_dialog/delete_confirm"},{work_name:e}),disable_intl:!0,btn_right:{text:"common/confirm",callback:(r=M()(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:setTimeout((function(){c.props.refresh_projects_list(),c.props.close_dialog({dialog_type:"confirm"})}),500);case 3:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},btn_left:{text:"common/cancel",callback:(n=M()(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.props.close_dialog({dialog_type:"confirm"});case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})}}}),this.props.show_dialog({dialog_type:"confirm"})}},{key:"render",value:function(){var e=this.props.user_project_info;return this.get_user_project(e)}}]),t}(m.Component);var _e,le=Object(f.b)(Object(b.connect)((function(e){return{has_signed:e.userinfo_state.has_signed}}),(function(e){return Object(g.bindActionCreators)({close_dialog:v.c,show_dialog:v.g,set_dialog_props:v.f,action_fetch_bcm_by_url:oe.b,action_fetch_bcm_urls_by_id:oe.c,action_set_project_info_state:te.c,set_open_v3_dialog:ne.b,show_toast:G.d,action_set_user_info_state:ce.a},e)}))(pe)),ue=o("e/E2"),de=o("JcTc"),he=o("7zTG"),me=o("2pfL"),fe=o("O8UM"),be=o("CZH1"),ge=o("xfAC"),je=(o("1svW"),{"./style.scss":{open_project:"open_project--29RUQ",show:"show--2gIdu",tab_bar:"tab_bar--mq7_B",tab:"tab--3MBu6",selected_tab:"selected_tab--3cEoG",selection_wrap:"selection_wrap--38maR",content_wrap:"content_wrap--3uM74",no_tab:"no_tab--2vvbj",content:"content--Jm3WL",sample_projects:"sample_projects--3Y5Xc",empty_bg_placeholder:"empty_bg_placeholder--1Mwkj",project:"project--3_TOH",user:"user--3rXOR",project_content_wrap:"project_content_wrap--3opBE",project_content:"project_content--1KiP4",import_icon:"import_icon--16DYB",arrow:"arrow--365MC",computer:"computer--3M3uF",title:"title--1xX8B",update_time:"update_time--HMqTk","local-project-file":"local-project-file--x6HZx",search_input_wrap:"search_input_wrap--254GW",search_icon:"search_icon--sdHTe",clear_icon:"clear_icon--3DpN7",search_input:"search_input--6Tj11"}});var ve,we=[{i18n:"project_dialog/all",id:n.All,data_report:"全部"},{i18n:"project_dialog/published",id:n.Published,data_report:"已发布"},{i18n:"project_dialog/unpublished",id:n.UnPublished,data_report:"未发布"}];!function(e){e[e.ALL=1]="ALL",e[e.K4=4]="K4",e[e.K3=3]="K3"}(ve||(ve={}));var ye=(_e={},T()(_e,ve.ALL,"manage_project/all_version"),T()(_e,ve.K4,"manage_project/version_4"),T()(_e,ve.K3,"manage_project/version_3"),_e),ke=function(e){function t(e){var o;return a()(this,t),(o=_()(this,u()(t).call(this,e))).search_keyword=void 0,o.content_wrap=void 0,o.content=void 0,o.version_selection=void 0,o.debounced_load_more_project_page=R()(o.load_more_content.bind(N()(o)),150),o.debounced_search_function=R()((function(e){o.fetch_project_by_name(e)}),700),o.init=function(){o.state.project_list.length||o.fetch_projects()},o.get_context_menu_item=function(){return[o.create_menu_item(ye[ve.ALL],ve.ALL),o.create_menu_item(ye[ve.K4],ve.K4),o.create_menu_item(ye[ve.K3],ve.K3)]},o.create_menu_item=function(e,t){var n={text:""};return n.text=e,n.on_click=o.select_version.bind(N()(o),Number(t)),n.style={justifyContent:"flex-start",width:"98px"},n.data_report="客户端我的作品弹窗-版本选择",n.checked=o.state.selected_version===t,n},o.is_scroll_to_bottom=function(){if(o.content_wrap&&o.content){var e=o.content_wrap.getBoundingClientRect(),t=o.content.getBoundingClientRect(),n=e.bottom,r=t.bottom,c=e.height;return!!(t.height-c>0&&r-n<=10)}},o.get_tab_bar=function(){return m.createElement("div",{className:"tab_bar--mq7_B"},m.createElement("div",{className:"selection_wrap--38maR",ref:function(e){e&&(o.version_selection=e)}},m.createElement(ee.b,{direction:"down",width:"98px",height:"28px",value:ye[o.state.selected_version],on_click:o.handle_selection_click.bind(N()(o))})),we.map((function(e){return m.createElement("span",{key:e.id,onClick:o.select_project_type.bind(N()(o),e.id),"data-report-click":"客户端我的作品弹窗-".concat(e.data_report),className:"th1-bg-7 th1-bg-selected-1\n              ".concat(Object(fe.d)("th1-bg-hover-6",o.props.theme),"\n              ").concat(o.props.theme.light_theme_colors?"th1-text-t5 th1-text-hover-s2 th1-text-selected-s2":"th1-text-1 th1-text-hover-m1 th1-text-selected-m1","\n              ").concat(o.state.project_type===e.id?"selected":"","\n            ")+" "+C()("tab ".concat(o.state.project_type!==e.id||o.props.theme.light_theme_colors?"":"selected_tab"),je,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},o.props.intl.messages[e.i18n])})),o.render_search_input())},o.render_search_input=function(){return m.createElement("div",{className:"search_input_wrap--254GW"},m.createElement(P.a,{clearBtn:!0,iconsPrefix:m.createElement(de.a,{id:"#iconicon-search",size:14,class_name:"th1-text-t3"}),placeholder:o.props.intl.formatMessage({id:"project/search_projects"}),onChange:o.set_search_input,value:o.state.search_keyword,maxLength:20}))},o.set_search_input=function(e){o.search_keyword=e.target.value,o.setState({search_keyword:o.search_keyword,selected_version:ve.ALL}),o.debounced_search_function(o.search_keyword)},o.state={search_keyword:"",project_total_number:0,project_list:[],project_page:1,project_loaded:!1,project_type:n.All,selected_version:ve.ALL},o}var o,r;return h()(t,e),s()(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"select_project_type",value:function(e){var t=this,o="客户端我的作品弹窗-".concat(this.report_project_type_select(e));Object(ue.m)(o),e!==this.state.project_type&&(this.search_keyword="",this.setState({search_keyword:"",project_list:[],project_page:1,project_loaded:!1,project_type:e},(function(){t.fetch_projects()})))}},{key:"handle_selection_click",value:function(){if(this.version_selection){var e=this.version_selection.getBoundingClientRect(),t=e.left,o=e.bottom;this.props.show_context_menu({x:t,y:o+5,menu_items:this.get_context_menu_item()})}}},{key:"select_version",value:function(e){var t=this;this.search_keyword="",this.setState({selected_version:e,search_keyword:"",project_list:[],project_page:1,project_loaded:!1},(function(){return t.fetch_projects()}));var o=document.activeElement;o&&o.blur()}},{key:"report_project_type_select",value:function(e){switch(e){case n.All:return"全部";case n.Published:return"已发布";case n.UnPublished:return"未发布";default:return}}},{key:"fetch_projects",value:(r=M()(y.a.mark((function e(){var t,o,n,r,c,a,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y(this.state.project_type,this.state.project_page,this.search_keyword,this.state.selected_version);case 3:if((t=e.sent)&&t.project_list){e.next=6;break}return e.abrupt("return");case 6:o=t.project_list,n=t.project_page,r=t.project_total_number,c=this.state.project_list,a=x()(c).concat(x()(o)),i=a.length>=r,this.setState({project_list:a,project_loaded:i,project_page:n}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(){return r.apply(this,arguments)})},{key:"refresh_projects_list",value:(o=M()(y.a.mark((function e(){var t=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({project_list:[],project_page:1,project_loaded:!1},(function(){t.fetch_projects()}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"load_more_content",value:function(){!this.is_scroll_to_bottom()||this.state.project_loaded||this.fetch_projects()}},{key:"fetch_project_by_name",value:function(e){var t=this,o=Object(me.b)(e);(o===e||o)&&(this.search_keyword=o,this.setState({project_list:[],project_page:1,project_loaded:!1},(function(){t.fetch_projects()})),Object(ue.m)("客户端我的作品弹窗-搜索作品"))}},{key:"get_content",value:function(){var e=this;return m.createElement("div",{className:"content_wrap--3uM74",ref:function(t){t&&(e.content_wrap=t)},onScroll:this.debounced_load_more_project_page},m.createElement("div",{className:"content--Jm3WL",ref:function(t){t&&(e.content=t)}},this.state.project_list&&this.state.project_list.map((function(t){return m.createElement(le,{key:t.id,user_project_info:t,project_type:"user",is_v3:!t.version,is_coll:t.is_coll_work,role:t.role,refresh_projects_list:e.refresh_projects_list.bind(e)})})),""!==this.state.search_keyword&&(!this.state.project_list||!this.state.project_list.length)&&m.createElement("div",{className:"empty_bg_placeholder--1Mwkj"},m.createElement(ge.a,{text:this.props.intl.formatMessage({id:"open_project/empty_notice"})}))))}},{key:"render",value:function(){return m.createElement("div",{className:C()("open_project ".concat(this.props.is_show_open_project?"show":""),je,{autoResolveMultipleImports:!0,handleMissingStyleName:"warn"})},this.get_tab_bar(),this.get_content())}}]),t}(m.Component);var xe=Object(f.b)(Object(b.connect)((function(e){return{theme:e.common_state.theme}}),(function(e){return Object(g.bindActionCreators)({close_dialog:v.c,show_toast:G.d,action_load_bcm_by_file:he.b,show_context_menu:be.d},e)}))(ke));o("ilgT");var Ee=function(e){function t(e){var o;return a()(this,t),(o=_()(this,u()(t).call(this,e))).on_request_close=function(){o.props.close_dialog({dialog_type:"app_manage_project"})},o}return h()(t,e),s()(t,[{key:"render",value:function(){return m.createElement(j.a,{type:"app_manage_project",on_request_close:this.on_request_close,close_btn:{style:{top:22,right:24},icon_id:"#iconicon_close",icon_size:16}},m.createElement("div",{className:"sample-dialog--21g-x"},m.createElement("div",{className:"header--2K9SB"},this.props.intl.formatMessage({id:"manage_project/my_project"})),m.createElement(xe,{is_show_open_project:!0})))}}]),t}(m.Component);var Me=Object(f.b)(Object(b.connect)(void 0,(function(e){return Object(g.bindActionCreators)({close_dialog:v.c},e)}))(Ee))},ilgT:function(e,t,o){e.exports={"sample-dialog":"sample-dialog--21g-x",header:"header--2K9SB"}},lWPa:function(e,t,o){e.exports={placehold_image:"placehold_image--O4xbF"}},xfAC:function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var n=o("q1tI"),r=o.n(n);o("lWPa");var c=function(e){return r.a.createElement("div",{className:"placehold_image--O4xbF"},r.a.createElement("span",{className:"th1-text-1 th1-text-s2"},e.text))}}}]);